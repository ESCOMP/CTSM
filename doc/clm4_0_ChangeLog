===============================================================
Tag name:  clm4_0_81
Originator(s):  bandre (Benjamin Andre)
Date: Mon Apr 29 12:12:42 MDT 2013
One-line Summary: Charlie Koven's variable consolidation, cryoturbation and BSW CPP changes

Purpose of changes:
    1) variable consolidation -- these are all things like adding up
    the leafc_to_litr1c, stemc_tolitr1c, frootc_to_litr1c, etc. into a
    single set of fluxes, e.g. phenology_c_to_litr_met_c. this
    introduces roundoff-level differences in every calculation of C
    and N from plants to litter, so it will propagate quickly to
    everywhere in the CN and CN4Me code.

    2) cryoturbation - the changes to the active layer profiles.  This
    should have a real but minor effect everywhere where there is
    permafrost, because it will change the mixing rates of all soil
    material into and out of the permafrost.  However, this is so slow
    that it should only really matter during spinup.

    3) BSW bugfix - Remove the STNDRD_BSW_FOR_SOILPSI_CALC CPP
    token. This had already been set in the CN4Me code, but will cause
    real changes to both the drought phenology and frozen temperature
    sensitivity of the CN code.


Requirements for tag:

Test level of tag: std-test

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:
    remove the CPP flag for STNDRD_BSW_FOR_SOILPSI_CALC

Describe any changes made to the namelist:
    remove: shape_fluxprof, max_altmultiplier_cryoturb, max_altdepth_cryoturbation
    add: max_altdepth_cryoturbation, max_depth_cryoturb

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: variable consolidation should decrease runtime

Code reviewed by: Charlie Koven

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:
    - remove configure option for BSW
        M  models/lnd/clm/bld/configure
        M  models/lnd/clm/bld/config_files/config_definition.xml
    - remove of BSW ifdef
        M  models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_BGC.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_CENTURY.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
        M  models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
        M  models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
        M  models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
        M  models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90

    - add/remove nl options for cryoturbation
        M  models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml

    - cryoturbation
        M  models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
        M  models/lnd/clm/src/clm4_5/main/controlMod.F90

    - variable consolidation
        M  models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate2Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate1Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate3Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate3Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate2Mod.F90
        M  models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
        M  models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
        M  models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
        M  models/lnd/clm/src/clm4_5/main/pftdynMod.F90
        M  models/lnd/clm/src/clm4_5/main/clmtype.F90
        M  models/lnd/clm/src/clm4_5/main/histFldsMod.F90

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes, two unexpected fails on comparison, should pass next time.

  CESM test lists:

    yellowstone/aux_clm     intel       yes
      New expected failures:
        all compare_hist tests with CLM45CN test should fail, but be ok next time (answer changes)
        ERS_D.f10_f10.ICLM45CN4Me.nldir_ch4_set2_ciso - CFAIL - test needs to be updated to remove shape_fluxprof from namelist
        ERS_D.f10_f10.ICLM45CN4Me.nldir_ch4_set3_pftroot - CFAIL - test needs to be updated to remove shape_fluxprof from namelist
        PET_D_P1x30.ne30_g16.ICN - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?
        SMS_RLA.f45_f45.I - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?
        SMS_RLA.f45_f45.ICLM45 - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?
        SMS_ROA.f45_f45.I - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?
        SMS_ROA.f45_f45.ICLM45 - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?

    yellowstone/aux_clm     pgi         yes
      New expected failures:
        all compare_hist tests with CLM45CN test should fail, but be ok next time (answer changes)
        SMS_RLB.f45_f45.I - FAIL- runtime mpi abort from pio. fixed in pio-1.6.8?
        SMS_RLB.f45_f45.ICLM45 - FAIL - runtime mpi abort from pio. fixed in pio-1.6.8?

    frankfurt/aux_clm_int   intel       no
    frankfurt/aux_clm       intel       no

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_80

Changes answers relative to baseline: yes

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM45, all CN and CN4Me compsets
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate):
        variable consolidation - roundoff
        cryoturbation - larger than roundoff/same climate
        BSW - climate changing

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database):

    This will change climate only in CN (not CN4Me mode), because of
    the changed BSW (removal of incorrect second BSW formulation)
    leading to slight differences in phenology.  This has been fixed
    in CN4Me for some time, and has not been observed to detrimentally
    effect the climate in that configuration.

    I (Charlie Koven) ran trunk tag 80 and the branch synced to tag 80 for
    30 years at f19 resolution in I1850CLM45CN4Me compset, with AD spinup
    turned on.  I did not find sytematic differences in GPP or NEE.  The
    difference is that there was somewhat less passive pool carbon
    mixed to the ~3m soil layer, and somewhat more accumulatin gin the
    ~2m layer; this is consistent with the changes to the
    crypoturbation code, which sets a fixed depth of cryoturbation
    throughout the permafrost region, instead of making it
    proportional to active layer thickness.

   URL for LMWG diagnostics output used to validate new climate: N/A

===============================================================
===============================================================
Tag name:  clm4_0_80
Originator(s):  erik (Erik Kluzek)
Date: Fri Apr 26 02:28:39 MDT 2013
One-line Summary: Bring Fang Li. Fire model into CLM4.5 science, update ALL CLM4.5 surface datasets, 
                  provide a working initial condition file for CLM45BGC@f19_g16-1850

Purpose of changes: Bring the F. Li and S. Levis Fire model for CLMCN and CLMBGC based on 
Li et al. (2012a,b; 2013). New data streams are added to bring in lightning frequency 
(NASA-LIS climatology of 1995-2011 interpolated to T62) and human population density at half-degree
(currently from 1850 to 2010, no rcp data is available yet). Annual 1850â€“2010 population 
density that is obtained by temporal linear interpolation of the data from HYDEv3.1 
(prior to 1990) and GPWv3 (since 1990) at 0.5 degree resolution. GDP (Gross Domestic Product), 
peat fraction, and maximum month for agricultural fires are also included on the 
surface datasets. Fang Li tuned the fire model based on a branch version 
(newfire05_clm45sci15_clm4_0_58) at f19_g16 resolution with CLMBGC for transient 1850-2000
with Qian atmosphere forcing.  New fire fields are read in from the pft-physiology file.

ALL CLM4.5 surface datasets and pftdyn datasets were updated. ALL standard datasets 
now have glc_nec=10 data on them and CAN be used for IG simulations with CISM for 
10 glacier elevation classes. The standard way of running is still 
with glc_nec=0. Surface datasets include data used by previous parameterizations added in CLM4.5:

   ZWT0, F0, and P3 for the CLM4Me methane model
   (PH can be read in on the surface dataset, but is NOT included on the current datasets)
   LAKEDEPTH for the Subin variable depth lake model
   (ETALAKE and LAKEFETCH can be read in, but are NOT included on the current datasets)
   SLOPE, STD_ELEV for the Swenson dynamic wetlands parameterization
   binfl, Ds, Dsmax, Ws for the optional VIC hydrology scheme (only read in when VIC active)
   gdp, peatf, and abm for the new fire model above	      
         (always read in although it wouldn't HAVE to be for CLMSP)

Also provide one working initial condition file for CLM45BGC at 1.9x2.5_gx1v6 resolution for 1850. This
will work for CLM45BGC (-vsoil_centbgc on) as long as the vertical carbon profiles are active. No other
initial condition files are provided at this time. This was from year 51 of a CLMBGC spinup simulation
by Fang Li with Qian forcing for 1850 (case qian_1850).
   
Bug fix, from Sam Levis so that non-irrigated prognostic crop for CLM4.5 works correctly. Previously
irrigated and non-irrigated crop for CLM4_5 gave the same results (with irrigation active even when
you told it NOT to be).

Also transient simulations are now allowed to be done with a cold start -- YOU SHOULD NEVER DO THIS FOR SCIENCE!
It does help facilitate testing however.

Requirements for tag:

Test level of tag: std-test

Bugs fixed (include bugzilla ID): 
             1670 (irrigated crop and non-irrigated crop for CLM45 give same answers)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: New light_streams and popd_streams namelists for CLM
    By default the light_stremas namelist runs over the NASA_LIS climatology data (3-hourly).
    The population density namelist runs over the applicable years for the use_case given for the compset.
    This can be customized with:
        stream_year_first_popdens, stream_year_last_popdens, model_year_align_popdens
        (and the filename and map-algorithm can be changed as well)

List any changes to the defaults for the boundary datasets: All surfdata, finidat, and pftdyn
   datasets for clm4_5 were updated

Code reviewed by: self, slevis, fangli

List any svn externals directories updated (csm_share, mct, etc.): pio
  pio to pio_1_6_7

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

  M models/lnd/clm/bld/listDefaultNamelist.pl -- Get working for clm4_5.
  M models/lnd/clm/bld/build-namelist ---------- check vsoilc_centbgc for finidat files, new light_streams and
         popd_streams namelists for clm4_5
  M models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml --- all new fsurdat, fpftdyn datasets, settings
         for new popd_streams and light_streams namelists
  M models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml - Add new light_streams and popd_streams namelists

>>>>>>>>>>>> Set first and last pop-dens year, and do "arb_ic" rather than "startup"
>>>>>>>>>>>> type for all transient cases (allow transient cases to do a cold-start)
>>>>>>>>>>>> ALTHOUGH YOU SHOULD NEVER DO A COLD START FOR A TRANSIENT CASE!
  M models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml
  M models/lnd/clm/bld/namelist_files/use_cases/20thC_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/2000_glacierMEC_control.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850_glacierMEC_control.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml

>>>>>>>>>>>> Some small changes to documentation about irrigation.
  M models/lnd/clm/doc/UsersGuide/preface.xml
  M models/lnd/clm/doc/UsersGuide/custom.xml

  M models/lnd/clm/src/util_share/ndepStreamMod.F90 -- make default private, namelist data private, and clm_domain_mct public

  M models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90 --- add number of individuals
  M models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate3Mod.F90 -- handle more impacts of fire
  M models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90 ----------- Fire module -- almost entirely replaced. Two new public
         methods added:
+  public :: CNFireInit    ! Initialization of CNFire
+  public :: CNFireInterp  ! Interpolate fire data
  M models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90 -------- Handle more impacts of fire
  M models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate3Mod.F90 -- Handle more impacts of fire
  M models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90 ----------- burndate, lfc, wf, btran2, col_ctrunc, totsomc added to restart
      old fire fields removed, _vr fields required if expected.,
  M models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90 --- Add CNFireInit, and update CNFireArea call.
  M models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90 ------- Set fire variables.
  M models/lnd/clm/src/clm4_5/biogeochem/CNVegStructUpdateMod.F90  farea_burned impacts SAI for stubble after harvest
  M models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90 -------------- Initialize new fire variables
  M models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90 --------- Update CNEcosystemDynInit call
  M models/lnd/clm/src/clm4_5/main/accFldsMod.F90 ---------------- Add prec10 and prec60 (10 and 60 day total precipitation)
  M models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90 ------------ Initialize new fire variables.
  M models/lnd/clm/src/clm4_5/main/pftdynMod.F90 ----------------- Update lf_conv_cflux, make PFT weight check same as for surfrdMod.F90
  M models/lnd/clm/src/clm4_5/main/iniTimeConst.F90 -------------- Read in new fire data, abort if data needed NOT found on the
             surface dataset.
  M models/lnd/clm/src/clm4_5/main/findHistFields.pl ------------- Also read in CNFireMod for history fields.
  M models/lnd/clm/src/clm4_5/main/clm_driver.F90 ---------------- Add CNFireInterp call.
  M models/lnd/clm/src/clm4_5/main/CNiniSpecial.F90 -------------- Initialize lf_conv_cflux to zero.
  M models/lnd/clm/src/clm4_5/main/pftvarcon.F90 ----------------- Read in new fire parameters 
        (no longer need "resist" on the pft-physiology file)
  M models/lnd/clm/src/clm4_5/main/surfrdMod.F90 ----------------- Fix tolerances to match mksurdata_map
        bug fix for non-irrigated crop.
  M models/lnd/clm/src/clm4_5/main/clmtype.F90 ------------------- New fire fields
  M models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90 -------------- Initialize some new fire fields: tsoi17, fsat
  M models/lnd/clm/src/clm4_5/main/histFldsMod.F90 --------------- New fire history fields
  M models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90 ----- Save btran2, smp_node_lf for fire
  M models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90 ------- Save wf2, tsoi17, h2osoi_liqice_10cm

  M models/lnd/clm/src/clm4_0/main/surfrdMod.F90 ----------------- Fix tolerances to match mksurdata_map

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes

  CESM test lists:

    yellowstone/aux_clm     intel       yes
    yellowstone/aux_clm     pgi         yes
    frankfurt/aux_clm_int   intel       yes
    frankfurt/aux_clm       intel       yes

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_79

Changes answers relative to baseline: YES!

  Summarize any changes to answers:
    - what code configurations: All with CLM45
    - what platforms/compilers: All
    - nature of change: new climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
     /glade/p/cesm/lmwg/cases/cesm1/C20new -- on yellowstone
     /glade/scratch/erik/archive/clm4079_NewFire10f19_CRU_20TR_CN4Me
     /glade/scratch/erik/archive/clm4077_I1850CLM45CN4Me
     /glade/scratch/erik/archive/clm4077_NewFire10f19_QIAN_20TR_CN4Me
    hsi:/home/fangli/qian20

===============================================================
===============================================================
Tag name:  clm4_0_79
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Wed Apr 24 20:27:01 MDT 2013
One-line Summary: pftdyn, pft-phys*.nc and datm8 update

Purpose of changes: From Erik:: -  update Don't re-weight pftdyn if weights are essentially identical (Both CLM40 AND CLM45).
   - Turn wasteheat to "ON" in CLM45. (namelist change) (done)
   - Change from Sam Levis for CROP to pft-physiology file so that CROP parameter is in Kelvin rather than Celsius (both CLM40 and CLM45).
   - Change datm so that LWDN is NOT read from files for CRUNCEP (datm8_130424).

Requirements for tag: fix bug 1621

Test level of tag: std-test

Bugs fixed (include bugzilla ID): fixed 1621

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: turn waste heat on in clm4_5

List any changes to the defaults for the boundary datasets: change pft-phys files for 4_0 and 4_5

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, Erik, Dave Lawrence

List any svn externals directories updated (csm_share, mct, etc.):

< models/atm/datm                 https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_130424
---
> models/atm/datm                 https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_130325

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M SVN_EXTERNAL_DIRECTORIES
    update to datm8_130424

M models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
  - $CSMDATA/lnd/clm2/pftdata/pft-physiology.clm40.c130424.nc
M models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
  - change <urban_hac>ON_WASTEHEAT</urban_hac> to <urban_hac>ON</urban_hac>
  - use $CSMDATA/lnd/clm2/pftdata/pft-physiology.c130424.nc

M models/lnd/clm/src/clm4_5/main/pftdynMod.F90
M models/lnd/clm/src/clm4_0/main/pftdynMod.F90
  - change wtpfttot2 check

M models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
  - syntax clean up - caught by Ben Andre

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   OK.  many expected failures due to new pft-physiology files.  Should pass next time.

  CESM test lists:
    Many nlcomp failures:
    clm4_5:
       NEW:         fpftcon = '/fs/cgd/csm/inputdata/lnd/clm2/pftdata/pft-physiology.c130424.nc'
       BASELINE:  fpftcon = '/fs/cgd/csm/inputdata/lnd/clm2/pftdata/pft-physiology.c121025.nc'
       NEW:         urban_hac = 'ON'
       BASELINE:  urban_hac = 'ON_WASTEHEAT'
    clm4_0:
       NEW:         fpftcon = '/fs/cgd/csm/inputdata/lnd/clm2/pftdata/pft-physiology.clm40.c130424.nc'
       BASELINE:  fpftcon = '/fs/cgd/csm/inputdata/lnd/clm2/pftdata/pft-physiology.c110425.nc'

    component_gen_comp: all PASS or BFAIL1
    summarize_cprnc_diffs: differences in CLM files

    yellowstone/CESM:
      intel: OK.  Expected failures for compare_hist (should pass next time)
         FAIL  ERS_D.f19_g16.IGRCP26CN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  ERS_D.f19_g16.IRCP85CN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  ERS_E.f19_g16.I1850CRUCLM45CN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  NCK.f10_f10.ICRUCLM45.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  PET_PT.f10_f10.I20TRCN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
         FAIL  SMS.f19_g16.IRCP45CN.yellowstone_intel.GC.222079.compare_hist.clm4_0_78 
      pgi  : OK.  Expected failures for compare_hist (should pass next time)
         FAIL  ERS_D.hcru_hcru.I_2000_CRUFRC_CLM45_CN.yellowstone_pgi.GC.111079.compare_hist.clm4_0_78 
         FAIL  ERS_D.hcru_hcru.I_2000_CRUFRC_CN.yellowstone_pgi.GC.111079.compare_hist.clm4_0_78 
         FAIL  PET_PT.f10_f10.I20TRCN.yellowstone_pgi.GC.111079.compare_hist.clm4_0_78 

    frankfurt/CESM: 
      intel: OK.  Expected failures for compare_hist (should pass next time)
        FAIL  SMS.f10_f10.IRCP26CN.frankfurt_intel.GC.pft79.compare_hist.clm4_0_78 

CLM tag used for the baseline comparison tests if applicable: clm4_0_78

Changes answers relative to baseline: yes

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: all
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate):  same climate
      -in coupler history files: l2x_Sl_*, l2x_Fall,  x2l_Slrr* and some r2x_* fields change
      -in clm history files: for these tests only differences seen in IGRCP60CN
	
===============================================================
===============================================================
Tag name:  clm4_0_78
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Tue Apr 23 19:25:18 MDT 2013
One-line Summary: MEGAN fixes

Purpose of changes:

 - Bug fixes in MEGAN VOC emission fluxes and dry deposition velocities
 - Remove the land fraction weighting from MEGAN history fields 
 - Added XPAN capability to dry deposition parametrization

Requirements for tag: N/A

Test level of tag: standard

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:  N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, starting branch from Erik.

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml
M      models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
  - maximum string length of megan_specifier increased to 1024 characters

 M      models/lnd/clm/src/clm4_5/biogeochem/VOCEmissionMod.F90
 M      models/lnd/clm/src/clm4_0/biogeochem/VOCEmissionMod.F90
  - land fraction weighting has been removed from the MEGAN diagnostics
  - added initialization of the vocflx_meg array to zero to prevent 
    erroneous values from contributing to the MEGAN emissions

 M      models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
 M      models/lnd/clm/src/clm4_0/biogeochem/DryDepVelocity.F90
  - corrected surface pressure
  - added XPAN specification

Machines testing ran on:  (Tests in priority order)

    build-namelist unit tester: OK

    yellowstone/CESM:            
      -intel: OK
        -component_gen_comp fails on a number of tests, but it is all expected.  summarize_cprnc_diffs verifies that all fails in the 
          CLM history files is consistent.
        -compare_hist failures are expected due to new dry deposition values going through coupler.
      -pgi  : OK
        -compare_hist failures are expected

    frankfurt/CESM:            
      -intel: OK.
        -compare_hist failures are expected

CLM tag used for the baseline comparison tests if applicable: clm4_0_77

Changes answers relative to baseline: Yes.  Changes in l2x_Sl_dd{001-035},l2x_Sl_dd{040,041,043} in coupler hist file.
   Possible changes in *_voc fields in coupler hist files for certain configurations.  Changes in 10 MEG_* fields and VOCFLXT in CLM history files.

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate): same climate.  changes in CLM fields range from 1.e-9 
       (VOCFLXT) to 1.e-17 (MEG_thujene_a) 

===============================================================
===============================================================
Tag name:  clm4_0_77
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Tue Apr 23 11:38:45 MDT 2013
One-line Summary: fix carbon balance bug in transient runs with VERTSOI, and fix Soil Hydrology bug

Purpose of changes:

Fix two bugs:

(1) In transient CLM45 runs with VERTSOI, a carbon balance error
    occurred due to two routines being called with updated filters
    when they should have been called with filters set at their values
    from the previous time step. This bug has existed since clm4_0_62.

(2) A potential for an array out-of-bounds error (which could show up
    as garbage results if array bounds checking was off) which showed
    up in rare circumstances (e.g., a single grid cell in Greenland in
    a 1-year test run)

Requirements for tag: Fix bugs 1663, 1664

Test level of tag: standard

Bugs fixed (include bugzilla ID):

    1663 (array bounds error in SoilHydrologyMod)
    1664 (carbon balance errors)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

========= Fix for bug 1664
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90

========= Fix for bug 1663
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

Machines testing ran on:  (Tests in priority order)
  Standard Tag Pretag ***                    Standard Tag Posttag **

  build-namelist unit tester:   no

  CESM test lists:

    yellowstone/CESM:              yes

      All PASS or xFAIL; all component_gen_comp comparisons pass or BFAIL1

    yellowstone/CESM/allIcompsets: no

    frankfurt/CESM:            yes

      All PASS or xFAIL

  test_system testing:

    yellowstone batch:          no
    frankfurt interactive:      no
    yellowstone interactive:    no
    lynx batch:                 no
    lynx interactive:           no
    frankfurt batch:            no

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_76

Changes answers relative to baseline: YES, potentially (though none
observed in standard testing)

  Answer changes are possible in any CLM45 case due to the SoilHydrology
  bug fix (1663). This changes answers only in rare situations where the
  water table comes near the surface (e.g., in a 1-year test run, this only
  happened in one grid cell in Greenland)

  In addition, the following answer changes are expected due to the fix for
  bug 1664:

  (1) CLM45 transient with VERTSOI (i.e., BGC). Implementing this change in
      clm4_0_62 (the first tag that exhibited bug 1664), clm4_0_62-withFix
      was identical to clm4_0_61 for this configuration. But clm4_0_77 will
      differ from clm4_0_76 for this configuration.

  (2) Answers are changed for CLM45 CNDV with VERTSOI (i.e., BGCDV). It
      appears that this configuration was buggy before this tag (e.g.,
      restarts weren't exact), so this tag changes answers in a way that
      seems to fix this configuration.


   If bitwise differences were observed, how did you show they were no worse
   than roundoff? NOT DONE 

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_0_76
Originator(s):  muszala (Stefan Muszala)
Date: Mon Apr 22 13:36:26 MDT 2013
One-line Summary: spinup changes from Charlie Koven (part 1)

Purpose of changes:

Remove SPINUP CPP tokens, in favor of a run-time namelist item that can be set to
change the spinup mode on the fly. The state is stored on the restart file, and 
if the user changes the mode on the namelist -- the model will automatically do 
the "ENTER-SPINUP" or "EXIT-SPINUP" step as needed on the first time-step. The 
spinup options were thus removed from the CLM configure for CLM45 and moved to 
the build-namelist as option "-spinup" with values either "on" or "off".


Add new history fields: TOTLITC_1m, TOTSOMC_1m, TOTLITN_1m, and TOTSOMN_1m. 
Remove the namelist item: reset_permafrost_c_n_pools. Removed default history 
output for decomposing C pool changes due to vertical transport, and for vertical
 profiles for N Deposition and fixation.


Answer Changes for C13: C13 and C13 Carbon isotopes are handled a bit differently
 when they are NOT on the restart file. For C13 prior timestep's downregulation 
is used in calculating ci used for photosynthetic discrimination.  This changes
 answers when use_c13 is turned on.

Requirements for tag: N/A

Test level of tag: std-tag

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: Change the way spin up is handled

Describe any changes made to the namelist:  spinup now controlled in build-namelist

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: Dave L. checked spinup test comparing old and new method.  Erik, Charlie Koven

List any svn externals directories updated (csm_share, mct, etc.): 

-scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_130416a
+scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_130419a

List all files eliminated: N/A

List all files added and what they do:

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/bld/configure
M       models/lnd/clm/bld/config_files/config_definition.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_BGC.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_CENTURY.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNC14DecayMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90
M       models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_varctl.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
M       SVN_EXTERNAL_DIRECTORIES

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   OK.
  some new failures that should be gone when compared to the next tag.  This is due to the new namelist variable 

 <  spinup_state = 0

  418/444 < FAIL> <Test Id: 418> <Desc: lnd_in file the same as expected for phys45>  
  423/444 < FAIL> <Test Id: 423> <Desc: lnd_in file the same as expected for phys45>  
  428/444 < FAIL> <Test Id: 428> <Desc: lnd_in file the same as expected for phys45>  
  433/444 < FAIL> <Test Id: 433> <Desc: lnd_in file the same as expected for phys45>  
  438/444 < FAIL> <Test Id: 438> <Desc: lnd_in file the same as expected for phys45>  
  443/444 < FAIL> <Test Id: 443> <Desc: lnd_in file the same as expected for phys45-crop>

  CESM test lists:

    yellowstone/CESM: SPM - tracking tputcomp failures 
      cesm intel: OK
          FAIL  ERS.f09_g16.ICLM45VIC.nldir_vic_vrtlay.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_D.f10_f10.I.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_D.f10_f10.ICLM45.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_D.f10_f10.ICLM45CN4Me.nldir_ch4_set2_ciso.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_D.f10_f10.ICLM45CN4Me.nldir_ch4_set3_pftroot.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_D.f10_f10.ICLM45CN4MeNoVS.nldir_rootlit.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_E.f19_g16.I1850.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
          FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.222075.tputcomp.clm4_0_74 
      cesm pgi  : OK
          FAIL  SMS.1x1_numaIA.ICNCROP.yellowstone_pgi.GC.111075.tputcomp.clm4_0_74

    frankfurt/CESM:
	 cesm intel: OK
          FAIL  ERS.f45_g37.I1850CN.frankfurt_intel.GC.00075.tputcomp.clm4_0_74 
          FAIL  SMS.f10_f10.IRCP26CN.frankfurt_intel.GC.00075.tputcomp.clm4_0_74 
          FAIL  SMS_D.1x1_mexicocityMEX.I.frankfurt_intel.GC.00075.tputcomp.clm4_0_74 


CLM tag used for the baseline comparison tests if applicable: clm4_0_75

Changes answers relative to baseline: some changes

IF tag changes answers relative to baseline comparison the
following should be filled in:

Answer Changes for C13: C13 and C13 Carbon isotopes are handled a bit differently
 when they are NOT on the restart file. For C13 prior timestep's downregulation 
is used in calculating ci used for photosynthetic discrimination.  This changes
 answers when use_c13 is turned on.

===============================================================
===============================================================
Tag name:  clm4_0_75
Originator(s):  muszala (Stefan Muszala)
Date:  Fri Apr 19 16:13:42 MDT 2013
One-line Summary: run propset

Purpose of changes: run propset so externals are updated

Requirements for tag:N/A

Test level of tag: critical

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:N/A

Describe any changes made to the namelist:N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:N/A

Machines testing ran on:  no testing run
===============================================================
===============================================================
Tag name:  clm4_0_74
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date:  Wed Apr 17 15:58:50 MDT 2013
One-line Summary: snow_depth changes, major scripts overhaul, small fix for tools

Purpose of changes: bring in snow_depth changes (bfb except for one field in clm hist files, SNOWDP)
   update external to alpha06e and bring in scripts refactoring by mvertens.  Bug fix for mksurfdata_map
   by sacks.  Some minor code cleanup by muszala.

Requirements for tag: N/A

Test level of tag: doc, std-test + tools

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): Bug in pio1_6_6 which kills mpi-serial runs, jedwards is working on fix.
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self, mvertens, swensoc

List any svn externals directories updated (csm_share, mct, etc.):

< scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_130416a
> scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/newcompsets2_tags/newcompsets2_02_scripts4_130405a
< scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130412
> scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130403
< models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_2_29
> models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_2_26
< models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_6_6/pio
> models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_6_5/pio
< tools/cprnc                            https://svn-ccsm-models.cgd.ucar.edu/tools/cprnc/trunk_tags/cprnc_130411 
< tools/mapping                          https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130403
> mapping                                https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130308
< models/lnd/clm/tools/clm4_5/gen_domain https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130403/gen_domain_files
> models/lnd/clm/tools/clm4_5/gen_domain https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130308/gen_domain_files

List all files eliminated: models/lnd/clm/tools/SVN_EXTERNAL_DIRECTORIES (moved cprnc to common location).

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

SVN_EXTERNAL_DIRECTORIES 

--small fix from sacks.
models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkglcmecMod.F90
models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkglcmecMod.F90

--update xFail list since we now run test_system tests out of cesm and scripts
--test_system now uses create_test
models/lnd/clm/test/system/test_system
models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

--minor clean up
models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
models/lnd/clm/src/util_share/organicFileMod.F90
models/lnd/clm/src/util_share/decompInitMod.F90

--snow depth changes
models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
models/lnd/clm/src/clm4_5/biogeochem/STATICEcosysDynMod.F90
models/lnd/clm/src/clm4_5/biogeochem/CNVegStructUpdateMod.F90
models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
models/lnd/clm/src/clm4_5/main/clm_driver.F90
models/lnd/clm/src/clm4_5/main/inicPerpMod.F90
models/lnd/clm/src/clm4_5/main/clmtype.F90
models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
models/lnd/clm/src/clm4_5/main/histFldsMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SLakeFluxesMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SLakeHydrologyMod.F90
models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SLakeTemperatureMod.F90
models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
models/lnd/clm/src/clm4_5/biogeophys/initSLakeMod.F90
models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   OK.

  CESM test lists: (this now includes tests from test_system batch from yellowstone).

yellowstone::
   CESM intel:  OK
   CESM pgi:    OK
frankfurt:
   CESM intel: OK. just ran generate.  run these instead of test_system interactive tests from now on.

Tool testing: OK.  This was to double check my merge since the branch I started with was in clm4_0_68.

CLM tag used for the baseline comparison tests if applicable: clm4_0_73

Changes answers relative to baseline: Only change is in the clm history field, SNOWDP.  Everything else is bfb.

	
===============================================================
===============================================================
Tag name:  clm4_0_73
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Mon Apr 15 09:48:03 MDT 2013
One-line Summary: update mksurfdata_map for CLM4.5, and other misc. updates, mainly to tools

Purpose of changes:

Main purpose is to add a bunch of new fields to the CLM4.5 mksurfdata_map:
- SLOPE, STD_ELEV
- LAKEDEPTH
- peatf, abm, gdp (for fire)
- binfl, Ws, Dsmax, Ds (for VIC)
- F0, P3, ZWT0 (for methane)

Also, other miscellaneous changes:

- some refactoring of mksurfdata_map, and get more routines under unit test

- for CLM4.5 mksurfdata_map, always use hires datasets, except for pft

- add support for 36 glc_mec elevation classes (though there are currently
  no surface datasets for this option)

- add support for 1-d domain files in mksurfdata_map

- add createXMLEntries.pl for creating xml entries for new mapping files

- change default behavior of new_woodharv for clm4.0 (default is true now),
  and only support new_woodharv=true for clm4.5

- allow global & regional map generation in a single submission of
  mkmapdata/regridbatch.sh

- handle clm4_0 vs clm4_5 distinction in mkmapdata.sh

- handle large file support more robustly in mkmapdata.sh

- refactored mkscripgrid.ncl to use built-in ESMF utility

- remove 0.47x0.63 support for CLM4.5, since we don't have a good scrip
  grid file for that resolution

- in some files in bld/namelist_files, fix some resolutions listed as
  360x720 to be 360x720cru

- a few other minor changes, as noted below


Requirements for tag: Requirements: tools tests, and build-namelist
test (to catch any accidental changes to CLM's namelist), fix bug:
1641. Also ran standard tests to cover all bases.

Test level of tag: standard + tools

Bugs fixed (include bugzilla ID): 
    - 1641 (RCP6 and RCP8.5 used old bad wood harvest for 2006 and 2007)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None to CLM namelist, but many
changes to mksurfdata_map namelist.

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated:

========= Move to new inputs directory
D       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_lookup_2d_netcdf.nc

List all files added and what they do:

========= Create xml entries and commands to move files to inputdata for
          a bunch of mapping files
A       models/lnd/clm/tools/clm4_5/mkmapdata/createXMLEntries.pl

========= Guide for how to add new fields to mksurfdata_map
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/README.developers

========= Pull out shared mksurfdata_map code into new, shared modules
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkdiagnosticsMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkchecksMod.F90

========= Regrid new fields for mksurfdata_map
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mktopostatsMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkgdpMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkagfirepkmonthMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkpeatMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkVICparamsMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkCH4inversionMod.F90

========= Get more of mksurfdata_map code under unit tests
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkchecksMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkgridmapMod.F90
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkdomainMod.F90

========= Add inputs for new mksurfdata_map unit tests
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_domain_read_dims__lsmlon.nc
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_domain_read_dims__lon.nc
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_domain_read_dims__lon_and_num_pixels.nc
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_domain_read_dims__lon_and_ni.nc
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_domain_read_dims__num_pixels.nc

========= Move to inputs directory
A       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/inputs/test_lookup_2d_netcdf.nc


List all existing files that have been modified, and describe the changes:

========= Add new mksurfdata_map variables and mapping files
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkvarctl.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksurfdat.F90
           - also add no_inlandwet option
           - also handle the case where special landunits sum to a
             tiny bit more than 100% and thus give negative pct_pft
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mklanwatMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkfileMod.F90
           - also add some other global attributes
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Srcfiles
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata.pl
           - also add merge_gis and inlandwet options, remove ngwh
             option, remove hires option (instead use hirespft)
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata_map.namelist
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
           - also add support for 36 glc_mec columns, and remove 0.47x0.63
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5_tools.xml
           - also remove 0.47x0.63, remove coarse-res lake, change logic for
             determining glacier dataset, remove ngwh=off rcp6 and rcp8.5 datasets
           - also add xml file support for more scrip grid file info
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
           - also add support for 36 glc_mec columns, no_inlandwet option,
             remove a duplicate section, remove 0.47x0.63
           - also add xml file support for more scrip grid file info
M       models/lnd/clm/bld/namelist_files/checkmapfiles.ncl
M       models/lnd/clm/doc/UsersGuide/tools.xml

========= Add nodata argument to gridmap_areaave
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkgridmapMod.F90
           - also add gridmap_areastddev and gridmap_check routines
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mklaiMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksoilMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkharvestMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkurbanparCommonMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkvocefMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkpftMod.F90

========= Add support for 36 glc_mec elevation classes
M       models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkglcmecMod.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkglcmecMod.F90
M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0_tools.xml
           - also fix ngwh default for rcp6 for 2006 and 2007
           - also add xml file support for more scrip grid file info
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml
           - also add xml file support for more scrip grid file info
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml

========= Change default behavior of new_woodharv for clm4.0
M       models/lnd/clm/tools/clm4_0/mksurfdata_map/mksurfdata.pl

========= Add new test routines
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mksurfdata_map.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/Srcfiles

========= Change location of input files for unit testing
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkncdio.F90
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkindexmapMod.F90

========= Add support for 1-d domain files; allow larger diffs in
          domain_checksame
M       models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkdomainMod.F90

========= Allow global & regional map generation in a single submission
M       models/lnd/clm/tools/clm4_5/mkmapdata/regridbatch.sh

========= Fix yellowstone ESMF path, add new grids, remove bluefire,
          no longer make atm-ocn and RTM mapping files, handle large
          file support and other grid-specific flags in a more robust
          way, add option to differentiate between clm4_0 vs 4_5
M       models/lnd/clm/tools/clm4_5/mkmapdata/mkmapdata.sh

========= Refactored to use built-in ESMF utility
M       models/lnd/clm/tools/clm4_5/mkmapgrids/mkscripgrid.ncl

========= Remove 0.47x0.63 for CLM4.5, since we don't have a good scrip grid
          file for that resolution
M       models/lnd/clm/tools/clm4_5/mkmapgrids/mkmapgrids.csh

========= Renumber build-namelist unit tests due to removing a
          resolution. Also cleaned up expectedFails list, mostly removing
          tests that now pass, changing failure types, and adding
          ERB.ne30_g16.I_1948-2004, which failed in clm4_0_72, too
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

========= Fix some paths in tools test scripts
M       models/lnd/clm/test/tools/TBLCFGtools.sh
M       models/lnd/clm/test/tools/TBLscript_tools.sh
M       models/lnd/clm/test/tools/test_driver.sh
M       models/lnd/clm/test/tools/TBLtools.sh
M       models/lnd/clm/test/tools/TOPtools.sh


Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes
    All PASS or xFAIL

  CESM test lists:

    yellowstone/CESM:              yes
      All PASS or xFAIL except:

        ***** Not listed in xFAIL list, but failed in clm4_0_72, so I'm
              adding it to the xFAIL list
        FAIL  ERB.ne30_g16.I_1948-2004.yellowstone_intel

    yellowstone/CESM/allIcompsets: no

  test_system testing:

    yellowstone batch:          yes
      All PASS or xFAIL except:

        ***** No baselines
        BFAIL ERS_D.f10_f10.I_2000_CLM45_CN4MeNoVSoil.yellowstone_intel_rootlit.GC.142502.compare_hist.clm4_0_72 

      From component_gen_comp, all PASS or BFAIL1 except:

        ****** No baselines
        BFAIL2 ERS_D.f10_f10.I_2000_CLM45_CN4MeNoVSoil.yellowstone_intel_rootlit.compare_hist.clm4_0_72.clm2.h0 (baseline history file does not exist)
        BFAIL2 ERS_D.f10_f10.I_2000_CLM45_CN4MeNoVSoil.yellowstone_intel_rootlit.compare_hist.clm4_0_72.clm2.h1 (baseline history file does not exist)


    frankfurt interactive:      yes
      All PASS or xFAIL (including component_gen_comp)


    yellowstone interactive:    no
    lynx batch:                 no
    lynx interactive:           no
    frankfurt batch:            no

  test_driver.sh tools testing:

    frankfurt interactive:      no
      Couldn't get tools to build on frankfurt, from either my branch or
      the clm4_0_72 trunk tag

    yellowstone interactive:    yes
      All PASS except:

        ********* These seem to be expected failures, based on the fact that they fail in clm4_0_72. Note that the
        ********* gen_domain tests themselves pass, but the baseline comparisons fail, even if I compare clm4_0_72
        ********* against itself
        006 ble14 TBLCFGtools.sh clm4_5 gen_domain CFGtools__ds T31.runoptions ..........................rc=4 FAIL
        008 ble@4 TBLCFGtools.sh clm4_5 gen_domain CFGtools__ds ne30.runoptions .........................rc=4 FAIL
        027 smiS4 TSMscript_tools.sh clm4_5 ncl_scripts getregional_datasets.pl getregional .............rc=6 FAIL
        028 bliS4 TBLscript_tools.sh clm4_5 ncl_scripts getregional_datasets.pl getregional .............rc=4 FAIL

        ********* Expected baseline failures due to changes in default behavior of CLM4_5 mksurfdata_map
        ********* (see notes on answer changes, below, for what changed; I have rerun these tests with some
        ********* changes on my branch and in the trunk tag to confirm that baseline comparisons pass when I
        ********* revert the differences noted there)
        012 blg54 TBLtools.sh clm4_5 mksurfdata_map tools__s namelist ...................................rc=7 FAIL
        020 bli24 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_T31_crpglc_2000^tools__ds rc=7 FAIL
        022 bli53 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__o ....rc=7 FAIL
        024 bli54 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__ds ...rc=7 FAIL
        026 bli57 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_10x15_1850^tools__do ...rc=7 FAIL
        030 bli74 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools_ rc=7 FAIL
        032 bliT4 TBLscript_tools.sh clm4_5 mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp24_2000^tools_ rc=7 FAIL


  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_72

Changes answers relative to baseline: NO. However, changes behavior of
these offline tools:

mksurfdata_map for clm4.5: changes the following defaults:
- use hires raw datasets (where available) for everything except pctpft
- zeroes out inland wetland areas
- changes default glacier dataset for glc_mec surface datasets
- uses correct ngwh dataset for rcp6.0 2006 & 2007

mksurfdata_map for clm4.0: changes the following defaults:
- uses correct ngwh dataset for rcp6.0 2006 & 2007

mkmapdata.sh:
- no longer generates ocean-atmosphere and RTM mapping files

mkscripgrid.ncl:
- roundoff-level changes in coordinates
- grid_dims is fixed (now correctly nx by ny, rather than ntot by ntot)

===============================================================
===============================================================
Tag name:  clm4_0_72
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date:  Thu Apr 11 15:13:40 MDT 2013
One-line Summary: maoyi bug fix for vic hydro

Purpose of changes:  Bring in changes from Maoyi that fix a few bugs in the VIC hydrology code.  Make a small change in 
   scripts that fixes NoVS runs.

Requirements for tag: N/A

Test level of tag: std-test

Bugs fixed (include bugzilla ID): 1648

Known bugs (include bugzilla ID): 1658 - ERB problem with clm4_0.
                                  1659 - RTM restart problem when under a day boundary
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: changed NoVSBGC to NoVS in scripts branch_tag

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): changed scripts branch tag to 

-scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/newcompsets2_tags/newcompsets2_01_scripts4_130405a
+scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/newcompsets2_tags/newcompsets2_02_scripts4_130405a

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

from Maoyi Huang:

The variable cps%ws in my original codes overlaps with another variable in the SLAKE option. So I renamed it to cps$Wsvic.
wtsub in SoilHydrologyMod.F90 when VICHYDRO was on was not initialized. To avoid any potential conflicts, I renamed it to wtsub_vic and initialized it to 0._r8.
cleaned up the codes a little bit by taking out all variables that were not used.

M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/main/initSoilParVICMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/biogeophys/CLMVICMapMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

Machines testing ran on:  (Tests in priority order)

- updated xFail list and slightly modified test_system yellowstone.batch to reflect ERS_D and ERS_Ln48_D changes. 
- tracking tputcomp and memcomp changes in advance of refactoring modifications.

  build-namelist unit tester: All OK.  All Failures in clm4_0_71 now pass.

  CESM test lists:

   cesm intel: PID: 163148:  OK.  a number of tputcomp failures:
      FAIL  ERS_D.f10_f10.I.yellowstone_intel.GC.163148.tputcomp.clm4_0_71
      FAIL  ERS_Lm3.1x1_vancouverCAN.I1PT.yellowstone_intel.GC.163148.tputcomp.clm4_0_71
      FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.163148.tputcomp.clm4_0_71
      FAIL  SMS_RLA.f45_f45.ICLM45.yellowstone_intel.GC.163148.tputcomp.clm4_0_71
      FAIL  SMS.1x1_mexicocityMEX.I1PTCLM45.yellowstone_intel.GC.163148.tputcomp.clm4_0_71

   cesm pgi: PID: 163101 OK.  one memcomp failure 
      FAIL  ERS.f19_g16.ICNCROP.yellowstone_pgi.GC.163101

  test_system testing:

    yellowstone batch: OK.  Fixed a problem with NoVS, found bug in 
      FAIL  ERS.f19_g16.I_1850_CLM45_CN4Me.yellowstone_intel_user_nl_dirs.GC.162650.tputcomp.clm4_0_71
      FAIL  ERS_D.f10_f10.I_2000_CLM45_CN4Me.yellowstone_intel_ch4_set2_ciso.GC.162650.memcomp.clm4_0_71
      FAIL  ERS_D.f10_f10.I_2000_CLM45_CN4Me.yellowstone_intel_ch4_set2_ciso.GC.162650.tputcomp.clm4_0_71
      FAIL  ERS_D.f10_f10.I_2000_CLM45_CN4Me.yellowstone_intel_ch4_set3_pftroot.GC.162650.tputcomp.clm4_0_71

    frankfurt interactive: OK.  generate and tputcomp sub-tests failed.
      FAIL  SMS_D_Mmpi-serial.1x1_vancouverCAN.I1PTCLM45.frankfurt_intel_user_nl_dirs.GC.165025.generate.clm4_0_72
      FAIL  SMS_D_Mmpi-serial.1x1_vancouverCAN.I1PTCLM45.frankfurt_intel_user_nl_dirs.GC.165025.tputcomp.clm4_0_71
      FAIL  ERS_Mmpi-serial.1x1_mexicocityMEX.I1PTCLM45.frankfurt_intel_user_nl_dirs.GC.165025.generate.clm4_0_72
      FAIL  ERS_Mmpi-serial.1x1_mexicocityMEX.I1PTCLM45.frankfurt_intel_user_nl_dirs.GC.165025.tputcomp.clm4_0_71

CLM tag used for the baseline comparison tests if applicable: clm4_0_72

Changes answers relative to baseline: only for VIC.  Original implementation broken.  Consider this tag the new baseline against which to test for VIC.

IF tag changes answers relative to baseline comparison the
following should be filled in: N/A

===============================================================
===============================================================
Tag name:  clm4_0_71
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date:  Wed Apr 10 08:43:00 MDT 2013
One-line Summary: compsets refactoring by mvertens

Purpose of changes:   Bring in externals that refactor the compset handling.  Update CLM to 
                      work with the new compsets.  Compsets are now extensible and easier to
                      modify and work with.

Requirements for tag: N/A

Test level of tag: std-test

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID): N/A
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: modify CLM to work with new compset refactor

Describe any changes made to the namelist: modify CLM to work with new compset refactor

List any changes to the defaults for the boundary datasets: N/A  Levy's new files will come in later.

Describe any substantial timing or memory changes: N/A

Code reviewed by: mvertens, erik

List any svn externals directories updated (csm_share, mct, etc.):

https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/newcompsets2_tags/newcompsets2_01_scripts4_130405a
https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130403
https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_2_26
https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_130325
https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_02/socn
https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_02/sice
https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_02/sglc
https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_02/swav
https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_130405
http://parallelio.googlecode.com/svn/trunk_tags/pio1_6_5/pio
https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130308
https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_130308/gen_domain_files

List all files eliminated:

D       models/lnd/clm/test/system/tests_posttag_lynx_nompi
D       models/lnd/clm/test/system/mirage.interactive
D       models/lnd/clm/test/system/TCBCFGtools.sh
D       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
D       models/lnd/clm/test/system/config_files
D       models/lnd/clm/test/system/config_files/gen_domain
D       models/lnd/clm/test/system/config_files/tools__do
D       models/lnd/clm/test/system/config_files/tools__s
D       models/lnd/clm/test/system/config_files/CFGtools__ds
D       models/lnd/clm/test/system/config_files/tools__ds
D       models/lnd/clm/test/system/config_files/README
D       models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
D       models/lnd/clm/test/system/config_files/tools__o
D       models/lnd/clm/test/system/get_cprnc_diffs.sh
D       models/lnd/clm/test/system/TSMncl_tools.sh
D       models/lnd/clm/test/system/CLM_compare.sh
D       models/lnd/clm/test/system/TBLCFGtools.sh
D       models/lnd/clm/test/system/README.testnames
D       models/lnd/clm/test/system/tests_posttag_yong
D       models/lnd/clm/test/system/TCBtools.sh
D       models/lnd/clm/test/system/test_driver.sh
D       models/lnd/clm/test/system/lynx.interactive
D       models/lnd/clm/test/system/tests_pretag_yellowstone_nompi
D       models/lnd/clm/test/system/bluefire.batch
D       models/lnd/clm/test/system/Makefile
D       models/lnd/clm/test/system/TSMscript_tools.sh
D       models/lnd/clm/test/system/tests_posttag_mirage
D       models/lnd/clm/test/system/tests_posttag_frankfurt_nompi
D       models/lnd/clm/test/system/gen_test_table.sh
D       models/lnd/clm/test/system/TOPtools.sh
D       models/lnd/clm/test/system/input_tests_master
D       models/lnd/clm/test/system/TSMtools.sh
D       models/lnd/clm/test/system/TBLscript_tools.sh
D       models/lnd/clm/test/system/tests_posttag_nompi_regression
D       models/lnd/clm/test/system/TBLtools.sh
D       models/lnd/clm/test/system/show_var_diffs.sh
D       models/lnd/clm/test/system/TSMCFGtools.sh

List all files added and what they do:

A  +    models/lnd/clm/test/tools
A  +    models/lnd/clm/test/tools/TSMscript_tools.sh
A  +    models/lnd/clm/test/tools/TCBCFGtools.sh
A  +    models/lnd/clm/test/tools/tests_posttag_frankfurt_nompi
A  +    models/lnd/clm/test/tools/config_files
A  +    models/lnd/clm/test/tools/config_files/gen_domain
A  +    models/lnd/clm/test/tools/config_files/tools__do
A  +    models/lnd/clm/test/tools/config_files/tools__s
A  +    models/lnd/clm/test/tools/config_files/CFGtools__ds
A  +    models/lnd/clm/test/tools/config_files/tools__ds
A  +    models/lnd/clm/test/tools/config_files/README
A  +    models/lnd/clm/test/tools/config_files/tools__o
A  +    models/lnd/clm/test/tools/get_cprnc_diffs.sh
A  +    models/lnd/clm/test/tools/gen_test_table.sh
A  +    models/lnd/clm/test/tools/TSMncl_tools.sh
A  +    models/lnd/clm/test/tools/CLM_compare.sh
A  +    models/lnd/clm/test/tools/nl_files
A  +    models/lnd/clm/test/tools/nl_files/nl_ch4_set2_ciso
A  +    models/lnd/clm/test/tools/nl_files/nl_ch4_set3_pftroot
A  +    models/lnd/clm/test/tools/nl_files/gen_domain.ne30.runoptions
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_1x1_brazil_1850
A  +    models/lnd/clm/test/tools/nl_files/nl_rootlit
A  +    models/lnd/clm/test/tools/nl_files/gen_domain.T31.runoptions
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_10x15_1850
A  +    models/lnd/clm/test/tools/nl_files/nl_ciso
A  +    models/lnd/clm/test/tools/nl_files/nl_anoxia_wtsat
A  +    models/lnd/clm/test/tools/nl_files/clm4_0_mksrfdt_1x1_numaIA_mp20irrcr_2000
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_T31_crpglc_2000
A  +    models/lnd/clm/test/tools/nl_files/clm4_0_mksrfdt_10x15_irr_1850
A  +    models/lnd/clm/test/tools/nl_files/getregional
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_1x1_numaIA_mp24_2000
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_1x1_brazil_1850-2000
A  +    models/lnd/clm/test/tools/nl_files/mkprocdata_ne30_to_f19_I2000
A  +    models/lnd/clm/test/tools/nl_files/mkmapdata_ne30np4
A  +    models/lnd/clm/test/tools/nl_files/nl_vrtlay
A  +    models/lnd/clm/test/tools/nl_files/nl_oldhyd
A  +    models/lnd/clm/test/tools/nl_files/mksrfdt_1x1_vancouverCAN_2000
A  +    models/lnd/clm/test/tools/nl_files/mkmapdata_if10
A  +    models/lnd/clm/test/tools/TBLCFGtools.sh
A  +    models/lnd/clm/test/tools/input_tests_master
A  +    models/lnd/clm/test/tools/TOPtools.sh
A  +    models/lnd/clm/test/tools/README
A  +    models/lnd/clm/test/tools/TSMtools.sh
A  +    models/lnd/clm/test/tools/README.testnames
A  +    models/lnd/clm/test/tools/TBLscript_tools.sh
A  +    models/lnd/clm/test/tools/tests_posttag_yong
A  +    models/lnd/clm/test/tools/TCBtools.sh
A  +    models/lnd/clm/test/tools/test_driver.sh
A  +    models/lnd/clm/test/tools/tests_posttag_nompi_regression
A  +    models/lnd/clm/test/tools/tests_pretag_yellowstone_nompi
A  +    models/lnd/clm/test/tools/TBLtools.sh
A  +    models/lnd/clm/test/tools/show_var_diffs.sh
A  +    models/lnd/clm/test/tools/TSMCFGtools.sh
A  +    models/lnd/clm/test/tools/Makefile
A  +    models/lnd/clm/test/system/yellowstone.namelist

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/test/system/test_system
M       models/lnd/clm/test/system/yellowstone.interactive
M       models/lnd/clm/test/system/frankfurt.interactive
M       models/lnd/clm/test/system/README
M       models/lnd/clm/test/system/yellowstone.batch
M       models/lnd/clm/bld/user_nl_clm
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/bld/clm.buildnml.csh
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml
MM      models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5_tools.xml
M       models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
MM      models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
MM      models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90
M       SVN_EXTERNAL_DIRECTORIES

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:

These should pass next time around:
-these two are due to megan now being on by default:
  030/449 < FAIL> <Test Id: 30> <Desc: drv_flds_in file the same as expected for standard>
  037/449 < FAIL> <Test Id: 37> <Desc: drv_flds_in file the same as expected for standard>
-these four should pass next time...no baselines in clm4_0_70
  108/449 < FAIL> <Test Id: 108> <Desc: compare file lnd_in DNE for CN and -res+360x720cru>
  109/449 < FAIL> <Test Id: 109> <Desc: compare file temp_file.txt DNE for CN and -res+360x720cru>
  443/449 < FAIL> <Test Id: 443> <Desc: compare file lnd_in DNE for phys45 and -res+360x720cru>
  444/449 < FAIL> <Test Id: 444> <Desc: compare file temp_file.txt DNE for phys45 and -res+360x720cru>

  CESM test lists:

    yellowstone/CESM:
intel: other than our expected fail list, current failures should pass during the next round of testing 
pgi  : see intel 

note for intel and pgi:  nlcomp fails should not be considered truth or otherwise.  There is a bug compare_namelist.
lots of BFAILS when comparing to clm4_0_70 and some differences in coupler hist. vars.
These are expected due to a new CISM and DATM.
 
  test_system testing:

    yellowstone batch:         OK.  See explanation for yellowstone/CESM tests above.
    frankfurt interactive:     OK.  After modifying the frankfurt compset for 1PT.

CLM tag used for the baseline comparison tests if applicable: clm4_0_70

Changes answers relative to baseline: yes, due to CISM, but not due to any science changes in CLM itself.  There will be
changes in some coupler history files.

===============================================================
===============================================================
Tag name:  clm4_0_70
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Mon Apr  1 15:58:23 MDT 2013
One-line Summary: bring in vic hydrology

Purpose of changes: Merge in VIC hydrology.  This is an isolated option that stands on it's 
own and does not effect existing code.  Added tests with and without vrtlay = .true..  

Requirements for tag: Add vic tests for CLM45 and CLM45-vrtlay, normal testing protocol

Test level of tag: standard + I_compsets + yellowstone_rtm batch

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):VIC crashes when run in debug mode-1648
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: Add namelist option for vichydro

Describe any changes made to the namelist: Add namelist option for vichydro

List any changes to the defaults for the boundary datasets: Using temporary surface data sets.  New datasets
   will come in at a later tag.  The temporary data sets do not effect normal CLM runs.

Describe any substantial timing or memory changes: N/A

Code reviewed by: Erik,Maoyi Huang

List any svn externals directories updated (csm_share, mct, etc.):N/A

List all files eliminated:N/A

List all files added and what they do:

- For new VIC tests:
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_f09/user_nl_clm
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_f09
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_f19/user_nl_clm
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_f19
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_vrtlay/user_nl_clm
A       models/lnd/clm/test/system/user_nl_dirs/vic/vic_vrtlay
A       models/lnd/clm/test/system/user_nl_dirs/vic
- For VIC implementation:
A       models/lnd/clm/src/clm4_5/main/initSoilParVICMod.F90
A       models/lnd/clm/src/clm4_5/biogeophys/CLMVICMapMod.F90

List all existing files that have been modified, and describe the changes:

- For VIC namelist fucntionality
M       models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
M       models/lnd/clm/bld/configure
M       models/lnd/clm/bld/config_files/config_definition.xml
- For new VIC tests
M       models/lnd/clm/test/system/yellowstone.batch
- VIC implementation
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90
M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   OK

  CESM test lists:

    yellowstone/CESM:             
        cesm intel: OK.  some tputcomp FAILs, but main tests pass
        cesm pgi:   OK.  one tputcomp FAIL, main tests pass
    yellowstone/CESM/allIcompsets: OK.

  test_system testing:
    yellowstone rtm batch: OK.
    yellowstone batch:     OK.

	    new VIC tests:
    ERS.f09_g16.I_2000_CLM45_VIC              -user_nl_dir ../models/lnd/clm/test/system/user_nl_dirs/vic/vic_f09
    SMS.f19_g16.I_2000_CLM45_VIC              -user_nl_dir ../models/lnd/clm/test/system/user_nl_dirs/vic/vic_f19
    ERS.f09_g16.I_2000_CLM45_VIC              -user_nl_dir ../models/lnd/clm/test/system/user_nl_dirs/vic/vic_vrtlay
    ERS_D.f09_g16.I_2000_CLM45_VIC            -user_nl_dir ../models/lnd/clm/test/system/user_nl_dirs/vic/vic_vrtlay
      this last one expected to Fail.

    frankfurt interactive: OK.

CLM tag used for the baseline comparison tests if applicable: clm4_0_69

Changes answers relative to baseline: No.  The VIC hydro option, if turned on 
    does change answers, but the use of this code is isolated from the rest of CLM.
	
===============================================================
===============================================================
Tag name:  clm4_0_69
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Tue Mar 26 16:24:54 MDT 2013
One-line Summary: remove hydro reorder, volr and esmf mods

Purpose of changes: fix volrlnd init. from SPVAL to 0.0 so TWS in CLM looks correct.
    modify esmf interfaces for volr.  remove hydrology reordering due to nasty bug in
    restart.

Requirements for tag: fix bug 1644

Test level of tag: critical

Bugs fixed (include bugzilla ID): 1644

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist:N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: Dave L. and Jinyn Tang.  Minor review by Erik and Bill.

List any svn externals directories updated (csm_share, mct, etc.): update RTM to 1_0_22

List all files eliminated: N/A

List all files added and what they do:N/A

List all existing files that have been modified, and describe the changes:
M       models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90
M       SVN_EXTERNAL_DIRECTORIES

Machines testing ran on:  (Tests in priority order)

  only run CESM tests:

=== CESM Yellowstone PGI tests:  OK.  All BFAILS occur in cmopare_hist which is expected due to the removal of the hydro. reordering.
Status with expected failures removed:
./cs.status.114300.yellowstone | grep -v PET_PT.f19_g16.I1850 | grep -v SMS.1x1_numaIA.ICN_CROP | grep -v PET_PT.f10_f10.I20TRCN | grep -v PET_PT.f19_g16.ICLM451850 | grep -v SMS.T31_g37.IG4804CLM45 | grep -v SMS.1x1_numaIA.ICLM45CNCROP | grep -v PET_PT.f10_f10.I20TRCLM45CN | grep -v PASS
Possible test result outcomes:
...
BFAIL SMS_RLB.f45_f45.I.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERS_D.hcru_hcru.I_2000_CRUFRC_CN.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERS.f19_g16.ICNCROP.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERI.f19_g16.IG1850.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL SMS.T31_g37.IG4804.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL SMS.1x1_numaIA.ICNCROP.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL SMS_RLB.f45_f45.ICLM45.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERS_D.hcru_hcru.I_2000_CRUFRC_CLM45_CN.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERS.f19_g16.ICLM45CNCROP.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68 
BFAIL ERI.f19_g16.IG1850CLM45.yellowstone_pgi.GC.114300.compare_hist.clm4_0_68

=== CESM Yellowstone INTEL tests:  OK.  All BFAILS occur in cmopare_hist which is expected due to the removal of the hydro. reordering.
Status with expected failures removed:
>>./cs.status.114247.yellowstone | grep -v ERH_D.f19_g16.I1850CLM45CN | grep -v ERB.ne30_g16.I_1948-2004_CLM45 | grep -v ERS_E.f19_g16.I1850CRUCLM45CN | grep -v CME.f10_f10.ICN | grep -v ERS_D.f10_f10.ICLM45 | grep -v PET_PT.f19_g16.I1850CN | grep -v ERB.ne30_g16.I_1948-2004 | grep -v PET_PT.f10_f10.I20TRCN | grep -v PET_PT.f19_g16.I1850CLM45CN | grep -v ERS_E.f19_g16.ICLM451850 | grep -v ERS_D.f19_g16.IGRCP26CLM45CN | grep -v ERS_Lm3.f19_g16.IGRCP60CLM45CN | grep -v PET_PT.f10_f10.I20TRCLM45CN | grep -v SMS.f19_g16.IRCP45CLM45CN | grep -v ERS_D.f19_g16.IRCP85CLM45CN | grep -v PASS | grep -v COMMENT
...
FAIL  ERS_D.f10_f10.I.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_D.f10_f10.I.yellowstone_intel.GC.114247.tputcomp.clm4_0_68 
FAIL  NCK.f10_f10.I.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_E.f19_g16.I1850.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERH_D.f19_g16.I1850CN.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_D.f19_g16.IGRCP26CN.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.114247.tputcomp.clm4_0_68 
FAIL  SMS.f19_g16.IRCP45CN.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_D.f19_g16.IRCP85CN.yellowstone_intel.GC.114247.compare_hist.clm4_0_68 
FAIL  ERS_D.f19_g16.IRCP85CN.yellowstone_intel.GC.114247.memcomp.clm4_0_68 
FAIL  SMS_ROA.f45_f45.ICLM45.yellowstone_intel.GC.114247.tputcomp.clm4_0_68 
FAIL  NCK.f10_f10.ICRUCLM45.yellowstone_intel.GC.114247.compare_hist.clm4_0_68

=== test_system  yellowstone.rtm.batch:  OK. All compare_hist failures are expected due changes in photosynthesis

CLM tag used for the baseline comparison tests if applicable: For Cesm intel and pgi tests- clme_0_68
  for rtm tests, against clm4_0_66.
  for science validation, clm4_0_66

Changes answers relative to baseline: yes

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    obvious changes in GPP,FPSN and FCTR.  Other fields changed as well.
       ran the following and had Dave L. and Jinyun Tang look at output.
       f19_g16_I_1850_CLM45_CN_yellowstone_intel_photo_clm4_0_66/
       f19_g16_I_1850_CLM45_CN_yellowstone_intel_photo_clm4_0_68/
       f19_g16_I_1850_CLM45_CN_yellowstone_intel_photo_clm4_0_69/
       f19_g16_ICLM45_yellowstone_intel_photo_clm4_0_66/
       f19_g16_ICLM45_yellowstone_intel_photo_clm4_0_68/
       f19_g16_ICLM45_yellowstone_intel_photo_clm4_0_69/
	
===============================================================
===============================================================
Tag name:  clm4_0_68
Originator(s):  erik (Erik Kluzek)
Date: Sat Mar 16 16:03:14 MDT 2013
One-line Summary:  Fix mksurfdata_map for ne120np. Error out if SUM(weights)/=100. Photosynthesis change for CLM45.

Purpose of changes:

Bring in ne120fix branch to trunk. This fixes some issues in mksurfdata_map for generation 
of ne120np surface data file. Put error back in CLM if weights don't sum to 100. Add in 
Keith Oleson's photosynthesis change. This changes canopy top: triose phosphate utilization rate at 25C to
be dependent on vcmax25top ( maximum rate of carboxylation) rather than jmax25top (maximum electron 
transport rate). Update getco2_historical.ncl script to be able to handle rcp files as well.

Update scripts so that I1PT settings for urban single-point files will be used, and IRCP
will properly do a hybrid startup. And seperate out intel/pgi test lists.

Update datasets for ne120np4 and ne240np4 (CLM40), with updated mksurfdata_map.

Requirements for tag:
   Tools test, yellowstone batch, fix bug 1632/1643

Test level of tag: critical

Bugs fixed (include bugzilla ID): 1632 (ne120np4 mksurfdata problem)
                                  1643 (Fix RES_COMPSET_MATCH for I1PT, IRCP*)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
   New surfdata and pftdyn files for ne120np4 (CLM40)
   New surfdata            files for ne240np4 (CLM40)

Describe any substantial timing or memory changes: None

Code reviewed by: self, sacks (mksrfdata changes)

List any svn externals directories updated (csm_share, mct, etc.): scripts
   scripts updated to scripts4_130315c

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M  models/lnd/clm/test/system/yellowstone.batch --- Fix some compset names

   M  models/lnd/clm/tools/clm4_5/ncl_scripts/getco2_historical.ncl - Handle rcp CO2 files
   M  models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksurfdat.F90 -- Clean out small PFT values
   M  models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mksurfdat.F90 -- Clean out small PFT values

   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml ------- Update ne120/ne240 surfdata/pftdyn datasets
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml ------- Delete ALL finidat files as none compatible
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5_tools.xml - Add rcp CO2 datasets: rcp2.6/4.5/6/8.5

   M  models/lnd/clm/src/clm4_5/main/surfrdMod.F90 - Add back abort if surfdata weights don't sum to 100%
   M  models/lnd/clm/src/clm4_0/main/surfrdMod.F90 - Add back abort if surfdata weights don't sum to 100%
   M  models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90 - change in photosynthesis

Changes in expected fails for testing:

  build-namelist unit-test: Following fail because of new datasets will pass next tag
     203 ne120
     208 ne240
     306 ne120 20th Century
     428 48x96 for CLM45 (remove finidat)
		    failType="FAIL">answers change on restart</entry>


  Changes to expected fail:

   <test_system_batch>
        <yellowstone>
            <INTEL>
+               <entry testId="ERS.f19_g16.I_1850_CLM45_CN4Me"                     failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_D.f19_g16.I_1850_CLM45_CNCENTNoMe"              failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS.f19_g16.I_2000_CLM45_CN4Me_CROP"                failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_Ld211.f10_f10.ICLM45CNADSPIN"                   failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_Ld211_D_P224x1.f10_f10.ICLM45CNCROP"            failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_Ld211_P384x1.f19_g16.ICLM45CNDVCROP"            failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_Ld211.f10_f10.I_2000_CLM45_VOC_CN"              failType="FAIL">answers change on restart</entry>
+               <entry testId="ERS_D.f19_g16.ICLM45GLCMEC"                         failType="FAIL">answers change on restart</entry>

   <auxTests>
     <yellowstone>
	<INTEL>
	+<entry testId="ERH_D.f19_g16.I1850CLM45CN" failType="FAIL" >Restart difference</entry>
        +<entry testId="ERB.ne30_g16.I_1948-2004_CLM45" failType="FAIL" >Restart difference</entry>
        +<entry testId="ERS_E.f19_g16.I1850CRUCLM45CN" failType="FAIL" >Restart difference</entry>
        +<entry testId="CME.f10_f10.ICN" failType="FAIL" >Restart difference</entry>
        +<entry testId="ERS_D.f10_f10.ICLM45" failType="FAIL" >Restart difference</entry>

Machines testing ran on:  (Tests in priority order)
  build-namelist unit tester:   yes

  CESM test lists:

    yellowstone/CESM:              yes
    yellowstone/CESM/allIcompsets: yes

  test_system testing:

    yellowstone batch:          yes
    frankfurt interactive:      yes

  test_driver.sh tools testing:

    yellowstone interactive:    yes
    frankfurt   interactive:    yes

CLM tag used for the baseline comparison tests if applicable: clm4_0_68

Changes answers relative to baseline: Yes!

    - what code configurations:
       All CLM45 change because of change in photosynthisis
       I1PT compsets change because of scripts bug
       IRCP compsets now startup with new initial conditions
    - what platforms/compilers: All
    - nature of change: similar climate

===============================================================
===============================================================
Tag name:  clm4_0_67
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Tue Mar 12 11:14:59 MDT 2013
One-line Summary: Jinyun photosynthesis and hydrology reorder

Purpose of changes: Bring in mods that reorder hydrology code and modes that
                    address photosynthesis CN code.  This tag is F90 code only.

Requirements for tag: N/A

Test level of tag: std-test + ICompset tests + yellowstone interactive

Bugs fixed (include bugzilla ID): N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist:N/A

List any changes to the defaults for the boundary datasets:N/A

Describe any substantial timing or memory changes:N/A

Code reviewed by: Dave L, S. Swenson, self

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated:N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

Major changes in CNEcosystemDynMod, SoilHydrologyMod and Hydrology2Mod.  Also did some deadCode removal (unused pointer 
assignments, unused modules and local variables.

   M biogeochem/CNEcosystemDynMod.F90   - effects CN.  Split out CNEcosystemDynA and CNEcosystemDynB

   M main/CNiniTimeVar.F90              - removed some commented out code
   M main/clmtypeInitMod.F90            - removed commented out init_gridcell_pstate_type 
   M main/pftdynMod.F90                 
   M main/initSurfAlbMod.F90            - effects CN.  For photosynthesis.
   M main/clm_driver.F90            
   M main/CNiniSpecial.F90           
   M ain/clmtype.F90                 
   M main/histFldsMod.F90             

   M biogeophys/Hydrology2Mod.F90 - split out 2A and 2B subroutines 
   M biogeophys/SoilHydrologyMod.F90    - split out new WaterTable routine from existing Drainage routine
   M biogeophys/BareGroundFluxesMod.F90  
   M biogeophys/CanopyFluxesMod.F90     - For photosynthesis. 


Machines testing ran on:  (Tests in priority order)

Dave Lawrence looked at 1 year runs to make sure behavior looked OK before and after mods.
S. Swenson looked at short simulations to make sure reordering worked correctly in the hydrology code.
Expect changes in the following fields (depending on compset and test type)

roff Flrl_rofliq
roff Flrl_rofliq
lnd Flrl_rofliq
lnd Flrl_rofliq
roff Forr_roff
roff Forr_roff
roff Flrl_rofliq
roff Flrl_rofliq
lnd Fall_lat
lnd Fall_lat
lnd Fall_sen
lnd Fall_sen
lnd Fall_evap
lnd Fall_evap
lnd Flrl_rofliq
lnd Flrl_rofliq
roff Forr_roff
roff Forr_roff
roff Flrl_rofliq
roff Flrl_rofliq
lnd Sl_fv
lnd Sl_f

l2x_Sl_avsdr
l2x_Sl_anidr
l2x_Sl_avsdf
l2x_Sl_anidf
l2x_Sl_tref
l2x_Sl_qref
l2x_Sl_t
l2x_Sl_fv
l2x_Sl_ram1
l2x_Sl_snowh
l2x_Sl_u10
l2x_Fall_swnet
l2x_Fall_taux
l2x_Fall_tauy
l2x_Fall_lat
l2x_Fall_sen
l2x_Fall_lwup
l2x_Fall_evap
l2x_Fall_flxdst1
l2x_Fall_flxdst2
l2x_Fall_flxdst3
l2x_Fall_flxdst4
l2x_Flrl_rofliq
x2l_Slrr_volr
r2x_Slrr_volr
r2x_Forr_roff
r2x_Forr_ioff
x2r_Flrl_rofliq
 
  build-namelist unit tester:   yes - OK

  CESM test lists:

    yellowstone/CESM:              yes - OK.  Fails are due to new code.  These should pass next tag.

   FAIL  ERS.f19_g16.I_1850_CLM45_CN4Me.yellowstone_intel_user_nl_dirGC.113407  
   oAIL  ERS_D.fol_g16.I_1850_CLM45_CNCENTNoMe.yellowstone_intel_user_nl_dirs.GC.113407  
   FAIL  ERS.f19_g16.I_2000_CLM45_CN4Me_CROP.yellowstone_intel_user_nl_dirs.GC.113407 
   FAIL  ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.GC.113407 
   FAIL  ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.GC.113407.compare_hist.clm4_0_66  
   FAIL  ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel_user_nl_dirs.GC.113407.compare_hist.clm4_0_66 
   FAIL  ERS_Ld211_D_P224x1.f10_f10.ICLM45CNCROP.yellowstone_intel_crop.GC.113407  
   FAIL  ERS_Ld211_P384x1.f19_g16.ICLM45CNDVCROP.yellowstone_intel_crop.GC.113407 
   FAIL  ERS_Ld211.f10_f10.I_2000_CLM45_VOC_CN.yellowstone_intel_voc.GC.113407 
   FAIL  ERS_Ln48_D.f10_f10.I_2000_CLM45_CN.yellowstone_intel_ciso.GC.113407.compare_hist.clm4_0_66  
   FAIL  ERS_D.f19_g16.ICLM45GLCMEC.yellowstone_intel_glcMEC.GC.113407 

    yellowstone/CESM/allIcompsets: yes - OK

  test_system testing:

    yellowstone batch:          yes - OK. Fails are due to new code.  These should pass next tag.
   
   FAIL  ERS.f19_g16.I_1850_CLM45_CN4Me.yellowstone_intel_user_nl_dirs.GC.113407 
   FAIL  ERS_D.f19_g16.I_1850_CLM45_CNCENTNoMe.yellowstone_intel_user_nl_dirs.GC.113407 
   FAIL  ERS.f19_g16.I_2000_CLM45_CN4Me_CROP.yellowstone_intel_user_nl_dirs.GC.113407 
   FAIL  ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.GC.113407 
   FAIL  ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel_user_nl_dirs.GC.113407.compare_hist.clm4_0_66 
   FAIL  ERS_Ld211_D_P224x1.f10_f10.ICLM45CNCROP.yellowstone_intel_crop.GC.113407 
   FAIL  ERS_Ld211_P384x1.f19_g16.ICLM45CNDVCROP.yellowstone_intel_crop.GC.113407 
   FAIL  ERS_Ld211.f10_f10.I_2000_CLM45_VOC_CN.yellowstone_intel_voc.GC.113407 
   FAIL  ERS_Ln48_D.f10_f10.I_2000_CLM45_CN.yellowstone_intel_ciso.GC.113407.compare_hist.clm4_0_66 
   FAIL  ERS_D.f19_g16.ICLM45GLCMEC.yellowstone_intel_glcMEC.GC.113407  

    frankfurt interactive:      yes - OK
    yellowstone interactive:    yes - reasonably OK.  Added a few tests to xFail list that need new
                                surface data sets.
                                The following fail due to new code and should pass next round:

   FAIL  ERS_D_Mmpi-serial.CLM_USRDAT.ICLM45USUMB.yellowstone_intel_user_nl_dirs.GC.075359.compare_hist.clm4_0_66b 
   FAIL  ERS_D_P1x1_Mmpi-serial.f19_g16.I20TR_CLM45VSCN.yellowstone_intel_voc.GC.075359 
   FAIL  ERS_D_P1x1_Mmpi-serial.f19_g16.I20TR_CLM45VSCN.yellowstone_intel_voc.GC.075359.compare_hist.clm4_0_66b 
   FAIL  ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000_CLM45.yellowstone_intel_monthly.GC.075359.compare_hist.clm4_0_66b 
   FAIL  ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_CLM45_CN.yellowstone_intel_monthly.GC.075359.compare_hist.clm4_0_66b 
   FAIL  ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000_CLM45_CNDV.yellowstone_intel_monthly.GC.075359.compare_hist.clm4_0_66b

CLM tag used for the baseline comparison tests if applicable: clm4_0_66

Changes answers relative to baseline: Photosynthesis mods and reordering will change answers

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate):  hydrology reordering will introducce very small changes due to the process of moving around, but not changing code.
	     photosysthesis mods are major changes that effect science

	
===============================================================
===============================================================
Tag name:  clm4_0_66
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Thu Mar  7 11:54:05 MST 2013
One-line Summary: turn off subgrid topography snow parameterization for glc_mec landunits

Purpose of changes:

Change from Sean Swenson to turn off subgrid topography snow
parameterization over glc_mec landunits: ice_mec columns already account
for subgrid topographic variability through their use of multiple elevation
classes; thus, to avoid double-accounting for topographic variability in
these columns, we ignore topo_std and use a value of n_melt that assumes
little topographic variability within the column.

Requirements for tag: yellowstone cesm tests, make sure GLC test goes

Test level of tag: critical

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, Sean Swenson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated:

List all files added and what they do:

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_5/main/iniTimeConst.F90

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   no

  CESM test lists:

    yellowstone/CESM:              yes
      All PASS or xFail (ignoring tput failures); only baseline failure is,
      the following, which is an expected failure:
        FAIL  ERI.f19_g16.IG1850CLM45.yellowstone_pgi.C.113330.compare_hist.clm4_0_65 
    
    yellowstone/CESM/allIcompsets: no

  test_system testing:

    yellowstone batch:          no
    frankfurt interactive:      no
    yellowstone interactive:    no
    lynx batch:                 no
    lynx interactive:           no
    frankfurt batch:            no

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_65

Changes answers relative to baseline: Yes, just for CLM4.5 with glc_mec

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM4.5 with glc_mec
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): new climate

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_0_65
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Thu Mar  7 09:53:31 MST 2013
One-line Summary: back out Machines external to get more tests to pass, especially IG

Purpose of changes:

Some tests - particularly IG - became broken in clm4_0_64. This tag rolls
back the Machines external so that GLC compiles properly.

Requirements for tag:

Test level of tag: only yellowstone CESM tests

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):
-scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130304b
+scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_130301

List all files eliminated:

List all files added and what they do:

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

Difference in expected fails: this brings the xfail list back to what it
was in clm4_0_63, with the exception of some SBN IcompsetTests that were
added to xFail in clm4_0_64:
@@ -154,12 +154,6 @@
                <entry testId="PET_PT.f10_f10.I20TRCLM45CN"    failType="TFAIL">scripts issue component not threaded</entry>
                <entry testId="SMS.f19_g16.IRCP45CLM45CN"      failType="SFAIL">missing finidat file</entry>
                <entry testId="ERS_D.f19_g16.IRCP85CLM45CN"    failType="SFAIL">missing finidat file</entry>
-
-               <entry testId="ERS_D.f19_g16.IGRCP26CN"        failType="CFAIL">No rule to make target `glc_constants.o/glade/scratch/muszala/ERI.f19_g16.IG1850.yellowstone_pgi.GC.161430/bld/glc/lib/libglimmercismfortran.a', needed by `glc_constants.mod'</entry> 
-               <entry testId="ERS_Lm3.f19_g16.IGRCP60CN"      failType="CFAIL">No rule to make target `glc_constants.o/glade/scratch/muszala/ERI.f19_g16.IG1850.yellowstone_pgi.GC.161430/bld/glc/lib/libglimmercismfortran.a', needed by `glc_constants.mod'</entry> 
-
-               <entry testId="NCK.f10_f10.I"                  failType="FAIL">ERROR: lnd_prognostic but num_inst_lnd not num_inst_max</entry>
-               <entry testId="NCK.f10_f10.ICRUCLM45"          failType="FAIL">ERROR: lnd_prognostic but num_inst_lnd not num_inst_max</entry>
             </INTEL>
             <PGI>
                <entry testId="PET_PT.f19_g16.I1850"           failType="TFAIL">scripts issue with ocean not threaded</entry>
@@ -170,10 +164,6 @@
                <entry testId="SMS.T31_g37.IG4804CLM45"        failType="FAIL" >checkWeights error, probably due to old-format urban on surface dataset</entry>
                <entry testId="SMS.1x1_numaIA.ICLM45CN_CROP"   failType="TFAIL">Bad compset name: ICNCROP</entry>
                <entry testId="PET_PT.f10_f10.I20TRCLM45CN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
-
-               <entry testId="ERI.f19_g16.IG1850.yellowstone_pgi"          failType="CFAIL">No rule to make target `glc_constants.o/glade/scratch/muszala/ERI.f19_g16.IG1850.yellowstone_pgi.GC.161430/bld/glc/lib/libglimmercismfortran.a', needed by `glc_constants.mod'</entry> 
-               <entry testId="SMS.T31_g37.IG4804.yellowstone_pgi"          failType="CFAIL">No rule to make target `glc_constants.o/glade/scratch/muszala/ERI.f19_g16.IG1850.yellowstone_pgi.GC.161430/bld/glc/lib/libglimmercismfortran.a', needed by `glc_constants.mod'</entry> 
-               <entry testId="ERI.f19_g16.IG1850CLM45.yellowstone_pgi"     failType="CFAIL">No rule to make target `glc_constants.o/glade/scratch/muszala/ERI.f19_g16.IG1850.yellowstone_pgi.GC.161430/bld/glc/lib/libglimmercismfortran.a', needed by `glc_constants.mod'</entry>
             </PGI>
          </yellowstone>
       </auxTests>


Machines testing ran on:  (Tests in priority order)
  Standard Tag Pretag ***                    Standard Tag Posttag **

  build-namelist unit tester:   no

  CESM test lists:

    yellowstone/CESM:              yes
      All PASS or xFail (ignoring tput failures)
      (note that baselines didn't exist in clm4_0_64 for some tests,
      particularly IG)    

    yellowstone/CESM/allIcompsets: no

  test_system testing:

    yellowstone batch:          no
    frankfurt interactive:      no
    yellowstone interactive:    no
    lynx batch:                 no
    lynx interactive:           no
    frankfurt batch:            no

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_64

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm4_0_64
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Wed Mar  6 12:41:26 MST 2013
One-line Summary: update externals.  fixes 40/45 intial condition problem

Purpose of changes:  Main purpose is to bring in scripts4_130227b so that
                     CLM45 compsets do not use CLM40 initial conditions.  Put in
                     PTCLM fix.  Secondary purpose is to update other externals.
                     NOTE:  This tag only changes externals.  No clm 
                     code, scripts or xml files were touched.

Requirements for tag: N/A

Test level of tag: critical (only yellowstone, Icompset and aux 40/45 aux tests)

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: Changes in processor count for certain resolutions.

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: the 40/45 fix in scripts4_130227b will fix initial condition problems.

Describe any substantial timing or memory changes: N/A

Code reviewed by: muszala, Erik

List any svn externals directories updated (csm_share, mct, etc.):

   cprnc_120828 -> cprnc_130301
   scripts4_130207 -> scripts4_130304
   Machines_130214 -> Machines_130304b
   rtm1_0_19 -> rtm1_0_20
   share3_130220 -> share3_130226
   esmf_wrf_timemgr_120427 -> esmf_wrf_timemgr_130213
   timing_120731 -> timing_130214
   mapping_121113b -> mapping_130222

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes: N/A

   M   models/lnd/clm/tools/SVN_EXTERNAL_DIRECTORIES
   M   models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
   M   SVN_EXTERNAL_DIRECTORIES

Machines testing ran on:  (Tests in priority order)
    yellowstone/CESM:              yes - looks decent, but not great.  There are no new test failures and new tests that do fail are
                                         most likely due to new testlists that weren't tested in a clm tag.
                                         A few nl comp failures since number of pes changed (expected).
                                         Many comparisons failed due to baselines not existing.
                                         5 IG compsets fail due to a linking error.
                                         2 NCK.F10_f10 tests die with "ERROR: lnd_prognostic but num_inst_lnd not num_inst_max"
																	  
    yellowstone/CESM/allIcompsets: yes  - looks OK.  Transient runs added to xFail list as well as SBN.1x1_smallvilleIA.ICLM45CNCROP
	                                       and SBN.f09_g16.IGCLM45IS2 

CLM tag used for the baseline comparison tests if applicable: clm4_0_63

Changes answers relative to baseline: Yes. PE counts change plus the initial condition fixes will change answers compared
                                      to existing baselines

IF tag changes answers relative to baseline comparison the
following should be filled in:

   The 40/45 fix should bring this back to being correct (ie. the state before clm4_0_60).

===============================================================
===============================================================
Tag name:  clm4_0_63
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Mon Mar  4 13:50:15 MST 2013
One-line Summary: bug 1635 fix - 4_0 CN bug

Purpose of changes:  Put back some removed code.  This allows CN to run with 4_0
                     beyond one year

Requirements for tag:

Test level of tag: critical

Bugs fixed (include bugzilla ID): 1635

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: Dave Lawrence, Sam Levis

List any svn externals directories updated (csm_share, mct, etc.): N/A

List all files eliminated: N/A

List all files added and what they do: N/A

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/src/clm4_0/biogeochem/CNAnnualUpdateMod.F90
--- models/lnd/clm/src/clm4_0/biogeochem/CNAnnualUpdateMod.F90  (revision 44311)
+++ models/lnd/clm/src/clm4_0/biogeochem/CNAnnualUpdateMod.F90  (working copy)
@@ -183,6 +183,12 @@
       call p2c(num_soilc, filter_soilc, annavg_t2m, cannavg_t2m)
    end if
			   
      +   ! column loop
      +   do fc = 1,num_soilc
      +      c = filter_soilc(fc)
      +      if (annsum_counter(c) >= get_days_per_year() * secspday) annsum_counter(c) = 0._r8
      +   end do
      +
      end subroutine CNAnnualUpdate
      !-----------------------------------------------------------------------


Machines testing ran on:  (Tests in priority order)
    yellowstone/CESM:              yes only 40 list - OK. Matches xFail list
    yellowstone/CESM/allIcompsets: yes              - OK. Matches xFail list

   Also had D. Lawrence look at one 45 run and a 40 run from this tag compared to one from
   clm4_0_58 (the tag just before this bug was introduced).  All three runs were 2 years long.

CLM tag used for the baseline comparison tests if applicable: clm4_0_62

Changes answers relative to baseline: No

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: 

   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name:  clm4_0_62
Originator(s):  sacks (Bill Sacks,UCAR/CGD,303-497-1762)
Date: Sun Feb 24 15:27:09 MST 2013
One-line Summary: add active flags, change subgrid weighting convention, other misc fixes

Purpose of changes:

Main set of changes involves adding 'active' flags at the pft, column & landunit
levels, saying whether computations should be run over a given point. This
change involved many changes throughout the code, changing conditionals like 'if
(pwtgcell(p) > 0)' to 'if (pactive(p))'. The purpose of this change was
two-fold: (1) make these conditionals less error-prone and more robust to future
changes in the code: currently, the 'active' condition is: weight > 0 OR type =
glc_mec -- but sometimes people forgot to include the latter condition, and it
could get worse moving forwards; (2) make it easy to change the 'active'
condition in the future -- this now just has to be done in one place, in
reweightMod.

In changing these conditionals to use the new 'active' flags, I also added or
removed conditionals in a few places -- see notes below on the individual file
modifications.

Also, changed subgrid weighting convention, so that the sum of weights always
adds to 1 at all levels. Previously, there was no fixed convention for the
weights of, e.g., pfts on a 0-weight column. Now, even on a 0-weight column, the
sum of pft weights on the column will still add to 1.

Also a number of other miscellaneous fixes:
- bug-fix in handling of unstructured grids in determining new vs old urban format
- add some new surface datasets with new urban format
- other misc. fixes noted below

Requirements for tag:
    Testing: build-namelist unit tests, yellowstone cesm, yellowstone
    test_system batch, frankfurt test_system interactive; include
    component_gen_comp for test_system tests

Test level of tag: standard

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: A few new surface datasets (see below)

Describe any substantial timing or memory changes: None

Code reviewed by: erik

List any svn externals directories updated (csm_share, mct, etc.):
Main purpose is to update cism (along with necessary scripts & machines
updates), but also updated other externals to their cesm1_2_beta02 versions:
- scripts
- machines
- cism
- mct
- pio
- csm_share (includes scam update from Erik)

List all files eliminated:

List all files added and what they do:

======= Handles modifications and error-checks related to changing subgrid weights
======= (note that direct calls to setFilters should no longer be made --
======= instead, call reweightWrapup in this new module). This adds a routine that confirms
======= that all subgrid weights add to 1 (from Zack Subin).
A       models/lnd/clm/src/clm4_5/main/reweightMod.F90

List all existing files that have been modified, and describe the changes:

======= add 'active' flags; replace use of things like 'if (pwtgcell(p) > 0)'
======= with 'if (pactive(p))'
M       models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90 ---------- also removed unnecessary conditional
M       models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90 ------------ also added a pactive check
M       models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
M       models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
M       models/lnd/clm/src/clm4_5/main/dynlandMod.F90 --------------- also added a new conditional
M       models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       models/lnd/clm/src/clm4_5/main/pftdynMod.F90
M       models/lnd/clm/src/clm4_5/main/histFileMod.F90
M       models/lnd/clm/src/clm4_5/main/controlMod.F90
M       models/lnd/clm/src/clm4_5/main/filterMod.F90
M       models/lnd/clm/src/clm4_5/main/subgridAveMod.F90 ------------ also added a new conditional in p2c_2d_filter
           (similar to existing conditional in p2c_1d_filter)
M       models/lnd/clm/src/clm4_5/main/clmtype.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90 --- also remove ^M line endings accidentally added in clm4_0_61
M       models/lnd/clm/src/clm4_5/biogeophys/clm_driverInitMod.F90

======= replace calls to setFilters with calls to reweightWrapup; in driver,
======= moved these calls based on an analysis of where they are needed
M       models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
M       models/lnd/clm/src/clm4_5/main/clm_driver.F90

======= change subgrid weighting convention; remove duplicated code in setting
======= up urban landunits. Note that, in a few places (marked by "TODO WJS") I
======= assumed an arbitrary weighting for, e.g., pft weights in a 0-weight
======= landunit. This can be changed in the future once we change how weights
======= are defined on the surface dataset (using weights on the landunit rather
======= than on the grid cell).
M       models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90

======= declare some parameters as 'parameter' (needed in order to use them in
======= select case statements)
M       models/lnd/clm/src/clm4_5/main/clm_varcon.F90

======= make check for new vs old format more robust; in particular, fix
======= handling of unstructured grids (before, these were deemed to be
======= old-format urban files by accident)
M       models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90

======= use nlevurb=5 even for more_vertlayers (based on suggestion from Keith
======= and Erik)
M       models/lnd/clm/src/clm4_5/main/clm_varpar.F90

======= use new surface datasets for glcmec 1.9x2.5 1850&2000, and  f10 1850, in
======= order to have valid urban data for some tests to pass
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml

======= use cism rather than sglc for test_system tests, because sglc means no
======= sno fields are sent to the coupler, which leads to ERS test failures and
======= generally weaker tests
M       models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml

======= add cism1 distinction in compset name
M       models/lnd/clm/test/system/yellowstone.interactive
M       models/lnd/clm/test/system/bluefire.interactive
M       models/lnd/clm/test/system/lynx.batch

======= add call to component_gen_comp
M       models/lnd/clm/test/system/test_system

======= Removed some now-passing tests, including some that were passing earlier
======= but still remained in this file
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
xFAIL differences:
Index: models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
===================================================================
--- models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml	(revision 44092)
+++ models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml	(working copy)
@@ -113,8 +113,7 @@
               <entry testId="ERS_D.f10_f10.I_2000_CLM45CN4MeNoVSoil.rootlit"     failType="TFAIL"></entry>
               <entry testId="ERI_D.f10_f10.I_2000_CLM45CN4Me.vrtlay"             failType="TFAIL"></entry>
               <entry testId="PET_D_P1x32.ne30_g16.ICN"                           failType="SFAIL"></entry>
-              <entry testId="ERS_Ld211_D_P112x1.f10_f10.ICNCROP"                 failType="TFAIL"></entry>
-              <entry testId="ERS_D.f19_g16.ICLM45GLCMEC.glcMEC"                  failType="TFAIL"></entry>
+              <entry testId="ERS_Ld211_D_P112x1.f10_f10.ICNCROP"                 failType="FAIL"></entry>
           </INTEL>
       </yellowstone>
    </test_system_batch> 
@@ -137,7 +136,6 @@
             <INTEL>
                <entry testId="PET_PT.f19_g16.I1850CN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
                <entry testId="ERB.ne30_g16.I_1948-2004"  failType="FAIL" >Restart difference</entry>
-               <entry testId="ERS_Lm3.f19_g16.IGRCP60CN" failType="FAIL" >Soil balance error on restart</entry>
                <entry testId="PET_PT.f10_f10.I20TRCN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
 
                <entry testId="PET_PT.f19_g16.I1850CLM45CN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
@@ -149,20 +147,12 @@
                <entry testId="ERS_D.f19_g16.IRCP85CLM45CN"    failType="SFAIL">missing finidat file</entry>
             </INTEL>
             <PGI>
-               <entry testId="SMS_RLB.f45_f45.I"                 failType="cFAIL">problem building with mpi-serial with pgi compiler</entry>
-               <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CN"  failType="cFAIL">missing LAPACK symbol dgbsv</entry>
                <entry testId="PET_PT.f19_g16.I1850"              failType="TFAIL">scripts issue with ocean not threaded</entry>
-               <entry testId="ERI.f19_g16.IG1850"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
-               <entry testId="SMS.T31_g37.IG4804"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
                <entry testId="SMS.1x1_numaIA.ICN_CROP"           failType="TFAIL">Bad compset name: ICNCROP</entry>
                <entry testId="PET_PT.f10_f10.I20TRCN"            failType="TFAIL">scripts issue with ocean not threaded</entry>
 
-               <entry testId="SMS_RLB.f45_f45.ICLM45"                 failType="cFAIL">problem building with mpi-serial with pgi compiler</entry>
-               <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CLM45_CN" failType="cFAIL">missing LAPACK symbol dgbsv</entry>
-               <entry testId="ERS.f19_g16.ICLM45CNCROP"               failType="cFAIL">missing LAPACK symbol dgbsv</entry>
                <entry testId="PET_PT.f19_g16.ICLM451850"              failType="TFAIL">scripts issue with ocean not threaded</entry>
-               <entry testId="ERI.f19_g16.IG1850CLM45"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
-               <entry testId="SMS.T31_g37.IG4804CLM45"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
+               <entry testId="SMS.T31_g37.IG4804CLM45"                failType="FAIL" >checkWeights error, probably due to old-format urban on surface dataset</entry>
                <entry testId="SMS.1x1_numaIA.ICLM45CN_CROP"           failType="TFAIL">Bad compset name: ICNCROP</entry>
                <entry testId="PET_PT.f10_f10.I20TRCLM45CN"            failType="TFAIL">scripts issue with ocean not threaded</entry>
             </PGI>


Machines testing ran on:  (Tests in priority order)
  Standard Tag Pretag ***                    Standard Tag Posttag **

NOTE: Ignoring throughput fails


  build-namelist unit tester:   yes
     All PASS or xFAIL

  CESM test lists:

    Note: the following change was made after running the CESM test list (just
    reran the one affected case: ERI.f19_g16.IG1850CLM45.yellowstone_pgi):
      In bld/namelist_files/namelist_defaults_clm4_5.xml:
      -lnd/clm2/surfdata_map/surfdata_1.9x2.5_simyr1850_glcmec10_c120927.nc</fsurdat>
      +lnd/clm2/surfdata_map/surfdata_1.9x2.5_simyr1850_glcmec10_c130221.nc</fsurdat>

    yellowstone/CESM:              yes
      All PASS or xFAIL except:

      ***** Expected failure due to urban bug-fix for unstructured grids
      FAIL  ERB.ne30_g16.I_1948-2004_CLM45.yellowstone_intel.GC.051632.compare_hist.clm4_0_61 

      ***** memcomp failures probably due to using cism2 code
      FAIL  ERS_D.f19_g16.IGRCP26CN.yellowstone_intel.GC.051626.memcomp.clm4_0_61 
      FAIL  ERS_Lm3.f19_g16.IGRCP60CN.yellowstone_intel.GC.051626.memcomp.clm4_0_61 

      ***** memcomp failures with unknown cause
      FAIL  ERS_D.f19_g16.IRCP85CN.yellowstone_intel.GC.051626.memcomp.clm4_0_61 
      COMMENT  pesmaxmem_incr = 28.2

    yellowstone/CESM/allIcompsets: no

  test_system testing:

    yellowstone batch:          yes, including component_gen_comp
      All PASS or xFAIL except:

      ***** Expected failure due to new surface dataset
      FAIL  ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.GC.051756.compare_hist.clm4_0_61_test_system 
      
      ***** Expected failure due to urban bug-fix for unstructured grids
      FAIL  ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel_user_nl_dirs.GC.051756.compare_hist.clm4_0_61_test_system 

      ***** memcomp failures with unknown cause
      FAIL  ERS_Ld211.f10_f10.I_2000_CLM45_VOC_CN.yellowstone_intel_voc.GC.051756.memcomp.clm4_0_61_test_system 
      FAIL  ERS_Ln48_D_P64x16.ne30_g16.ICN.yellowstone_intel_user_nl_dirs.GC.051756.memcomp.clm4_0_61_test_system 


      ----- COMPONENT_GEN_COMP RESULTS ---
      All comparisons PASS except:

      ****** Expected failures due to new surface dataset and fix in urban for
      ****** ne30 These failures all go away when I compare against one-offs
      ****** from clm4_0_61 with fixes in surface datasets and the urban ne30
      ****** bug. However, there is then a diff in the h1 file for the GLCMEC
      ****** test: diffs just in cols1d_wtlunit & pfts1d_wtlunit, and this is
      ****** just over glc_mec columns -- this is expected due to changes in
      ****** subgrid weighting convention
      FAIL   ERS_D.f19_g16.ICLM45GLCMEC.yellowstone_intel_glcMEC.compare_hist.clm4_0_61.clm2.h0 
      FAIL   ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.compare_hist.clm4_0_61.clm2.h0 
      FAIL   ERS_Ld211.f10_f10.ICLM45CNADSPIN.yellowstone_intel_monthly.compare_hist.clm4_0_61.clm2.h1 
      FAIL   ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel_user_nl_dirs.compare_hist.clm4_0_61.clm2.h0 
      FAIL   ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.yellowstone_intel_user_nl_dirs.compare_hist.clm4_0_61.clm2.h1 

      ****** Differences just over crop landunits: RMS diffs in pft weights on
      ****** col and landunit, and col weights on landunit; and FILLDIFFs in 12
      ****** column-level variables (now _FillValue in 0-weight places). These
      ****** differences aren't surprising given the changes in subgrid weight
      ****** convention and the fact that inactive points are now given spval in
      ****** 1-d output
      FAIL   ERS.f19_g16.I_2000_CLM45_CN4Me_CROP.yellowstone_intel_user_nl_dirs.compare_hist.clm4_0_61.clm2.h1


    frankfurt interactive:      yes, including component_gen_comp
      All PASS or xFAIL

    yellowstone interactive:    no
    lynx batch:                 no
    lynx interactive:           no
    frankfurt batch:            no

  test_driver.sh tools testing:

    lynx interactive:           no
    yellowstone interactive:    no

  yellowstone/PTCLM:            no

CLM tag used for the baseline comparison tests if applicable: clm4_0_61

Changes answers relative to baseline: yes, in limited cases - see below

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: CLM4.5 with the following:
      - unstructured grids, due to urban bug fix
      - glcmec @ 1.9x2.5, due to new surface datasets with new urban
      - 1850 @ f10, due to new surface dataset
    - what platforms/compilers: ALL
    - nature of change: larger than roundoff/same climate OR new climate (not
      investigated carefully)

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: NOT DONE

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_0_61
Originator(s):  muszala (Stefan Muszala,UCAR/CGD,303-497-1320)
Date: Wed Feb 20 15:53:38 MST 2013
One-line Summary: rtm, drv and clm mods: tws, Volr, r01 rdric file and SoilHydroMod

Purpose of changes: Bring Volr from RTM to CLM.
                    New ne120 files.  
						  New SoidHydrologyMod file for 45 (not bit-for-bit)
						  Bring tws in.
						  Sacks test list change and test_system change.
						  Add yellowstone to xFail options.
						  Added RTM test list for test_system tests (yellowstone.rtm.batch)
						  DEPRECATE WT in 4_5 code.  WT and the variable wt are left in since they are used in other 
						     portions of the code, but they are marked as deprecated since we now have TWS.

Requirements for tag:

Test level of tag: std-test

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets: N/A

Describe any substantial timing or memory changes: N/A

Code reviewed by: muszala, swenseon, mvertens

List any svn externals directories updated (csm_share, mct, etc.):
   drv:       update from drvseq4_2_20 to drvseq4_2_22
   rtm:       update from rtm1_0_18 to rtm1_0_19
   csm_share: update from share3_130213 to share3_130131

List all files eliminated:
D       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOn
D       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmR01

List all files added and what they do:
   Added RTM rtm test_system tests
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnFloodOnEffvelOff/user_nl_rtm
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnFloodOnEffvelOff
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnFloodOnEffvelOn/user_nl_rtm
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnFloodOnEffvelOn
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnIceOff/user_nl_rtm
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnIceOff
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnIceOn/user_nl_rtm
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOnIceOn
A       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/yellowstone.rtm.batch

List all existing files that have been modified, and describe the changes:
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/test_system
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/yellowstone.interactive
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOff/user_nl_rtm
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/README
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/test/system/yellowstone.batch
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/bld/unit_testers/xFail/expectedFail.pm
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/doc/ChangeLog
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/doc/ChangeSum
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/cpl_share/clm_cpl_indices.F90
MM      https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
MM      https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/main/clmtype.F90
MM      https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/main/histFldsMod.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/models/lnd/clm/src/clm4_0/main/clm_atmlnd.F90
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/SVN_EXTERNAL_DIRECTORIES
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/ChangeLog
M       https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_60/ChangeSum


Machines testing ran on:  (Tests in priority order)
  NOTE:  Lots of throughput, NLComp and memcomp fails.  Also ran rtm test_system tests  

  build-namelist unit tester:   OK (yellowstone) - added two tests that were missing from xFail list

  CESM test lists:

    yellowstone/CESM:             
       -> 4_0 testing:  OK.  Removed tests in xFail file and ignoring NLComp tests.  Remaining Fails (tputcomp and memcomp) will be ignored since test tolerences are too narrow.

       -> 4_5 testing:  OK.  There will be B4B differences due to a new SoilHydrologyMod which are listed below

      FAILs due to new SoilHydroMod and r2x_Slrr_volr in coupler

      FAIL  SMS_RLA.f45_f45.ICLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  ERS_D.f10_f10.ICLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  NCK.f10_f10.ICLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  ERB.ne30_g16.I_1948-2004_CLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  ERH_D.f19_g16.I1850CLM45CN.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  SMS.1x1_mexicocityMEX.I1PTCLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 
      FAIL  ERS_Lm3.1x1_vancouverCAN.I1PTCLM45.yellowstone_intel.GC.161028.compare_hist.clm4_0_60 

    yellowstone/CESM/allIcompsets:  OK

  test_system testing:

    yellowstone batch:          
      OK.  FAILs due to new SoilHydroMod and r2x_Slrr_volr in coupler

      FAIL  ERS.f19_g16.I_1850_CLM45_CN4Me.user_nl_dirs.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_D.f19_g16.I_1850_CLM45_CNCENTNoMe.user_nl_dirs.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS.f19_g16.I_2000_CLM45_CN4Me_CROP.user_nl_dirs.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211.f10_f10.ICLM45CNADSPIN.monthly.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ln48_D_P64x1.ne30_g16.ICLM45CN.user_nl_dirs.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211_D_P224x1.f10_f10.ICLM45CNCROP.crop.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211_P384x1.f19_g16.ICLM45CNDVCROP.crop.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211.f10_f10.I_2000_CLM45_VOC_CN.voc.GC.114029.compare_hist.clm4_0_60 
      FAIL  ERS_Ln48_D.f10_f10.I_2000_CLM45_CN.ciso.GC.114029.compare_hist.clm4_0_60 

    frankfurt interactive:      
      OK.  FAILs due to new SoilHydroMod and r2x_Slrr_volr in coupler

      FAIL  SMS_D_Mmpi-serial.1x1_vancouverCAN.ICLM451PT.frankfurt_intel_user_nl_dirs.GC.104908.compare_hist.clm4_0_60 
      FAIL  ERS_Mmpi-serial.1x1_mexicocityMEX.ICLM451PT.frankfurt_intel_user_nl_dirs.GC.104908.compare_hist.clm4_0_60 

    yellowstone interactive:
      OK.  FAILs due to new SoilHydroMod and r2x_Slrr_volr in coupler

      FAIL  ERS_D_Mmpi-serial.CLM_USRDAT.ICLM45alaskaCN.yellowstone_intel_user_nl_dirs.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_D_Mmpi-serial.CLM_USRDAT.ICLM45USUMB.yellowstone_intel_user_nl_dirs.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_D_P1x1_Mmpi-serial.f19_g16.I20TR_CLM45VSCN.yellowstone_intel_voc.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_D_P1x1_Mmpi-serial.5x5_amazon.I_2000_CLM45.yellowstone_intel_user_nl_dirs.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_Ln48_D_P1x1_Mmpi-serial.f45_g37.ICLM45VOC.yellowstone_intel_voc.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000_CLM45.yellowstone_intel_monthly.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_CLM45_CN.yellowstone_intel_monthly.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000_CLM45_CNDV.yellowstone_intel_monthly.GC.114053.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211_Mmpi-serial.1x1_brazil.IVSCN.yellowstone_intel_voc.GC.114053.compare_hist.clm4_0_60

    frankfurt batch:            
      OK.  FAILs due to new SoilHydroMod and r2x_Slrr_volr in coupler

      FAIL  ERS_D_P16x1.f19_g16.I_1850_CLM45_CN4Me.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  ERI_P16x1.f19_g16.I_1850_CLM45_CNCENTNoMe.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  ERS_Ld211_P16x1.f10_f10.ICLM45CNADSPIN.frankfurt_intel_monthly.GC.104516.compare_hist.clm4_0_60 
      FAIL  ERS_P16x1.f19_g16.I_1850_CLM45_CN4Me_LessSPIN.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  SMS_D_P16x1.f19_g16.I_1850_CLM45_CN4Me_EXLessSPIN.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  SMS_D_P16x1.f10_f10.I_2000_CLM45_CN4Me.frankfurt_intel_vrtlay.GC.104516.compare_hist.clm4_0_60 
      FAIL  ERS_D_P16x1.f19_g16.I_2000_CLM45_CN.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  ERI_P16x1.f19_g16.I_2000_CLM45_CN.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 
      FAIL  SMS_D_P16x1.f19_g16.ICLM45CNEXSPIN.frankfurt_intel_user_nl_dirs.GC.104516.compare_hist.clm4_0_60 

CLM tag used for the baseline comparison tests if applicable: CLM4_0_60

Changes answers relative to baseline:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: 4_5 code 
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
			1) SoilHydrologyMod.F90 mods from Swenson effect soil moisture which are effecting certain l2x coupler fields
			2) bringing VOLR from RTM through the coupler adds one more field to coupler history files.

===============================================================
===============================================================
Tag name:  clm4_0_60
Originator(s):  erik (Erik Kluzek)
Date: Mon Feb 11 03:55:56 MST 2013
One-line Summary: Bring CLM4.5 code from clm45sci branch to trunk as an option set at configure time

Purpose of changes:

Bring in CLM4.5 branch as additional directories. Change directory structure, so there are shared files 
and utilities for both CLM4.0 and CLM4.5 and files that are different for each. Update compsets in 
scripts in order to work in this paradigm. Move clm45sci15_clm4_0_58 code to trunk under clm4_5 phys.

clm4.5 includes the following:

* Bring LBNL-merge branch on with: vertical soil, Methane, CENTURY, split nitrification, new-lake model.
* Modifications to GPP, on gppdev branch, multilayer canopy and then single-layer version that reproduces it.
* Crop model updates. Irrigation included with crop model as an option. Fix CNDV-CROP.
* Urban model updates, multi-density, urban depth seperate from soil depth, wasteheat to zero
* Bring in permafrostsims09 branch with Sean Swensons's flooding changes.
* Update pft-physiology file, change some CN defaults, change min flow slightly in RTM
* Set ponding to zero, acclimation mods from Keith Oleson, a hydrology change from Sean Swenson.

Requirements for tag: clm40/clm45 code/tools work/tested, answers same, complete move from bluefire to yellowstone

Test level of tag: std-test

Bugs fixed (include bugzilla ID):
                                 1621 (normalization issue in mksurfdata_map and clm -- partial)
                                 1604 (The -co2_type flag in the CLM namelist is not set correct.)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

  Compsets to run CLM4.5 added.

I_2000_CLM45 (ICLM45)
I_2000_1PTFRC_CLM45 (I1PTCLM45)
I_2000_GLC_CLM45_CISM1 (IGCLM45)
I_2000_GLC_CLM45_CISM2P (IGCLM45IS2)
I_2000_CLM45_CN (ICLM45CN) 
I_2000_CLM45_CN_CROP (ICLM45CNCROP)
I_2000_CLM45_CN_4Me (ICLM45CN4Me)
I_2000_CRUFRC_CLM45 (ICRUCLM45)
I_2000_CRUFRC_CLM45_CN (ICRUCLM45CN)
I_2000_CRUFRC_CLM45_CN_4Me (ICRUCLM45CN4Me)
I_2000_CLM45_CN_GLC_CISM1 (IGCLM45CN)
I_1850_CLM45 (I1850CLM45)
I_1850_CLM45_CN_4Me (I1850CLM45CN4Me)
I_1850_CRUFRC_CLM45 (I1850CRUCLM45)
I_1850_CRUFRC_CLM45_CN (I1850CRUCLM45CN)
I_1850_CRUFRC_CLM45_CN_4Me (I1850CRUCLM45CN4Me)
I_1850_CLM45_GLC_CISM1 (IG1850CLM45)
I_1850_CLM45_CN (I1850CLM45CN)
I_1850-2000_CLM45 (I20TRCLM45)
I_1850-2000_CLM45_CN (I20TRCLM45CN) 
I_1850-2000_CRUFRCCLM45 (I20TRCRUCLM45)	
I_1850-2000_CRUFRC_CLM45_CN (I20TRCRUCLM45CN)
I_1850-2000_CRUFRC_CLM45_CN_4Me (I20TRCRU4MeCLM45)
I_1850-2000_CLM45_GLC_CISM1 (IG20TRCLM45) 
I_1850-2000_CLM45_CN_GLC_CISM1 (IG20TRCLM45CN)	
I_1948-2004_CLM45 (I4804CLM45)
I_1948-2004_CLM45_GLC_CISM1 (IG4804CLM45) 
I_1948-2004_CLM45_CN_GLC_CISM1 (IG4804CLM45CN)	
I_RCP8.5_CLM45_CN_GLC_CISM1 (IGRCP85CLM45CN) 
I_RCP6.0_CLM45_CN (IRCP60CLM45CN) 
I_RCP6.0_CLM45_CN_GLC_CISM1 (IGRCP60CLM45CN) 
I_RCP4.5_CLM45_CN (IRCP45CLM45CN) 
I_RCP4.5_CLM45_CN_GLC_CISM1 (IGRCP45CNCLM45) 
I_RCP2.6_CLM45_CN (IRCP26CLM45CN) 
I_RCP2.6_CLM45_CN_GLC_CISM1 (IGRCP26CLM45CN) 
I_RCP8.5_CLM45_CN (IRCP85CLM45CN) 
I_1850_SPINUP_3HrWx_CLM45_CN_4Me

  CLM configure changes:

     Add physics option to determine if CLM4.0 or CLM4.5 physics is used:
+     -phys <name>           Value of clm4_0 or clm4_5 (default is clm4_0) 

   Options removed

    -pergro
    -c13

   Options added for CLM4.5 physics:

+     -clm4me <name>         Turn Methane model: [on | off]
+                              Requires bgc=cn/cndv (Carbon Nitrogen model)
+                            (ONLY valid for CLM4.5!)
+     -exlaklayers <name>    Turn on extra lake layers (25 layers instead of 10) [on | off]
+                            (ONLY valid for CLM4.5!)
+     -vsoilc_centbgc <name> Turn on vertical soil Carbon profile, CENTURY model decomposition,
+                            split Nitrification/de-Nitrification into two mineral 
+                            pools for NO3 and NH4 (requires clm4me Methane model), and
+                            eliminate inconsistent duplicate soil hydraulic 
+                            parameters used in soil biogeochem.
+                            (requires either CN or CNDV)
+                            (ONLY valid for CLM4.5!)
+                            [on,off or colen delimited list of no options] (default off)
+                              no-vert     Turn vertical soil Carbon profile off
+                              no-cent     Turn CENTURY off
+                              no-nitrif   Turn the Nitrification/denitrification off
+                              no-stnd-bsw Turn the standard BSW for soil psi off
+                            [no-vert,no-cent,no-nitrif,no-stnd-bsw,
+                             no-vert:no-cent,no-nitrif:no-stnd-bsw,
+                             no-vert:no-cent:no-stnd-bsw]

    New spinup options added for CLM4.5 physics (but are now deprecated and NOT recommended for use)

+                              Enter-AD      Turn on Accelerated Decomposition from           (6)
+                                            existing initial conditions (optional) (deprecated)
+                                            (ONLY valid for CLM4.5!)
+                              AD2Lesser     Jump from full AD to lesser AD spinup (optional)  (4)
+                                            (deprecated) (ONLY valid for CLM4.5!)
+                              LesserAD      Lesser Accelerated Decomposition mode            (3)
+                                            (deprecated) (ONLY valid for CLM4.5!)
+                              LesserAD-exit Jump from lesser AD to normal mode               (1)
+                                            (deprecated) (ONLY valid for CLM4.5!)
+                            Two sequences are valid: 6-5-4-3-1-0 or 6-5-2-0 (where 6 and 4 are optional)
+                            The recommended sequence is 5-2-0

  

Describe any changes made to the namelist:
    Extensive list of new namelist options for CLM4.5 physics

List any changes to the defaults for the boundary datasets:
    Extensive list of new datasets for CLM4.5
    Add 360x720 grid (hcru_hcru) for CLM4.0 physics

Describe any substantial timing or memory changes: CLM4.0 -- identical to clm4_0_59
                                                   CLM4.5 -- identical to clm45sci15_clm4_0_58

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): to cesm1_2_alpha02a versions

   scripts            to scripts4_130204
   Machines           to Machines_130204
   drv                to drvseq4_2_18
   datm               to datm8_130130
   rtm                to rtm1_0_18
   cism               to 45merge_02_cism1_121114
   csm_share          to share3_130131
   pio                to pio1_6_1
   mapping/gen_domain to mapping_121113b

List all files eliminated:

============== Eliminate PERGRO option, remove duplicated tools from clm4_0, change names to include clm4_0
D       models/lnd/clm/test/system/nl_files/mksrfdt_1x1_numaIA_mp20irrcr_2000
D       models/lnd/clm/test/system/nl_files/mksrfdt_10x15_irr_1850
D       models/lnd/clm/tools/mkmapdata/* ---------> remove
D       models/lnd/clm/tools/mkprocdata_map/* ----> remove
D       models/lnd/clm/tools/ncl_scripts/* -------> remove
D       models/lnd/clm/tools/interpinic/* --------> move to under clm4_0
D       models/lnd/clm/tools/mkmapgrids/* --------> remove
D       models/lnd/clm/tools/mksurfdata_map/* ----> move to under clm4_0
D       models/lnd/clm/bld/namelist_files/namelist_definition.xml ---> use clm4_5 version
D       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -> move to name with clm4_0
D       models/lnd/clm/bld/namelist_files/use_cases/pergro_pd.xml ---> Remove PERGRO option
D       models/lnd/clm/bld/namelist_files/use_cases/pergro0_pd.xml --> Remove PERGRO option
D       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml -> move to name with clm4_0

List all files added and what they do:

============== testing for clm4_5 and change name of some tests to include clm4_0
A  +    models/lnd/clm/test/system/config_files/gen_domain
A  +    models/lnd/clm/test/system/tests_posttag_frankfurt_nompi
A  +    models/lnd/clm/test/system/user_nl_dirs/anoxia_wtsat
A  +    models/lnd/clm/test/system/user_nl_dirs/anoxia_wtsat/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/vrtlay
A  +    models/lnd/clm/test/system/user_nl_dirs/vrtlay/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/oldhyd
A  +    models/lnd/clm/test/system/user_nl_dirs/oldhyd/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/ch4_set2_ciso
A  +    models/lnd/clm/test/system/user_nl_dirs/ch4_set2_ciso/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/ch4_set3_pftroot
A  +    models/lnd/clm/test/system/user_nl_dirs/ch4_set3_pftroot/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/rootlit
A  +    models/lnd/clm/test/system/user_nl_dirs/rootlit/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/ciso
A  +    models/lnd/clm/test/system/user_nl_dirs/ciso/user_nl_clm
A  +    models/lnd/clm/test/system/nl_files/nl_ch4_set2_ciso
A  +    models/lnd/clm/test/system/nl_files/nl_ch4_set3_pftroot
A  +    models/lnd/clm/test/system/nl_files/mksrfdt_10x15_1850
A  +    models/lnd/clm/test/system/nl_files/nl_rootlit
A  +    models/lnd/clm/test/system/nl_files/nl_ciso
A  +    models/lnd/clm/test/system/nl_files/nl_anoxia_wtsat
A  +    models/lnd/clm/test/system/nl_files/clm4_0_mksrfdt_1x1_numaIA_mp20irrcr_2000
A  +    models/lnd/clm/test/system/nl_files/clm4_0_mksrfdt_10x15_irr_1850
A  +    models/lnd/clm/test/system/nl_files/mksrfdt_1x1_numaIA_mp24_2000
A  +    models/lnd/clm/test/system/nl_files/nl_vrtlay
A  +    models/lnd/clm/test/system/nl_files/nl_oldhyd
============== clm4_5 version of tools (from clm45sci15_clm4_0_58)
A  +    models/lnd/clm/tools/clm4_5
A  +    models/lnd/clm/tools/clm4_5/mkmapdata
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/mvNimport.sh
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/rmdups.ncl
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/regridbatch.sh
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/mkmapdata.sh
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/mkunitymap.ncl
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/mknoocnmap.pl
A  +    models/lnd/clm/tools/clm4_5/mkmapdata/README
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/clm4054_ne30g16_I2000.clm2.h0.2000-01_c121107.nc
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/map_ne30np4_nomask_to_fv1.9x2.5_nomask_aave_da_c121107.nc
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/mkprocdata_map_functions.bash
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/mkprocdata_map.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/gridmapMod.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/constMod.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/fmain.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/shr_file_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/nanMod.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/Filepath
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/Makefile
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/fileutils.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/mkprocdata_map_in
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/mkprocdata_map_all
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/clm
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/mkprocdata_map_wrap
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/clm4054_f19g16_I2000.clm2.h0.2000-01_c121107.nc
A  +    models/lnd/clm/tools/clm4_5/mkprocdata_map/README
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/cprnc.pl
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/getco2_historical.ncl
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/cprnc.ncl
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/getregional_datasets.pl
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/getregional_datasets.ncl
A  +    models/lnd/clm/tools/clm4_5/ncl_scripts/README
A  +    models/lnd/clm/tools/clm4_5/interpinic
A  +    models/lnd/clm/tools/clm4_5/interpinic/clmi.BCN.1949-01-01_10x15_USGS_simyr1850_c121113.nc
A  +    models/lnd/clm/tools/clm4_5/interpinic/interpinic.runoptions
A  +    models/lnd/clm/tools/clm4_5/interpinic/src
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/interpinic.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_infnan_mod.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_isnan.c
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_sys_mod.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/fmain.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_log_mod.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_isnan.h
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/Filepath
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/Makefile
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/src/shr_const_mod.F90
A  +    models/lnd/clm/tools/clm4_5/interpinic/README
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/domainMod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/shr_sys_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/shr_file_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/nanMod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/shr_log_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/mkmapgrids.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/Filepath
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/Makefile
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/mkmapgrids.namelist
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/mkscripgrid.ncl
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/mkmapgrids.csh
A  +    models/lnd/clm/tools/clm4_5/mkmapgrids/README
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkvarctl.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkncdio.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/clm_varpar.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkutilsMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_file_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_timer_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_log_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkindexmapMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mklaiMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksoilMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/fileutils.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_const_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkharvestMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkfileMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkurbanparCommonMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Makefile
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_string_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkglcmecMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkvarpar.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/clm_varctl.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_sys_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkvocefMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkdomainMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Filepath
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mksurfdat.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkurbanparMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkgridmapMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/nanMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mklanwatMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/src/mkpftMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_lookup_2d_netcdf.nc
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkncdio.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkutilsMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkindexmapMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/Srcfiles
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mksurfdata_map.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/Filepath
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/Makefile
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/README
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/unit_testers/test_mkurbanparMod.F90
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata_map.namelist
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/mksurfdata.pl
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/README
A  +    models/lnd/clm/tools/clm4_5/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt
============== clm4_0 version of tools
A  +    models/lnd/clm/tools/clm4_0
A  +    models/lnd/clm/tools/clm4_0/interpinic
A  +    models/lnd/clm/tools/clm4_0/interpinic/clmi.BCN.1949-01-01_10x15_USGS_simyr1850_c100322.nc
A  +    models/lnd/clm/tools/clm4_0/interpinic/interpinic.runoptions
A  +    models/lnd/clm/tools/clm4_0/interpinic/src
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/interpinic.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/shr_sys_mod.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/fmain.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/shr_log_mod.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/Filepath
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/Makefile
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/src/shr_const_mod.F90
A  +    models/lnd/clm/tools/clm4_0/interpinic/README
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkvarctl.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkncdio.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/clm_varpar.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkutilsMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_file_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_timer_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_log_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkindexmapMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mklaiMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mksoilMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/fileutils.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_const_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkurbanparDomMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkharvestMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkfileMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkurbanparCommonMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/Makefile
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_string_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkglcmecMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkvarpar.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/clm_varctl.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_sys_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkvocefMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkdomainMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/Filepath
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mksurfdat.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkurbanparAvgMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/shr_kind_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/Makefile.common
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkgridmapMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/nanMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/Mkdepends
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/Srcfiles
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mklanwatMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/src/mkpftMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_lookup_2d_netcdf.nc
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mkncdio.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mkutilsMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mkindexmapMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/Srcfiles
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mksurfdata_map.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/Filepath
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/Makefile
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/README
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/unit_testers/test_mkurbanparDomMod.F90
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/mksurfdata_map.namelist
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/mksurfdata.pl
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/README
A  +    models/lnd/clm/tools/clm4_0/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt
A  +    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0_tools.xml
A  +    models/lnd/clm/bld/namelist_files/namelist_definition_clm4_0.xml
A  +    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5_tools.xml
A  +    models/lnd/clm/bld/namelist_files/namelist_definition_clm4_5.xml
A  +    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_0.xml
A  +    models/lnd/clm/bld/namelist_files/namelist_defaults_clm4_5.xml
============== clm4_5 version of source (from clm45sci15_clm4_0_58)
A  +    models/lnd/clm/src/clm4_5
A  +    models/lnd/clm/src/clm4_5/biogeochem
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate2Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNGapMortalityMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNNitrifDenitrifMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNGRespMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CropRestMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/initch4Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate1Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNBalanceCheckMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate3Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNFireMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNMRespMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_BGC.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/MEGANFactorsMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNVerticalProfileMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/ch4RestMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNWoodProductsMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNCIsoFluxMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNPrecisionControlMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/ch4Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNSummaryMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/DUSTMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDVLightMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNPhenologyMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/ch4varcon.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/STATICEcosysDynMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDecompMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate1Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDVMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNCStateUpdate3Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/VOCEmissionMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNrestMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDVEcosystemDynIniMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNAnnualUpdateMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNNStateUpdate2Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDecompCascadeMod_CENTURY.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNNDynamicsMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNAllocationMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/DryDepVelocity.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNEcosystemDynMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNSetValueMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNVegStructUpdateMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNSoilLittVertTranspMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNDVEstablishmentMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeochem/CNC14DecayMod.F90
A  +    models/lnd/clm/src/clm4_5/main
A  +    models/lnd/clm/src/clm4_5/main/clm_varcon.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_varpar.F90
A  +    models/lnd/clm/src/clm4_5/main/CNiniTimeVar.F90
A  +    models/lnd/clm/src/clm4_5/main/dynlandMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_initializeMod.F90
A  +    models/lnd/clm/src/clm4_5/main/subgridRestMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_glclnd.F90
A  +    models/lnd/clm/src/clm4_5/main/subgridMod.F90
A  +    models/lnd/clm/src/clm4_5/main/accFldsMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clmtypeInitMod.F90
A  +    models/lnd/clm/src/clm4_5/main/pftdynMod.F90
A  +    models/lnd/clm/src/clm4_5/main/iniTimeConst.F90
A  +    models/lnd/clm/src/clm4_5/main/histFileMod.F90
A  +    models/lnd/clm/src/clm4_5/main/pft2colMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_atmlnd.F90
A  +    models/lnd/clm/src/clm4_5/main/findHistFields.pl
A  +    models/lnd/clm/src/clm4_5/main/restFileMod.F90
A  +    models/lnd/clm/src/clm4_5/main/controlMod.F90
A  +    models/lnd/clm/src/clm4_5/main/initSurfAlbMod.F90
A  +    models/lnd/clm/src/clm4_5/main/filterMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_varctl.F90
A  +    models/lnd/clm/src/clm4_5/main/clm_driver.F90
A  +    models/lnd/clm/src/clm4_5/main/subgridAveMod.F90
A  +    models/lnd/clm/src/clm4_5/main/initGridCellsMod.F90
A  +    models/lnd/clm/src/clm4_5/main/CNiniSpecial.F90
A  +    models/lnd/clm/src/clm4_5/main/pftvarcon.F90
A  +    models/lnd/clm/src/clm4_5/main/surfrdMod.F90
A  +    models/lnd/clm/src/clm4_5/main/inicPerpMod.F90
A  +    models/lnd/clm/src/clm4_5/main/clmtype.F90
A  +    models/lnd/clm/src/clm4_5/main/histFldsMod.F90
A  +    models/lnd/clm/src/clm4_5/main/mkarbinitMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys
A  +    models/lnd/clm/src/clm4_5/biogeophys/BalanceCheckMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SoilTemperatureMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SLakeFluxesMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/UrbanInputMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SnowHydrologyMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics1Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/FrictionVelocityMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/TridiagonalMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SLakeHydrologyMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/Hydrology1Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/BiogeophysRestMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/UrbanMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/ActiveLayerMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/QSatMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/clm_driverInitMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SLakeTemperatureMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/BareGroundFluxesMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SNICARMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/CanopyFluxesMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SurfaceRadiationMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/initSLakeMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/H2OSfcMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/Biogeophysics2Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/FracWetMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/UrbanInitMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SLakeRestMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SLakeCon.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SurfaceAlbedoMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/Hydrology2Mod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/BandDiagonalMod.F90
A  +    models/lnd/clm/src/clm4_5/biogeophys/SoilHydrologyMod.F90

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
M       models/lnd/clm/test/system/TCBCFGtools.sh
M       models/lnd/clm/test/system/frankfurt.batch
M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
M       models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
M       models/lnd/clm/test/system/TSMncl_tools.sh
M       models/lnd/clm/test/system/TBLCFGtools.sh
M       models/lnd/clm/test/system/README.testnames
M       models/lnd/clm/test/system/tests_posttag_yong
M       models/lnd/clm/test/system/yellowstone.interactive
M       models/lnd/clm/test/system/TCBtools.sh
M       models/lnd/clm/test/system/test_driver.sh
M       models/lnd/clm/test/system/shortlist.interactive
M       models/lnd/clm/test/system/tests_pretag_yellowstone_nompi
M       models/lnd/clm/test/system/bluefire.batch
M       models/lnd/clm/test/system/frankfurt.interactive
M       models/lnd/clm/test/system/TSMscript_tools.sh
M       models/lnd/clm/test/system/tests_posttag_mirage
M       models/lnd/clm/test/system/gen_test_table.sh
M       models/lnd/clm/test/system/nl_files/gen_domain.ne30.runoptions
M       models/lnd/clm/test/system/nl_files/gen_domain.T31.runoptions
M       models/lnd/clm/test/system/TOPtools.sh
M       models/lnd/clm/test/system/input_tests_master
M       models/lnd/clm/test/system/TSMtools.sh
M       models/lnd/clm/test/system/TBLscript_tools.sh
M       models/lnd/clm/test/system/yellowstone.batch
M       models/lnd/clm/test/system/tests_posttag_nompi_regression
M       models/lnd/clm/test/system/lynx.batch
M       models/lnd/clm/test/system/TBLtools.sh
M       models/lnd/clm/test/system/shortlist.batch
M       models/lnd/clm/test/system/TSMCFGtools.sh

M       models/lnd/clm/bld/configure
M       models/lnd/clm/bld/queryDefaultNamelist.pl
M       models/lnd/clm/bld/config_files/config_definition.xml
M       models/lnd/clm/bld/listDefaultNamelist.pl
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/bld/clm.buildnml.csh
M       models/lnd/clm/bld/namelist_files/namelist_defaults.xsl

MM      models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
MM      models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90

Difference in expected Fails:

 <expectedFails>
    <namelistTest> 
-      <bluefire>
-         <IBM>
-            <compare>
-            </compare>
-            <generate>
-               <entry testId="138" failType="xFail"> missing datasets for us20 </entry>
-               <entry testId="189" failType="xFail"> ne16 missing finidat file for 1850</entry>
-               <entry testId="192" failType="xFail"> ne60 missing finidat file for 1850</entry>
-               <entry testId="201" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
-            </generate>
-         </IBM>
-      </bluefire>
       <mirage>
       </mirage>
       <lynx>
@@ -25,10 +13,17 @@
          </IBM>
       </janus>
       <yellowstone>
+         <intel>
             <compare>
+               <entry testId="216" failType="xFail"> missing datasets for us20 </entry>
+               <entry testId="296" failType="xFail"> ne16 missing finidat file for 1850</entry>
+               <entry testId="298" failType="xFail"> ne16 missing finidat file for 1850</entry>
+               <entry testId="301" failType="xFail"> ne60 missing finidat file for 1850</entry>
+               <entry testId="303" failType="xFail"> ne60 missing finidat file for 1850</entry>
+               <entry testId="316" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
+               <entry testId="318" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
             </compare>
             <generate>
-               <entry testId="138" failType="xFail"> missing datasets for wus12 </entry>
                <entry testId="141" failType="xFail"> missing datasets for us20 </entry>
                <entry testId="189" failType="xFail"> ne16 missing finidat file for 1850</entry>
                <entry testId="192" failType="xFail"> ne60 missing finidat file for 1850</entry>
@@ -38,17 +33,6 @@
    </namelistTest>
 
    <clmInteractive> 
-      <bluefire>
-         <IBM>
-            <compare>
-               <entry testId="bl9C4" failType="xFail"> cprnc showing diffs are not b4b </entry>
-               <entry testId="sm514" failType="xFail"> problem configuring </entry>
-               <entry testId="bl514" failType="xFail"> problem configuring </entry>
-               <entry testId="sm8Z3" failType="xFail"> clm stand-alone can no longer work </entry>
-               <entry testId="bl8Z3" failType="xFail"> clm stand-alone can no longer work </entry>
-            </compare>
-         </IBM>
-      </bluefire>
       <mirage>
       </mirage>
       <lynx>
@@ -62,24 +46,6 @@
    </clmInteractive>
 
    <clmBatch> 
-      <bluefire>
-         <IBM>
-            <compare>
-               <entry testId="smW51" failType="xFail"> Ignore.  Will be moved to CESM tests. </entry>
-               <entry testId="erW51" failType="xFail"> Ignore.  Will be moved to CESM tests. </entry>
-               <entry testId="brW51" failType="xFail"> Ignore.  Will be moved to CESM tests. </entry>
-               <entry testId="blW51" failType="xFail"> Ignore.  Will be moved to CESM tests. </entry>
-               <entry testId="smU61" failType="xFail"> Failing for long time.  endrun initiated from  CNBalanceCheckMod.F90. </entry>
-               <entry testId="erU61" failType="xFail"> Failing for long time.  __cnbalancecheckmod_NMOD_cbalancecheck. </entry>
-               <entry testId="brU61" failType="xFail"> Failing for long time.  Fail because erU61 fails. </entry>
-               <entry testId="blU61" failType="xFail"> Failing for long time.  Fail because erU61 fails. </entry>
-               <entry testId="smCI1" failType="xFail"> Have been failing for a long time . </entry>
-               <entry testId="erCI1" failType="xFail"> Have been failing for a long time. </entry>
-               <entry testId="brCI1" failType="xFail"> Have been failing for a long time. </entry>
-               <entry testId="blCI1" failType="xFail"> Have been failing for a long time. </entry>
-            </compare>
-         </IBM>
-      </bluefire>
       <mirage>
       </mirage>
       <lynx>
@@ -93,91 +59,108 @@
    </clmBatch>
 
    <test_system_interactive> 
-      <bluefire>
-         <IBM>
-              <entry testId="ERS_D_P1x64_Mmpi-serial.f19_g16.I_1850-2000_VOC_SNCRFRC_CN" failType="RUN">Initial simulation fails</entry>
-              <entry testId="ERS_Ln48_D_P1x64_Mmpi-serial.f45_g37.I_2000_VOC"            failType="RUN">Initial simulation fails</entry>
-              <entry testId="ERS_Ln48_D_P1x64_Mmpi-serial.f19_g16.I_2000_GLCMECPD"       failType="FAIL">History files are different</entry>
-              <entry testId="PET_D_P1x64_Mmpi-serial.f45_g37.I_2000_VOC"                 failType="FAIL">Initial simulation fails</entry>
-              <entry testId="ERS_Ln48_D_P1x64.f45_g37.I_2000_VOC"            failType="RUN">Initial simulation fails</entry>
-              <entry testId="ERS_Ln48_D_P1x64.f19_g16.I_2000_GLCMECPD"       failType="FAIL">History files are different on restart (known problem
               restarting mid-day with _GLC: bug 1557)</entry>
-              <entry testId="PET_D_P1x64.f45_g37.I_2000_VOC"                 failType="FAIL">Initial simulation fails</entry>
-              <entry testId="ERS48s_D.f09_g16.ICNEXSPIN"                     failType="CFAIL">build error?</entry>
-         </IBM>
-      </bluefire>
       <lynx>
          <pgi>
-              <entry testId="ERS_Ld211.1x1_camdenNJ.I_2000_VOC"              failType="CFAIL">????</entry>
          </pgi>
          <intel>
          </intel>
       </lynx>
       <frankfurt>
          <intel>
-              <entry testId="ERS_Ln48_D_P1x16_Mmpi-serial.f10_f10.ICNCROP"   failType="FAIL">????</entry>
          </intel>
       </frankfurt>
       <yellowstone>
           <intel>
-              <entry testId="ERS_D_P1x16_Mmpi-serial.f19_g16.I_1850-2000_VOC_SNCRFRC_CN"   failType="RUN" >Initial simulation fails</entry>
-              <entry testId="ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_VOC_SNCRFRC_CN"       failType="RUN" >Initial simulation fails case name too
               long</entry>
-              <entry testId="ERS_Ln48_D_P1x16_Mmpi-serial.f19_g16.I_2000_GLCMECPD"         failType="FAIL">History files are different on restart (known
               problem restarting mid-day with _GLC: bug 1557)</entry>
+              <entry testId="ERS_Ld211_Mmpi-serial.1x1_camdenNJ.ICLM45VOC"                 failType="RUN" ></entry>
+              <entry testId="ERS_D_P1x1_Mmpi-serial.f19_g16.ICLM45GLCMEC"                  failType="FAIL" ></entry>
+              <entry testId="PET_D_P1x1_Mmpi-serial.f45_g37.ICLM45VOC"                     failType="TFAIL" ></entry>
+              <entry testId="ERS_D_Mmpi-serial.1x1_asphaltjungleNJ.ICLM45VOC"              failType="RUN"   ></entry>
+              <entry testId="ERS_Ld211_Mmpi-serial.1x1_brazilICLM45VSCN"                   failType="TFAIL" ></entry>
+              <entry testId="ERS_Ln48_D_Mmpi-serial.f10_f10.I_2000_CLM45_CN"               failType="RUN"   ></entry>
+              <entry testId="ERI_Mmpi-serial.f10_f10.I_2000_CLM45_CN4Me"                   failType="FAIL"  ></entry>
+              <entry testId="ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_VOC_SNCRFRC_CN"       failType="RUN" ></entry>
+              <entry testId="ERS_D_P1x16_Mmpi-serial.f19_g16.I_2000_GLCMECP"               failType="RUN" ></entry>
           </intel>
       </yellowstone>
    </test_system_interactive> 
 
    <test_system_batch> 
-      <bluefire>
-         <IBM>
-              <entry testId="ERS_D_P96x32.T62_g37.I_2000"             failType="SFAIL">T62 not working</entry>
-              <entry testId="ERS_Ld211_D_P112x2.f10_f10.ICNCROP"      failType="RUN">Dies early with a floating point trap</entry>
-              <!-- SPM work out a way to get xFail for a specific compare test -->
-              <entry testId="ERS_Ld211_P192x2.f19_g16.I_2000_CNDV_CROP.*.compare_hist"      failType="RUN">Baseline comp. test will always fail</entry>
-              <entry testId="ERS_Ln48_D.f09_g16.ICNEXSPIN"            failType="CFAIL">build error?</entry>
-         </IBM>
-      </bluefire>
       <lynx>
          <pgi>
               <entry testId="ERS_Ln48_P96x2.f19_g16.I_2000_VOC_SNCRFRC_CN_GLCMECPD" failType="FAIL">History files are different on restart (known problem
restarting mid-day with _GLC: bug 1557)</entry>
          </pgi>
       </lynx>
+      <frankfurt>
+         <intel>
+         </intel>
+      </frankfurt>
       <yellowstone>
           <intel>
               <entry testId="ERS_Ld211_D_P112x2.f10_f10.ICNCROP"      failType="RUN" >History files are different on restart (known problem restarting
mid-day with _GLC: bug 1557)</entry>
+              <entry testId="SMS_Ln48_D.f09_g16.ICLM45CNEXSPIN"                  failType="FAIL"></entry>
+              <entry testId="ERS_D.f19_g16.I_1850_CLM45_CN4Me_EADSPIN"           failType="FAIL"></entry>
+              <entry testId="SMS_Ln48_D.f10_f10.I_2000_CLM45CN4Me.oldhyd"        failType="TFAIL"></entry>
+              <entry testId="SMS_Ln48_D.f10_f10.I_2000_CLM45CN4Me.anoxia_wtsat"  failType="TFAIL"></entry>
+              <entry testId="SMS_Ln48_D.f10_f10.I_2000_CLM45CN4Me.ch4_set2_ciso" failType="TFAIL"></entry>
+              <entry testId="SMS_Ln48_D.f10_f10.I_2000_CLM45CN4Me.ch4_set2_pftr" failType="TFAIL"></entry>
+              <entry testId="SMS_Ln48_D.f10_f10.I_2000_CLM45CN4Me.ch4_set2_pftr" failType="TFAIL"></entry>
+              <entry testId="ERS_D.f10_f10.I_2000_CLM45CN4MeNoVSoil.rootlit"     failType="TFAIL"></entry>
+              <entry testId="ERI_D.f10_f10.I_2000_CLM45CN4M.vrtlay"              failType="TFAIL"></entry>
+              <entry testId="PET_D_P1x32.ne30_g16.ICN"                           failType="SFAIL"></entry>
+              <entry testId="ERS_Ld211_D_P112x1.f10_f10.ICNCROP"                 failType="TFAIL"></entry>
           </intel>
       </yellowstone>
-   <test_system_batch> 
+   </test_system_batch> 
   
    <cesm> 
-      <bluefire>
-         <IBM>
+      <IcompsetTests>
+         <yellowstone>
+            <intel>
               <entry testId="SBN.1x1_tropicAtl.I20TR"        failType="SFAIL">missing datasets</entry>
               <entry testId="SBN.ne16_g16.I20TR"             failType="TFAIL">missing datasets</entry>
-              <entry testId="SBN.ne60_g16.I20TR"             failType="TFAIL">missing datasets</entry>
-         </IBM>
-      </bluefire>
+               <entry testId="SBN.ne60_g16.I20TR"       failType="SFAIL">missing datasets</entry>
+               <entry testId="SBN.ne240_g16.I1850"      failType="FAIL" >missing 0.1 mapping dataset (for RTM at R01)</entry>
+            </intel>
+            <pgi>
+            </pgi>
+         </yellowstone>
+      </IcompsetTests>
+      <auxTests>
       <yellowstone>
+            <intel>
+               <entry testId="PET_PT.f19_g16.I1850CN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
+               <entry testId="ERB.ne30_g16.I_1948-2004"  failType="FAIL" >Restart difference</entry>
+               <entry testId="ERS_Lm3.f19_g16.IGRCP60CN" failType="FAIL" >Soil balance error on restart</entry>
+               <entry testId="PET_PT.f10_f10.I20TRCN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
+
+               <entry testId="PET_PT.f19_g16.I1850CLM45CN"    failType="TFAIL">scripts issue with ocean not threaded</entry>
+               <entry testId="ERS_E.f19_g16.ICLM451850"       failType="TFAIL">bad compset name</entry>
+               <entry testId="ERS_D.f19_g16.IGRCP26CLM45CN"   failType="RUN"  >surfdata and pftdyn file mismatched</entry>
+               <entry testId="ERS_Lm3.f19_g16.IGRCP60CLM45CN" failType="RUN"  >Soil balance error on restart</entry>
+               <entry testId="PET_PT.f10_f10.I20TRCLM45CN"    failType="TFAIL">scripts issue component not threaded</entry>
+               <entry testId="SMS.f19_g16.IRCP45CLM45CN"      failType="SFAIL">missing finidat file</entry>
+               <entry testId="ERS_D.f19_g16.IRCP85CLM45CN"    failType="SFAIL">missing finidat file</entry>
+            </intel>
          <pgi>
-              <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CN"    failType="CFAIL">????</entry>
-              <entry testId="SMS.1x1_numaIA.ICN_CROP"             failType="TFAIL">????</entry>
+               <entry testId="SMS_RLB.f45_f45.I"                 failType="cFAIL">problem building with mpi-serial with pgi compiler</entry>
+               <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CN"  failType="cFAIL">missing LAPACK symbol dgbsv</entry>
+               <entry testId="PET_PT.f19_g16.I1850"              failType="TFAIL">scripts issue with ocean not threaded</entry>
+               <entry testId="ERI.f19_g16.IG1850"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
+               <entry testId="SMS.T31_g37.IG4804"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
+               <entry testId="SMS.1x1_numaIA.ICN_CROP"           failType="TFAIL">Bad compset name: ICNCROP</entry>
+               <entry testId="PET_PT.f10_f10.I20TRCN"            failType="TFAIL">scripts issue with ocean not threaded</entry>
+
+               <entry testId="SMS_RLB.f45_f45.ICLM45"                 failType="cFAIL">problem building with mpi-serial with pgi compiler</entry>
+               <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CLM45_CN" failType="cFAIL">missing LAPACK symbol dgbsv</entry>
+               <entry testId="ERS.f19_g16.ICLM45CNCROP"               failType="cFAIL">missing LAPACK symbol dgbsv</entry>
+               <entry testId="PET_PT.f19_g16.ICLM451850"              failType="TFAIL">scripts issue with ocean not threaded</entry>
+               <entry testId="ERI.f19_g16.IG1850CLM45"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
+               <entry testId="SMS.T31_g37.IG4804CLM45"                failType="CFAIL">Need LAPACK for PGI (dgbsv)</entry>
+               <entry testId="SMS.1x1_numaIA.ICLM45CN_CROP"           failType="TFAIL">Bad compset name: ICNCROP</entry>
+               <entry testId="PET_PT.f10_f10.I20TRCLM45CN"            failType="TFAIL">scripts issue with ocean not threaded</entry>
          </pgi>
       </yellowstone>

Machines testing ran on:  (Tests in priority order)

  build-namelist unit tester:   yes

  CESM test lists:

    yellowstone/CESM:              yes
    yellowstone/CESM/allIcompsets: yes

  test_system testing:

    yellowstone batch:          yes
    frankfurt interactive:      yes
    yellowstone interactive:    yes
    frankfurt batch:            yes

  test_driver.sh tools testing:

    yellowstone interactive:    yes
    frankfurt interactive:      yes

  yellowstone/PTCLM:            no (PTCLM still doesn't quite work)

CLM tag used for the baseline comparison tests if applicable: clm4_0 to clm4_0_59 clm4_5 to clm45sci15_clm4_0_58

Changes answers relative to baseline: Yes, for some resolutions for clm4_0 -- because of new default initial condition files in compsets

IF tag changes answers relative to baseline comparison the
following should be filled in:

    For clm4_0...
    New initial conditions for: f09/f19-I_2000, f09/f19-I_1850, f09/f19-I_1850-2000
                                f09/f19-I_1948-2004, f09/f19-I_1850_SPINUP_3HrWx
                                f09/f19-I_RCP

===============================================================
===============================================================
Tag name:  clm4_0_59
Originator(s):  mvertens (Mariana Vertenstein) / erik
Date: Thu Dec 20 09:24:16 MST 2012
One-line Summary: restructure clmtype and all pointer references, new directory structure
	   
Purpose of changes: 
	Reststucture trunk directory tree to prepare for incorporation of clm4_5
	Move all cpp-ifdefs to clm_varctl and introduce new logical variables in their place
	Restructure clmtype to remove nesting - and also redo all the pointer references 
	All together the code can then move to having no cpp-ifdefs

Test level of tag: 
	std-test

Bugs fixed (include bugzilla ID): 
	None

Known bugs (include bugzilla ID):
	http://bugs.cgd.ucar.edu/

Known Limitations:
        147 (mkgriddata can't straddle over Greenwich)
        025 (SCM mode can NOT use a global finidat file)
        017 (SCM mode can NOT restart)
        896 (T62 mode does not work)
        701 (svn keyword)
        452 (Problem with support of soil-colors != 8 or 20)
	1598 (non-repeatable results when running with CNDV and/or CROP)   

	Threading seems to work for all cases where CROP and/or CNDV 
	is not on
	
Describe any changes made to build system: 
	New directory structure

Describe any changes made to the namelist: 
	variables use_c13 and use_c14 added to namelist_definition.xml file

List any changes to the defaults for the boundary datasets: 
	No

Describe any substantial timing or memory changes: 
	Currently more memory for compsets without CN, etc - less memory 
	when CN, CNDV, etc are activated. This will be fixed in clm4_0_59.

Code reviewed by: 
	self (proposed changes reviewed by Erik, Bill and Stefan)

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: 
	src/biogeochem -> src/clm4_0/biogeochem
	src/biogeophys -> src/clm4_0/biogeophys
	src/main       -> src/clm4_0/main
	

List all files added and what they do: 
	None
	
List all existing files that have been modified, and describe the changes:

	All files in src/clm4_0 have been modified relative to their
	original versions to remove the cpp-ifdefs and to adjust pointer
	references to new names
	
	M       src/cpl_share/clm_cpl_indices.F90
	M       src/cpl_mct/lnd_comp_mct.F90
	M       src/cpl_esmf/lnd_comp_esmf.F90
	
	M       bld/configure
	M       bld/namelist_files/namelist_definition.xml
	M       test/system/yellowstone.interactive
	M       test/system/yellowstone.batch

        Add in 360x720_cruncep datasets (from Erik).

        M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl --- correct number of tests
        M       models/lnd/clm/bld/namelist_files/namelist_definition.xml
        M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
        M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
        M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml

Machines testing ran on:

  build-namelist unit tester:   yes

  CESM test lists:

    yellowstone/CESM:              yes
    yellowstone/CESM/allIcompsets: no

  PTCLM	
     yellowstone:               no

  test_system testing:

    yellowstone batch:          yes
    yellowstone interactive:    no
    frankfurt batch:            no
    frankfurt interactive:      yes

  test_driver.sh tools testing:

    yellowstone interactive:    no
    frankfurt interactive:      no

Difference in expected fails from testing:
	
+ Numbers change for build-namelist unit tests
       <frankfurt>
          <intel>
-              <entry testId="ERS_Mmpi-serial.1x1_mexicocityMEX.I1PT"         failType="FAIL">????</entry>
          </intel>
       </frankfurt>
       <yellowstone>
          <pgi>
-              <entry testId="SMS_RLB.f45_f45.I"                   failType="CFAIL">????</entry>
-              <entry testId="PST.f19_g16.ICNCROP"                 failType="TFAIL">????</entry>
-              <entry testId="PST.f10_f10.I20TRCN"                 failType="TFAIL">????</entry>
          </pgi>
-         <intel>
-              <entry testId="PST.f19_g16.I1850CN"                 failType="TFAIL">????</entry>
-         </intel>
       </yellowstone>
	
CLM tag used for the baseline comparison tests if applicable: 
	clm4_0_58

Changes answers relative to baseline: 
	no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_58
Originator(s):  erik (Erik Kluzek)
Date: Fri Dec 14 05:13:33 MST 2012
One-line Summary: Uncomment us20 and wus12 datasets, more testing to: bluefire, yellowstone, frankfurt

Purpose of changes:

Uncomment WRF grids in namelist xml files. Fix mkprocdata bug on lynx.

Test level of tag: std-test

Bugs fixed (include bugzilla ID):
                                1601 (mkprocdata seg faults on lynx)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: No

Describe any changes made to the namelist: No

List any changes to the defaults for the boundary datasets: Yes
   uncomment out wus12 and us20 WRF datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, Machines, csm_share

   scripts    to: scripts4_121207b
   Machines   to: Machines_121207
   csm_share  to: share3_121204a

List all files eliminated: None

List all files added and what they do: Add frankfurt test lists

>>>>>>>>>>>>>>>> Tests for frankfurt
   A  models/lnd/clm/test/system/frankfurt.interactive
   A  models/lnd/clm/test/system/frankfurt.batch

List all existing files that have been modified, and describe the changes:

   M  models/lnd/clm/test/system/test_system
   M  models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml

   M  models/lnd/clm/test/system/bluefire.batch
   M  models/lnd/clm/test/system/yellowstone.batch
   M  models/lnd/clm/test/system/nl_files/mkprocdata_ne30_to_f19_I2000

>>>>>>>>>>>>>>>> Fix mkprocdata and allow it to run from a different exe directory for testing
   M  models/lnd/clm/tools/mkprocdata_map/src/mkprocdata_map.F90
   M  models/lnd/clm/tools/mkprocdata_map/src/gridmapMod.F90
   M  models/lnd/clm/tools/mkprocdata_map/src/fmain.F90
   M  models/lnd/clm/tools/mkprocdata_map/src/shr_file_mod.F90
   M  models/lnd/clm/tools/mkprocdata_map/src/fileutils.F90
   M  models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_all
   M  models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_wrap

>>>>>>>>>>>>>>>> Fix bug in unit-tester
   M  models/lnd/clm/bld/unit_testers/build-namelist_test.pl

>>>>>>>>>>>>>>>> Uncomment WRF files
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

Machines testing ran on:

  build-namelist unit tester:   yes

  CESM test lists:

    bluefire/CESM:              yes
    bluefire/CESM/allIcompsets: yes
    lynx/CESM:                  no

  bluefire/PTCLM:               no

  test_system testing:

    bluefire batch:             yes
    bluefire interactive:       yes
    yellowstone batch:          yes
    yellowstone interactive:    yes
    frankfurt batch:            yes
    frankfurt interactive:      yes

  test_driver.sh tools testing:

    bluefire interactive:       yes
    lynx interactive:           yes
    yellowstone interactive:    yes
    frankfurt interactive:      yes

Difference in expected fails from testing:

Index: expectedClmTestFails.xml
===================================================================
--- expectedClmTestFails.xml  (revision 42691)
+++ expectedClmTestFails.xml  (working copy)
@@ -5,12 +5,12 @@
       <bluefire>
          <IBM>
             <compare>
-               <!--N/A.  All current FAILs from relase tags should pass next round   -->
             </compare>
             <generate>
-               <entry testId="180" failType="xFail"> ne16 missing finidat file for 1850</entry>
-               <entry testId="183" failType="xFail"> ne60 missing finidat file for 1850</entry>
-               <entry testId="192" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
+               <entry testId="138" failType="xFail"> missing datasets for us20 </entry>
+               <entry testId="186" failType="xFail"> ne16 missing finidat file for 1850</entry>
+               <entry testId="189" failType="xFail"> ne60 missing finidat file for 1850</entry>
+               <entry testId="198" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
             </generate>
          </IBM>
       </bluefire>
@@ -24,6 +24,17 @@
             </compare>
          </IBM>
       </janus>
+      <yellowstone>
+            <compare>
+            </compare>
+            <generate>
+               <entry testId="134" failType="xFail"> missing datasets for wus12 </entry>
+               <entry testId="137" failType="xFail"> missing datasets for us20 </entry>
+               <entry testId="186" failType="xFail"> ne16 missing finidat file for 1850</entry>
+               <entry testId="189" failType="xFail"> ne60 missing finidat file for 1850</entry>
+               <entry testId="198" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
+            </generate>
+      </yellowstone>
    </namelistTest>
 
    <clmInteractive> 
@@ -101,6 +112,19 @@
          <intel>
          </intel>
       </lynx>
+      <frankfurt>
+         <intel>
+              <entry testId="ERS_Ln48_D_P1x16_Mmpi-serial.f10_f10.ICNCROP"   failType="FAIL">????</entry>
+              <entry testId="ERS_Mmpi-serial.1x1_mexicocityMEX.I1PT"         failType="FAIL">????</entry>
+         </intel>
+      </frankfurt>
+      <yellowstone>
+          <intel>
+              <entry testId="ERS_D_P1x16_Mmpi-serial.f19_g16.I_1850-2000_VOC_SNCRFRC_CN"   failType="RUN" >Initial simulation fails</entry>
+              <entry testId="ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_VOC_SNCRFRC_CN"       failType="RUN" >Initial simulation fails case name too
long</entry>
+              <entry testId="ERS_Ln48_D_P1x16_Mmpi-serial.f19_g16.I_2000_GLCMECPD"         failType="FAIL">History files are different on restart (known
problem restarting mid-day with _GLC: bug 1557)</entry>
+          </intel>
+      </yellowstone>
    </test_system_interactive> 
 
    <test_system_batch> 
@@ -118,6 +142,11 @@
               <entry testId="ERS_Ln48_P96x2.f19_g16.I_2000_VOC_SNCRFRC_CN_GLCMECPD" failType="FAIL">History files are different on restart (known problem
restarting mid-day with _GLC: bug 1557)</entry>
          </pgi>
       </lynx>
+      <yellowstone>
+          <intel>
+              <entry testId="ERS_Ld211_D_P112x2.f10_f10.ICNCROP"      failType="RUN" >History files are different on restart (known problem restarting
mid-day with _GLC: bug 1557)</entry>
+          </intel>
+      </yellowstone>
    <test_system_batch> 
   
    <cesm> 
@@ -128,6 +157,18 @@
               <entry testId="SBN.ne60_g16.I20TR"             failType="TFAIL">missing datasets</entry>
          </IBM>
       </bluefire>
+      <yellowstone>
+         <pgi>
+              <entry testId="SMS_RLB.f45_f45.I"                   failType="CFAIL">????</entry>
+              <entry testId="ERS_D.hcru_hcru.I_2000_CRUFRC_CN"    failType="CFAIL">????</entry>
+              <entry testId="PST.f19_g16.ICNCROP"                 failType="TFAIL">????</entry>
+              <entry testId="SMS.1x1_numaIA.ICN_CROP"             failType="TFAIL">????</entry>
+              <entry testId="PST.f10_f10.I20TRCN"                 failType="TFAIL">????</entry>
+         </pgi>
+         <intel>
+              <entry testId="PST.f19_g16.I1850CN"                 failType="TFAIL">????</entry>
+         </intel>
+      </yellowstone>
    </cesm>
    <cesm> 
       <bluefire>

CLM tag used for the baseline comparison tests if applicable: clm4_0_58

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
===============================================================
Tag name:  clm4_0_57
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date: Fri Nov 30 14:20:13 MST 2012
One-line Summary: update trunk with release mods, some rtm fixes

Purpose of changes:

CLM:  Merge the changes Erik made in the release branch tags to trunk.    
RTM:  Add effective velocity as a namelist variable.
		Change rdirc file.
		Add RTM tests to test_system batch CLM tests.
		Clean up logic in RtmFloodInit so R01 works without SLOPE and MAX_VOLR.
		Change rdirc file to rdirc_0.5x0.5_simyr2000_slpmxvl_c120717.nc which is 
			correct and contains FLOOD and MAX_VOLR.  This fixes an error in choice
			of rdirc file from clm4_0_55 / rtm1_0_10

Requirements for tag:

Test level of tag: std-test

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: N/A

Describe any changes made to the namelist: N/A

List any changes to the defaults for the boundary datasets:  Changed RTM rdirc file.

Describe any substantial timing or memory changes: None Known

Code reviewed by:  Erik, Tony, Mariana (in progress)

List any svn externals directories updated (csm_share, mct, etc.):
	- rtm1_0_13
	- scripts4_121127
	- Machines_121126
	- drvseq4_2_13
	- datm8_121123
	- cism1_121114

List all files eliminated:

	- Deleted during release tag cleanup
D       models/lnd/clm/test/system/TCB.sh
D       models/lnd/clm/test/system/tests_pretag_bluefire
D       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
D       models/lnd/clm/test/system/config_files/17p_cndvsc_m
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_m
D       models/lnd/clm/test/system/config_files/17p_cndvsc_o
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_o
D       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
D       models/lnd/clm/test/system/config_files/_persc_dh
D       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
D       models/lnd/clm/test/system/config_files/17p_cndvsc_s
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_s
D       models/lnd/clm/test/system/config_files/_persc_dm
D       models/lnd/clm/test/system/config_files/_persc_do
D       models/lnd/clm/test/system/config_files/_scnv_ds
D       models/lnd/clm/test/system/config_files/_persc_ds
D       models/lnd/clm/test/system/config_files/17p_sc_dh
D       models/lnd/clm/test/system/config_files/17p_sc_dm
D       models/lnd/clm/test/system/config_files/17p_sc_do
D       models/lnd/clm/test/system/config_files/_sc_dh
D       models/lnd/clm/test/system/config_files/17p_sc_ds
D       models/lnd/clm/test/system/config_files/_sc_dm
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_h
D       models/lnd/clm/test/system/config_files/17p_cnsc_h
D       models/lnd/clm/test/system/config_files/_sc_do
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_dh
D       models/lnd/clm/test/system/config_files/17p_cnsc_dh
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_m
D       models/lnd/clm/test/system/config_files/17p_cnsc_m
D       models/lnd/clm/test/system/config_files/_sc_ds
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_o
D       models/lnd/clm/test/system/config_files/17p_cnsc_o
D       models/lnd/clm/test/system/config_files/17p_cnsc_dm
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_dm
D       models/lnd/clm/test/system/config_files/17p_cnsc_do
D       models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_do
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_s
D       models/lnd/clm/test/system/config_files/17p_sc_h
D       models/lnd/clm/test/system/config_files/17p_cnsc_ds
D       models/lnd/clm/test/system/config_files/21p_cncrpsc_ds
D       models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
D       models/lnd/clm/test/system/config_files/_mexsc_ds
D       models/lnd/clm/test/system/config_files/17p_cnc13sc_do
D       models/lnd/clm/test/system/config_files/17p_sc_m
D       models/lnd/clm/test/system/config_files/17p_sc_o
D       models/lnd/clm/test/system/config_files/_sc_h
D       models/lnd/clm/test/system/config_files/17p_cnnfsc_dh
D       models/lnd/clm/test/system/config_files/_sc_m
D       models/lnd/clm/test/system/config_files/17p_cnnfsc_dm
D       models/lnd/clm/test/system/config_files/_sc_o
D       models/lnd/clm/test/system/config_files/17p_cndvsc_dh
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dh
D       models/lnd/clm/test/system/config_files/17p_cnnfsc_do
D       models/lnd/clm/test/system/config_files/_sc_s
D       models/lnd/clm/test/system/config_files/17p_cndvsc_dm
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dm
D       models/lnd/clm/test/system/config_files/17p_cndvsc_do
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_do
D       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_ds
D       models/lnd/clm/test/system/config_files/_vansc_ds
D       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
D       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
D       models/lnd/clm/test/system/config_files/_nil3sc_dh
D       models/lnd/clm/test/system/config_files/_nil3sc_dm
D       models/lnd/clm/test/system/config_files/_scsnf_dh
D       models/lnd/clm/test/system/config_files/_scsnf_dm
D       models/lnd/clm/test/system/config_files/_scsnf_do
D       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_h
D       models/lnd/clm/test/system/config_files/17p_cndvsc_h
D       models/lnd/clm/test/system/TBL.sh
D       models/lnd/clm/test/system/tests_pretag_edinburgh
D       models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
D       models/lnd/clm/test/system/TBR.sh
D       models/lnd/clm/test/system/TER.sh
D       models/lnd/clm/test/system/mknamelist
D       models/lnd/clm/test/system/tests_posttag_hybrid_regression
D       models/lnd/clm/test/system/tests_posttag_purempi_regression
D       models/lnd/clm/test/system/TRP.sh
D       models/lnd/clm/test/system/tests_pretag_jaguarpf
D       models/lnd/clm/test/system/TSMrst_tools.sh
D       models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
D       models/lnd/clm/test/system/nl_files/nl_per
D       models/lnd/clm/test/system/nl_files/nl_voc
D       models/lnd/clm/test/system/nl_files/clm_std
D       models/lnd/clm/test/system/nl_files/multi_inst
D       models/lnd/clm/test/system/nl_files/multi_inst/multi_inst
D       models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_1
D       models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_2
D       models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_3
D       models/lnd/clm/test/system/nl_files/clm_nortm
D       models/lnd/clm/test/system/nl_files/clm_transient_rcp2.6
D       models/lnd/clm/test/system/nl_files/clm_ndepdyn
D       models/lnd/clm/test/system/nl_files/clm_transient_rcp4.5
D       models/lnd/clm/test/system/nl_files/clm_pftdyn
D       models/lnd/clm/test/system/nl_files/clm_transient_rcp8.5
D       models/lnd/clm/test/system/nl_files/clm_per0
D       models/lnd/clm/test/system/nl_files/nl_ptsmode_ocn
D       models/lnd/clm/test/system/nl_files/nl_urb_br
D       models/lnd/clm/test/system/nl_files/clm_spin
D       models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp6
D       models/lnd/clm/test/system/nl_files/clm_urb1pt
D       models/lnd/clm/test/system/nl_files/nl_urb
D       models/lnd/clm/test/system/nl_files/nl_crcrop
D       models/lnd/clm/test/system/nl_files/clm_per
D       models/lnd/clm/test/system/nl_files/clm_drydep
D       models/lnd/clm/test/system/nl_files/nl_std
D       models/lnd/clm/test/system/nl_files/clm_glcmec
D       models/lnd/clm/test/system/nl_files/clm_transient_rcp6
D       models/lnd/clm/test/system/nl_files/nl_crop
D       models/lnd/clm/test/system/nl_files/clm_usrdat
D       models/lnd/clm/test/system/nl_files/nl_cn_conly
D       models/lnd/clm/test/system/nl_files/clm_stdIgnYr
D       models/lnd/clm/test/system/nl_files/clm_transient_20thC
D       models/lnd/clm/test/system/nl_files/nl_ptsmode
D       models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp2.6
D       models/lnd/clm/test/system/nl_files/clm_irrig
D       models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp4.5
D       models/lnd/clm/test/system/nl_files/nl_lfiles
D       models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp8.5
D       models/lnd/clm/test/system/TSMpergro.sh
D       models/lnd/clm/test/system/TSMcnspinup.sh
D       models/lnd/clm/test/system/TBLrst_tools.sh
D       models/lnd/clm/test/system/CLM_runcmnd.sh
D       models/lnd/clm/test/system/TSM.sh
D       models/lnd/clm/test/system/tests_posttag_lynx
D       models/lnd/clm/tools/mkprocdata_map/camhomme
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/mkprocdata_map.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/gridmapMod.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/Depends
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/domainMod.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/shr_file_mod.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/nanMod.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/Srcfiles
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/Filepath
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/Makefile
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/fileutils.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/src/shr_kind_mod.F90
D       models/lnd/clm/tools/mkprocdata_map/camhomme/mkprocdata_map_in
D       models/lnd/clm/tools/mkprocdata_map/clm/src
D       models/lnd/clm/tools/mkprocdata_map/clm/src/mkprocdata_map.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/gridmapMod.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/constMod.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/fmain.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/shr_file_mod.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/nanMod.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/Mkdepends
D       models/lnd/clm/tools/mkprocdata_map/clm/src/Srcfiles
D       models/lnd/clm/tools/mkprocdata_map/clm/src/Filepath
D       models/lnd/clm/tools/mkprocdata_map/clm/src/Makefile
D       models/lnd/clm/tools/mkprocdata_map/clm/src/fileutils.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/src/shr_kind_mod.F90
D       models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_in
D       models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_all
D       models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_wrap
D       models/lnd/clm/tools/mkprocdata_map/clm/README
D       models/lnd/clm/tools/ncl_scripts/RMSbluefire.dat
D       models/lnd/clm/tools/ncl_scripts/RMSlahey.dat
D       models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl
D       models/lnd/clm/tools/ncl_scripts/RMSjaguar.dat
D       models/lnd/clm/tools/ncl_scripts/RMSintel.dat
D       models/lnd/clm/tools/ncl_scripts/RMSintrepid.dat
D       models/lnd/clm/tools/ncl_scripts/pergroPlot.ncl
D       models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl
D       models/lnd/clm/tools/ncl_scripts/runDepositionRegrid.pl
D       models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl
D       models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl
D       models/lnd/clm/bld/config_files/config_sys_defaults.xml
D       models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl
D       models/lnd/clm/bld/namelist_files/datm-build-namelist
D       models/lnd/clm/bld/namelist_files/checklatsfiles.ncl
D       models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml
D       models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml

List all files added and what they do:

	- Added for RTM testing
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOn/user_nl_rtm
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOn
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmR01/user_nl_rtm
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmR01
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOff/user_nl_rtm
A       models/lnd/clm/test/system/user_nl_dirs/rtm/rtmOff
A       models/lnd/clm/test/system/user_nl_dirs/rtm
	- Added from release tags
A       models/lnd/clm/test/system/yellowstone.interactive
A       models/lnd/clm/test/system/tests_pretag_yellowstone_nompi
A       models/lnd/clm/test/system/nl_files/mkprocdata_ne30_to_f19_I2000
A       models/lnd/clm/test/system/yellowstone.batch
A       models/lnd/clm/tools/mkprocdata_map/clm4054_ne30g16_I2000.clm2.h0.2000-01_c121107.nc
A       models/lnd/clm/tools/mkprocdata_map/map_ne30np4_nomask_to_fv1.9x2.5_nomask_aave_da_c121107.nc
A       models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_functions.bash
A       models/lnd/clm/tools/mkprocdata_map/src/mkprocdata_map.F90
A       models/lnd/clm/tools/mkprocdata_map/src/gridmapMod.F90
A       models/lnd/clm/tools/mkprocdata_map/src/constMod.F90
A       models/lnd/clm/tools/mkprocdata_map/src/Makefile.common
A       models/lnd/clm/tools/mkprocdata_map/src/fmain.F90
A       models/lnd/clm/tools/mkprocdata_map/src/shr_file_mod.F90
A       models/lnd/clm/tools/mkprocdata_map/src/nanMod.F90
A       models/lnd/clm/tools/mkprocdata_map/src/Mkdepends
A       models/lnd/clm/tools/mkprocdata_map/src/Srcfiles
A       models/lnd/clm/tools/mkprocdata_map/src/Filepath
A       models/lnd/clm/tools/mkprocdata_map/src/Makefile
A       models/lnd/clm/tools/mkprocdata_map/src/fileutils.F90
A       models/lnd/clm/tools/mkprocdata_map/src/shr_kind_mod.F90
A       models/lnd/clm/tools/mkprocdata_map/src
A       models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_in
A       models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_all
A       models/lnd/clm/tools/mkprocdata_map/mkprocdata_map_wrap
A       models/lnd/clm/tools/mkprocdata_map/clm4054_f19g16_I2000.clm2.h0.2000-01_c121107.nc
A       models/lnd/clm/tools/mkprocdata_map/README
A       models/lnd/clm/bld/config_query
A       models/lnd/clm/doc/UsersGuide/modelnl/xmldef2html_compsets
A       models/lnd/clm/doc/UsersGuide/modelnl/showinfo.js
A       models/lnd/clm/doc/UsersGuide/modelnl/index.cpp
A       models/lnd/clm/doc/UsersGuide/modelnl/Makefile
A       models/lnd/clm/doc/UsersGuide/modelnl

List all existing files that have been modified, and describe the changes:

 	- put back qflx_snomelt for consistency with older models.  clm4_0_55 mods to the snow
	  balance check otherwise only effect the diagnostic fields errh2osno, snow_source and snow_sinks
M       models/lnd/clm/src/main/histFldsMod.F90
 	- modified for RTM testing
M       config_files/config_CLMtestCompsets.xml
M       bluefire.batch
	- modified during release tag modification
M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
M       models/lnd/clm/test/system/mirage.interactive
M       models/lnd/clm/test/system/test_system
M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
M       models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
M       models/lnd/clm/test/system/config_files/README
M       models/lnd/clm/test/system/README.testnames
M       models/lnd/clm/test/system/tests_posttag_yong
M       models/lnd/clm/test/system/TCBtools.sh
M       models/lnd/clm/test/system/test_driver.sh
M       models/lnd/clm/test/system/lynx.interactive
M       models/lnd/clm/test/system/shortlist.interactive
M       models/lnd/clm/test/system/TSMscript_tools.sh
M       models/lnd/clm/test/system/tests_posttag_mirage
M       models/lnd/clm/test/system/gen_test_table.sh
M       models/lnd/clm/test/system/input_tests_master
M       models/lnd/clm/test/system/README
M       models/lnd/clm/test/system/tests_posttag_nompi_regression
M       models/lnd/clm/test/system/bluefire.interactive
M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh
M       models/lnd/clm/tools/ncl_scripts
M       models/lnd/clm/tools/ncl_scripts/README
M       models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl
M       models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl
M       models/lnd/clm/tools/interpinic
M       models/lnd/clm/tools/mksurfdata_map/src
M       models/lnd/clm/tools/mksurfdata_map/src/mkncdio.F90
M       models/lnd/clm/tools/mksurfdata_map/src/mkutilsMod.F90
M       models/lnd/clm/tools/mksurfdata_map/src/mkdomainMod.F90
M       models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90
M       models/lnd/clm/tools/mksurfdata_map/src/mkgridmapMod.F90
M       models/lnd/clm/tools/mksurfdata_map/mksurfdata_map.namelist
M       models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl
M       models/lnd/clm/tools/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt
M       models/lnd/clm/bld
M       models/lnd/clm/bld/configure
M       models/lnd/clm/bld/queryDefaultNamelist.pl
M       models/lnd/clm/bld/user_nl_clm
M       models/lnd/clm/bld/config_files/config_definition.xsl
M       models/lnd/clm/bld/config_files/config_definition.xml
M       models/lnd/clm/bld/listDefaultNamelist.pl
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
M       models/lnd/clm/bld/build-namelist
M       models/lnd/clm/bld/clm.cpl7.template
M       models/lnd/clm/bld/clm.buildnml.csh
M       models/lnd/clm/bld/README
M       models/lnd/clm/bld/namelist_files/namelist_definition.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults.xsl
M       models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/20thC_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/2000_glacierMEC_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850_glacierMEC_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/glacierMEC_pd.xml
M       models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml
M       models/lnd/clm/doc/UsersGuide/clm_ug.xml
M       models/lnd/clm/doc/UsersGuide/appendix.xml
M       models/lnd/clm/doc/UsersGuide/ptclm.xml
M       models/lnd/clm/doc/Quickstart.userdatasets
M       models/lnd/clm/doc/IMPORTANT_NOTES
M       models/lnd/clm/doc/Quickstart.GUIDE
M       models/lnd/clm/doc/ChangeLog
M       models/lnd/clm/doc/CodeReference/Filepath
M       models/lnd/clm/doc/KnownLimitations
M       models/lnd/clm/doc/ChangeSum
M       models/lnd/clm/doc/KnownBugs
M       models/lnd/clm/doc/README
M       models/lnd/clm/src/biogeochem/DryDepVelocity.F90
M       ChangeLog
M       ChangeSum
M       READM

Machines testing ran on: (in progress)

  build-namelist unit tester:   yes

		- OK.  All FAILs (~78 of them) should pass during the next round.

  CESM test lists:

    bluefire/CESM:              yes

    -Fail due to throuput comparison problems:

		FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.GC.164220.tputcomp.clm4_0_56 
		FAIL  ERS_Lm3.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.164220.tputcomp.clm4_0_56 

	 -Fail due to new and correct rdirc file.  diffs in r2x_Forr_roff & r2x_Forr_ioff
	   These should pass next time around:

		FAIL  ERS_D.f45_g37.I.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  NCK.T31_g37.I.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  PET_PT.f45_g37.I1850.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERI.T31_g37.IG1850.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERH_D.T31_g37.I1850CN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  SMS.T31_g37.IG4804.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  SMS.1x1_mexicocityMEX.I1PT.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERS_Lm3.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERS_Lm3.f19_g16.IGRCP60CN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  PET_PT.f10_f10.I20TRCN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56 
		FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.GC.164220.compare_hist.clm4_0_56

    bluefire/CESM/allIcompsets: yes

		Error in SBN script handling in generate of namelist files so all compare tests are BFAILs.

    lynx/CESM:                  no

  bluefire/PTCLM:               no

  test_system testing:

    bluefire batch:             yes

      4 xFAIL.  The rest that fail now, but should pass the next time around.
	 
	 - Fail due to new and correct rdirc file.  diffs in r2x_Forr_roff & r2x_Forr_ioff
	   These should pass next time around:

		FAIL  ERS_Ld211.f10_f10.ICNADSPIN.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 
		FAIL  ERS_Ln48_D_P64x16.ne30_g16.ICN.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 
		FAIL  PET_D_P1x64.ne30_g16.ICN.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 
		FAIL  ERS_Ld211.f10_f10.I_2000_VOC_CN.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 

	 - Fail due to throughput comparison

		FAIL  ERS_Ld211.f10_f10.ICNADSPIN.bluefire_ibm.GC.164759.tputcomp.clm4_0_56 
		FAIL  ERS_Ld211_P192x2.f19_g16.I_2000_CNDV_CROP.bluefire_ibm.GC.164759.tputcomp.clm4_0_56 

	 - Will pass next time, these tests just introduced

		BFAIL ERS.f19_g16.I_2000_CN_rtmR01.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 
		BFAIL ERS.f19_g16.I_2000_CN_rtmOff.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 
		BFAIL ERS.f19_g16.I_2000_CN_rtmOn.bluefire_ibm.GC.164759.compare_hist.clm4_0_56 

    bluefire interactive:       yes

		- xFAIL or new tests that will pass next time (missing baselines):

		BFAIL ERS_D_Mmpi-serial.CLM_USRDAT.IalaskaCN.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_D_Mmpi-serial.CLM_USRDAT.I_2000_1PTFRC_US-UMB.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_P1x64_Mmpi-serial.f45_g37.I_1850_SPINUP_3HrWx_CN.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ld211_Mmpi-serial.1x1_camdenNJ.I_2000_VOC.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_D_P1x25_Mmpi-serial.5x5_amazon.I_2000.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_D_Mmpi-serial.1x1_asphaltjungleNJ.I_2000_VOC.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_CN.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ln48_D_P1x64_Mmpi-serial.f19_g16.I_2000_GLCMECPD.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ly3_Mmpi-serial.1x1_brazil.I_2000_CNDV.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 
		BFAIL ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000_VOC_SNCRFRC_CN.bluefire_ibm.GC.164744.compare_hist.clm4_0_56 

    lynx/pgi batch:             yes

   - xFAIL or will pass next time (new rdirc file effecting r2x_Forr_roff & r2x_Forr_ioff)

		FAIL  ERS_Ln48_D.f45_g37.I_2000_VOC.lynx_pgi.GC.170117.compare_hist.clm4_0_56 
		FAIL  ERS_Ln48_D.f10_f10.I_2000_CN.lynx_pgi.GC.170117.compare_hist.clm4_0_56 

    lynx/pgi interactive:       yes

		- OK except for new test that will pass next time (missing baselines):

		BFAIL SMS_RLA_Mmpi-serial.f45_f45.I.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL SMS_Mmpi-serial.CLM_USRDAT.I_2000_1PTFRC_US-UMB.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL ERS_Ld211_Mmpi-serial.1x1_brazil.I_2000.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL ERS_Ln48_D_P1x12_Mmpi-serial.f10_f10.ICNCROP.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL ERS_Ld211_Mmpi-serial.1x1_camdenNJ.I_2000_VOC.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL SMS_D_Mmpi-serial.1x1_vancouverCAN.I1PT.lynx_pgi.GC.170039.compare_hist.clm4_0_56 
		BFAIL ERS_Mmpi-serial.1x1_mexicocityMEX.I1PT.lynx_pgi.GC.170039.compare_hist.clm4_0_56 

    lyn/intel mirage testlist:  yes

		- OK except for new tests will pass next time (missing baselines):

		BFAIL ERS_Mmpi-serial.1x1_brazil.I_2000.lynx_intel.GC.095009.compare_hist.clm4_0_56 
		BFAIL ERI_D_Mmpi-serial.1x1_camdenNJ.I_2000_VOC.lynx_intel.GC.095009.compare_hist.clm4_0_56 
		BFAIL ERS_D_Mmpi-serial.1x1_asphaltjungleNJ.I_2000_VOC.lynx_intel.GC.095009.compare_hist.clm4_0_56 
		BFAIL ERS_Ln48_D_P1x12_Mmpi-serial.f10_f10.I_2000_CN.lynx_intel.GC.095009.compare_hist.clm4_0_56 

  test_driver.sh tools testing:

    bluefire interactive:       yes

		test 001 fails due to a bug in mkprocdata_map_wrap 
		test 002 fails due to 001
		test 008 will pass next time

    lynx interactive:           no

CLM tag used for the baseline comparison tests if applicable:

Changes answers relative to baseline:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: modification to default value for effvel in RtmMod.F90
	   changes the values of r2x_Forr_roff & r2x_Forr_ioff.  This causes cprnc to fail.
		This should pass in the next round and matches the value found in CLM4.5.

		-    real(r8),parameter :: effvel(nt_rtm) = 0.7_r8   ! downstream velocity (m/s)
		+    real(r8),parameter :: effvel(nt_rtm) = 1.0_r8   ! downstream velocity (m/s)

    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
		
		with flooding on and new rdirc file, climate may be different.
		with flooding off we have b4b

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: 

   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name:  clm4_0_56
Originator(s):  sacks (Sacks Bill 303-497-1762 CGD)
Date: Tue Nov 27 14:12:42 MST 2012
One-line Summary: fix s2x tsrf, add s2x diagnostics

Purpose of changes:

The s2x tsrf field was not being time-averaged; this is fixed now.

Also, add history fields giving per-column diagnostics of the fields sent
from CLM to GLC.

Requirements for tag: 
  fix bug 1590
  test on bluefire (CESM, int, bat), lynx/pgi (int,bat), mirage-test for lynx_intel

Test level of tag: std-test

Bugs fixed (include bugzilla ID): 1590 (surface temperature sent from CLM to GLC not averaged properly)

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: erik

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

>>>>>>> Do time-averaging of tsrf field; remove calls to create_clm_s2x
M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90

>>>>>>> Call to create_clm_s2x now done here instead of lnd_comp_mct /
>>>>>>> lnd_comp_esmf, so that clm_s2x can be used for hist file writes
>>>>>>> (this is needed so that the fields are updated before the history
>>>>>>> updates happen in the driver)
M       models/lnd/clm/src/main/clm_initializeMod.F90
M       models/lnd/clm/src/main/clm_driver.F90

>>>>>>> Clean up interface to create_clm_s2x
M       models/lnd/clm/src/main/clm_glclnd.F90

>>>>>>> Add capability to output fields sent from CLM to GLC
M       models/lnd/clm/src/main/histFileMod.F90
M       models/lnd/clm/src/main/histFldsMod.F90

>>>>>>> Remove non-existent PMT test
M       models/lnd/clm/test/system/lynx.batch

>>>>>>> Add ERS_Ln48_P96x2.f19_g16.I_2000_VOC_SNCRFRC_CN_GLCMECPD to xFail
>>>>>>> list; add comment
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml

Machines testing ran on:

  build-namelist unit tester:   no

  CESM test lists:

    bluefire/CESM:              yes
        All PASS except:
        FAIL  ERI.T31_g37.IG1850.bluefire_ibm.GC.101712.compare_hist.clm4_0_55 
        FAIL  SMS.T31_g37.IG4804.bluefire_ibm.GC.101712.compare_hist.clm4_0_55 
        FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.GC.101712.compare_hist.clm4_0_55 
        FAIL  ERS_Lm3.f19_g16.IGRCP60CN.bluefire_ibm.GC.101712.compare_hist.clm4_0_55 

        These are expected failures: diffs in topo and tsrf fields
        sent to coupler, and topo diffs are small (RMS ~ 1e-13)

    bluefire/CESM/allIcompsets: no
    lynx/CESM:                  no

  bluefire/PTCLM:               no

  test_system testing:

    bluefire batch:             yes
        All PASS or xFAIL except:
        FAIL  ERS_Ld211_P192x2.f19_g16.I_2000_CNDV_CROP.bluefire_ibm.GC.101753.compare_hist.clm4_0_55

        I believe this is an old problem, not due to the changes here: see bug 1598

    bluefire interactive:       yes
        All PASS or xFAIL

    lynx/pgi batch:             yes
        All PASS or xFAIL

    lynx/pgi interactive:       yes
        All PASS

    lyn/intel mirage testlist:  yes
        All PASS

  test_driver.sh tools testing:

    bluefire interactive:       no
    lynx interactive:           no

CLM tag used for the baseline comparison tests if applicable: clm4_0_55

Difference in expected fails from testing:

    Note: the additional expected fail is NOT a new failure, it is just newly
    documented

  --- models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml      (.../trunk_tags/clm4_0_55)      (revision 42229)
  +++ models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml      (.../branches/fix_glc_tsrf)     (revision 42229)
  @@ -90,7 +90,7 @@
         <bluefire>
            <IBM>
                 <entry testId="ERS_Ln48_D_P1x64.f45_g37.I_2000_VOC"            failType="RUN">Initial simulation fails</entry>
  -              <entry testId="ERS_Ln48_D_P1x64.f19_g16.I_2000_GLCMECPD"       failType="FAIL">History files are different on restart</entry>
  +              <entry testId="ERS_Ln48_D_P1x64.f19_g16.I_2000_GLCMECPD"       failType="FAIL">History files are different on restart (known problem restarting mid-day with _GLC: bug 1557)</entry>
                 <entry testId="PET_D_P1x64.f45_g37.I_2000_VOC"                 failType="FAIL">Initial simulation fails</entry>
                 <entry testId="ERS48s_D.f09_g16.ICNEXSPIN"                     failType="CFAIL">build error?</entry>
            </IBM>
  @@ -113,6 +113,9 @@
            </IBM>
         </bluefire>
         <lynx>
  +         <pgi>
  +              <entry testId="ERS_Ln48_P96x2.f19_g16.I_2000_VOC_SNCRFRC_CN_GLCMECPD" failType="FAIL">History files are different on restart (known problem restarting mid-day with _GLC: bug 1557)</entry>
  +         </pgi>
         </lynx>
      <test_system_batch> 
   

Changes answers relative to baseline: YES: changes tsrf and topo fields
sent to GLC (everything else bfb)

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: glc_mec
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate):
  new climate for tsrf; roundoff-level for topo field sent to GLC. Note that these
  fields are limited to GLC, and don't feed back to the atmosphere at all.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? For topo: examined differences in cprnc output

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: None done

   URL for LMWG diagnostics output used to validate new climate: N/A
	
===============================================================
===============================================================
Tag name:  clm4_0_55
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date: Thu Nov 15 10:17:23 MST 2012
One-line Summary: bring in flooding capability

Purpose of changes:

	Test driver mods from Tony that allows flooding from rof to lnd.  Also
	brought in code from the rtmflood branch to handle the new flooding values.
	Fthresh calculed by reading SLOPE and MAX_VOLR from the rdirc file.  Merged
	in qflx_snow_melt from Swensons perfmafrost sims branch to fix snow
	balance problems in BalanceCheckMod.F90.

Requirements for tag:	

	Test flooding code in CLM by varying fthresh.  Test coupler mods by
	plotting coupler fields.  Look at differences in overall energy balance
	with and without flooding.

Test level of tag: doc, critical, standard, std-test, reg-test

	Critical.  Bluefire CESM/CLM tests and namelist tests only

Bugs fixed (include bugzilla ID):

	N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

	N/A

Describe any changes made to the namelist:

	N/A

List any changes to the defaults for the boundary datasets:

	N/A

Describe any substantial timing or memory changes:

	N/A

Code reviewed by:

	Tony Craig, Sean Swenson

List any svn externals directories updated (csm_share, mct, etc.):

 Updated all of the following (in relation to clm4_0_54)
	scripts4_121105	
	Machines_121106
	drvseq4_2_11
	rtm1_0_10
	cism1_121012
	share3_121025
	pio1_5_7
	mapping_121106

List all files eliminated:

	N/A

List all files added and what they do:

	N/A

List all existing files that have been modified, and describe the changes:

 -the following all for bringing in qflx_snow_melt for new
 -balance check calculation with flooding
 M models/lnd/clm/src/main/clmtypeInitMod.F90
 M models/lnd/clm/src/main/histFldsMod.F90
 M models/lnd/clm/src/main/mkarbinitMod.F90
 M models/lnd/clm/src/biogeophys/BalanceCheckMod.F90
 M models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90
 M models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90
 M models/lnd/clm/src/biogeophys/Hydrology1Mod.F90
 M models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90
 M models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90

 - mods to bring in flooding from rtmflood
 M main/clm_driver.F90
 M main/cmlmtype.F90
 M main/clmtypeInitMod.F90
 M main/histFldsMod.F90
 M main/mkarbinitMod.F90
 M main/clm_varcon.F90

 - fixes for some test problems
 M build-namelist_test.pl
 M clm/bld/configure

Machines testing ran on:

  build-namelist unit tester:   yes

    6 xFails - all OK.

  CESM test lists:

    bluefire/CESM:              yes

		Fail due to new coupler fields:

		new field r2x_Forr_roff
		
		NCK.T31_g37.I.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERS_E.T31_g37.I1850.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERI.T31_g37.IG1850.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERH_D.T31_g37.I1850CN.bluefire_ibm.GC.165350.compare_hist.clm4_0_54
		SMS.T31_g37.IG4804.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.GC.165350.compare_hist.clm4_0_54

		new fields r2x_Forr_roff & r2x_Forr_ioff

		ERS_D.f45_g37.I.bluefire_ibm.GC.165350.compare_hist.clm4_0_54
		PET_PT.f45_g37.I1850.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERB.ne30_g16.I_1948-2004.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERS_Lm3.f19_g16.IGRCP60CN.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		PET_PT.f10_f10.I20TRCN.bluefire_ibm.GC.165350.compare_hist.clm4_0_54
		SMS.f10_f10.IRCP45CN.bluefire_ibm.C.092829.compare_hist.clm4_0_54
		ERS_D.f19_g16.IRCP85CN.bluefire_ibm.GC.165350.compare_hist.clm4_0_54

		Fail due to throughput differences:

		FAIL  ERS_D.f45_g37.I.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERI.T31_g37.IG1850.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERH_D.T31_g37.I1850CN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  SMS.T31_g37.IG4804.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERS_Lm3.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERS_Lm3.f19_g16.IGRCP60CN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54
		FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.GC.165350.tputcomp.clm4_0_54

    bluefire/CESM/allIcompsets: no
    lynx/CESM:                  no

  bluefire/PTCLM:               no

  test_system testing:

    bluefire batch:             no
    bluefire interactive:       no
    lynx/pgi batch:             no
    lynx/pgi interactive:       no
    lyn/intel mirage testlist:  no

  test_driver.sh tools testing:

    bluefire interactive:       no
    lynx interactive:           no

CLM tag used for the baseline comparison tests if applicable:

    us20/wus12 tests were removed so removed from expected fail
    ne16/ne60/1x1_tropicAtl 20thC transient tests fails -- need finidat files 
    New bug: ERS_Ln48_D_P1x64.f19_g16.I_2000_GLCMECPD (bugzilla 1557)
    New testname: ERS_Ln48_D_P1x64.f45_g37.I_2000_VOC (was ERS48s_...)
    New fail: ERS_Ld211.1x1_camdenNJ.I_2000_VOC, ERS_Ld211_D_P112x2.f10_f10.ICNCROP
    Some ERS_L tests now pass that failed previously
    I1PT tests pass now
    Most SBN tests pass now
    Intel single point tests pass now
@@ -5,14 +5,11 @@
       <bluefire>
          <IBM>
             <compare>
-               <entry testId="214" failType="xFail"> us20 not fully implmented </entry>
-               <entry testId="216" failType="xFail"> us20 not fully implmented </entry>
-               <entry testId="221" failType="xFail"> wus12 not fully implmented </entry>
-               <entry testId="222" failType="xFail"> wus12 not fully implmented </entry>
             </compare>
             <generate>
-               <entry testId="141" failType="xFail"> us20  not fully implemented </entry>
-               <entry testId="144" failType="xFail"> wus12 not fully implemented </entry>
+               <entry testId="184" failType="xFail"> ne16 missing finidat file for 1850</entry>
+               <entry testId="187" failType="xFail"> ne60 missing finidat file for 1850</entry>
+               <entry testId="196" failType="xFail"> 1x1_tropicAtl missing finidat file for 1850</entry>
             </generate>
          </IBM>
       </bluefire>
@@ -89,19 +86,17 @@
               <entry testId="ERS_D.CLM_USRDAT.IalaskaCN.bluefire_ibm"        failType="RUN">CESM script issue</entry>
               <entry testId="ERS_D_P1x64.f19_g16.I_1850-2000_VOC_SNCRFRC_CN" failType="FAIL">Restart length different</entry>
               <entry testId="ERS_D.1x1_asphaltjungleNJ.I_2000_VOC"           failType="FAIL">Restart length different</entry>
-              <entry testId="ERS48s_D_P1x64.f45_g37.I_2000_VOC"              failType="RUN">Initial simulation fails</entry>
+              <entry testId="ERS_Ln48_D_P1x64.f45_g37.I_2000_VOC"            failType="RUN">Initial simulation fails</entry>
+              <entry testId="ERS_Ln48_D_P1x64.f19_g16.I_2000_GLCMECPD"       failType="FAIL">History files are different on restart</entry>
               <entry testId="PET_D_P1x64.f45_g37.I_2000_VOC"                 failType="FAIL">Initial simulation fails</entry>
               <entry testId="ERS48s_D.f09_g16.ICNEXSPIN"                     failType="CFAIL">build error?</entry>
          </IBM>
       </bluefire>
       <lynx>
          <pgi>
-              <entry testId="SMS_D.1x1_vancouverCAN.I1PT.lynx_pgi"           failType="SFAIL">datm namelist problem for single-point forcing</entry>
-              <entry testId="ERS.1x1_mexicocityMEX.I1PT.lynx_pg"             failType="SFAIL">datm namelist problem for single-point forcing</entry>
+              <entry testId="ERS_Ld211.1x1_camdenNJ.I_2000_VOC"              failType="CFAIL">????</entry>
          </pgi>
          <intel>
-              <entry testId="ERS.1x1_brazil.I_2000.lynx_intel"                failType="FAIL">CESM script issue</entry>
-              <entry testId="ERS_D.1x1_asphaltjungleNJ.I_2000_VOC.lynx_intel" failType="FAIL">CESM script issue</entry>
          </intel>
       </lynx>
    </test_system_interactive> 
@@ -110,10 +105,8 @@
       <bluefire>
          <IBM>
               <entry testId="ERS_D_P96x32.T62_g37.I_2000"             failType="SFAIL">T62 not working</entry>
-              <entry testId="ERS211d_P192x2.f19_g16.I_2000_CNDV_CROP" failType="SFAIL">ignore_ic_date is incompatable with crop!</entry>
-              <entry testId="ERS48s_D_P64x16.ne30_g16.ICN"            failType="SFAIL">CESM script problem didn't see both files</entry>
-              <entry testId="ERS211d.f10_f10.I_2000_VOC_CN"           failType="SFAIL">CESM script problem didn't see both files</entry>
-              <entry testId="ERS48s_D.f09_g16.ICNEXSPIN"                     failType="CFAIL">build error?</entry>
+              <entry testId="ERS_Ld211_D_P112x2.f10_f10.ICNCROP"      failType="RUN">Dies early with a floating point trap</entry>
+              <entry testId="ERS_Ln48_D.f09_g16.ICNEXSPIN"            failType="CFAIL">build error?</entry>
          </IBM>
       </bluefire>
       <lynx>
@@ -123,22 +116,9 @@
    <cesm> 
       <bluefire>
          <IBM>
-              <entry testId="SBN.1x1_mexicocityMEX.I1PT"     failType="SFAIL">datm namelist issue</entry>
-              <entry testId="SBN.1x1_vancouverCAN.I1PT"      failType="SFAIL">datm namelist issue</entry>
-              <entry testId="SBN.1x1_urbanc_alpha.I1PT"      failType="SFAIL">datm namelist issue</entry>
  277/277 < PASS> <Test Id: 277> <Desc: temp_file.txt different as expected for crop>  
  Successully ran all testing for build-namelist

  Cleanup files created
  rm: lnd_in.default: A file or directory in the path name does not exist.
  rm: temp_file.txt: A file or directory in the path name does not exist.
  # Looks like you failed 4 tests of 277.

%%cesm/clm tests

	mostly OK

  generate : ./cs.status.164019.bluefire

  nohup create_test_suite -input_list bluefire.clm.auxtest -compare clm4_0_50 -baselineroot /glade/proj2/cgd/tss/clm_cesm_baselines -generate clm4_0_51 -testroot /glade/scratch/muszala/tests > & ! bf_out_`date +"%m%d%y"`.lg &
  ID: 203212

  ## Reason: throughput measure off
    FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_50 
    FAIL  ERS_D.f45_g37.I.bluefire_ibm.tputcomp.clm4_0_50 
    FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.tputcomp.clm4_0_50 
    FAIL  SMS.T31_g37.IG4804.bluefire_ibm.tputcomp.clm4_0_50 
  ## baseline diretory already existed, error copying over nc files
    FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.generate.clm4_0_51 
    FAIL  SMS_RLB.f45_f45.I.bluefire_ibm.generate.clm4_0_51 
    FAIL  SMS_ROA.f45_f45.I.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERS_D.f45_g37.I.bluefire_ibm.generate.clm4_0_51 
    FAIL  NCK.T31_g37.I.bluefire_ibm.generate.clm4_0_51 
    FAIL  PST.f45_g37.I1850CN.bluefire_ibm.generate.clm4_0_51 
    FAIL  PET_PT.f45_g37.I1850.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERI.T31_g37.IG1850.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERH_D.T31_g37.I1850CN.bluefire_ibm.generate.clm4_0_51 
    FAIL  SMS.T31_g37.IG4804.bluefire_ibm.generate.clm4_0_51 
    FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.generate.clm4_0_51 
  ## fails due to cprnc time check.  new runs are 11 ts.  in 50 these were 10, I expect these to pass next time around
    FAIL  ERS_D.f45_g37.I.bluefire_ibm.compare_hist.clm4_0_50 
    FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.compare_hist.clm4_0_50 
    FAIL  ERI.T31_g37.IG1850.bluefire_ibm.compare_hist.clm4_0_50 
    FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.compare_hist.clm4_0_50 
    FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.compare_hist.clm4_0_50 
  ## No Lm3 directories created during clm4_0_50 generate...new case, should pass next time around
    SFAIL ERS_Lm3.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.203212 
      ERROR: datm.buildnml.csh failed
    BFAIL ERS_Lm3.f19_g16.IGRCP60CN.bluefire_ibm.compare_hist.clm4_0_50 
      No dir to compare to in tag 50
  ## problems in generate due to scripts for single point 
    SFAIL SMS.1x1_mexicocityMEX.I1PT.bluefire_ibm.GC.203212 
      ERROR: datm.buildnml.csh failed also failed during generate
    BFAIL SMS.1x1_numaIA.ICN.bluefire_ibm.compare_hist.clm4_0_50 
      No dir to compare to in tag 50 - failed during generate

  ## these were failing but passed when rerun - keep an eye on these
    BFAIL ERB.ne30_g16.I_1948-2004.bluefire_ibm.compare_hist.clm4_0_50 
    BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.compare_hist.clm4_0_50 
    BFAIL ERH_D.T31_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_50 

    went to generated ref case
      ./setup -clean
      ./setup
      then build and rerun

    went to generate case
      ./setup -clean
      ./setup 
      clean-build, then build then reurn

   did the same in the CG case for ref and normal case

    After hand running
    ./cs.status.203212.bluefire | grep ERB.f09_g16.I1850SPINUPCN
    PASS  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm 
    PASS  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.memleak
    PASS  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.compare_hist.clm4_0_50 
      see cprnc ts  error above
    PASS  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.memcomp.clm4_0_50 
    PASS  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.tputcomp.clm4_0_50

    This test was rerun with a new testlist
    ./cs.status.203212.bluefire | grep ERB.ne30_g16.I_1948-2004
    PASS  ERB.ne30_g16.I_1948-2004.bluefire_ibm 
    PASS  ERB.ne30_g16.I_1948-2004.bluefire_ibm.memleak
    PASS  ERB.ne30_g16.I_1948-2004.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.compare_hist.clm4_0_50 
      see cprnc ts  error above
    PASS  ERB.ne30_g16.I_1948-2004.bluefire_ibm.memcomp.clm4_0_50 
    FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm.tputcomp.clm4_0_50 
      throughput tol. error

    ./cs.status.141307.bluefire
    PASS  ERH_D.T31_g37.I1850CN.bluefire_ibm 
    PASS  ERH_D.T31_g37.I1850CN.bluefire_ibm.memleak
    PASS  ERH_D.T31_g37.I1850CN.bluefire_ibm.generate.clm4_0_51 
    FAIL  ERH_D.T31_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_50 
      see cprnc ts  error above
    PASS  ERH_D.T31_g37.I1850CN.bluefire_ibm.memcomp.clm4_0_50 
    PASS  ERH_D.T31_g37.I1850CN.bluefire_ibm.tputcomp.clm4_0_50 

%%cesm/clm rof tests
  nohup create_test_suite -input_list bluefire.clmRof.auxtest -compare clm4_0_50 -baselineroot /glade/proj2/cgd/tss/clm_cesm_baselines -generate clm4_0_51 -testroot /glade/scratch/muszala/tests > & ! bf_out_`date +"%m%d%y"`.lg &

	These don't exist anymore, but will be replaced once Tony works out default grid resolutions for r01 and r05

  ID:  091144

  BFAIL SMR.f19_g16.I_2000_CN.bluefire_ibm.compare_hist.clm4_0_50 
    nothing to compare to in clm4_0_50
  BFAIL SMR.f09_g16.I_2000_CN.bluefire_ibm.compare_hist.clm4_0_50 
    nothing to compare to in clm4_0_50
  FAIL  SMR.f05_g16.I_2000_CN.bluefire_ibm 
    larger scipt errors in rof - kills the following two tests outright
      BFAIL SMR.f05_g16.I_2000_CN.bluefire_ibm.generate.clm4_0_51 
      BFAIL SMR.f05_g16.I_2000_CN.bluefire_ibm.compare_hist.clm4_0_50 
  FAIL  SMR.ne120_g16.I_2000_CN.bluefire_ibm.generate.clm4_0_51 
    can't copy in, clm4_0_51 baseline already exists
  BFAIL SMR.ne120_g16.I_2000_CN.bluefire_ibm.compare_hist.clm4_0_50 
    nothing to compare to in clm4_0_50
  RUN   SMR.ne240_g16.I_2000_CN.bluefire_ibm.GC.091144 


%%%%%% testing reporting end

CLM tag used for the baseline comparison tests if applicable:

	clm4_0_50

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_50
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date:  Fri Sep 21 15:13:52 MDT 2012
One-line Summary: testing of clm and new rof component

Purpose of changes:

Run tests on clm for new ROF component.  CLM mods by tcraig to support ROF.

Requirements for tag:

Test level of tag: doc, critical, standard, std-test, reg-test

std-test

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by:

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated:

	Not needed since ROF is now a CLM external
		D       models/lnd/clm/src/main/clm_mct_mod.F90
		D       models/lnd/clm/src/riverroute
		D       models/lnd/clm/src/riverroute/RtmMod.F90
		D       models/lnd/clm/src/riverroute/RunoffMod.F90

List all files added and what they do:

	Fix for some of Erik's new tests
		A       models/lnd/clm/test/system/user_nl_dirs/monthly
		A       models/lnd/clm/test/system/user_nl_dirs/monthly/user_nl_clm
		A       models/lnd/clm/test/system/user_nl_dirs/monthly/user_nl_cpl

List all existing files that have been modified, and describe the changes:

	M      models/lnd/clm/test/system/tests_pretag_jaguarpf
	M      models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
	M      models/lnd/clm/tools/ncl_scripts
	M      models/lnd/clm/tools/interpinic
	M      models/lnd/clm/tools/mksurfdata_map/src
	M      models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl
	M      models/lnd/clm/bld
	M       models/lnd/clm/bld/configure
	M       models/lnd/clm/bld/user_nl_clm
	M       models/lnd/clm/bld/listDefaultNamelist.pl
	M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
	M       models/lnd/clm/bld/build-namelist
	M       models/lnd/clm/bld/clm.buildnml.csh
	M       models/lnd/clm/bld/namelist_files/namelist_definition.xml
	M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
	M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
	M       models/lnd/clm/bld/namelist_files/namelist_defaults.xsl
	M       models/lnd/clm/src/cpl_share/clm_cpl_indices.F90
	M       models/lnd/clm/src/biogeochem/CNDVMod.F90
	M      models/lnd/clm/src/biogeochem/DryDepVelocity.F90
	M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
	M       models/lnd/clm/src/main/spmdGathScatMod.F90
	M       models/lnd/clm/src/main/clm_varpar.F90
	M       models/lnd/clm/src/main/decompInitMod.F90
	M       models/lnd/clm/src/main/clm_initializeMod.F90
	M       models/lnd/clm/src/main/clmtypeInitMod.F90
	M       models/lnd/clm/src/main/histFileMod.F90
	M       models/lnd/clm/src/main/clm_atmlnd.F90
	M       models/lnd/clm/src/main/findHistFields.pl
	M       models/lnd/clm/src/main/restFileMod.F90
	M       models/lnd/clm/src/main/controlMod.F90
	M       models/lnd/clm/src/main/clm_varctl.F90
	M       models/lnd/clm/src/main/clm_driver.F90
	M       models/lnd/clm/src/main/ncdio_pio.F90
	M       models/lnd/clm/src/main/domainMod.F90
	M       models/lnd/clm/src/main/decompMod.F90
	M       models/lnd/clm/src/main/clmtype.F90
	M       models/lnd/clm/src/main/histFldsMod.F90
	M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90
	M       models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90
	M       SVN_EXTERNAL_DIRECTORIES
	M       ChangeLog
	M       ChangeSum
	M       scripts/ccsm_utils/Case.template/config_definition.xml


Machines testing ran on:

%%%%%%%% Test reporting START %%%%%%%%

	Test system is currently in flux so I will simply list all tests that have
	failed and the 8 tests that we need to keep an eye on.  I've included bluefire
	and lynx and pointers to where tests live.

* tests that will pass in next tag due to new features
** denotes an expected fail.
*** any tputcomp tests that fail I'm inclined to ignore also.  These change from test to test.
? or cd a test that will need fixing

BLUEFIRE:

OK ############ run build-namelist tests
>>cd models/lnd/clm/bld/unit_testers
>>./build-namelist_test.pl -compare /glade/scratch/muszala/svn/clm4_0_49/models/lnd/clm/bld/unit_testers -generate -test -csmdata /glade/proj3/cseg/inputdata >&!  out_unit_`date +"%m%d%y"`.lg

 OK...failed tests will pass in next tag

OK ############# run new I case tests
[be1105en /glade/scratch/muszala/svn/clm_trunk/scripts  ]$
create_test_suite -mach bluefire_ibm -input_list allIcompsetsRes.clm.auxtest -nobatch on -nobuild on -compare clm4_0_49 -baselineroot /glade/proj2/cgd/tss/clm_cesm_baselines -generate clm4_0_50 -testroot /glade/scratch/muszala/tests > & ! bf_out_allI_`date +"%m%d%y"`.lg

    165507 - /glade/scratch/muszala/tests
        >>./cs.status.165507.bluefire | grep FAIL
...
** SFAIL SBN.1x1_mexicocityMEX.I1PT.bluefire_ibm.GC.165507
** SFAIL SBN.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.165507
** SFAIL SBN.1x1_urbanc_alpha.I1PT.bluefire_ibm.GC.165507
** TFAIL SBN.1x1_asphalt_jungle.ICNTEST.bluefire_ibm.GC.165507
** TFAIL SBN.T42_g16.I1850.bluefire_ibm.GC.165507
** TFAIL SBN.T31_g16.I1850.bluefire_ibm.GC.165507
** SFAIL SBN.f05_g16.I20TR.bluefire_ibm.GC.165507
** SFAIL SBN.1x1_tropicAtl.I20TR.bluefire_ibm.GC.165507
** SFAIL SBN.ne30_g16.I20TR.bluefire_ibm.GC.165507
** SFAIL SBN.ne120_g16.I20TRCN.bluefire_ibm.GC.165507
** SFAIL SBN.f05_g16.IRCP26CN.bluefire_ibm.GC.165507
** SFAIL SBN.f05_g16.IRCP45CN.bluefire_ibm.GC.165507
** SFAIL SBN.f05_g16.IRCP60CN.bluefire_ibm.GC.165507
** SFAIL SBN.f05_g16.IRCP85CN.bluefire_ibm.GC.165507


OK ############ run clm interactive tools tests
[be1105en /glade/scratch/muszala/svn/clm_trunk/models/lnd/clm/test/system  ]$                                                                   
>>nohup env CLM_SOFF=FALSE ./test_driver.sh -i >&!  bluefire_i_`date +"%m%d%y"`.lg &

    OK:  looking at /glade/scratch/muszala/svn/clm_trunk/models/lnd/clm/test/system/td.951030.status.xFail  - rerun
    clmTests/test-driver.533240 - /glade/scratch/muszala/svn/clm_trunk/models/lnd/clm/test/system/td.533240.status.xFail

############# run old cesm/clm tests out of scripts


[be1105en /glade/scratch/muszala/svn/clm_trunk/scripts  ]$                                                                                                                                                          
>>create_test_suite -input_list bluefire.clm.auxtest -compare clm4_0_49 \
-baselineroot /glade/proj2/cgd/tss/clm_cesm_baselines \
-generate clm4_0_50 \
-testroot /glade/scratch/muszala/tests >&! bf_out_`date +"%m%d%y"`.lg &

    143258
>>cs.status.143258.bluefire | grep -v PASS
...

*** FAIL  SMS.T31_g37.IG4804.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERI.T31_g37.IG1850.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERS_D.f45_g37.I.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  SMS_RLB.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_49
*** FAIL  ERS_D.f45_g37.I.bluefire_ibm.compare_hist.clm4_0_49

* FAIL  NCK.T31_g37.I.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  PST.f45_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  PET_PT.f45_g37.I1850.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  ERI.T31_g37.IG1850.bluefire_ibm.compare_hist.clm4_0_49
? FAIL  ERB.ne30_g16.I_1948-2004.bluefire_ibm
   
    Failing in Generate:
    "/glade/scratch/muszala/svn/clm4_0_49/models/drv/shr/seq_infodata_mod.F90", line 620: 1525-006 The STATUS= specifier in the OPEN          
    statement for
     unit 98 cannot be set to OLD because the file rpointer.drv does not exist.  The program will stop.

    BFAIL ERB.ne30_g16.I_1948-2004.bluefire_ibm.generate.clm4_0_50
    BFAIL ERB.ne30_g16.I_1948-2004.bluefire_ibm.compare_hist.clm4_0_49
? FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm

    Failing in Generate:
     0:"/glade/scratch/muszala/svn/clm4_0_49/models/drv/shr/seq_infodata_mod.F90", line 620: 1525-006 The STATUS= specifier in the OPEN
    statemen     t for unit 98 cannot be set to OLD because the file rpointer.drv does not exist.  The program will stop.

    BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.generate.clm4_0_50
    BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.compare_hist.clm4_0_49
? FAIL  ERH_D.T31_g37.I1850CN.bluefire_ibm

       Failing in Generate:
    "/glade/scratch/muszala/svn/clm4_0_49/models/drv/shr/seq_infodata_mod.F90", line 620: 1525-006 The STATUS= specifier in the OPEN          
    statement for
     unit 98 cannot be set to OLD because the file rpointer.drv does not exist.  The program will stop.

    BFAIL ERH_D.T31_g37.I1850CN.bluefire_ibm.generate.clm4_0_50
    BFAIL ERH_D.T31_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_49

* FAIL  SMS.T31_g37.IG4804.bluefire_ibm.compare_hist.clm4_0_49
** SFAIL SMS.1x1_mexicocityMEX.I1PT.bluefire_ibm.GC.143258
    should be xFAIL : ERROR(build-namelist::new): Required input variable yearfirst was not found
** SFAIL ERP.1x1_vancouverCAN.I1PT.bluefire_ibm.GC.143258
    should be xFAIL : ERROR(build-namelist::new): Required input variable yearfirst was not found
* FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  ERP.f19_g16.IGRCP60CN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  PST.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  PET_PT.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.compare_hist.clm4_0_49
* FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.compare_hist.clm4_0_49
   



############# run new test_system tests

## interactive
>> test_system -i -c clm4_0_49 -g clm4_0_50 >&! bluefire_tsi_`date +"%m%d%y"`.lg &

    161038
>>cs.status.161038.bluefire | grep -v PASS
...
SFAIL ERS_D.CLM_USRDAT.IalaskaCN.bluefire_ibm.GC.161038
* FAIL  ERS_P1x64.f45_g37.I_1850_SPINUP_3HrWx_CN.bluefire_ibm.compare_hist.clm4_0_49
    new fields in cpl history files
* FAIL  ERS_P1x64.f45_g37.I_1850_SPINUP_3HrWx_CN.bluefire_ibm.memcomp.clm4_0_49
    max memory values differ
*** FAIL  ERS_P1x64.f45_g37.I_1850_SPINUP_3HrWx_CN.bluefire_ibm.tputcomp.clm4_0_49
** FAIL  ERS_D_P1x64.f19_g16.I_1850-2000_VOC_SNCRFRC_CN.bluefire_ibm
** BFAIL ERS_D_P1x64.f19_g16.I_1850-2000_VOC_SNCRFRC_CN.bluefire_ibm.generate.clm4_0_50
** BFAIL ERS_D_P1x64.f19_g16.I_1850-2000_VOC_SNCRFRC_CN.bluefire_ibm.compare_hist.clm4_0_49
cd RUN   ERS_D_P1x25.5x5_amazon.I_2000.bluefire_ibm.GC.161038
** RUN   ERS_D.1x1_asphaltjungleNJ.I_2000_VOC.bluefire_ibm.GC.161038
** RUN   ERS48s_D_P1x64.f45_g37.I_2000_VOC.bluefire_ibm.GC.161038
* FAIL  ERS48s_D_P1x64.f19_g16.I_2000_GLCMECPD.bluefire_ibm.compare_hist.clm4_0_49
    new fields in cpl history files
*** FAIL  ERS48s_D_P1x64.f19_g16.I_2000_GLCMECPD.bluefire_ibm.tputcomp.clm4_0_49
** FAIL  PET_D_P1x64.f45_g37.I_2000_VOC.bluefire_ibm


  
## batch
>>test_system -c clm4_0_49 -g clm4_0_50 > & ! bluefire_ts_`date +"%m%d%y"`.lg &

    143420 -- cs.status.143420.bluefire
cs.status.143420.bluefire | grep -v PASS
...
* FAIL  ERS211d.f10_f10.ICNADSPIN.bluefire_ibm.compare_hist.clm4_0_49
    new fields in cpl history files
*** FAIL  ERS211d.f10_f10.ICNADSPIN.bluefire_ibm.tputcomp.clm4_0_49
** CFAIL ERS48s_D.f09_g16.ICNEXSPIN.bluefire_ibm.GC.143420
    this is xFAIL for interactive, should also be listed here
* FAIL  ERS48s_D_P64x16.ne30_g16.ICN.bluefire_ibm.compare_hist.clm4_0_49
    new fields in cpl history files
*** FAIL  ERS48s_D_P64x16.ne30_g16.ICN.bluefire_ibm.tputcomp.clm4_0_49
* FAIL  PET_D_P1x64.ne30_g16.ICN.bluefire_ibm.compare_hist.clm4_0_49
    new fields in cpl history files
? RUN   ERS211d_D_P112x2.f10_f10.ICNCROP.bluefire_ibm.GC.143420
    run failed
** FAIL  ERS211d.f10_f10.I_2000_VOC_CN.bluefire_ibm.compare_hist.clm4_0_49
*** FAIL  ERS211d.f10_f10.I_2000_VOC_CN.bluefire_ibm.tputcomp.clm4_0_49
** RUN   ERS211d_P192x2.f19_g16.I_2000_CNDV_CROP.bluefire_ibm.GC.143420
** SFAIL ERS_D_P96x32.T62_g37.I_2000.bluefire_ibm.GC.143420



#############

LYNX:

############# run new test_system tests

## interactive
>> test_system -i -c clm4_0_49_lynx_pgi -g clm4_0_50_lynx_pgi >&! lynx_i_`date +"%m%d%y"`.lg &

    144558

cs.status.144558.lynx | grep -v PASS
...
*** FAIL  ERS211d.1x1_brazil.I_2000.lynx_pgi.tputcomp.clm4_0_49_lynx_pgi
* FAIL  ERS48s_D_P1x12.f10_f10.ICNCROP.lynx_pgi.compare_hist.clm4_0_49_lynx_pgi
    new fields in cpl history files
** SFAIL SMS_D.1x1_vancouverCAN.I1PT.lynx_pgi.GC.144558
** SFAIL ERS.1x1_mexicocityMEX.I1PT.lynx_pgi.GC.144558


## batch
>> test_system -c clm4_0_49_lynx_pgi -g clm4_0_50_lynx_pgi >&! lynx_`date +"%m%d%y"`.lg &

  160925
./cs.status.160925.lynx | grep -v PASS
...
? BFAIL PMT_D.f45_g37.I_2000.lynx_pgi.compare_hist.clm4_0_49_lynx_pgi
  
    problem in generate case not copying over file
     PASS
    Initial Test log is /glade/scratch/muszala/PMT_D.f45_g37.I_2000.lynx_pgi.G.114232/run/cpl.log.120920-152048
    /var/spool/torque/mom_priv/jobs/102008.nid00003.SC:  Storing new baseline in /glade/proj2/cgd/tss/clm_cesm_baselines/clm4_0_49_ly
    nx_pgi/PMT_D.f45_g37.I_2000.lynx_pgi
    ERROR in /var/spool/torque/mom_priv/jobs/102008.nid00003.SC:  could not copy /glade/scratch/muszala/archive/PMT_D.f45_g37.I_2000.
    lynx_pgi.G.114232/cpl/hist/ to /glade/proj2/cgd/tss/clm_cesm_baselines/clm4_0_49_lynx_pgi/PMT_D.f45_g37.I_2000.lynx_pgi/cpl.hi.nc

? RUN   ERS48s_D.f45_g37.I_2000_VOC.lynx_pgi.GC.160925
    run didn't finish?
? RUN   ERS48s_D.f10_f10.I_2000_CN.lynx_pgi.GC.160925
    PBS: job killed: walltime 9021 exceeded limit 9000
? RUN   ERS48s_P96x2.f19_g16.I_2000_VOC_SNCRFRC_CN_GLCMECPD.lynx_pgi.GC.160925
     PBS: job killed: walltime 9041 exceeded limit 9000

## interactive, with mirage test list and intel compiler
>>test_system -i -p intel -l mirage.interactive -o "-mach lynx" -c clm4_0_49_lynx_intel -g clm4_0_50_lynx_intel > & ! lynx_mi_intel_`date +"%m%d%y"`.lg &

  143620  cs.status.143620.lynx
>>cs.status.143620.lynx  | grep -v PASS
...
** FAIL  ERS.1x1_brazil.I_2000.lynx_intel
** BFAIL ERS.1x1_brazil.I_2000.lynx_intel.generate.clm4_0_50_lynx_intel
** BFAIL ERS.1x1_brazil.I_2000.lynx_intel.compare_hist.clm4_0_49_lynx_intel
? FAIL  ERI_D.1x1_camdenNJ.I_2000_VOC.lynx_intel
    forrtl: error (73): floating divide by zero - rtmmod_mp_rtmini_         303  RtmMod.F90
** RUN   ERS_D.1x1_asphaltjungleNJ.I_2000_VOC.lynx_intel.GC.143620
    forrtl: error (73): floating divide by zero - rtmmod_mp_rtmini_         303  RtmMod.F90
* FAIL  ERS48s_D_P1x12.f10_f10.I_2000_CN.lynx_intel.compare_hist.clm4_0_49_lynx_intel
    new fields in cpl history files
*** FAIL  ERS48s_D_P1x12.f10_f10.I_2000_CN.lynx_intel.tputcomp.clm4_0_49_lynx_intel
   
%%%%%%%% Test reporting END %%%%%%%%


  build-namelist unit tester:

  CESM test lists:

    bluefire/CESM
    lynx/CESM

  bluefire/PTCLM

  test_system testing:

    bluefire batch:
    bluefire interactive:
    lynx/pgi batch:
    lynx/pgi interactive:
    mirage,storm/ifort interactive:

CLM tag used for the baseline comparison tests if applicable:

	clm4_0_49

Changes answers relative to baseline: Yes, runoff is different (similar climate)

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: all with RTM
    - what platforms/compilers: all
    - nature of change (similar climate) I compsets only have runoff change

   MSS location of control simulations used to validate new climate:

    https://wiki.ucar.edu/display/ccsm/CCSM4+-+Track5+experiments

     /CCSM/csm/b.e11.B1850CN.f19_g16.004
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name:  clm4_0_49
Originator(s):  erik (Kluzek Erik 303-497-1326 CGD)
Date: Sun Sep 16 01:05:04 MDT 2012
One-line Summary: Move clm testing to use CESM test framework

Purpose of changes:

Move testing for CLM from CLM stand-alone test_driver.sh to one based on
the CESM testing framework. Create CLM specific tests-lists, user_nl_dir, 
and compset files to handle most CLM testing.

Requirements for tag:

 Move major testing from test_driver.sh to one based on CESM framework. Try
 to get most of it to work.

Test level of tag: standard

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

   Update to cesm1_1_beta18b

    scripts updated to: scripts4_120915
    scripts updated to: Machines_120915
    mapping updated to: mapping_120816
    stubs   updated to: stubs1_3_05
    drv     updated to: drvseq1_4_26

List all files eliminated: None

List all files added and what they do:

A  +    models/lnd/clm/test/system/test_system ---- New main testing script for CLM.
            wrapper script to CESM scripts/create_test_suite with behavior
            similar to test_driver.sh

  -b directory [or --baseline]  baseline directory
  -c version   [or --compare]   version to compare to 
                                (generate must already have been run to create these)
  -d                            debug usage -- display tests that will run -- but 
                                do NOT actually execute them
  -g version   [or --generate]  name of this version to generate version as
  -h           [or --help]      displays help
  -i                            interactive usage
  -l list      [or --list]      input test list to use instead of default 
                                (path relative to this directory)
  -o options   [or --options]   options to pass to create_test_suite
  -p compiler  [or --compiler]  compiler to use instead of default
  -s           [or --shortlist] use the short test list

 Typical use:

        cd models/lnd/clm/test/system
	test_system -i -c clm4_0_48 -g clm4_0_49
	test_system    -c clm4_0_48 -g clm4_0_49


>>>>>>>>>>>>> Test lists
A  +    models/lnd/clm/test/system/mirage.interactive
A  +    models/lnd/clm/test/system/lynx.interactive
A  +    models/lnd/clm/test/system/shortlist.interactive
A  +    models/lnd/clm/test/system/bluefire.batch
A  +    models/lnd/clm/test/system/bluefire.interactive
A  +    models/lnd/clm/test/system/lynx.batch
A  +    models/lnd/clm/test/system/shortlist.batch

>>>>>>>>>>>>> compset file and user_nl_* files for testing
A  +    models/lnd/clm/test/system/config_files/config_CLMtestCompsets.xml
A  +    models/lnd/clm/test/system/user_nl_dirs
A  +    models/lnd/clm/test/system/user_nl_dirs/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/crop
A  +    models/lnd/clm/test/system/user_nl_dirs/crop/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/cn_conly
A  +    models/lnd/clm/test/system/user_nl_dirs/cn_conly/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/voc
A  +    models/lnd/clm/test/system/user_nl_dirs/voc/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/voc/user_nl_cpl
A  +    models/lnd/clm/test/system/user_nl_dirs/glcMEC
A  +    models/lnd/clm/test/system/user_nl_dirs/glcMEC/user_nl_clm
A  +    models/lnd/clm/test/system/user_nl_dirs/glcMEC/user_nl_cpl

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
M       models/lnd/clm/bld/listDefaultNamelist.pl
M       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml - New failed
           tests from new test framework
M       models/lnd/clm/bld/clm.buildnml.csh - Copy drv_flds_in if clm creates it
           and if it doesn't already exist.
M       UpDateChangeLog.pl -- Add some support for xFail. Not fully working.

Machines testing ran on:

  build-namelist unit tester: yes

  test_system testing:

     bluefire batch:             yes
     bluefire interactive:       yes
     bluefire/CESM:              yes
     lynx/pgi batch:             yes
     lynx/pgi interactive:       yes

CLM tag used for the baseline comparison tests if applicable: clm4_0_48

Difference in expected fails from testing:

Index: expectedClmTestFails.xml
===================================================================
--- expectedClmTestFails.xml	(.../trunk_tags/clm4_0_48/models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml)	(revision 40288)
+++ expectedClmTestFails.xml	(.../trunk/models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml)	(revision 40288)
@@ -34,6 +34,10 @@
          <IBM>
             <compare>
                <entry testId="bl9C4" failType="xFail"> cprnc showing diffs are not b4b </entry>
+               <entry testId="sm514" failType="xFail"> problem configuring </entry>
+               <entry testId="bl514" failType="xFail"> problem configuring </entry>
+               <entry testId="sm8Z3" failType="xFail"> clm stand-alone can no longer work </entry>
+               <entry testId="bl8Z3" failType="xFail"> clm stand-alone can no longer work </entry>
             </compare>
          </IBM>
       </bluefire>
@@ -71,14 +75,70 @@
       <mirage>
       </mirage>
       <lynx>
+         <intel>
+              <entry testId="ERS.1x1_brazil.I_2000.lynx_intel"                failType="FAIL">CESM script issue</entry>
+              <entry testId="ERS_D.1x1_asphaltjungleNJ.I_2000_VOC.lynx_intel" failType="FAIL">CESM script issue</entry>
+         </intel>
       </lynx>
       <janus>
       </janus>
    </clmBatch>
 
+   <test_system_interactive> 
+      <bluefire>
+         <IBM>
+              <entry testId="ERS_D.CLM_USRDAT.IalaskaCN.bluefire_ibm"        failType="RUN">CESM script issue</entry>
+              <entry testId="" failType="FAIL">Restart length different</entry>
+              <entry testId="ERS_D.1x1_asphaltjungleNJ.I_2000_VOC"           failType="FAIL">Restart length different</entry>
+              <entry testId="ERS48s_D_P1x64.f45_g37.I_2000_VOC"              failType="RUN">Initial simulation fails</entry>
+              <entry testId="PET_D_P1x64.f45_g37.I_2000_VOC"                 failType="FAIL">Initial simulation fails</entry>
+         </IBM>
+      </bluefire>
+      <lynx>
+         <pgi>
+              <entry testId="SMS_D.1x1_vancouverCAN.I1PT.lynx_pgi"           failType="SFAIL">datm namelist problem for single-point forcing</entry>
+              <entry testId="ERS.1x1_mexicocityMEX.I1PT.lynx_pg"             failType="SFAIL">datm namelist problem for single-point forcing</entry>
+         </pgi>
+      </lynx>
+   </test_system_interactive> 
+
+   <test_system_batch> 
+      <bluefire>
+         <IBM>
+              <entry testId="ERS_D_P96x32.T62_g37.I_2000"             failType="SFAIL">T62 not working</entry>
+              <entry testId="ERS211d_P192x2.f19_g16.I_2000_CNDV_CROP" failType="SFAIL">ignore_ic_date is incompatable with crop!</entry>
+              <entry testId="ERS48s_D_P64x16.ne30_g16.ICN"            failType="SFAIL">CESM script problem didn't see both files</entry>
+              <entry testId="ERS211d.f10_f10.I_2000_VOC_CN"           failType="SFAIL">CESM script problem didn't see both files</entry>
+         </IBM>
+      </bluefire>
+      <lynx>
+      </lynx>
+   <test_system_batch> 
+  
    <cesm> 
       <bluefire>
          <IBM>
+              <entry testId="SBN.1x1_mexicocityMEX.I1PT"     failType="SFAIL">datm namelist issue</entry>
+              <entry testId="SBN.1x1_vancouverCAN.I1PT"      failType="SFAIL">datm namelist issue</entry>
+              <entry testId="SBN.1x1_urbanc_alpha.I1PT"      failType="SFAIL">datm namelist issue</entry>
+              <entry testId="SBN.1x1_asphalt_jungle.ICNTEST" failType="TFAIL">datm namelist issue</entry>
+              <entry testId="SBN.wus12_wus12.I"              failType="SFAIL">missing wus12 datasets</entry>
+              <entry testId="SBN.T42_g16.I1850"              failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.T31_g16.I1850"              failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.f05_g16.I20TR"              failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.1x1_tropicAtl.I20TR"        failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.ne30_g16.I20TR"             failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.ne120_g16.I20TRCN"          failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.f05_g16.IRCP26CN"           failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.f05_g16.IRCP45CN"           failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.f05_g16.IRCP60CN"           failType="SFAIL">missing datasets</entry>
+              <entry testId="SBN.f05_g16.IRCP85CN"           failType="SFAIL">missing datasets</entry>
+         </IBM>
+      </bluefire>
+   </cesm>
+   <cesm> 
+      <bluefire>
+         <IBM>
             <compare>
             </compare>
             <generate>

Changes answers relative to baseline: No bit-for-bit 

===============================================================
===============================================================
Tag name:  clm4_0_48
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date: Tue Sep 11 09:14:40 MDT 2012
One-line Summary: bug fixes, xFail to tests and normalize test output for CLM

Purpose of changes:  Bug Fixes.  Add xFail capability to CLM batch,
interactive and namelist tests.  Make test output the same for CLM
tests.

Requirements for tag: Test on bluefire (CESM, int, bat), lynx/pgi (int,bat)
Fix bugs: 1436,1500,1521,1537

Test level of tag: std-test

Bugs fixed (include bugzilla ID):

	1436,1500,1521,1537

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

	1545 - on lynx clm-batch doesn't call our new xFAIL module.

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:  

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by: xFail module Bill, Erik.  Rest of code Erik.

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated:

List a files added and what they do:

A       models/lnd/clm/bld/unit_testers/xFail
A       models/lnd/clm/bld/unit_testers/xFail/expectedFail.pm
A       models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml
A       models/lnd/clm/bld/unit_testers/xFail/wrapClmTests.pl

	- xFAIL module that implements expected fail reporting.  wrapClmTests.pl is used
as a wrapper and called by test_driver.sh.  The XML file holds test cases.
Documentation is in POD in expectedFail.pm

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/test/system/TBL.sh
	- fix so that mct and pio are built out of the baseline directory
M       models/lnd/clm/bld/configure
	- fix path to mct/.../mpi-serial
M       models/lnd/clm/src/main/getdatetime.F90
	- fix to broadcast correct time stamp
M       models/lnd/clm/test/system/test_driver.sh
M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
	- both of these files modified to support xFAIL functionality
M      models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml
	- remove wrf mapping entry that isn't in inputdata.  fix entries per bug
	1521
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
	- remove wrf mapping entry that isn't in inputdata.  fix entry per bug 1521

Summary of testing:

Note that tests that used to fail are now being reported as xFAIL.  The file
to look at is models/lnd/clm/bld/unit_testers/xFail/expectedClmTestFails.xml.

There are no tests that used to FAIL that now PASS.

  build-namelist unit testing: all pass
  bluefire: all pass
  bluefire interactive testing: all pass
  bluefire/CESM testing: a few throughput failures

	FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_47 
	COMMENT   tput_decr = 2.945 tput_percent_decr = 21.3

	FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.tputcomp.clm4_0_47 
	COMMENT   tput_decr = 65.6 tput_percent_decr = 41.9

	FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.tputcomp.clm4_0_47 
	COMMENT   tput_decr = 1.8039999 tput_percent_decr = 2.07

	FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.tputcomp.clm4_0_47 
	COMMENT   tput_decr = 2.325 tput_percent_decr = 9.80

	FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.tputcomp.clm4_0_47 
	COMMENT   tput_decr = 7.0280000 tput_percent_decr = 3.69

  bluefire/PTCLM testing: N/A
  lynx/pgi testing: all pass
  lynx/pgi interactive testing: all pass
  lynx/CESM testing: 
  mirage,storm/ifort interactive testing: all pass

CLM tag used for the baseline comparison tests if applicable: clm4_0_47

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_47
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date: Thu Aug 23 11:09:27 MDT 2012
One-line Summary: bug fixes

Purpose of changes:

  Fix some bugs and tag early since CAM needs fix of bug 1538 asap.

Requirements for tag:

Test level of tag: std-test

Bugs fixed (include bugzilla ID):

	1534,1533,1507,1444,1538

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by:

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated:

List all files added and what they do:

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/configure
-- Passes FLAGS down to cesm_lib build and for pio (only for CLM testing)

M       models/lnd/clm/tools/mkmapdata/regridbatch.sh
M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh
-- Fixes as per bug 1507.  Logic clean up for interactive and using mpi 

M       models/lnd/clm/bld/build-namelist
-- Fix as per bug 1538 

M       models/lnd/clm/src/main/controlMod.F90
-- Fix as per bug 1444.  remove call to  "mpi_bcast (glc_topomax," and logic
		controlling it.

M       models/lnd/clm/src/main/ncdio_pio.F90
-- Fix as per bug 1533 and 1534

M       SVN_EXTERNAL_DIRECTORIES
-- Mistake from last tag.  Replaced two repos with correct trunk-tag urls.


Summary of testing:

  build-namelist unit testing:
    All PASS except:
		fails involve us20 and wus12 
		not ok 141 - lnd_in file the same as expected for CN - 94x192 - fixed.  Should pass in next tag.
		not ok 214 - lnd_in file exists - us20 - no tests in place
      not ok 219 - lnd_in file exists - wus12 - no tests in place
      not ok 221 - compare file lnd_in DNE for CN and -res+wus12 - wus12 - no tests in place
      not ok 222 - compare file temp_file.txt DNE for CN and -res+wus12 - wus12 - no tests in place
  bluefire:

		016-019 will be removed and put in CESM/CLM tests
		016 smW51 TSM.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -5 cold .................FAIL! rc= 10
		017 erW51 TER.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -3+-2 cold ..............FAIL! rc= 5
		018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 5
		019 blW51 TBL.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -5 cold .................FAIL! rc= 4
		
		036-039 Failed in the past, see prior versions		 
		036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
		037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
		038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
		039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4

		049-052 Failed in the past, see prior versions		 
		049 smCI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
		050 erCI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
		051 brCI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
		052 blCI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4

  bluefire interactive testing:
	All PASS execpt:
		004 blC74 TBL.sh _sc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -10 arb_ic ..................FAIL! rc= 5
		008 blC97 TBL.sh _sc_do clm_spin^nl_urb 20030101:1800 4x5 gx3v7@1850 -6 arb_ic ..................FAIL! rc= 5
		012 blHS3 TBL.sh 17p_cnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .....FAIL! rc= 5
		016 blCA4 TBL.sh _sc_ds clm_drydep^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ............FAIL! rc= 5
		020 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 158 arb_ic ....FAIL! rc= 5
		024 blCA8 TBL.sh _sc_ds clm_drydep^nl_urb 20021230:3600 1x1_asphaltjungleNJ navy -90 arb_ic .....FAIL! rc= 5
		026 blCK4 TBL.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -10 cold ...............FAIL! rc= 5
		028 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -10 cold ...........FAIL! rc= 5
		030 blC78 TBL.sh _sc_s clm_std^nl_urb 20021231:1800 1x1_brazil navy -10 arb_ic ..................FAIL! rc= 5
		034 blF93 TBL.sh 17p_sc_do clm_drydep^nl_voc 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 5
		038 blC83 TBL.sh _sc_do clm_std^nl_urb 20020115:3600 5x5_amazon navy -10 arb_ic .................FAIL! rc= 5
		042 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:1800 1x1_brazil navy -670 arb_ic .................FAIL! rc= 5
		046 blC63 TBL.sh _sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ........................FAIL! rc= 5
		050 blHQ4 TBL.sh 17p_cnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold ............FAIL! rc= 5
		054 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 5
		067 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 5
		Reason:  changed configure, but configure in previous tag not updated.
		These will pass when a new tag is compared to clm4_0_47
  bluefire/CESM testing:
	All PASS except:
		FAIL  SMS_RLB.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_46 
		FAIL  SMS_ROA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_46 
		FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.tputcomp.clm4_0_46 
		Reason:  the throughput tolerance is likely still not large enough.
  bluefire/PTCLM testing: N/A
  lynx/pgi testing:
  lynx/pgi interactive testing:
		004 blC74 TBL.sh _sc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -10 arb_ic ..................FAIL! rc= 5
		008 blTZ3 TBL.sh 21p_cncrpsc_do clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 5
		010 blCL4 TBL.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 5
		014 blCA4 TBL.sh _sc_ds clm_drydep^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ............FAIL! rc= 5
		Reason:  changed configure, but configure in previous tag not updated.
		These will pass when a new tag is compared to clm4_0_47
  lynx/CESM testing:
	N/A
  mirage,storm/ifort interactive testing:
   All PASS except:
		70 004 blC74 TBL.sh _sc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -10 arb_ic ..................FAIL! rc= 5
		71 007 blD94 TBL.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 5
		72 011 blCA4 TBL.sh _sc_ds clm_drydep^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ............FAIL! rc= 5
		73 015 blCA8 TBL.sh _sc_ds clm_drydep^nl_urb 20021230:3600 1x1_asphaltjungleNJ navy -90 arb_ic .....FAIL! rc= 5
		74 019 blL54 TBL.sh _sc_ds clm_std^nl_urb 20020115:1800 10x15 USGS 48 arb_ic .......................FAIL! rc= 5
		75 023 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 48 cold ............FAIL! rc= 5
		Reason:  changed configure, but configure in previous tag not updated.
		These will pass when a new tag is compared to clm4_0_47

CLM tag used for the baseline comparison tests if applicable: clm4_0_46

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_46
Originator(s):  muszala (Muszala Stefan 303-497-1320 CGD)
Date: Wed Aug  8 11:53:44 MDT 2012
One-line Summary: R01 support and update externals

Purpose of changes:

  Add support for r01 rtm.  Add mapping files for ne120 and ne240.  Update all svn
  externals to what is in cesm_alpha16e and modify and update our test system as
  necessary.

Requirements for tag: test on bluefire (CESM, int, bat, build-namelist), lynx/pgi (int,bat), mirage.

Test level of tag: std-test

Bugs fixed (include bugzilla ID):N/A

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:N/A

Describe any changes made to the namelist:N/A

List any changes to the defaults for the boundary datasets:N/A

Describe any substantial timing or memory changes:N/A

Code reviewed by: self, Erik

List any svn externals directories updated (csm_share, mct, etc.):
  Created the following tags:
	https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_120808
	https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_1_23
	https://svn-ccsm-models.cgd.ucar.edu/tools/cprnc/trunk_tags/cprnc_120807 

List all files eliminated:N/A

List all files added and what they do:N/A

List all existing files that have been modified, and describe the changes:

== modifications to update externals ==
 M       models/lnd/clm/tools/SVN_EXTERNAL_DIRECTORIES
 M       SVN_EXTERNAL_DIRECTORIES

== modifications to get cesm/clm, interactive tests to pass ==
 
 M       models/lnd/clm/bld/unit_testers/build-namelist_test.pl
 -- added more output for easier test reading
 M       models/lnd/clm/test/system/TCB.sh
 -- fix some indentation
 M       models/lnd/clm/test/system/TCBtools.sh
 -- add support for gen_domain configure on bluefire
 M       models/lnd/clm/test/system/test_driver.sh
 -- move tests to clmTest directory on /glade/scratch
 M       models/lnd/clm/test/system/CLM_runcmnd.sh
 -- just indent diffs
 M       models/lnd/clm/tools/mksurfdata_map/src/mkfileMod.F90
 -- handle all files as large files (from ne240 runs)
 M       models/lnd/clm/bld/configure
 -- add dependency for pio piovdf.o: pio_kinds.o
 -- remove -lgptl from cesm Makefile
 
== added r01 maps to namelist_defaults_clm.xml ==
 
 M       clm.buildnml.csh
 M       namelist_files/namelist_defaults_overall.xml
 -- modified namelist_defaults_overall.xml to take wus12 and us20 with rmt off
 -- also added ne240 and default gx1v6 ocean mask
 -- modes to bld/clm.buildnml.csh so that rtm is off for wus12
 -- added path and script name to xml generated by createMapEntry.pl
 -- checked wus12_wus12 run.  Configures and runs.  Error message to look for is:
 
 "Do not run the River Transport Model (RTM)" which is correct since wus12_wus12 is
 a regional grid
 
==  modify scripts and drv to get new r01 to gx1v6 mapping files == 
 M       scripts/ccsm_utils/Case.template/config_grid.xml
 M       scripts/ccsm_utils/Case.template/config_definition.xml
 M       models/drv/bld/namelist_files/namelist_defaults_drv.xml
 -- namelist_defaults_drv.xml - added rof_grid for r01 and gx1v6
 
== modify xml so that 1/10 degree runs work ==
 M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh
 M       models/lnd/clm/tools/mkmapgrids/mkmapgrids.namelist
 M       models/lnd/clm/bld/namelist_files/namelist_definition.xml
 M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
 M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml
 M       models/lnd/clm/src/riverroute/RtmMod.F90

Summary of testing:

  build-namelist unit testing:
    All PASS except:
	fails involve us20 and wus12 
      	not ok 141 - lnd_in file the same as expected for CN - 94x192 - fixed.  Should pass in next tag.
      	not ok 214 - lnd_in file exists - us20 - no tests in place
      	not ok 219 - lnd_in file exists - wus12 - no tests in place
      	not ok 221 - compare file lnd_in DNE for CN and -res+wus12 - wus12 - no tests in place
      	not ok 222 - compare file temp_file.txt DNE for CN and -res+wus12 - wus12 - no tests in place
  bluefire:
    All PASS except:
  	018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
      		modified to -3+-3 -- still FAIL
   	036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
   	037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
   	038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
   	039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4
      		036-039 needs major work

   	and why they fail...

   	018 - cprnc differences in comparison
   	036 - endrun initiated from  CNBalanceCheckMod.F90
   	037 - __cnbalancecheckmod_NMOD_cbalancecheck
   	038, 039 - fail since 037 didn't run

  bluefire interactive testing:
   All PASS except:
   	bl514 - will fail because tag 45 has a broken gen_domain build
   	bl954 - no ne240 in tag 45
   	bl9C4 - 8 bit difference in file size due to using large file write in mkfileMod.F90
      		These should pass in next tag
  bluefire/CESM testing:
    All PASS except:
	FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  SMS_RLB.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  SMS_ROA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  ERS_D.f45_g37.I.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  ERI.T31_g37.IG1850.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.tputcomp.clm4_0_45 
	FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.tputcomp.clm4_0_45 

    There is tolerance check built into the tests that may be too tight.  Jay will look at this in the future.
    Throughputs are reported and a sampling looks reasonable:

	CHECK SMS_RLA.f45_f45.I.bluefire_ibm.perf npes=1 tput=16.026 memh=259.677 memr=-0.001 tag=clm4_0_45 baseline
	CHECK SMS_RLA.f45_f45.I.bluefire_ibm.perf npes=1 tput=9.392 memh=259.856 memr=-0.001 tag=
	
	CHECK SMS.f10_f10.IRCP45CN.bluefire_ibm.perf npes=16 tput=200.866 memh=265.074 memr=-0.001 tag=clm4_0_45 baseline
	CHECK SMS.f10_f10.IRCP45CN.bluefire_ibm.perf npes=16 tput=187.881 memh=267.630 memr=-0.001 tag=
	
	CHECK ERS_D.f19_g16.IRCP85CN.bluefire_ibm.perf npes=64 tput=29.741 memh=292.035 memr=-0.001 tag=clm4_0_45 baseline
	CHECK ERS_D.f19_g16.IRCP85CN.bluefire_ibm.perf npes=64 tput=28.368 memh=294.879 memr=-0.001 tag=

  bluefire/PTCLM testing:
  lynx/pgi testing:
  lynx/pgi interactive testing:All PASS
  lynx/CESM testing:All PASS
  mirage,storm/ifort interactive testing:All PASS

CLM tag used for the baseline comparison tests if applicable: CLM4_0_45

Changes answers relative to baseline:No

===============================================================
===============================================================
Tag name:  clm4_0_45
Originator(s):  sacks (Sacks Bill 303-497-1762 CGD)
Date: Fri Jul 20 11:41:14 MDT 2012
One-line Summary: fix virtual columns; new urban mksurfdata_map

Purpose of changes:

GLC-related: Fix places where glc virtual columns were not being treated
correctly (major bug!). Change albice default to 0.6,0.4 for glc_mec
cases, based on suggestion from Bill Lipscomb. Fix dust calculation for
glc_mec.

Other CLM changes: Add an instance of istcrop. Fix landunit-level output
for dov2xy=false.

Tools changes: Update mksurfdata_map to handle new urban raw data format
(use dominant density class, together with lookup tables; currently used
for mksurfdata_map with hires). Minor fixes to mksurfdata_map. Add unit
tests to mksurfdata_map. Change tools build to support addition of unit
tests. Minor fixes to mkscripgrid.ncl, mkunitymap.ncl and mknoocnmap.pl.

Namelist-related: Refer to correct scrip grid files for f09, f19; and
a few fixed mapping files for those resolutions, including clm->rtm mapping
files for those resolutions (changes answers for RTM). (The old scrip grid
files had a displaced pole, which is not what we want for CLM. Note that I
did NOT replace the f05 scrip grid file, because the only alternative I can
find has bad values in the corner arrays -- see bug 1518.)

SPM--Mostly changes to get more tests to pass.  Added 1x1_* mapping files to
inputdata.  Created script that auto-generates XML for new mapping files for
easier inclusion into existing XML files.  Modify build-namelist_test.pl to
pass CSMDATA to build-namelist.  Tests were failing if a user didn't have
CSMDATA env set.  Touched CFGtools__ds to get a CLM interactive test to pass.
Added openMP and debug openMP tests for bluefire interactive tests for 10x15.
--SPM

Requirements for tag: test on bluefire (CESM, int, bat), lynx/pgi (int,bat), mirage.
Fix bug 1492

Test level of tag: std-test

Bugs fixed (include bugzilla ID):
                                 1492 (missing istcrop)
											1515 (nedd mapping files for
											single-point)-SPM

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:

    Makefiles reorganized for tools (mksurfdata_map, interpinic, mkmapgrids)

Describe any changes made to the namelist:

    albice changed to 0.6,0.4 for glc_mec cases

List any changes to the defaults for the boundary datasets:

    Use corrected mapping files for CLM->RTM for f09,f19, and for some
    mapping files used to create surface datasets. Use correct scrip grids
    for f09,f19. Add new urban raw data file for hires mksurfdata_map, and
    associated scrip grid file & mapping files.

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated:

>>>>>>> Split into mkurbanparCommonMod, mkurbanparAvgMod and mkurbanparDomMod
D       models/lnd/clm/tools/mksurfdata_map/src/mkurbanparMod.F90

>>>>>>> Modify build system to make it easier to add unit testers
D       models/lnd/clm/tools/mksurfdata_map/src/Macros.custom
D       models/lnd/clm/tools/interpinic/src/Macros.custom
D       models/lnd/clm/tools/mkmapgrids/src/Macros.custom


List all files added and what they do:

>>>>>>> SPM-- Dump XML of mappings for a specified resolution
A       namelist_files/createMapEntry.pl
>>>>>>> --SPM


>>>>>>> Pull out routines from mkurbanparMod that are common to different
>>>>>>> ways of creating urban parameter data
A       models/lnd/clm/tools/mksurfdata_map/src/mkurbanparCommonMod.F90

>>>>>>> Modules to handle old (area-average) and new (dominant-type) urban
>>>>>>> input files
A       models/lnd/clm/tools/mksurfdata_map/src/mkurbanparAvgMod.F90 - mostly from mkurbanparMod
A       models/lnd/clm/tools/mksurfdata_map/src/mkurbanparDomMod.F90 - new code, to handle new format

>>>>>>> New modules with general-purpose utilities for mksurfdata_map
A       models/lnd/clm/tools/mksurfdata_map/src/mkutilsMod.F90
A       models/lnd/clm/tools/mksurfdata_map/src/mkindexmapMod.F90

>>>>>>> New unit testers for mksurfdata_map
A       models/lnd/clm/tools/mksurfdata_map/unit_testers
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_lookup_2d_netcdf.nc
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mkutilsMod.F90
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mkindexmapMod.F90
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/Srcfiles
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mksurfdata_map.F90
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mod.F90
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/Filepath
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/Makefile
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/README
A       models/lnd/clm/tools/mksurfdata_map/unit_testers/test_mkurbanparDomMod.F90

>>>>>>> Modify build system to make it easier to add unit testers
A       models/lnd/clm/tools/mksurfdata_map/src/Makefile.common
A       models/lnd/clm/tools/mkmapgrids/src/Makefile.common
A       models/lnd/clm/tools/interpinic/src/Makefile.common


List all existing files that have been modified, and describe the changes:

>>>>>>> SPM--
>>>>>>> Pass csmdata down to build-namelist and add logic so CSMDATA is set
>>>>>>> even if user does not
M       unit_testers/build-namelist_test.pl
>>>>>>> Add support for 1x1_* single point mapping files
M       namelist_files/namelist_defaults_clm.xml
M       namelist_files/namelist_defaults_clm_tools.xml
>>>>>>> Add support for a few openMP 10x15 tests, modify test list 
>>>>>>> and remove some old single point tests
M       test/system/tests_pretag_bluefire_nompi
M       test/system/input_tests_master
M       test/system/tests_posttag_nompi_regression

>>>>>>> --SPM

>>>>>>> Fix glc virtual column bugs: change checks of (wt > 0)
>>>>>>> to (wt > 0 .or. ityplun(l)==istice_mec)
M       models/lnd/clm/src/main/histFileMod.F90 ---------- also fix landunit-level fields
              with dov2xy=.false.
M       models/lnd/clm/src/main/subgridAveMod.F90
M       models/lnd/clm/src/biogeochem/DUSTMod.F90
M       models/lnd/clm/src/biogeochem/DryDepVelocity.F90 - also change
              'if (itypelun==istice)' to 'if (itypelun==istice .or. itypelun==istice_mec)'
              in setting parameters
M       models/lnd/clm/src/biogeophys/BalanceCheckMod.F90
M       models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90

>>>>>>> Add istcrop (fix bug 1492)
M       models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90

>>>>>>> Remove unnecessary 'use'
M       models/lnd/clm/src/biogeophys/Hydrology2Mod.F90

>>>>>>> Change albice to 0.6,0.4 for glc_mec cases; add mapping files for
>>>>>>> 3x3min_LandScan2004; use corrected mapping files for 5x5min_ISRIC-WISE_to_0.9x1.25,
>>>>>>> 3x3min_MODIS_to_0.9x1.25 and 5x5min_nomask_to_1.9x2.5, as well as for CLM->RTM
>>>>>>> for f09 and f19
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

>>>>>>> Point to correct files for f09,f19 scrip grids; add new urban raw data file
>>>>>>> for hires mksurfdata_map
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml

>>>>>>> Add support for new 3x3min_LandScan2004 grid
M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh
M       models/lnd/clm/bld/namelist_files/checkmapfiles.ncl
M       models/lnd/clm/bld/namelist_files/namelist_definition.xml

>>>>>>> Changes to mksurfdata_map to support new input urban format
M       models/lnd/clm/tools/mksurfdata_map/src/Srcfiles ------ add new source files
M       models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90 - use new urban interfaces;
              also, substantially increase tolerance for roundoff error fix in
              normalizencheck_landuse (the latter change is unrelated to the new urban
              format; this change makes it so more points have 100% special rather than
              nearly-100% special, which was required to avoid CLM termination due to
              rounding errors in some cases)
M       models/lnd/clm/tools/mksurfdata_map/src/mkfileMod.F90 - add URBAN_DENSITY_CLASS
              and URBAN_REGION_ID fields
M       models/lnd/clm/tools/mksurfdata_map/src/mkncdio.F90 --- public declarations of
              routines that are now needed

>>>>>>> Other, incidental changes to mksurfdata_map
M       models/lnd/clm/tools/mksurfdata_map/src/mkpftMod.F90 ---- fix zero_out
M       models/lnd/clm/tools/mksurfdata_map/src/mkglcmecMod.F90 - correct rounding errors
              in topoglcmec_o; change a warning to a fatal error
M       models/lnd/clm/tools/mksurfdata_map/src/mkdomainMod.F90 - add tolerance in
              checking for lat/lon equality

>>>>>>> Add src_grid_dims & dst_grid_dims
M       models/lnd/clm/tools/mkmapdata/mkunitymap.ncl

>>>>>>> Fix direction of ocn->atm mapping file
M       models/lnd/clm/tools/mkmapdata/mknoocnmap.pl
M       models/lnd/clm/tools/README ------------------ also fix typos

>>>>>>> Fix ordering of corners
M       models/lnd/clm/tools/mkmapgrids/mkscripgrid.ncl

>>>>>>> Modify build system to make it easier to add unit testers
M       models/lnd/clm/tools/mksurfdata_map/src/Makefile
M       models/lnd/clm/tools/interpinic/src/Makefile
M       models/lnd/clm/tools/mkmapgrids/src/Makefile
M       models/lnd/clm/test/system/TCBtools.sh ----------- copy correct file

>>>>>>> Document copy of test_mod
M       models/lnd/clm/tools/README.filecopies


Summary of testing:

--SPM.  New tests run after update to clm4_0_44 and after tests modifications. 

==== bluefire build-namelist tests: ====

 * expected fail due to new mapping file
 <  fmapinp_rtm = '/glade/proj3/CESM/cseg/inputdata//lnd/clm2/mappingdata/maps/1.9x2.5/map_1.9x2.5_nomask_to_0.5x0.5_nomask_aave_da_c120522.nc'
 ---
 >  fmapinp_rtm = '/glade/proj3/CESM/cseg/inputdata//lnd/clm2/mappingdata/maps/1.9x2.5/map_1.9x2.5_nomask_to_0.5x0.5_nomask_aave_da_c120221.nc'

 * not ok 6 - lnd_in file the same as expected for standard
 not ok 23 - lnd_in file the same as expected for standard 

This is expected.  Bill states this mod in ChangeLog

 <  albice = 0.60,0.40
     ---
 >  albice = 0.50,0.50

 * not ok 29 - lnd_in file the same as expected for standard
 * not ok 36 - lnd_in file the same as expected for standard
 * not ok 43 - lnd_in file the same as expected for standard
 * not ok 49 - lnd_in file the same as expected for standard
 * not ok 54 - lnd_in file the same as expected for standard
 * not ok 59 - lnd_in file the same as expected for standard
 * not ok 64 - lnd_in file the same as expected for standard
 * not ok 69 - lnd_in file the same as expected for standard
 * not ok 74 - lnd_in file the same as expected for standard
 * not ok 80 - lnd_in file the same as expected for standard
 * not ok 85 - lnd_in file the same as expected for standard
 * not ok 91 - lnd_in file the same as expected for standard
 * not ok 156 - lnd_in file the same as expected for CN
 * not ok 161 - lnd_in file the same as expected for CN

 221 and 222 are for new WRF tests, ignoring for now since tests not complete
 not ok 221 - compare file lnd_in DNE for CN and -res+wus12
     #   in NMLTest/CompFiles.pm at line 103.
     WARNING(NMLTest::CompFiles::comparefiles):: File /glade/scratch/muszala/svn/clm4_0_44/models/lnd/clm/bld/unit_testers/temp_file.txt.CN.-res+wus12
      does NOT exist!

 not ok 222 - compare file temp_file.txt DNE for CN and -res+wus12

WARNING(NMLTest::CompFiles::comparefiles):: File /glade/scratch/muszala/svn/clm4_0_44/models/lnd/clm/bld/unit_testers/temp_file.txt.CN.-res+wus12
   2349  does NOT exist!

     #   Failed test 'compare file temp_file.txt DNE for CN and -res+wus12
     # '
     #   in NMLTest/CompFiles.pm at line 103.

 * not ok 276 - lnd_in file the same as expected for crop 

==== bluefire interactive ====
	now pass due to new mapping files (ignore numbering, use test descriptor)
001 sm514 TSMCFGtools.sh gen_domain CFGtools__ds T31.runoptions .................................PASS
002 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds PASS
003 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dPASS
004 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds PASS

	new tests and test descriptors for 10x15 openMP tests
001 sm953 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__o .......PASS
002 bl953 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__o .......SKIPPED*
003 sm954 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......PASS
004 bl954 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......SKIPPED*
005 sm957 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__do ......PASS
006 bl957 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__do ......SKIPPED*
007 sm959 TSMscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................PASS
008 bl959 TBLscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................SKIPPED*

--SPM

NOTE: UNLESS OTHERWISE NOTED, THE BELOW TESTS WERE RUN FROM TAG
virtual_column_fix_03_clm4_0_43. This means that they were run before
reverting the scrip grid file & rtm mapping file for f05. However, that
shouldn't change any test results, since as far as I can tell, nothing in
the CLM test suite tests f05 resolution. THESE TESTS SHOULD BE RERUN ON THE
FINAL VERSION OF THE TAG BEFORE MERGING IT TO THE TRUNK.

  bluefire build-namelist unit testing (run with -test): ALL PASS EXCEPT:
not ok 42 - rtm tstep inconsistent
  bluefire mksurfdata_map unit testing: ALL PASS
  bluefire: All PASS except:
015 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:1800 1.9x2.5 gx1v6@1850-2100 -10 cold FAIL! rc= 7
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4
043 blCn1 TBL.sh _sc_dh clm_transient_glcMEC_rcp8.5 20331231:1800 1.9x2.5 gx1v6@1850-2100 48 arb_ic FAIL! rc= 7
049 smCI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
050 erCI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
051 brCI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
052 blCI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except:
028 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
046 blC63 TBL.sh _sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ........................FAIL! rc= 7
054 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 7
061 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
062 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
069 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 5
076 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
077 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
078 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
079 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
080 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
081 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except:
BFAIL PST.f45_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL PET_PT.f45_g37.I1850.bluefire_ibm.compare_hist.clm4_0_43 
FAIL  ERI.T31_g37.IG1850.bluefire_ibm.compare_hist.clm4_0_43 
FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.compare_hist.clm4_0_43 
FAIL  ERP.f19_g16.IGRCP60CN.bluefire_ibm.compare_hist.clm4_0_43 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL PST.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL PET_PT.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_43 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.compare_hist.clm4_0_43 
  bluefire/PTCLM testing: NOT DONE!
  lynx/pgi testing: All PASS
  lynx/pgi interactive testing: All PASS except:
023 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
024 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
025 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  lynx/CESM testing: All PASS except:
CFAIL ERI.f10_f10.IRCP60CN.lynx_pathscale.C.123047 
BFAIL PST.f19_g16.I.lynx_pgi.compare_hist.clm4_0_43 
FAIL  ERS.f19_g16.IRCP26CN.lynx_gnu.compare_hist.clm4_0_43 
FAIL  ERS.f19_g16.IG1850.lynx_pgi.compare_hist.clm4_0_43 
  mirage,storm/ifort interactive testing: All PASS

  Additional testing: Additional CESM B compset tests to test new RTM
  mapping files.  Ran these from cesm1_1_alpha13e; for most tests, switched
  clm to virtual_column_fix_03_clm4_0_43; for the lynx f05 test, switched
  clm to virtual_column_fix_04_clm4_0_43. Note that the baseline
  comparisons are expected to fail, except for the f05 test.
PASS  ERI.f19_g16.BRCP45WCN.bluefire_ibm 
FAIL  ERI.f19_g16.BRCP45WCN.bluefire_ibm.compare_hist.cesm1_1_alpha13e 
PASS  ERS.f19_g16.B2000CNCHM.bluefire_ibm 
FAIL  ERS.f19_g16.B2000CNCHM.bluefire_ibm.compare_hist.cesm1_1_alpha13e 
PASS  SMS_D.f19_g16.B20TRC5.bluefire_ibm 
FAIL  SMS_D.f19_g16.B20TRC5.bluefire_ibm.compare_hist.cesm1_1_alpha13e 
PASS  ERS.f09_g16.B1850BPRP.bluefire_ibm 
FAIL  ERS.f09_g16.B1850BPRP.bluefire_ibm.compare_hist.cesm1_1_alpha13e
PASS  SMS_D.f19_g16.B20TRC5.lynx_pgi 
FAIL  SMS_D.f19_g16.B20TRC5.lynx_pgi.compare_hist.cesm1_1_alpha13e 
PASS  SMS.f05_g16.B.lynx_pgi 
PASS  SMS.f05_g16.B.lynx_pgi.compare_hist.cesm1_1_alpha13e 


CLM tag used for the baseline comparison tests if applicable: clm4_0_43;
for my additional CESM tests, compared against cesm1_1_alpha13e

Changes answers relative to baseline: YES, for GLC configurations and all
f09 & f19 configurations with RTM

  Baseline failures that are not because of GLC or RTM mapping file changes
  are:

>>> also failed in clm4_0_43; fails with "build-namelist ERROR:: bad input to drv_runlength option"
028 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
>>> I think the problem here is that the baseline test is trying to build interpinic from the current directory,
>>> rather than from BL_ROOT. This is a problem because of changes in the tools' build.
069 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 5


IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: - all GLC configurations (albice change & virtual column bug fix)
                                - all f09 & f19 configurations with RTM (due to change in RTM mapping file)
    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
      
      For GLC: climate-changing

      For f09/f19 due to RTM mapping file change: Larger than roundoff, but
      expected to have same climate. The new scrip grid files have
      roundoff-level differences globally, plus differ substantially at the
      poles because the old (incorrect) files had poles displaced from
      -90/90.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - compset (and additional configure options):
   - build-namelist options (or complete namelist):
   - MSS location of output:

   EVALUATION OF NEW CLIMATE NOT PERFORMED
	
===============================================================
===============================================================
Tag name:  clm4_0_44
Originator(s):  erik (Erik Kluzek)
Date: Mon Jul  9 11:14:11 MDT 2012
One-line Summary: Add wrf resolutions, update externals to cesm1_1_beta15, all components use build-namelist now

Purpose of changes:

set nsegspc=1 for all ne grids. Update to latest externals and new datm. Latest externals
have ALL components using a build-namelist, and user_nl.$COMP files are created for you.
Env files changed most fields in env_conf moved to env_run and secondly env_build.
env_mach_pes moved to env_configure. env_conf removed. Add ne4, ne16, ne60 datasets. Add
in ne16, ne30, ne120 20th Century datasets.   Change of templates to have
clm.buildnml.csh and clm.buildexe.csh copied to Buildconf. Have -chk_res option to
build-namelist to check for resolution/mask, -note option to include (or not) note on the
bottom of the namelist. Expand build-namelist unit test.

Requirements for tag:
    Requirements: test on bluefire (CESM, int, bat)

Test level of tag: std-test

Bugs fixed (include bugzilla ID):
                                 1513 (mksurfdata.pl doesn't work with -crop flag)
                                 1514 (inconsistancy in char variable fexcl)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (PTS_MODE can NOT use a global finidat file)
                                 1017 (PTS_MODE can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1474 (Missing eulerian domain files)
                                 1479 (fails on jaguarpf)
                                 1485 (Performance issue with esmf_wrf_timemgr)
                                 1488 (Problem reading restarts@ne30_g16 for some layouts)
                                 1517 (Performance of datm in clm4_0_44 is even worse)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: Yes!
   env*.xml files changed as follows:

      env_conf.xml ------> removed!
         Most variables moved to env_run.xml. Some variables moved to env_build.xml
      env_mach_pes.xml --> Renamed to env_configure.xml

     Buildconf directory ---> think of it as readonly!
Describe any changes made to the namelist: Yes!

    user_nl_* files for ALL components created for you. Put, your changes to namelists
    files here.

   New options to clm build-namelist: 
      (all but -chk_res and -note are already exercised when running CESM)
      -chk_res ------- Check resolution and land mask first.
      -clm_startfile - Input file to use to startup for branch or startup cases.
      -co2_type ------ CO2 type
      -inst_string --- Instance string to use for clm_startfile for multi-instance cases.
      -l_ncpl -------- Number of coupling time-steps to take per day.
      -lnd_frac ------ Land fraction file to use (domain file)
      -note ---------- Write out note about build-namelist usage to end of file.

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes: Yes!
   Most of the throughput tests fail, and single-point performance looks horrible.
   Although this may be a sporatic problem due to file systems. See bug  1517.

Code reviewed by: self, mvertens, tcraig

List any svn externals directories updated (csm_share, mct, etc.):
    Update to cesm1_1_beta15 external versions (other than timing)
    scripts          to scripts4_120604
    Machines         to Machines_120529
    drv              to drvseq4_1_15
    datm             to datm8_120528
    csm_share        to share3_120509
    mct              to MCT2_8_0_120503
    pio              to pio_1_4_5
    stubs            to cism1_120529
    esmf_wrf_timemgr to esmf_wrf_timemgr_120427
    mapping          to mapping_120525

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>> Add tools testers for directories that use CESM configure
   A  models/lnd/clm/test/system/TCBCFGtools.sh
   A  models/lnd/clm/test/system/TSMCFGtools.sh
   A  models/lnd/clm/test/system/TBLCFGtools.sh

   A  models/lnd/clm/bld/unit_testers/NMLTest/CompFiles.pm - New test module

   A  models/lnd/clm/test/system/nl_files/mksrfdt_T31_crpglc_2000 - mksurfdata crop test

>>>>>>>>>>>> Split out buildexe/buildnml from template so that editing templates
>>>>>>>>>>>> isn't a nightmare
   A  models/lnd/clm/bld/clm.buildexe.csh
   A  models/lnd/clm/bld/clm.buildnml.csh

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Change tests a bit add a global crop test, get working on mirage
   M  models/lnd/clm/test/system/tests_posttag_lynx_nompi
   M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M  models/lnd/clm/test/system/tests_posttag_nompi_regression
   M  models/lnd/clm/test/system/CLM_runcmnd.sh --- Allow hostname==vpn* for yong
   M  models/lnd/clm/test/system/test_driver.sh ---- Add TOOLSLIBS TOOLS_CONF_STRING
          if hostname=vpn* use setup for yong
   M  models/lnd/clm/test/system/input_tests_master  Fix test blCK8, add global 
          crop test case for mksurfdata, add cfg-tool tests
   M  models/lnd/clm/test/system/TSM.sh ------------ Add cpl.log file
   M  models/lnd/clm/test/system/TCBtools.sh ------- Set SLIBS needed on generic machines

   M  models/lnd/clm/tools/mkmapdata/mkmapdata.sh ------- Use different version of ESMF
          for regional, don't do RTM maps for regional
   M  models/lnd/clm/tools/interpinic/src/Makefile ------ Use NETCDF4 link
   M  models/lnd/clm/tools/mkmapgrids/src/Makefile ------ Use NETCDF4 link
   M  models/lnd/clm/tools/mksurfdata_map/src/Makefile -- Use NETCDF4 link
   M  models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl - Send crop setting for
          determining LAI file

>>>>>>>>>>>> Add CESM options to build-namelist, add handling of SLIBS for generic
>>>>>>>>>>>> machines. Add new grids: wrf, ne4, ne16, ne60. Set nsegspv=1 for hi-res/ne
>>>>>>>>>>>> grids. Use drv/datm namelist definition/defaults files. Extend
>>>>>>>>>>>> build-namelist unit tester test ALL resolutions/use-cases.
   M  models/lnd/clm/bld/configure ---- Add ability to handle slibs
   M  models/lnd/clm/bld/user_nl_clm -- Format change
   M  models/lnd/clm/bld/config_files/config_definition.xml - slibs, wrf grids
   M  models/lnd/clm/bld/build-namelist ---------- Add a bunch of options needed for CESM
      (all but -chk_res and -note are already exercised when running CESM)
      -chk_res ------- Check resolution and land mask first.
      -clm_startfile - Input file to use to startup for branch or startup cases.
      -co2_type ------ CO2 type
      -inst_string --- Instance string to use for clm_startfile for multi-instance cases.
      -l_ncpl -------- Number of coupling time-steps to take per day.
      -lnd_frac ------ Land fraction file to use (domain file)
      -note ---------- Write out note about build-namelist usage to end of file.
      namelist definition/defaults files also come from drv/bld and datm/bld, get working
      with latest externals
   M  models/lnd/clm/bld/clm.cpl7.template ------- Use new
         clm.buildnml.csh/clm.buildexe.csh scripts which save us from the "\" nightmare
   M  models/lnd/clm/bld/queryDefaultNamelist.pl - namelist_defaults/definition files
           are now split out in datm/drv directories
   M  models/lnd/clm/bld/queryDefaultXML.pm ------ definition files are an array now
   M  models/lnd/clm/bld/unit_testers/build-namelist_test.pl - Test a ton more
         things. Add -compare, -test, -generate options. Test all use_cases and all
         resolutions
   M  models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl ------ Add some more resolutions
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml - Get rid of drv/datm
         namelist items
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl - Get rid of drv/datm
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Add chk_res, note
         and default masks for WRF grids
   M  models/lnd/clm/bld/namelist_files/datm-build-namelist ----- Use datm namelist 
         defaults/definition files.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Set do_rtm for
         regional grids to .false. Add wrf grids: us20, wus12. Add ne4, ne16, ne60 
         files. Add 20th transient PFT for: ne16, ne30, ne60, ne120. Set nsegspc to 1
         for hi-res and ne grids.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Domain files
         for 512x1024, ne4, ne16, ne60, ne240, and us20, wus12.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Set crop
         for LAI and vegtyp files
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml - Remove settings
         already in drv/bld file

>>>>>>>>>>>> Remove write(6 for write to iulog, remove unneeded writes
>>>>>>>>>>>> use shr_pio over seq_pio. Allow -180-180 form.
   M  models/lnd/clm/src/cpl_share/clm_cpl_indices.F90 - remove write
   M  models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 - write to iulog
   M  models/lnd/clm/src/biogeochem/CNrestMod.F90 ------ use endrun not write(6
   M  models/lnd/clm/src/main/ndepStreamMod.F90 -------- use shr_pio_getiotype
   M  models/lnd/clm/src/main/pftdynMod.F90 ------------ use endrun not write(6
   M  models/lnd/clm/src/main/histFileMod.F90 ---------- use shr_pio_getiotype
          dimension hist_excl* as max_namlen+2
   M  models/lnd/clm/src/main/ncdio_pio.F90 ------------ use
          shr_pio_getiotype/shr_pio_getiosys
   M  models/lnd/clm/src/main/surfrdMod.F90 ------------ remove write(6 statements
          put write in "if ( masterproc )", if longitudes off by more than 300
          see if -180-180 form works

Summary of testing:

  build-namelist unit testing: All PASS except...
    us20
  bluefire: All PASS except...
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4
049 smCI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
050 erCI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
051 brCI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
052 blCI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
058 bl514 TBLCFGtools.sh gen_domain CFGtools__ds T31.runoptions .................................FAIL! rc= 4
060 bl754 TBLtools.sh mksurfdata_map tools__s namelist ..........................................FAIL! rc= 5
061 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
062 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
071 bl924 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_T31_crpglc_2000^tools__ds .....FAIL! rc= 5
073 bl953 TBLscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................FAIL! rc= 7
075 bl954 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......FAIL! rc= 5
078 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
079 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
080 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
081 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
082 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
083 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except..
FAIL  ERI.T31_g37.IG1850.bluefire_ibm.tputcomp.clm4_0_43
FAIL  SMS_RLA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  SMS_RLB.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  SMS_ROA.f45_f45.I.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  ERS_D.f45_g37.I.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  ERS_E.T31_g37.I1850.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  SMS.f10_f10.IRCP45CN.bluefire_ibm.tputcomp.clm4_0_43 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire_ibm.tputcomp.clm4_0_43
BFAIL PST.f45_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL PET_PT.f45_g37.I1850.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL ERI.T31_g37.IG1850.bluefire_ibm.generate.clm4_0_44 
BFAIL PST.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_43 
BFAIL PET_PT.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_43 
  lynx/pgi testing: All PASS
  lynx/pgi interactive testing: All PASS except...
024 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
025 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
026 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  mirage,storm/ifort interactive testing: All PASS

CLM tag used for the baseline comparison tests if applicable: clm4_0_43

Changes answers relative to baseline: No, bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_43
Originator(s):  sacks (Bill Sacks); erik (Erik Kluzek)
Date: Fri Apr  6 11:36:21 MDT 2012
One-line Summary: Add diagnostic fields, modify some existing history fields

Purpose of changes:

Add new diagnostic fields to track snow and ice fluxes. Modify some soil-related fields to
only be averaged over vegetated landunits (from Dave Lawrence). Fix some diagnostic fields
that were incorrect, especially over lakes and urban areas.  Change QICE to spval rather
than 0 over non-ice_mec landunits. Rename QMELT to QSNOMELT. Delete redundant QICEYR. Add
snow balance check from Keith Oleson. Add flexible handling of l2g_scale_type in
subgridAveMod, replacing 'urbanh' c2l_scale_type and adding new functionality. Modify
create_clm_s2x to only reference qflx_glcice in the run loop, not in initialization,
because it is now NaN in initialization. Update scripts and esmf_wrf_timemgr. Changes in
clm.cpl7.template from Tony. Add in unit_testers for build-namelist. Update to nsegspc
branch. New qtr-degree RTM file, updates to mkmapdata.sh so requires -r if -f set,
build-namelist changes to ensure rtm and glc options consistent, and updates of
documentation to the latest cesm1_0_4 release tag. Sets nsegspc in the namelist and for
ne30_g16 sets it to 5. Enhancements to baseline tests.

Requirements for tag: test on bluefire (CESM, int, bat), lynx/pgi (int,bat), mirage.
Fix perf bug 1485, Fix ne30 issue 1488, Fix history dimension issue 1489

Test level of tag: std-test

Bugs fixed (include bugzilla ID):
                                 1485 (Performance issue with esmf_wrf_timemgr)
                                 1488 (partial -- now works with nsegspc=5)
				 1489 (history dimension issue)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (PTS_MODE can NOT use a global finidat file)
                                 1017 (PTS_MODE can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1474 (Missing eulerian domain files)
                                 1479 (fails on jaguarpf)
                                 1485 (Performance issue with esmf_wrf_timemgr)
                                 1488 (Problem reading restarts@ne30_g16 for some layouts)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: 

    Modified clm.cpl7.template to no longer copy lnd_in to the case directory

Describe any changes made to the namelist:

    For glacierMEC, use QICE rather than QICEYR for annual history files
    Set nsegspc to 5 for ne30np4 and the default of 20 otherwise

List any changes to the defaults for the boundary datasets:

   Fix qtr-degree RTM mapping file name

Describe any substantial timing or memory changes:

    Fixes bug 1485 (performance issue with esmf_wrf_timemgr)

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, Machines,
     esmf_wrf_timemgr, cprnc

     scripts          to scripts4_120329d
     Machines         to Machines_120406
     esmf_wrf_timemgr to esmf_wrf_timemgr_120327
     cprnc            to cprnc_120405

List all files eliminated: None

List all files added and what they do:

>>>>>>> Enhancements to baseline tests, and post-processor for test results
A       models/lnd/clm/test/system/get_cprnc_diffs.sh - Script used by TBL.sh and
           TBLrst_tools.sh
A       models/lnd/clm/test/system/show_var_diffs.sh -- Post-processor for baseline test
           results

>>>>>>> Add build-namelist unit_tester
A       models/lnd/clm/bld/unit_testers
A       models/lnd/clm/bld/unit_testers/build-namelist_test.pl

List all existing files that have been modified, and describe the changes:

>>>>>>> Use CSMDATA rather than HOME
M       models/lnd/clm/test/system/nl_files/getregional

>>>>>>> Require -res to be set if -f option used
M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh

>>>>>>> Fix qtr-degree RTM map, set nsegspc, work on usability
M       models/lnd/clm/bld/user_nl_clm ---- Add notes about setting some things
            with build-namelist options
M       models/lnd/clm/bld/build-namelist - Set nsegspc, make sure glc_grid, glc_smb
            do_rtm, and maxpatch_glcmec aren't set inconsistently between user_nl_clm
            and build-namelist options
M       models/lnd/clm/bld/README --------- Add notes about new unit_testers
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- qtr-degree RTM
           mapping file, and set nsegspc

>>>>>>> Bring in documentation updates from cesm1_0_4_n05_clm4_0_32, notes on setting
>>>>>>> finidat, adding history fields list
M       models/lnd/clm/doc/UsersGuide/special_cases.xml
M       models/lnd/clm/doc/UsersGuide/preface.xml
M       models/lnd/clm/doc/UsersGuide/clm_ug.xml
M       models/lnd/clm/doc/UsersGuide/custom.xml
M       models/lnd/clm/doc/UsersGuide/Makefile

>>>>>>> Remove duplicate line
M       models/lnd/clm/test/system/tests_pretag_bluefire

>>>>>>> Use get_cprnc_diffs.sh; truly print diffs from last file with a failed comparison
>>>>>>> rather than just printing diffs if last comparison failed
M       models/lnd/clm/test/system/TBL.sh
M       models/lnd/clm/test/system/TBLrst_tools.sh

>>>>>>> Use QICE rather than QICEYR for annual history files
M       models/lnd/clm/bld/namelist_files/use_cases/20thC_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/2000_glacierMEC_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850_glacierMEC_control.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml
M       models/lnd/clm/bld/namelist_files/use_cases/glacierMEC_pd.xml

>>>>>>> no longer copy lnd_in to the case directory
M       models/lnd/clm/bld/clm.cpl7.template

>>>>>>> Add new variables for tracking snow and ice fluxes
M       models/lnd/clm/src/main/clmtype.F90
M       models/lnd/clm/src/main/clmtypeInitMod.F90 ----------- Also changed init of btran
           and fpsn to spval
M       models/lnd/clm/src/main/histFldsMod.F90 -------------- Add some fields, add
           c2l_scale_type or l2g_scale_type for others; rename QMELT to QSNOMELT; delete
           QICEYR
M       models/lnd/clm/src/main/histFileMod.F90 -------------- Time-constant fields just
           averaged over certain land units; add handling of set_noglcmec for pft-level
           variables. Also, use lon & lat rather than lonatm & latatm
M       models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ------ Compute qflx_glcice_frz
M       models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 - Compute qflx_glcice_melt
           and qflx_snofrz_col
M       models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90 --- To get proper grid cell
           averages, turn some locals into globals, and add calculation of additional
           fields

>>>>>>> Change QICE to spval rather than 0 over non-ice_mec landunits
M       models/lnd/clm/src/biogeophys/clm_driverInitMod.F90

>>>>>>> Add snow balance check, fix water balance check for glc_dyntopo
M       models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 
M       models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90 - Add calculation of
           qflx_sl_top_soil, needed for snow balance check
M       models/lnd/clm/src/main/pft2colMod.F90 ------------- Column-level averages of some
           variables needed for snow balance check; also fixed average of qflx_evap_tot
           for lakes

>>>>>>> Only reference qflx_glcice in the run loop, not in initialization
M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 - pass init argument
M       models/lnd/clm/src/main/clm_glclnd.F90 ------ in init, qice remains 0

>>>>>>> Flexible handling of l2g_scale_type
M       models/lnd/clm/src/main/clm_varcon.F90 ---- max_lunit parameter
M       models/lnd/clm/src/main/subgridAveMod.F90 - new subroutines for concise handling
           of l2g_scale_type; add checks for l2g_scale_type==spval; remove urbanh
           c2l_scale_type



Summary of testing:

  bluefire: All PASS except:
004 blC91 TBL.sh _sc_dh clm_std^nl_urb 20030101:3600 4x5 gx3v7 -6 arb_ic ........................FAIL! rc= 7
008 blTZ1 TBL.sh 21p_cncrpsc_dh clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 7
011 blD91 TBL.sh _persc_dh clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
015 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:1800 1.9x2.5 gx1v6@1850-2100 -10 cold FAIL! rc= 7
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
019 blW51 TBL.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -5 cold .................FAIL! rc= 7
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 7
027 blHo1 TBL.sh 17p_cnsc_dh clm_drydep 20000101:1800 10x15 USGS@2000 -10 cold ..................FAIL! rc= 7
031 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 7
035 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 7
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4
043 blCn1 TBL.sh _sc_dh clm_transient_glcMEC_rcp8.5 20331231:1800 1.9x2.5 gx1v6@1850-2100 48 arb_ic FAIL! rc= 7
044 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 2
045 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 2
046 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 2
047 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 2
051 blH#2 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 ne30np4 gx1v6@2000 48 startup .........FAIL! rc= 7
053 smCI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
054 erCI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
055 brCI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
056 blCI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except:
008 blC97 TBL.sh _sc_do clm_spin^nl_urb 20030101:1800 4x5 gx3v7@1850 -6 arb_ic ..................FAIL! rc= 7
012 blHS3 TBL.sh 17p_cnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .....FAIL! rc= 7
028 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
034 blF93 TBL.sh 17p_sc_do clm_drydep^nl_voc 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 7
038 blC83 TBL.sh _sc_do clm_std^nl_urb 20020115:3600 5x5_amazon navy -10 arb_ic .................FAIL! rc= 7
046 blC63 TBL.sh _sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ........................FAIL! rc= 7
054 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 7
061 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
062 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
069 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 7
075 bl9S4 TBLscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................FAIL! rc= 5
076 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
077 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
078 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
079 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
080 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
081 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except:
BFAIL PST.f45_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_42 
BFAIL PET_PT.f45_g37.I1850.bluefire_ibm.compare_hist.clm4_0_42 
BFAIL PST.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_42 
BFAIL PET_PT.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_42
  bluefire/PTCLM testing: Not done
  lynx/pgi testing: All PASS except:
004 blC92 TBL.sh _sc_dm clm_std^nl_urb 20030101:3600 4x5 gx3v7 -6 arb_ic ........................FAIL! rc= 7
007 blD92 TBL.sh _persc_dm clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
011 blF92 TBL.sh 17p_sc_dm clm_drydep^nl_voc 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 7
015 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 7
019 blL52 TBL.sh _sc_dm clm_std^nl_urb 20020115:1800 10x15 USGS 48 arb_ic .......................FAIL! rc= 7
  lynx/pgi interactive testing: All PASS except:
008 blTZ3 TBL.sh 21p_cncrpsc_do clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 7
023 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
024 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
025 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  lynx/CESM testing: All PASS except:
FAIL  ERS_D.T31_g37.I1850.lynx_pgi.compare_hist.clm4_0_42 
FAIL  ERS_D.T31_g37.I1850.lynx_pgi.compare_hist.clm4_0_42 
CFAIL ERI.f10_f10.IRCP60CN.lynx_pathscale.C.124327 
BFAIL PST.f19_g16.I.lynx_pgi.compare_hist.clm4_0_42 
  mirage,storm/ifort interactive testing: All PASS except:
007 blD94 TBL.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
019 blL54 TBL.sh _sc_ds clm_std^nl_urb 20020115:1800 10x15 USGS 48 arb_ic .......................FAIL! rc= 7
023 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 48 cold ............FAIL! rc= 7

CLM tag used for the baseline comparison tests if applicable: clm4_0_42

Changes answers relative to baseline: Just changes some diagnostic fields

    Changes the following default history fields: TSOI, HCSOI, ZWT, WA, WT, H2OSOI,
    SOILLIQ, SOILICE, SOILWATER_10CM, QICE, QSNWCPICE_NODYNLNDUSE, QSNWCPLIQ

    Renames QMELT to QSNOMELT

    Also changes some fields not output by default

    Also changes cpl avghist files due to changes in qflx_glcice in initialization, but
    this doesn't affect the simulation

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: all
    - what platforms/compilers: all
    - nature of change: diagnostic fields only
	
===============================================================
===============================================================
Tag name:  clm4_0_42
Originator(s):  erik (Erik Kluzek)
Date: Tue Mar 27 21:14:59 MDT 2012
One-line Summary: Bring in Francis Vitt's MEGAN changes.

Purpose of changes:

Bring Francis Vitt's MEGAN branch to the trunk. Replace the five VOC 
compounds with the MEGAN model that allows up to 150 compounds to be 
generated and passed to the driver. The mechanism allows the fields to 
be choosen by a driver namelist which CLM responds to.

Requirements for tag: test on bluefire (CESM, int, bat), lynx/pgi (int,bat), mirage

Test level of tag: standard

Bugs fixed (include bugzilla ID):
                                 1459 (PTSMODE fails)
                                 1480 (Darwin_intel build)
                                 1482 (Problems running 1x1 resolutions for CLM)
                                 1484 (re-configure removes the user_nl_clm)
                                 1486 (bad irrigation maps)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (PTS_MODE can NOT use a global finidat file)
                                 1017 (PTS_MODE can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1474 (Missing eulerian domain files)
                                 1479 (fails on jaguarpf)
                                 1485 (Performance issue with esmf_wrf_timemgr)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist:

    Add new -megan option to CLM build-namelist to add a megan namelist to
      the drv_flds_in file.
    Rename -drv_drydep option to -drydep.

    New namelist items for MEGAN: megan_factors_file, megan_specifier, and
       megan_mapped_emisfctrs go into the megan_emis_nl namelist in drv_flds_in

    History fields removed: BIOGENCO, ISOPRENE (replaced by MEG_isoprene), 
                            MONOTERP, ORVOC, ORVOC, OVOC

    Units of VOCFLXT changed from uGC/M2/H to moles/m2/sec

    New history fields:

+ GAMMAC               = gamma C for VOC calc (0-1)
+ MEG_2met_2s          = MEGAN flux (kg/m2/sec)
+ MEG_2met_nonatriene  = MEGAN flux (kg/m2/sec)
+ MEG_2met_s           = MEGAN flux (kg/m2/sec)
+ MEG_2met_styrene     = MEGAN flux (kg/m2/sec)
+ MEG_3met_3DCTT       = MEGAN flux (kg/m2/sec)
+ MEG_Ehsalate         = MEGAN flux (kg/m2/sec)
+ MEG_MBO_2m3e2ol      = MEGAN flux (kg/m2/sec)
+ MEG_MBO_3m2e1ol      = MEGAN flux (kg/m2/sec)
+ MEG_MBO_3m3e1ol      = MEGAN flux (kg/m2/sec)
+ MEG_Napthalene       = MEGAN flux (kg/m2/sec)
+ MEG_PPPP_2s          = MEGAN flux (kg/m2/sec)
+ MEG_acetaldehyde     = MEGAN flux (kg/m2/sec)
+ MEG_acetic_acid      = MEGAN flux (kg/m2/sec)
+ MEG_acetone          = MEGAN flux (kg/m2/sec)
+ MEG_acoradiene       = MEGAN flux (kg/m2/sec)
+ MEG_ammonia          = MEGAN flux (kg/m2/sec)
+ MEG_anisole          = MEGAN flux (kg/m2/sec)
+ MEG_aromadendrene    = MEGAN flux (kg/m2/sec)
+ MEG_benzaldehyde     = MEGAN flux (kg/m2/sec)
+ MEG_benzyl-acetate   = MEGAN flux (kg/m2/sec)
+ MEG_benzyl-alcohol   = MEGAN flux (kg/m2/sec)
+ MEG_bergamotene_a    = MEGAN flux (kg/m2/sec)
+ MEG_bergamotene_b    = MEGAN flux (kg/m2/sec)
+ MEG_bisabolene_a     = MEGAN flux (kg/m2/sec)
+ MEG_bisabolene_b     = MEGAN flux (kg/m2/sec)
+ MEG_bornene          = MEGAN flux (kg/m2/sec)
+ MEG_borneol          = MEGAN flux (kg/m2/sec)
+ MEG_bornyl_ACT       = MEGAN flux (kg/m2/sec)
+ MEG_bourbonene_b     = MEGAN flux (kg/m2/sec)
+ MEG_butanone_2       = MEGAN flux (kg/m2/sec)
+ MEG_butene           = MEGAN flux (kg/m2/sec)
+ MEG_cadinene_d       = MEGAN flux (kg/m2/sec)
+ MEG_cadinene_g       = MEGAN flux (kg/m2/sec)
+ MEG_camphene         = MEGAN flux (kg/m2/sec)
+ MEG_camphor          = MEGAN flux (kg/m2/sec)
+ MEG_carbon_2s        = MEGAN flux (kg/m2/sec)
+ MEG_carbon_monoxide  = MEGAN flux (kg/m2/sec)
+ MEG_carbonyl_s       = MEGAN flux (kg/m2/sec)
+ MEG_carene_3         = MEGAN flux (kg/m2/sec)
+ MEG_caryophyllene_b  = MEGAN flux (kg/m2/sec)
+ MEG_cedrene_a        = MEGAN flux (kg/m2/sec)
+ MEG_cedrol           = MEGAN flux (kg/m2/sec)
+ MEG_cineole_1_8      = MEGAN flux (kg/m2/sec)
+ MEG_copaene_a        = MEGAN flux (kg/m2/sec)
+ MEG_cubebene_a       = MEGAN flux (kg/m2/sec)
+ MEG_cubebene_b       = MEGAN flux (kg/m2/sec)
+ MEG_cymene_o         = MEGAN flux (kg/m2/sec)
+ MEG_cymene_p         = MEGAN flux (kg/m2/sec)
+ MEG_decanal          = MEGAN flux (kg/m2/sec)
+ MEG_diallyl_2s       = MEGAN flux (kg/m2/sec)
+ MEG_dodecene_1       = MEGAN flux (kg/m2/sec)
+ MEG_elemene_b        = MEGAN flux (kg/m2/sec)
+ MEG_estragole        = MEGAN flux (kg/m2/sec)
+ MEG_ethane           = MEGAN flux (kg/m2/sec)
+ MEG_ethanol          = MEGAN flux (kg/m2/sec)
+ MEG_ethene           = MEGAN flux (kg/m2/sec)
+ MEG_farnescene_a     = MEGAN flux (kg/m2/sec)
+ MEG_farnescene_b     = MEGAN flux (kg/m2/sec)
+ MEG_fenchene_a       = MEGAN flux (kg/m2/sec)
+ MEG_fenchone         = MEGAN flux (kg/m2/sec)
+ MEG_formaldehyde     = MEGAN flux (kg/m2/sec)
+ MEG_formic_acid      = MEGAN flux (kg/m2/sec)
+ MEG_geranyl_acetone  = MEGAN flux (kg/m2/sec)
+ MEG_germacrene_B     = MEGAN flux (kg/m2/sec)
+ MEG_germacrene_D     = MEGAN flux (kg/m2/sec)
+ MEG_gurjunene_b      = MEGAN flux (kg/m2/sec)
+ MEG_heptanal         = MEGAN flux (kg/m2/sec)
+ MEG_heptane          = MEGAN flux (kg/m2/sec)
+ MEG_heptanone        = MEGAN flux (kg/m2/sec)
+ MEG_hexanal          = MEGAN flux (kg/m2/sec)
+ MEG_hexane           = MEGAN flux (kg/m2/sec)
+ MEG_hexanol_1        = MEGAN flux (kg/m2/sec)
+ MEG_hexenal_c3       = MEGAN flux (kg/m2/sec)
+ MEG_hexenal_t2       = MEGAN flux (kg/m2/sec)
+ MEG_hexenol_c3       = MEGAN flux (kg/m2/sec)
+ MEG_hexenyl_ACT_c3   = MEGAN flux (kg/m2/sec)
+ MEG_homosalate       = MEGAN flux (kg/m2/sec)
+ MEG_humulene_a       = MEGAN flux (kg/m2/sec)
+ MEG_humulene_g       = MEGAN flux (kg/m2/sec)
+ MEG_hydrogen_cyanide = MEGAN flux (kg/m2/sec)
+ MEG_hydrogen_s       = MEGAN flux (kg/m2/sec)
+ MEG_indole           = MEGAN flux (kg/m2/sec)
+ MEG_ionone_b         = MEGAN flux (kg/m2/sec)
+ MEG_ipsenol          = MEGAN flux (kg/m2/sec)
+ MEG_isolongifolene   = MEGAN flux (kg/m2/sec)
+ MEG_isoprene         = MEGAN flux (kg/m2/sec)
+ MEG_jasmone          = MEGAN flux (kg/m2/sec)
+ MEG_limonene         = MEGAN flux (kg/m2/sec)
+ MEG_linalool         = MEGAN flux (kg/m2/sec)
+ MEG_linalool_OXD_c   = MEGAN flux (kg/m2/sec)
+ MEG_linalool_OXD_t   = MEGAN flux (kg/m2/sec)
+ MEG_longifolene      = MEGAN flux (kg/m2/sec)
+ MEG_longipinene      = MEGAN flux (kg/m2/sec)
+ MEG_met_benzoate     = MEGAN flux (kg/m2/sec)
+ MEG_met_bromide      = MEGAN flux (kg/m2/sec)
+ MEG_met_chloride     = MEGAN flux (kg/m2/sec)
+ MEG_met_heptenone    = MEGAN flux (kg/m2/sec)
+ MEG_met_iodide       = MEGAN flux (kg/m2/sec)
+ MEG_met_jasmonate    = MEGAN flux (kg/m2/sec)
+ MEG_met_mercaptan    = MEGAN flux (kg/m2/sec)
+ MEG_met_propenyl_2s  = MEGAN flux (kg/m2/sec)
+ MEG_met_salicylate   = MEGAN flux (kg/m2/sec)
+ MEG_meta-cymenene    = MEGAN flux (kg/m2/sec)
+ MEG_methane          = MEGAN flux (kg/m2/sec)
+ MEG_methanol         = MEGAN flux (kg/m2/sec)
+ MEG_muurolene_a      = MEGAN flux (kg/m2/sec)
+ MEG_muurolene_g      = MEGAN flux (kg/m2/sec)
+ MEG_myrcene          = MEGAN flux (kg/m2/sec)
+ MEG_myrtenal         = MEGAN flux (kg/m2/sec)
+ MEG_nerolidol_c      = MEGAN flux (kg/m2/sec)
+ MEG_nerolidol_t      = MEGAN flux (kg/m2/sec)
+ MEG_neryl_acetone    = MEGAN flux (kg/m2/sec)
+ MEG_nitric_OXD       = MEGAN flux (kg/m2/sec)
+ MEG_nitrous_OXD      = MEGAN flux (kg/m2/sec)
+ MEG_nonanal          = MEGAN flux (kg/m2/sec)
+ MEG_nonenal          = MEGAN flux (kg/m2/sec)
+ MEG_ocimene_al       = MEGAN flux (kg/m2/sec)
+ MEG_ocimene_c_b      = MEGAN flux (kg/m2/sec)
+ MEG_ocimene_t_b      = MEGAN flux (kg/m2/sec)
+ MEG_octanal          = MEGAN flux (kg/m2/sec)
+ MEG_octanol          = MEGAN flux (kg/m2/sec)
+ MEG_octenol_1e3ol    = MEGAN flux (kg/m2/sec)
+ MEG_oxopentanal      = MEGAN flux (kg/m2/sec)
+ MEG_pentanal         = MEGAN flux (kg/m2/sec)
+ MEG_pentane          = MEGAN flux (kg/m2/sec)
+ MEG_phellandrene_a   = MEGAN flux (kg/m2/sec)
+ MEG_phellandrene_b   = MEGAN flux (kg/m2/sec)
+ MEG_phenyl_CCO       = MEGAN flux (kg/m2/sec)
+ MEG_pinene_a         = MEGAN flux (kg/m2/sec)
+ MEG_pinene_b         = MEGAN flux (kg/m2/sec)
+ MEG_piperitone       = MEGAN flux (kg/m2/sec)
+ MEG_propane          = MEGAN flux (kg/m2/sec)
+ MEG_propene          = MEGAN flux (kg/m2/sec)
+ MEG_pyruvic_acid     = MEGAN flux (kg/m2/sec)
+ MEG_sabinene         = MEGAN flux (kg/m2/sec)
+ MEG_selinene_b       = MEGAN flux (kg/m2/sec)
+ MEG_selinene_d       = MEGAN flux (kg/m2/sec)
+ MEG_terpinene_a      = MEGAN flux (kg/m2/sec)
+ MEG_terpinene_g      = MEGAN flux (kg/m2/sec)
+ MEG_terpineol_4      = MEGAN flux (kg/m2/sec)
+ MEG_terpineol_a      = MEGAN flux (kg/m2/sec)
+ MEG_terpinolene      = MEGAN flux (kg/m2/sec)
+ MEG_terpinyl_ACT_a   = MEGAN flux (kg/m2/sec)
+ MEG_tetradecene_1    = MEGAN flux (kg/m2/sec)
+ MEG_thujene_a        = MEGAN flux (kg/m2/sec)
+ MEG_thujone_a        = MEGAN flux (kg/m2/sec)
+ MEG_thujone_b        = MEGAN flux (kg/m2/sec)
+ MEG_toluene          = MEGAN flux (kg/m2/sec)
+ MEG_tricyclene       = MEGAN flux (kg/m2/sec)
+ MEG_verbenene        = MEGAN flux (kg/m2/sec)

List any changes to the defaults for the boundary datasets:
   Correct fpftdyn historical f05 dataset, and add rcp datasets
   Fix irrig map for f19 and f10

Describe any substantial timing or memory changes: None
   Although bug 1485 is NOT fixed! (4X performance hit due to updated esmf_wrf_timemgr!)

Code reviewed by: self,fvitt

List any svn externals directories updated (csm_share, mct, etc.): scripts, Machines,
     drv, pio, cprnc, and cism

     scripts      to scripts4_120323
     Machines     to Machines_120323a
     drv          to drvseq4_1_04
     pio          to pio_1_4_2
     cprnc        to cprnc_120322
     cism         to cism1_120322

List all files eliminated: None

List all files added and what they do:

A       models/lnd/clm/bld/namelist_files/history_fields.xsl - Style sheet to view history_fields XML file
A  +    models/lnd/clm/src/biogeochem/MEGANFactorsMod.F90 ---- MEGAN factors file

List all existing files that have been modified, and describe the changes:

>>>>>>>> Remove PTS-MODE restart tests
M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
M       models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
M       models/lnd/clm/test/system/tests_posttag_yong
MM      models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
M       models/lnd/clm/test/system/tests_posttag_nompi_regression
M       models/lnd/clm/test/system/test_driver.sh ----- Correct machine name for lynx
M       models/lnd/clm/test/system/nl_files/nl_voc ---- Add megan namelist
M       models/lnd/clm/test/system/nl_files/clm_drydep  Add -megan option rename drydep
to drydep
M       models/lnd/clm/test/system/input_tests_master - Tests with VOC must use 
               clm_drydep, make CA8 tests use drydep

M       models/lnd/clm/tools/SVN_EXTERNAL_DIRECTORIES - update cprnc

M       models/lnd/clm/bld/configure --------- Change top level model from cesm to driver
M       models/lnd/clm/bld/build-namelist ---- Add -megan option/namelist, rename
           -drv_drydep to drydep, add checking for megan namelist items
M       models/lnd/clm/bld/clm.cpl7.template - Fix multi-instance issues, and
           don't overwrite user_nl_clm file if it already exists

M       models/lnd/clm/bld/namelist_files/namelist_definition.xml ----- Update driver
           namelist items, add megan namelist, more fields to drydep_list, list
           megan compounds
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- Add commented
           out finidat file for f05, update f05 fpftdyn and add fpftdyn for f05 rcp's
           update irrig 10x15 mapping file
M       models/lnd/clm/bld/namelist_files/namelist_defaults_drydep.xml - Add defaults
           for megan namelist

M       models/lnd/clm/src/cpl_share/clm_cpl_indices.F90 - Change VOC fields to megan
           fields
M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 ------ Change VOC fields to megan
           fields
M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 ---- Change VOC fiels to megan
M       models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 - Use Megan_factors_mod,
           add VOCEmission_init, megan namelist determines the fields that will be
           output rather than the 5 VOC fields
MM      models/lnd/clm/src/biogeochem/DryDepVelocity.F90 - More fields that can be
           "mapped": 'SOAM', 'SOAI', 'SOAT', 'SOAB', 'SOAX'
M       models/lnd/clm/src/main/clm_varpar.F90 ----------- Remove nvoc
M       models/lnd/clm/src/main/clm_initializeMod.F90 ---- Add call to VOCEmission_init
M       models/lnd/clm/src/main/clmtypeInitMod.F90 ------- Remove averaged voc fields
M       models/lnd/clm/src/main/clm_atmlnd.F90 ----------- Remove voc add megan fields
M       models/lnd/clm/src/main/findHistFields.pl -------- Add ability to handle new
           megan fields
M       models/lnd/clm/src/main/clm_driver.F90 ----------- Initialize cisun/cisha
           to -999. each time-step for VOCEmission
M       models/lnd/clm/src/main/ncdio_pio.F90 ------------ Changes from John Truesdale
           so that PTS_MODE will work
M       models/lnd/clm/src/main/clmtype.F90 -------------- VOC fields have extra
           dimension remove averaged field
M       models/lnd/clm/src/main/histFldsMod.F90 ---------- Remove specific VOC fields
           add MEG_<compound_name> fields

Summary of testing:

  bluefire: All PASS except...
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 7
027 blHo1 TBL.sh 17p_cnsc_dh clm_drydep 20000101:1800 10x15 USGS@2000 -10 cold ..................FAIL! rc= 7
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4
044 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 2
045 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 2
046 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 2
047 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 2
  bluefire interactive testing: All PASS except
028 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
034 blF93 TBL.sh 17p_sc_do clm_drydep^nl_voc 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 7
050 blHQ4 TBL.sh 17p_cnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold ............FAIL! rc= 7
061 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
062 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
073 bl954 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......FAIL! rc= 6
076 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
077 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
078 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
079 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
080 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
081 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except..
BFAIL PST.f45_g37.I1850CN.bluefire_ibm.compare_hist.clm4_0_41 
BFAIL PET_PT.f45_g37.I1850.bluefire_ibm.compare_hist.clm4_0_41 
BFAIL SMS.1x1_numaIA.ICN.bluefire_ibm.compare_hist.clm4_0_41 
BFAIL ERP.1x1_mexicocityMEX.I.bluefire_ibm.compare_hist.clm4_0_41 
BFAIL PST.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_41 
BFAIL PET_PT.f10_f10.I20TRCN.bluefire_ibm.compare_hist.clm4_0_41 
  bluefire/PTCLM testing: All FAIL
  lynx interactive testing: ALL PASS up to...
023 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
  lynx/CESM testing: All PASS except..
FAIL  ERS_D.T31_g37.I1850.lynx_pgi.generate.clm4_0_42 
CFAIL ERI.f10_f10.IRCP60CN.lynx_pathscale.GC.121827 
BFAIL PST.f19_g16.I.lynx_pgi.compare_hist.clm4_0_41 
BFAIL ERS.1x1_vancouverCAN.I.lynx_pgi.compare_hist.clm4_0_41
  mirage,storm/ifort interactive testing: All PASS!
  yong/darwin/ifort interactive testing: All PASS up to...
005 smCL4 TSM.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_41

Changes answers relative to baseline: bit-for-bit (except cases with MEGAN or VOC)

===============================================================
===============================================================
Tag name:  clm4_0_41
Originator(s):  erik (Erik Kluzek)
Date: Tue Mar 13 23:43:45 MDT 2012
One-line Summary: Bring rmfmesh/rtmmap branches to trunk

Purpose of changes:

Get working with latest scripts and have clm template call build-namelist directly.  Move
rmfmesh/rtmmap branch to trunk. Remove CASA completely. Start using RTM mapping files.
Allow bigger tolerance for mksurfdata_map frac up to 1.e-5 so can work for f4x5. New
half-degree mapping files. Remove code to calculate RTM mapping. Remove ability to set
maxpatch_pft to something different than numpft in CLM configure. Remove
-ad_spinup/-exit_spinup options in configure make generic -spinup option with a few
allowed values (similar to the clm45sci version of configure). New 1850 fsurdat dataset
for ne240np4. Update externals to the latest, get test_driver working.

Requirements for tag: test on bluefire (CESM,int,bat), lynx/pgi (CESM), mirage,
template calls build-namelist. Fix 1477, 1476, 1468, 1467

Test level of tag: standard

Bugs fixed (include bugzilla ID):
                                 1477 (Bad f05 datasets)
                                 1476 (Problem with stand-alone build on bluefire)
                                 1468 (Bad f09, f19 SCRIP Grid files)
                                 1467 (Remove runinit_ibm.csh script)
                                 1449 (Remove fine-mesh)
                                 1448 (Remove CASA)
                                 1432 (Several resolutions fail for new mksurfdata_map)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1459 (PTSMODE fails)
                                 1474 (Missing eulerian domain files)
                                 1479 (fails on jaguarpf)
                                 1480 (Darwin_intel build)
                                 1482 (Problems running 1x1 resolutions for CLM)
                                 1485 (Performance issue with esmf_wrf_timemgr)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:
    Remove CASA option, don't allow maxpft to be set.
    CESM scripts/Machines updated.

Describe any changes made to the namelist:

  BuildConf/clm.buildnml.csh now becomes a script that simply calls the clm 
  build-namelist script to build your namelist. This means you effectively treat it
  as a READ-only script that you don't put changes into! Instead you use 
  the "user_nl_clm" file to put your custom changes to the namelist into.
  The use of user_nl_clm is documented in the CLM User's Guide at...

  http://www.cesm.ucar.edu/models/cesm1.0/clm/models/lnd/clm/doc/UsersGuide/x1423.html#config_time_nml

  Use preview_namelists to see full namelists that will be created.

List any changes to the defaults for the boundary datasets: Activate RTM mapping files
     New 1840 ne240 fsurdat file, replace all f05 mapping files, replace all f05 mapping
     files, and f05, f09, and f19 SCRIP grid files

Describe any substantial timing or memory changes: Yes!
   Much less global memory needed now! Only one temporary global integer array
   used.

   4X performance hit due to updated esmf_wrf_timemgr! (see bug 1485)

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): scripts, Machines,
          drv, csm_share, esmf_wrf_timemgr, datm

     scripts          to datm8_120219
     Machines         to Machines_120309
     drv              to drvseq4_1_02
     csm_share        to share3_120308
     esmf_wrf_timemgr to esmf_wrf_timemgr_120218
     datm             to datm8_120219

List all files eliminated:

>>>>>>> Eliminate stand-alone intrepid/kraken testing files, CASA, fine-mesh, 
>>>>>>> and RTM mapping calc. Elimanate interpinic run script, too hard to support.
D       models/lnd/clm/test/system/tests_posttag_intrepid
D       models/lnd/clm/test/system/tests_posttag_intrepid_nompi
D       models/lnd/clm/test/system/tests_posttag_kraken
D       models/lnd/clm/tools/interpinic/runinit_ibm.csh
D       models/lnd/clm/src/biogeochem/CASAPhenologyMod.F90
D       models/lnd/clm/src/biogeochem/CASAMod.F90
D       models/lnd/clm/src/main/CASAiniTimeVarMod.F90
D       models/lnd/clm/src/main/downscaleMod.F90
D       models/lnd/clm/src/riverroute/RtmMapMod.F90

List all files added and what they do: Add config defaults files for supported
     single point datasets, add empty user_nl_clm file

A  +    models/lnd/clm/bld/user_nl_clm
A  +    models/lnd/clm/bld/config_files/config_defaults_1x1_smallvilleIA.xml
A  +    models/lnd/clm/bld/config_files/config_defaults_1x1_mexicocityMEX.xml
A  +    models/lnd/clm/bld/config_files/config_defaults_1x1_numaIA.xml
A  +    models/lnd/clm/bld/config_files/config_defaults_1x1_vancouverCAN.xml

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>> Changes to config_file for changes to configure
>>>>>>>>>>>>> eliminate use of maxpft, ad_spinup and exit_spinup use spinup option
M       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
M       models/lnd/clm/test/system/config_files/17p_cndvsc_m
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_m
M       models/lnd/clm/test/system/config_files/17p_cndvsc_o
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_o
M       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
M       models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_s
M       models/lnd/clm/test/system/config_files/17p_cndvsc_s
M       models/lnd/clm/test/system/config_files/17p_sc_dh
M       models/lnd/clm/test/system/config_files/17p_sc_dm
M       models/lnd/clm/test/system/config_files/17p_sc_do
M       models/lnd/clm/test/system/config_files/17p_sc_ds
M       models/lnd/clm/test/system/config_files/17p_cnsc_h
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_h
M       models/lnd/clm/test/system/config_files/17p_cnsc_dh
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_dh
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_m
M       models/lnd/clm/test/system/config_files/17p_cnsc_m
M       models/lnd/clm/test/system/config_files/17p_cnsc_o
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_o
M       models/lnd/clm/test/system/config_files/17p_cnsc_dm
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_dm
M       models/lnd/clm/test/system/config_files/17p_cnsc_do
M       models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_do
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_s
M       models/lnd/clm/test/system/config_files/17p_sc_h
M       models/lnd/clm/test/system/config_files/21p_cncrpsc_ds
M       models/lnd/clm/test/system/config_files/17p_cnsc_ds
M       models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
M       models/lnd/clm/test/system/config_files/17p_cnc13sc_do
M       models/lnd/clm/test/system/config_files/17p_sc_m
M       models/lnd/clm/test/system/config_files/17p_sc_o
M       models/lnd/clm/test/system/config_files/17p_cnnfsc_dh
M       models/lnd/clm/test/system/config_files/17p_cnnfsc_dm
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dh
M       models/lnd/clm/test/system/config_files/17p_cndvsc_dh
M       models/lnd/clm/test/system/config_files/17p_cnnfsc_do
M       models/lnd/clm/test/system/config_files/17p_cndvsc_dm
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dm
M       models/lnd/clm/test/system/config_files/17p_cndvsc_do
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_do
M       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_ds
M       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
M       models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
M       models/lnd/clm/test/system/config_files/README
M       models/lnd/clm/test/system/config_files/21p_cndvcrpsc_h
M       models/lnd/clm/test/system/config_files/17p_cndvsc_h

>>>>>>>>>>>>> Get working with latest scripts, eliminate intrepid.
M       models/lnd/clm/test/system/TCB.sh --------- Send -comp to configure
M       models/lnd/clm/test/system/test_driver.sh - Eliminate intrepid, get working
           with latest CESM scripts/Machines, update env settings to Machines
M       models/lnd/clm/test/system/CLM_runcmnd.sh - Eliminate intrepid
M       models/lnd/clm/test/system/tests_pretag_bluefire - Correct test name

>>>>>>>>>>>>> Eliminate CASA
M       models/lnd/clm/tools/interpinic/src/interpinic.F90
M       models/lnd/clm/tools/mksurfdata_map/src/clm_varctl.F90

>>>>>>>>>>>>> Eliminate CASA, and maxpft. Read site specific config_defaults
>>>>>>>>>>>>> Change spinup option, get working with latest scripts.
M       models/lnd/clm/bld/configure --------- Use clm45sci API (use -spinup in
             place of ad_spinup/exit_spinup), read site specific config_defaults
             file when sitespf_pt option is used. Eliminate CASA, and maxpft option.
             Get configure working with latest CESM scripts. Add mct/pio subdirectory
             for SMP=on/off so will build on bluefire. Add -comp option required
             for new CESM scripts (for stand-alone test).
M       models/lnd/clm/bld/build-namelist ---- Remove faerdep, use spinup from 
             configure rather than ad/exit_spinup, remove substition of CSMDATA
             in filenames.
M       models/lnd/clm/bld/clm.cpl7.template - Use sitespf_pt for regional case
             when CLM_USRDAT NOT used and don't use clm_root in configure.
M       models/lnd/clm/bld/config_files/config_sys_defaults.xml - Add comp settings
             and change mach settings to NOT include compiler. Remove: dec_osf,
              es, irix, solaris, super-ux, unicosmp as no longer tested on
M       models/lnd/clm/bld/config_files/config_definition.xml --- Remove CASA option
              mxpft can only be 17 or 21. Add comp, remove ad_spinup/exit_spinup
              for spinup option. Change description of sitespf_pt option.

>>>>>>>>>>>>> Eliminate CASA, move ad/exit_spinup to spinup, add 1850 ne240 fsurdat
>>>>>>>>>>>>> Activate all RTM maps, replace all f05 maps.
M       models/lnd/clm/bld/namelist_files/namelist_definition.xml - Rm fget_archdev
              only allow R05 for rtm_res
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - ad_spinup
              to spinup
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
              add 1840 ne240 fsurdat, remove null setting of findat for maxpft=4
              activate RTM maps, replace all 0.47x0.63 mapping files
M       models/lnd/clm/bld/namelist_files/namelist_defaults.xsl
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Use
              standard shared SCRIP-grid files for: f05, f09, f19 resolutions
M       models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ------- Change
              ad/exit_spinup to spinup
M       models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Remove
              fatmgrid, flndtopo, fatmtopo, and fatmlndfrc files
M       models/lnd/clm/doc/IMPORTANT_NOTES - Remove CASA, fine-mesh, and fget_archdev

>>>>>>>>>>>>> Eliminate CASA, fine-mesh and atm data, change llatlon for ldomain
>>>>>>>>>>>>> Require RTM map files to be read. Require fatmlndfrc files to be
>>>>>>>>>>>>> in CESM domain file format. Require maxpft=numpft+1. Fix a pnetcdf issue.
M       models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 - Remove CASA use ldomain
              in place of llatlon
M       models/lnd/clm/src/biogeochem/CNDVMod.F90 ------ ldomain replaces llatlon
M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90  --- Get rid of fine-mesh
              downscaling, use ldomain in place of llatlon remove atm, lnd versions
              of everything (adomain, adecomp, get_proc_bounds_atm, begg_a/l, atm_sx for example. 
M       models/lnd/clm/src/main/organicFileMod.F90 ---- llatlon becomes ldomain
M       models/lnd/clm/src/main/decompInitMod.F90 ----- Remove decompInit_atm, acid
              remove atm grid stuff for: decompInit_lnd and decompInit_glcp
M       models/lnd/clm/src/main/clm_initializeMod.F90 - Remove downscaling and atm/lnd
              grid stuff as well as CASA.
M       models/lnd/clm/src/main/clm_glclnd.F90 -------- Remove clm_maps2x and clm_mapx2s
              and atm_s2x and atm_x2s 
M       models/lnd/clm/src/main/clmtypeInitMod.F90 ---- Remove CASA stuff
M       models/lnd/clm/src/main/ndepStreamMod.F90 ----- Replace llatlon with ldomain
M       models/lnd/clm/src/main/histFileMod.F90 ------- Remove atm grid stuff such
              as gratm, namea grids, remove CASA
M       models/lnd/clm/src/main/clm_atmlnd.F90 -------- Remove downscaling/upscaling
              init_adiag_type, clm_downscale_a2l and data: atm_a2l, atm_l2a, adiag_arain
M       models/lnd/clm/src/main/restFileMod.F90 ------- Remove CASA
M       models/lnd/clm/src/main/controlMod.F90 -------- Remove fatmgrid, CASA, fatmtopo
              add write about flndtopo (still needed for glc_nec)
M       models/lnd/clm/src/main/initSurfAlbMod.F90 ---- Remove CASA
M       models/lnd/clm/src/main/clm_varctl.F90 -------- Remove downscale and CASA
M       models/lnd/clm/src/main/clm_driver.F90 -------- Remove CASA
M       models/lnd/clm/src/main/initGridCellsMod.F90 -- Remove setting of _a domain
               info, gindex_a, longdeg_a, latdeg_a, lon_a, lat_a
M       models/lnd/clm/src/main/ncdio_pio.F90 --------- Remove use of gratm, set
               data=' ' needed for pnetcdf
M       models/lnd/clm/src/main/surfrdMod.F90 --------- Remove surfrd_get_latlon, 
               surfrd_get_frac, surfrd_wtxy_veg_rank, surfrd_mkrank, add 
               surfrd_get_globmask in place of surfrd_get_latlon, get rid of
               ability to read in CLM frac datasets and only read in CESM domain file
               format. Abort if allocate_all_vegpfts is NOT true.
M       models/lnd/clm/src/main/domainMod.F90 --------- Remove latlon_type, 
               nara, and ntop add isgrid2d, adomain, alatlon, llatlon, gatm, amask, pftm
               methods: domain_setptrs, latlon_init, latlon_check, latlon_clean,
                        latlon_setsame
M       models/lnd/clm/src/main/decompMod.F90 --------- Remove get_proc_global_atm, 
               get_proc_bounds_atm, and atmosphere decomposition data
M       models/lnd/clm/src/main/clmtype.F90 ----------- Remove CASA, gratm
M       models/lnd/clm/src/main/histFldsMod.F90 ------- Remove use of atm_a2l,
-              adiag_arain, adiag_asnow, adiag_aflux, adiag_lflux, downscale
               remove CASA and downscale if's
M       models/lnd/clm/src/main/mkarbinitMod.F90 ------ Remove CASA
M       models/lnd/clm/src/riverroute/RtmMod.F90 ------ Remove some global RTM
               data.  Replace call's to endrun to shr_sys_abort as intial
               step of the move to having RTM on it's own component.
               Add rtm_celledge. 
M       models/lnd/clm/src/biogeophys/UrbanInputMod.F90 ---- llatlon to ldomain
M       models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 - formatting change
M       models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ---- Remove CASA
M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 ------ Remove downscaling

Summary of testing:

  bluefire: TBL tests fail because of use of RTM mapping files and NetCDF issue and
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
044 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 2
045 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 2
046 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 2
  bluefire interactive testing: All PASS except, TBL tests fail because of NetCDF build issue and
026 erCK4 TER.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
027 brCK4 TBR.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
031 brCK8 TBR.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 6
  bluefire/CESM testing: All PASS except 
                         (and ALL compare tests fail couldn't find base result)
FAIL  SMS.1x1_numaIA.ICN.bluefire_ibm 
FAIL  ERP.1x1_mexicocityMEX.I.bluefire_ibm 
  bluefire/PTCLM testing: All FAIL
  lynx/pgi testing: ALL FAIL
  lynx/pgi interactive testing: ALL FAIL
  lynx CESM testing: ALL PASS except... (don't compare as no baselines for clm4_0_40)
CFAIL ERI.f10_f10.IRCP60CN.lynx_pathscale.162157 
FAIL  PST.f19_g16.I.lynx_pgi 
RUN   ERS.1x1_vancouverCAN.I.lynx_pgi.162157 
  mirage,storm/ifort interactive testing: All PASS!
  jaguarpf CESM testing: All FAIL
RUN   ERS_D.f09_g16.I1850.titan_pgi.182111 
FAIL  ERI.f10_f10.IRCP60CN.titan_pgi 
FAIL  PST.f09_g16.I.titan_pgi 
FAIL  PET_PT.f10_f10.I20TRCN.titan_pgi 
FAIL  ERP.f19_g16.I4804CN.titan_pgi 
RUN   ERS.1x1_mexicocityMEX.I.titan_pgi.182111 
FAIL  ERI_D.ne30_g16.I1850CN.titan_pgi 
TFAIL ERH.ne120_g16.I2000CN.titan_pgi.182111
RUN   ERS.f09_g16.IRCP26CN.titan_pgi.182111 
FAIL  SMS.f10_f10.IRCP45CN.titan_pgi 
RUN   ERS.f19_g16.IRCP60CN.titan_pgi.182111 
FAIL  SMS_D.f10_f10.IRCP85CN.titan_pgi 
RUN   ERS.f09_g16.IG1850.titan_pgi.182111

CLM tag used for the baseline comparison tests if applicable: clm4_0_40

Changes answers relative to baseline: Yes (using RTM mapping files now)

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: RTM mapping for f05
    - what platforms/compilers:
    - nature of change larger than roundoff/same climate

===============================================================
===============================================================
Tag name:  clm4_0_40
Originator(s):  erik (Erik Kluzek)
Date: Thu Feb 16 14:19:28 MST 2012
One-line Summary: Back out update to new T31 surface datasets

Purpose of changes:

Back out the new T31 surface datasets so will have initial conditions to use
for T31. Bring in the new surface datasets with initial conditions in the next tag.

Requirements for tag: Run on bluefire

Test level of tag: critical

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1459 (PTSMODE fails)
                                 1468 (Bad f09, f19 SCRIP Grid files)
                                 1476 (Problem with stand-alone build on bluefire)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Bring back old T31 datasets
   Comment out the new T31 surface datasets and put back the old T31 datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

    A   models/lnd/clm/src/main/findHistFields.pl -- Add script to figure out list of 
          history field names, long_names, and units
          Create's a XML file as well as giving you a neatly formatted sorted list.

List all existing files that have been modified, and describe the changes:

    M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Move T31 files
          back to previous version and comment out the new files.

Summary of testing:

  bluefire: All PASS except...
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5
  bluefire interactive testing: All PASS except...
026 erCK4 TER.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
027 brCK4 TBR.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
031 brCK8 TBR.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 6
065 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
080 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
082 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
084 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 
  bluefire/CESM testing: All PASS except...
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm4_0_39

Changes answers relative to baseline: T31

  Answers are identical to clm4_0_38, if fatmgrid=fsurdat in controlMod.F90
    except for ntop for some grids and TREFMXAV and TREFMNAV for others.

===============================================================
===============================================================
Tag name:  clm4_0_39
Originator(s):  erik (Erik Kluzek)
Date: Wed Feb  1 11:40:11 MST 2012
One-line Summary: Bring newgrid branch to trunk

Purpose of changes:

Move newgrid branch from Mariana to trunk. Add ne4np4, ne16np4, ne240np4 surface
datasets. Replace all T31 surface datasets. Start removing CASA and fine-mesh testing
and support. Bring in Tony's updates to ESMF5.2.0.

Requirements for tag:

run on lynx-pgi/bluefire/mirage-intel, fix bugs: 1446, 1444, 1442, 1404, 1430, 1425, 1420

Test level of tag: standard

Bugs fixed (include bugzilla ID):
                                 1458 (Problem using fsurdat for fatmgrid as no verticies)
                                 1444 (attempt to read unallocated variable)
                                 1442 (Make clm-template same as CAM template)
                                 1430 (Remove DIN_LOC_ROOT_CLMQIAN -- add ...CLM_FORC)
                                 1425 (Double quotes causes Namelist.pm to hang)
                                 1420 (Bad history output for TREFMNAV, TREFMXAV)
                                 1404 (Inconsistent domain and fatmlndfrc files)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1454 (lack of 1D history files in CLM testing)
                                 1455 (bad time-stamp in CLM testing)
                                 1457 (bug in soil color in mksurfdata_map)
                                 1459 (PTSMODE fails)
                                 1468 (Bad f09, f19 SCRIP Grid files)
                                 1476 (Problem with stand-alone build on bluefire)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system:
   Move rtm, voc, and glc_nec from configure-time to run-time namelist options

   Remove the -rtm -glc_nec and -voc options from "configure"
   (NO longer available to CLM_CONFIG_OPTS)


Describe any changes made to the namelist:

   Add "-glc_nec, -glc_smb, -rtm options to build-namelist
   (now available to CLM_BLDNML_OPTS)

   Remove fine-mesh option to build-namelist "-lnd_res" 
   (NO longer available to CLM_BLDNML_OPTS)

   Add following to clm_inparm namelist:

      do_rtm             => If TRUE, turn on rtm river routing
      maxpatch_glcmec    => Number of  multiple elevation classes over glacier points.
         Normally this is ONLY used when running CESM with the active glacier model.

   Add following to the driver namelist to pass extra fields

      flds_voc
      flds_co2a
      flds_co2a
      flds_co2c
      flds_co2_dmsa
      cplflds_custom
      glc_nec

List any changes to the defaults for the boundary datasets:
    Replace T31 surface datasets, remove T31 finidat datasets
    Add T31 fpftdyn datasets for all cases
    Add ne240np4 datasets, ne4np4, ne16np4 surface datasets

    remove ALL fatmtopo datasets and all but T31, f09, f19 for glc_nec flndtopo

    Remove fatmlndfrc datasets -- use datm domainfiles in their place

Describe any substantial timing or memory changes: None

Code reviewed by: self,mvertens,tcraig (ESMF update)

List any svn externals directories updated (csm_share, mct, etc.): almost all
   scripts        to scripts4_120123
   Machines       to Machines_120123
   drv            to drvseq4_1_01
   datm           to datm8_120123
   socn/sice/sglc to stubs1_3_01
   cism           to cism1_120123
   csm_share      to share3_120123
   esmf_wrf_tmgr  to esmf_wrf_timemgr_120123
   gen_domain     to gen_domain_120117

List all files eliminated:

>>>>>>>>>>>>>> Get rid of mkgriddata as no longer needed
>>>>>>>>>>>>>> Use gen_domain or models/lnd/clm/tools/mkmapdata/mknoocnmap.pl
  D         mkgriddata/mkgriddata.namelist
  D         mkgriddata/mkgriddata.regional
  D         mkgriddata/src/mkvarpar.F90
  D         mkgriddata/src/mkvarctl.F90
  D         mkgriddata/src/clm_varpar.F90
  D         mkgriddata/src/clm_varctl.F90
  D         mkgriddata/src/shr_sys_mod.F90
  D         mkgriddata/src/shr_file_mod.F90
  D         mkgriddata/src/ncdio.F90
  D         mkgriddata/src/shr_log_mod.F90
  D         mkgriddata/src/Filepath
  D         mkgriddata/src/Macros.custom
  D         mkgriddata/src/shr_kind_mod.F90
  D         mkgriddata/src/shr_const_mod.F90
  D         mkgriddata/src/mkgriddata.F90
  D         mkgriddata/src/domainMod.F90
  D         mkgriddata/src/areaMod.F90
  D         mkgriddata/src/creategridMod.F90
  D         mkgriddata/src/nanMod.F90
  D         mkgriddata/src/Srcfiles
  D         mkgriddata/src/Mkdepends
  D         mkgriddata/src/Makefile
  D         mkgriddata/src
  D         mkgriddata/mkgriddata.singlept
  D         mkgriddata/mkgriddata.cesm_dom
  D         mkgriddata/README
  D         mkgriddata

>>>>>>>>>>>>>> Remove config files for CASA or that turn off RTM, or 
>>>>>>>>>>>>>> turn on VOC or glc_mec
  D       models/lnd/clm/test/system/config_files/_nrsc_dh
  D       models/lnd/clm/test/system/config_files/4p_casasc_dh
  D       models/lnd/clm/test/system/config_files/4p_casasc_dm
  D       models/lnd/clm/test/system/config_files/4p_casasc_do
  D       models/lnd/clm/test/system/config_files/4p_casasc_ds
  D       models/lnd/clm/test/system/config_files/4p_casasc_h
  D       models/lnd/clm/test/system/config_files/4p_casasc_m
  D       models/lnd/clm/test/system/config_files/4p_casasc_o
  D       models/lnd/clm/test/system/config_files/17p_nrsc_ds
  D       models/lnd/clm/test/system/config_files/_nrsc_dm
  D       models/lnd/clm/test/system/config_files/_nrsc_do
  D       models/lnd/clm/test/system/config_files/4p_nrcasasc_ds
  D       models/lnd/clm/test/system/config_files/17p_vorsc_h
  D       models/lnd/clm/test/system/config_files/_nrsc_ds
  D       models/lnd/clm/test/system/config_files/17p_vorsc_m
  D       models/lnd/clm/test/system/config_files/17p_nrcnsc_do
  D       models/lnd/clm/test/system/config_files/17p_vorsc_o
  D       models/lnd/clm/test/system/config_files/17p_nrcnsc_ds
  D       models/lnd/clm/test/system/config_files/_nrmexsc_ds
  D       models/lnd/clm/test/system/config_files/_mec10sc_dh
  D       models/lnd/clm/test/system/config_files/_nrcnsc_do
  D       models/lnd/clm/test/system/config_files/_mec10sc_dm
  D       models/lnd/clm/test/system/config_files/_nrcnsc_ds
  D       models/lnd/clm/test/system/config_files/_mec10sc_do
  D       models/lnd/clm/test/system/config_files/_mec10sc_ds
  D       models/lnd/clm/test/system/config_files/_nrsc_s
  D       models/lnd/clm/test/system/config_files/_nrvansc_ds
  D       models/lnd/clm/test/system/config_files/_nrnil3sc_dh
  D       models/lnd/clm/test/system/config_files/_nrnil3sc_dm
  D       models/lnd/clm/test/system/config_files/17p_vorsc_dh
  D       models/lnd/clm/test/system/config_files/21p_nrcncrpsc_s
  D       models/lnd/clm/test/system/config_files/21p_nrcncrpsc_ds
  D       models/lnd/clm/test/system/config_files/17p_vorsc_dm
  D       models/lnd/clm/test/system/config_files/17p_vorsc_do
  D       models/lnd/clm/test/system/config_files/17p_vorsc_ds
  D       models/lnd/clm/test/system/config_files/_mec10sc_h
  D       models/lnd/clm/test/system/config_files/_mec10sc_m
  D       models/lnd/clm/test/system/config_files/_mec10sc_o

>>>>>>>>>>>>>> Remove mkdatadomain always use gen_domain
  D       models/lnd/clm/tools/mkdatadomain
  D       models/lnd/clm/tools/mkdatadomain/mkdatadomain.namelist
  D       models/lnd/clm/tools/mkdatadomain/src
  D       models/lnd/clm/tools/mkdatadomain/src/addglobal.F90
  D       models/lnd/clm/tools/mkdatadomain/src/create_domain.F90
  D       models/lnd/clm/tools/mkdatadomain/src/Mkdepends
  D       models/lnd/clm/tools/mkdatadomain/src/Srcfiles
  D       models/lnd/clm/tools/mkdatadomain/src/Filepath
  D       models/lnd/clm/tools/mkdatadomain/src/Macros.custom
  D       models/lnd/clm/tools/mkdatadomain/src/Makefile
  D       models/lnd/clm/tools/mkdatadomain/src/shr_kind_mod.F90
  D       models/lnd/clm/tools/mkdatadomain/src/shr_const_mod.F90
  D       models/lnd/clm/tools/mkdatadomain/README
>>>>>>>>>>>>>> fine-mesh no longer supported don't worry about topo files anymore
  D       models/lnd/clm/bld/namelist_files/checktopofiles.ncl

List all files added and what they do:

>>>>>>>>>>>>>> Rename without RTM off option
  A  +    models/lnd/clm/test/system/config_files/17p_cnsc_ds
  A  +    models/lnd/clm/test/system/config_files/_mexsc_ds
  A  +    models/lnd/clm/test/system/config_files/_vansc_ds

>>>>>>>>>>>>>> namelist to turn on VOC and RTM off, and gen_domain options
  A  +    models/lnd/clm/test/system/nl_files/nl_voc
  A  +    models/lnd/clm/test/system/nl_files/clm_nortm
  A  +    models/lnd/clm/test/system/nl_files/gen_domain.ne30.runoptions
  A  +    models/lnd/clm/test/system/nl_files/gen_domain.T31.runoptions

>>>>>>>>>>>>>> Add scripts to create SCRIP grid/map files for region/single-point domains
  A  +    models/lnd/clm/tools/mkmapdata/mkunitymap.ncl
  A  +    models/lnd/clm/tools/mkmapdata/mknoocnmap.pl
  A  +    models/lnd/clm/tools/mkmapgrids/mkscripgrid.ncl

     mknoocnmap.pl [options]      Gets map and grid files for a single land-only point.
 REQUIRED OPTIONS
     -centerpoint [or -p] <lat,lon> Center latitude,longitude of the grid to create.
     -name [-or -n] <name>      Name to use to describe point


List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Remove rtm off from config files and update README file
  M       models/lnd/clm/test/system/config_files/_nil3sc_dh
  M       models/lnd/clm/test/system/config_files/_nil3sc_dm
  M       models/lnd/clm/test/system/config_files/README

>>>>>>>>>>>>>> Change tests
  M       models/lnd/clm/test/system/README.testnames --- Update test names
                6, A, J, Q, S, V, X, and Z  configurations are now unused
                resolutions: 3, F, G and H are now unused
  M       models/lnd/clm/test/system/mknamelist --------- Remove fine-mesh option
  M       models/lnd/clm/test/system/test_driver.sh ----- Update paths for
               edinburgh/jaguar
  M       models/lnd/clm/test/system/input_tests_master - Remove nr,vo,mec in configure
               files for tests and move to namelist, remove compile-only test names
  M       models/lnd/clm/test/system/TSMtools.sh -------- Allow run files to
               be in test directory

>>>>>>>>>>>>>> Change testnames
                6, A, J, Q, S, V,  X, and Z  configurations are now unused
                resolutions: 3, F, G and H are now unused
  M       models/lnd/clm/test/system/tests_posttag_purempi_regression
  M       models/lnd/clm/test/system/tests_posttag_hybrid_regression
  M       models/lnd/clm/test/system/tests_posttag_yong
  M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
  M       models/lnd/clm/test/system/tests_pretag_bluefire
  M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi
  M       models/lnd/clm/test/system/tests_pretag_edinburgh
  M       models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
  M       models/lnd/clm/test/system/tests_posttag_kraken
  MM      models/lnd/clm/test/system/tests_pretag_jaguarpf
  MM      models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
  M       models/lnd/clm/test/system/tests_posttag_mirage
  M       models/lnd/clm/test/system/tests_posttag_intrepid
  M       models/lnd/clm/test/system/tests_posttag_intrepid_nompi
  M       models/lnd/clm/test/system/tests_posttag_nompi_regression
  M       models/lnd/clm/test/system/tests_posttag_lynx

>>>>>>>>>>>>>> Fix run-time options
  M       models/lnd/clm/test/system/nl_files/clm_usrdat ----- Add rtm off
  M       models/lnd/clm/test/system/nl_files/mkmapdata_if10 - Remove -i option

>>>>>>>>>>>>>> Add option to create datasets NOT entered into XML database
  M       models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - Use domainfile
               rather than fatmgrid file, which changes variable names as well
  M       models/lnd/clm/tools/README.testing --------------- Note that run files
               can be in tool directory or test directory
  M       models/lnd/clm/tools/README ----------------------- Update information on
               process
  MM      models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl - Add usrspc option
  M       models/lnd/clm/tools/mkmapdata/regridbatch.sh ----- Use -b instead of -i
  M       models/lnd/clm/tools/mkmapdata/mkmapdata.sh ------- Replace -i option with
               -b for batch, add option to read input SCRIP grid file (-f) and (-t)
               option for regional or global type, update usage
  M       models/lnd/clm/tools/mksurfdata_map/README -------- Update usage info
  M       models/lnd/clm/tools/mkmapdata/README ------------- Update usage info

 New options for unsupported resolutions to mksurfdata.pl

+     For unsupported, user-specified resolutions:      
+     $ProgName -res usrspec -usr_gname <user_gname> -usr_gdate <user_gdate>  [OPTIONS]
+        -usr_gname "user_gname"    User resolution name to find grid file with 
+                                   (only used if -res is set to 'usrspec')
+        -usr_gdate "user_gdate"    User map date to find mapping files with
+                                   (only used if -res is set to 'usrspec')
+                                   NOTE: all mapping files are assumed to be in mkmapdata
+                                    - and the user needs to have invoked mkmapdata in
+                                      that directory first
+

>>>>>>>>>>>>>> Move rtm, glc_nec, voc from configure to build-namelist
  M       models/lnd/clm/bld/configure -------------- Remove -rtm, -glc_nec, -voc options
  M       models/lnd/clm/bld/listDefaultNamelist.pl - Get datm namelist files as well
  M       models/lnd/clm/bld/build-namelist --------- Add: glc_nec, glc_smb, rtm options
              Remove: lnd_res fine-mesh option
  M       models/lnd/clm/bld/clm.cpl7.template ------ Move rtm, glc_nec settings from
              configure to build-namelist, set fatmlndfrc from domain file set in scripts
              add processing for LND_GRID=reg, set glc_smb, loop over namelists for DART,
  M       models/lnd/clm/bld/README
  M       models/lnd/clm/bld/config_files/config_definition.xml - Remove rtm, glc_nec, voc

>>>>>>>>>>>>>>  Add new namelist items, remove CASA, fine-mesh, update T31
>>>>>>>>>>>>>>  add ne4np4, ne16np4, ne240np4 datasets
  M       models/lnd/clm/bld/namelist_files/namelist_definition.xml ------ 
              Add:    rtm, maxpatch_glcmec, do_rtm, new cpl files, navy lmask
              remove: fatmtopo, CASA namelist items,
  M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - rtm/glc_nec
  M       models/lnd/clm/bld/namelist_files/namelist_definition.xsl ------- rm CASA
  M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -----
               Add:    do_rtm, new T31 fsurdat/fpftdyn files, new ne4np4, ne16np4,
                       fsurdat and ne240np4 fsurdat/fatmlndfrc, missing map files (f19,T31)
               Remove: T31 finidat, remove fatmtopo, and most flndtopo
  M       models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ---- Change
              paths of domainfiles to share/domains
  M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml Add 10min
              navy grid file

>>>>>>>>>>>>>> Add glc_nec
  M       models/lnd/clm/bld/namelist_files/use_cases/20thC_glacierMEC_transient.xml
  M       models/lnd/clm/bld/namelist_files/use_cases/2000_glacierMEC_control.xml
  M       models/lnd/clm/bld/namelist_files/use_cases/1850_glacierMEC_control.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
  M models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml
  M       models/lnd/clm/bld/namelist_files/use_cases/glacierMEC_pd.xml


>>>>>>>>>>>>>> Remove RTM, GLC_NEC, ESMF5.2.0 updates, don't require extents on fsurdat
  M       models/lnd/clm/src/main/clm_varpar.F90 -- Change for glc_nec
  M       models/lnd/clm/src/main/accumulMod.F90 -- Initialize val to zero if period=1
  M       models/lnd/clm/src/main/clm_initializeMod.F90 - Change order of calls, rm RTM
  M       models/lnd/clm/src/main/clm_glclnd.F90 -- Use maxpatch_glcmec NOT glc_nec
  M       models/lnd/clm/src/main/subgridMod.F90 -- Use maxpatch_glcmec NOT glc_nec
  M       models/lnd/clm/src/main/histFileMod.F90 - Remove RTM add do_rtm
                make sure ninst suffix is in restart history filename
  M       models/lnd/clm/src/main/restFileMod.F90 - Remove RTM add do_rtm
  M       models/lnd/clm/src/main/controlMod.F90 -- Remove RTM add do_rtm,
                maxpatch_glcmec, glc_grid, use fatmlndfrc for fatmgrid if empty
                broadcast glc_topomax if create_glacier_mec_landunit
  M       models/lnd/clm/src/main/clm_time_manager.F90 - Changes from Tony to update
                to ESMF5.2.0
  M       models/lnd/clm/src/main/clm_varctl.F90 ---- Remove RTM, use do_rtm, and remove
                GLC_NEC use arrays for glc_nec variables
  M       models/lnd/clm/src/main/clm_driver.F90 ---- Remove RTM use do_rtm
  M       models/lnd/clm/src/main/initGridCellsMod.F90 - Write more info on error
  M       models/lnd/clm/src/main/pftvarcon.F90 ----- Remove unused MPI vars
  M       models/lnd/clm/src/main/surfrdMod.F90 ----- Don't require LATS/N,LONE/W on
                files set to nan if not used, use maxpatch_glcmec NOT glc_nec
  M       models/lnd/clm/src/main/domainMod.F90 ----- Don't write LATS/N,LONE/W if
                first lonw is nan
  M       models/lnd/clm/src/main/decompMod.F90 ----- Remove RTM use do_rtm
  M       models/lnd/clm/src/main/histFldsMod.F90 --- Remove RTM use do_rtm
  M       models/lnd/clm/src/riverroute/RtmMod.F90 -- Remove RTM use run_rtm NOT do_rtm
  M       models/lnd/clm/src/riverroute/RunoffMod.F90 Remove RTM

>>>>>>>>>>>>>> ESMF5.2.0 updates, remove RTM, GLC_NEC
  M       models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 - ESMF5.2.0 updates, remove RTM
                 use do_rtm, remove GLC_NEC use arrays of glc_nec
  M       models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90 -- ESMF5.2.0 updates
  M       models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 --- ESMF4.2.0 updates
  M       models/lnd/clm/src/cpl_share/clm_cpl_indices.F90 - Updated for new coupler fields spec
                Remove RTM, GLC_NEC CPP tokens, make glc_nec variables arrays
                some updates to ESMF5.2.0

Summary of testing:

  bluefire: All PASS except...
004 blC91 TBL.sh _sc_dh clm_std^nl_urb 20030101:3600 4x5 gx3v7 -6 arb_ic ........................FAIL! rc= 7
008 blTZ1 TBL.sh 21p_cncrpsc_dh clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 7
011 blD91 TBL.sh _persc_dh clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
015 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:1800 1.9x2.5 gx1v6@1850-2100 -10 cold FAIL! rc= 7
018 brW51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
019 blW51 TBL.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -5 cold .................FAIL! rc= 7
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4 (bluefire compiler error)
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5 (bluefire compiler error)
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5 (bluefire compiler error)
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4 (bluefire compiler error)
027 blHo1 TBL.sh 17p_cnsc_dh clm_drydep 20000101:1800 10x15 USGS@2000 -10 cold ..................FAIL! rc= 7 (bluefire compiler error)
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4 (bluefire compiler error)
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5 (bluefire compiler error)
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5 (bluefire compiler error)
031 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4 (bluefire compiler error)
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4 (bluefire compiler error)
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5 (bluefire compiler error)
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5 (bluefire compiler error)
035 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 4 (bluefire compiler error)
036 smU61 TSM.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -6 cold ......FAIL! rc= 10 (bluefire compiler error)
037 erU61 TER.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 10+38 cold ...FAIL! rc= 5 (bluefire compiler error)
038 brU61 TBR.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 -3+-3 cold ...FAIL! rc= 5 (bluefire compiler error)
039 blU61 TBL.sh 21p_cndvcrpsc_dh clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6 48 cold ......FAIL! rc= 4 (bluefire compiler error)
  bluefire interactive testing:
008 blC97 TBL.sh _sc_do clm_spin^nl_urb 20030101:1800 4x5 gx3v7@1850 -6 arb_ic ..................FAIL! rc= 7
012 blHS3 TBL.sh 17p_cnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .....FAIL! rc= 7
016 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ...............FAIL! rc= 7
020 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 158 arb_ic ....FAIL! rc= 5
024 blJ74 TBL.sh 4p_casasc_ds clm_std^nl_urb 10001230:3600 1x1_tropicAtl test -100 arb_ic .......FAIL! rc= 7
028 blCA8 TBL.sh _sc_ds clm_std^nl_urb 20021230:3600 1x1_asphaltjungleNJ navy -90 arb_ic ........FAIL! rc= 7
029 smCK4 TSM.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -10 cold ...............FAIL! rc= 10
030 erCK4 TER.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 5
031 brCK4 TBR.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 5
032 blCK4 TBL.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -10 cold ...............FAIL! rc= 4
033 smCK8 TSM.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -10 cold ...........FAIL! rc= 10
034 erCK8 TER.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 5
035 brCK8 TBR.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 5
036 blCK8 TBL.sh _sc_ds clm_nortm^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
042 blF93 TBL.sh 17p_sc_do clm_std^nl_voc 20021230:1800 4x5 gx3v7 48 cold .......................FAIL! rc= 5
046 blC83 TBL.sh _sc_do clm_std^nl_urb 20020115:3600 5x5_amazon navy -10 arb_ic .................FAIL! rc= 7
054 blC63 TBL.sh _sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ........................FAIL! rc= 5
058 blHQ4 TBL.sh 17p_cnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold ............FAIL! rc= 5
062 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 7
066 bl514 TBLtools.sh gen_domain tools__ds T31.runoptions .......................................FAIL! rc= 5
075 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
076 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
083 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 7
085 bl953 TBLscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................FAIL! rc= 7
090 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
091 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
092 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
093 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
094 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
095 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except, compare_hist 
FAIL  SMS_RLA.f45_f45.I.bluefire  - bug 1459
FAIL  SMS_RLB.f45_f45.I.bluefire  - bug 1459
FAIL  SMS_ROA.f45_f45.I.bluefire  - bug 1459
  bluefire/PTCLM testing: All FAIL
  lynx/pgi: All PASS except...
004 blC92 TBL.sh _sc_dm clm_std^nl_urb 20030101:3600 4x5 gx3v7 -6 arb_ic ........................FAIL! rc= 7
007 blD92 TBL.sh _persc_dm clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
011 blF92 TBL.sh 17p_sc_dm clm_std^nl_voc 20021230:1800 4x5 gx3v7 48 cold .......................FAIL! rc= 5
015 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 7
019 blJ92 TBL.sh 4p_casasc_dm clm_std^nl_urb 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 7
023 blL52 TBL.sh _sc_dm clm_std^nl_urb 20020115:1800 10x15 USGS 48 arb_ic .......................FAIL! rc= 7
  lynx/pgi interactive testing:  All PASS except..
008 blTZ3 TBL.sh 21p_cncrpsc_do clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 7
009 smCL4 TSM.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 10
010 erCL4 TER.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 5
011 brCL4 TBR.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 5
012 blCL4 TBL.sh _sc_ds clm_nortm^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 4
016 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ...............FAIL! rc= 7
020 blOC4 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:3600 1x1_vancouverCAN navy 331 arb_ic .....FAIL! rc= 5
024 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 158 arb_ic ....FAIL! rc= 5
025 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
026 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
027 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  mirage,storm/ifort interactive testing:
007 blD94 TBL.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 7
011 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic ...............FAIL! rc= 7
015 blCA8 TBL.sh _sc_ds clm_std^nl_urb 20021230:3600 1x1_asphaltjungleNJ navy -90 arb_ic ........FAIL! rc= 7
019 blL54 TBL.sh _sc_ds clm_std^nl_urb 20020115:1800 10x15 USGS 48 arb_ic .......................FAIL! rc= 7
023 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 48 cold ............FAIL! rc= 7
  jaguarpf:  Currently NOT available:
  edinburgh: Currently not supported

CLM tag used for the baseline comparison tests if applicable: clm4_0_38

===============================================================
===============================================================
Tag name:  clm4_0_38
Originator(s):  erik (Erik Kluzek)
Date: Mon Jan 23 13:56:45 MST 2012
One-line Summary: Fix some minor issues with tools, add high resolution option and
datasets to mksurfdata, remove crap from clmtype so C13 will work on bluefire, convert
nans to FillValue for some cases, fix datasets, update doc

Purpose of changes:

Update externals to new version of scripts/Machines. Fix some bugs. Add in maps for:
ne4np4, ne16np4, ne60np4, and ne240np4 resolutions. Begin adding _FillValue/missing_value
to restart files. Start adding in new high-resolution datasets for mksurfdata. Add an
option to mksurfdata.pl to run at hi-res let default be standard half-degree datasets.
Add in 3x3min PFT dataset for 2000, and 5x5min organic. Add in maps for 3x3min and
5x5min_ISRIC_WISE to output grids. Separate out wetland and lake datasets, add in 3x3min
lake dataset. Get mksurfdata to work with T31, fix maps. Have both mksurfdata_map and clm
check files for consistencies. Add initial version of a script to check that maps in the
XML database are correct. Make sure keywords are set in tools, and OPT correctly added to
meta-data. Update gen_domain. Correct some typo's in filenames. Remove some unused data
in clmtype.F90. Update documentation to cesm1_0_4.

Requirements for tag:
    Testing on bluefire-only, Fix bugs: 1432 (part X), 1424X, 1423X, 1401 (part)X, 1309,
    mksurfdata works at regular and hi-res and for f09, and at regular for: 128x256,
    512x1024, ne4np4, ne16np4, ne30np4, ne60np4, and ne240np4 resolutions, T31 and T31
    mksurfdata rcp's work

Test level of tag: critical

Bugs fixed (include bugzilla ID):
                                 1432 (Several resolutions fail for new mksurfdata_map)
                                 1424 (variables written out as gdir)
                                 1423 (Problem building clmtype on bluefire)
                                 1398 (clm and mksurfdata_map needs to check map files -- partial)

Known bugs (include bugzilla ID):
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1404 (Inconsistent domain and fatmlndfrc files)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1468 (Bad f09, f19 SCRIP Grid files)
                                 1476 (Problem with stand-alone build on bluefire)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  896 (T62 mode does not work)
                                  701 (svn keyword)
                                  452 (Problem with support of soil-colors != 8 or 20)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: 
     Correct and add new mapping datasets and datasets for mksurfdata_map

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): most

   scripts   to scripts4_111108
   Machines  to Machines_111101
   drv       to drvseq4_0_08
   cism      to cism1_111004
   csm_share to share3_111027
   timing    to timing_111101
   MCT       to MCT2_7_0-111101
   pio       to pio1_3_12

List all files eliminated: None

List all files added and what they do:

   A    models/lnd/clm/test/system/config_files/_scnv_ds - Add serial option
   A    models/lnd/clm/bld/namelist_files/checkmapfiles.ncl - check that map files
          are consistent

List all existing files that have been modified, and describe the changes:

  M    models/lnd/clm/test/system/input_tests_master - Add serial irrig test

  M    models/lnd/clm/test/system/test_driver.sh ----- Fix issues on bluefire,
          update some paths on edinburgh

>>>>>>>>>>>>>> Update documentation
  M    models/lnd/clm/doc/UsersGuide/single_point.xml
  M    models/lnd/clm/doc/UsersGuide/special_cases.xml
  M    models/lnd/clm/doc/UsersGuide/custom.xml
  M    models/lnd/clm/doc/KnownBugs

>>>>>>>>>>>>>> Get svn keywords set on tools, and make sure OPT is set
  M    models/lnd/clm/tools/mkmapdata/mvNimport.sh -------- Fix syntax error
  M    models/lnd/clm/tools/mkmapdata/mkmapdata.sh -------- Add in 3x3 grid and ISRIC-WISE
          mask, add option to build ocean-land mask, and large-file format option,
  M    models/lnd/clm/tools/interpinic/src/interpinic.F90 - Fix svn keywords
  M    models/lnd/clm/tools/interpinic/src/Makefile ------- Set OPT CPP if OPT=TRUE
  M    models/lnd/clm/tools/mkgriddata/src/Makefile ------- Set OPT CPP if OPT=TRUE
  M    models/lnd/clm/tools/mkdatadomain/src/Makefile ----- Set OPT CPP if OPT=TRUE
  M    models/lnd/clm/tools/mkmapgrids/src/mkmapgrids.F90 - Add more meta-data
  M    models/lnd/clm/tools/mkmapgrids/src/Makefile-------- Set OPT CPP if OPT=TRUE

>>>>>>>>>>>>>> Add call to domain_checksame to check if domains are the same,
>>>>>>>>>>>>>> split lake and wetland processing, add write statment for each file
>>>>>>>>>>>>>> opened, add -hires and -allownofile options to mksurfdata.pl
  M    models/lnd/clm/tools/mksurfdata_map/src/mkglcmecMod.F90 ---- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/src/mkvarctl.F90 ------- Split lake/wetland
  M    models/lnd/clm/tools/mksurfdata_map/src/mkvocefMod.F90 ----- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/src/mklaiMod.F90 ------- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/src/mksoilMod.F90 ------ Use domain_checksame
          increase kmap_max_min from 50 to 90 (so T31 can be run)
  M    models/lnd/clm/tools/mksurfdata_map/src/mkdomainMod.F90 ---- Add domain_checksame,
          make domain_init private, add metadata if frac/mask set, eliminate
          lats/n,lone/w, use call abort in place of stop, 
  M    models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90 ------ Split lake/wetland
          remove documentation on specific datasets, increase allowed sum of special
          landunits from 120 to 250
  M    models/lnd/clm/tools/mksurfdata_map/src/mkurbanparMod.F90 -- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/src/mkharvestMod.F90 --- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/src/mkfileMod.F90 ------ Fix meta-data, 
          remove lats/n,lone/w
  M    models/lnd/clm/tools/mksurfdata_map/src/mkgridmapMod.F90 --- Add headers, more
          checking, add gridmap_setptrs method private gridmap_checkifset method,
          
  M    models/lnd/clm/tools/mksurfdata_map/src/mklanwatMod.F90 ---- Split mklanwat
          into mklakwat/mkwetlnd subroutines, use domain_checksame, 
  M    models/lnd/clm/tools/mksurfdata_map/src/Makefile ----------- Set OPT CPP if OPT=TRUE
  M    models/lnd/clm/tools/mksurfdata_map/src/mkpftMod.F90 ------- Use domain_checksame
  M    models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl ---------- Add -hires and
          -allownofile options, split lake and wetland

     -allownofile                  Allow the script to run even if one of the input files
                                   does NOT exist.
     -hires                        If you want to use high-resolution input datasets rather than the default
                                   lower resolution datasets (low resolution is typically at half-degree)

  M    models/lnd/clm/tools/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt Use $CSMDATA
           directory path rather than /cgd/tss path
  M    models/lnd/clm/tools/mksurfdata_map/mksurfdata_map.namelist  Split lake and wetland

>>>>>>>>>>>>>> Minor changes
  M    models/lnd/clm/bld/build-namelist --------- Move groups earlier, start adding
              code to handle lnd_inst_counter
  M    models/lnd/clm/bld/listDefaultNamelist.pl - Get rcp list sooner

>>>>>>>>>>>>>> Fix some filename typos, add new mapping files, add hi-res
>>>>>>>>>>>>>> datasets
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------ Add 
               ne4np4, ne16np4, ne60np4, ne240np4 mapping files
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Correct
               some typo's in filenames (ne4np4 scripgrid, ngwh mksurfdata pftdyn file
               for rcp 6 for year 2006
  M    models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Add mksrf_filename,
               correct mksrf_* filenames to mksrf_f*, add ISRIC-WISE lmask
  M    models/lnd/clm/bld/namelist_files/datm-build-namelist ------- Only require
              datm_data_dir for CPLHIST3HrWx
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Add ISRIC-WISE,
              3x3min_MODIS mapping datasets, correct some map dataset names,
  M    models/lnd/clm/bld/namelist_files/namelist_defaults.xsl ----- Add more data
              to output table
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml Correct and
              add new scrip grid files, add hires option for some data, add
              mksrf_filename for types of files, add in all mksurfdata raw
              datasets, add new hires datasets, correct mksrf_fvegtyp filenames,

>>>>>>>>>>>>>> Remove initialization of unused data types (allows C13 on bluefire)
>>>>>>>>>>>>>> Add option to convert nan to fillvalue on output files 
>>>>>>>>>>>>>> (and vica-versa on input)
  M    models/lnd/clm/src/main/clmtypeInitMod.F90 - Remove initialization of unused
              data types
  M    models/lnd/clm/src/main/clm_atmlnd.F90 ----- Remove unused pdf variable
  M    models/lnd/clm/src/main/initSurfAlbMod.F90 - Remove unused CNZeroFluxes
  M    models/lnd/clm/src/main/ncdio_pio.F90 ------ Add cnvrtnan2fill option
              to convert from spval to nan on read and from nan to spval on write
  M    models/lnd/clm/src/main/clmtype.F90 -------- Remove unused variables
  M    models/lnd/clm/src/main/histFldsMod.F90 ---- Add some documentation, change
              longname of QSOIL, correct: CISUN, CISHA, ALPHAPSNSUN, ALPHAPSNSHA
  M    models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90


Summary of testing:

  bluefire testing:
018 brX51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5
031 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5
035 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 4
  bluefire interactive testing: All PASS except...
031 erAK4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
032 brAK4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
036 brAK8 TBR.sh _nrsc_ds clm_std^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 6
037 blAK8 TBL.sh _nrsc_ds clm_std^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
067 bl5@4 TBLtools.sh gen_domain tools__ds namelist .............................................FAIL! rc= 7
003 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
004 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
008 bl954 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......FAIL! rc= 6
011 sm974 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
012 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 4
013 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
014 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 4
015 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
016 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 4
  bluefire/CESM testing: All PASS except... (compare tests fail because clm4_0_37 file did not exist)

CLM tag used for the baseline comparison tests if applicable: clm4_0_37

===============================================================
===============================================================
Tag name:  clm4_0_37
Originator(s):  erik (Erik Kluzek)
Date:  Mon Sep 26 10:35:24 MDT 2011
One-line Summary: Fix unstructured grids history files

Purpose of changes:

Comment out code for writing out fine-mesh lat/lon for unstructured grids. This caused
the code to blow up when running for HOMME grids such as ne30np4.

Bugs fixed (include bugzilla ID):
                                 1415 (History files can't be written out for HOMME grids)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1398 (clm and mksurfdata_map needs to check map files for consistency)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1404 (Inconsistent domain and fatmlndfrc files)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1423 (Problem building clmtype on bluefire)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

  M   models/lnd/clm/src/main/histFileMod.F90 - Comment out code for fine-mesh
          lat/lon for unstructured grids

Summary of testing: None!

CLM tag used for the baseline comparison tests if applicable: clm4_0_36

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_36
Originator(s):  erik (Erik Kluzek)
Date: Thu Sep 22 11:05:59 MDT 2011
One-line Summary: Comment out RTM mapping files for f09 and f19

Purpose of changes:

Comment out the RTM mapping files for f09/f19 so answers are the same as clm4_0_34 and as the f19 mapping
files cause the fully coupled model to blow up in POP. Add "mv" option to mksurfdata.pl and make -nomv the
default so it doesn't try to copy files by default. Increase length of filename strings for mksurfdata pftdyn
files. Add some metadata for some restart file variables. Add "new good wood harvest" datasets
and option (-new_woodharv) to mksurfdata.pl from Peter Lawrence so can make surface 
datasets with either set of files.  New good wood harvest applies to rcp6 and rcp8.5. 
Also add in some new mapping files for: 512x1024,128x256,64x128,32x64,8x16,0.23x0.31,5x5_amazon. 
Add SCRIP grid files for: ne4np4,ne16np4, ne60np4, ne240np4. Add 3x3min resolution 
and 3x3min SCRIP grid file which will be used for high resolution surface dataset 
creation in the future. Use new surface datasets with old fatmgrid values for f09_g16
for 1850 and 2000 so that answers can be identical to clm4_0_34 without requiring the
fatmgrid file.

Bugs fixed (include bugzilla ID): 
                                 1414 (Answers change @ f09 resolution w/o fatmgrid file)
                                 1413 (re is in incorrect units in mksurfdata_map)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1398 (clm and mksurfdata_map needs to check map files for consistency)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1404 (Inconsistent domain and fatmlndfrc files)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1415 (History files can't be written out for HOMME grids)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: 
   Comment out RTM mapping files for f09/f19
   Also new mapping files for: 512x1024,128x256,64x128,32x64,8x16,0.23x0.31,5x5_amazon. 
   Add SCRIP grid files for: ne4np4,ne16np4, ne60np4, ne240np4. 
   Add 3x3min SCRIP grid file.
   New surface datasets with old fatmgrid grid coordinate values for f09/1850/2000

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90 -------------- Increase pftdyn file length to 135
   M   models/lnd/clm/tools/mksurfdata_map/src/mkfileMod.F90 -------------- Increase nchar dim to 256
   M   models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl ------------------ Add "mv" option with "nomv" the default
   M   models/lnd/clm/tools/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt - Increse length of strings for files

   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Add 3x3min,
           ne4np4,ne16np4, ne60np4, ne240np4 as valid resolutions
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Comment out f09/f19 RTM mapping files
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Add new 
          good wood harvest pftdyn input files from Peter Lawrence for mksurfdata_map 
          for rcp6 and rcp8.5

   M   models/lnd/clm/src/biogeochem/CNrestMod.F90 --------- Add some FillValue to some fields for restart files
   M   models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 - Add some FillValue to some fields for restart files

Summary of testing:

  bluefire interactive testing: Following PASS
001 sm754 TSMtools.sh mksurfdata_map tools__s namelist ..........................................PASS
003 sm953 TSMscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................PASS
005 sm954 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......PASS
007 sm9S4 TSMscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................PASS
008 bl9S4 TBLscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................PASS
  bluefire/CESM testing: All PASS except (compare to clm4_0_34)
CFAIL ERS_E.T31_g37.I1850.bluefire.GC.125250 (ESMF doesn't work with NetCDF4)
BFAIL ERB.ne30_g16.I_1948-2004.bluefire.compare.clm4_0_34 (ne30 wasn't in clm4_0_34) (answers are identical to clm4_0_35)
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_34 (I1850SPINUPCN wasn't in clm4_0_34 or before)
FAIL  NCK.f10_f10.I.bluefire -- scripts needs to cleannamelist after changing NINST_LND
  bluefire extra CESM testing: Following PASS
PASS  ERS.f09_g16.ICN.bluefire
PASS  ERS.f09_g16.ICN.bluefire.generate.clm4_0_36
PASS  ERS.f09_g16.ICN.bluefire.compare_hist.clm4_0_33
PASS  ERS.f09_g16.ICN.bluefire.compare.clm4_0_33
PASS  ERS.f09_g16.I1850CN.bluefire
PASS  ERS.f09_g16.I1850CN.bluefire.generate.clm4_0_36
PASS  ERS.f09_g16.I1850CN.bluefire.compare_hist.clm4_0_33
PASS  ERS.f09_g16.I1850CN.bluefire.compare.clm4_0_33

CLM tag used for the baseline comparison tests if applicable: clm4_0_35

Changes answers relative to baseline: f09/f19 now same as clm4_0_34

===============================================================
===============================================================
Tag name:  clm4_0_35
Originator(s):  erik (Erik Kluzek), mvertens
Date: Tue Sep 13 22:15:17 MDT 2011
One-line Summary: Bring in Mariana's non2D grid branch to trunk, enabling HOMME grids: ne30np4/ne120np4

Purpose of changes:

Move Mariana's new non-2D branch to trunk. Extensive changes to mksurfdata, allows 1D-vector surface 
datasets. Mariana change mksurfdata to add unstructured grid format using SCRIP weights. Won't work 
with PTCLM and mksurfdata won't be able to create single-pt/regional surface datasets. Fix reverse 
coordinates on VOC/irrig mksurfdata input file. Update scripts and datm with HOMME grids. Add in 
half-degree pftdyn historical dataset. Partial fix to PTSMODE restart problem. Fix the US-UMB data for PTCLM.

NOTE: File creation process is changed substantially! mksurfdata now requires mapping files to be created first
      in order to run the new mksurfdata_map. This means you need to do the following:

	  1.) run mkgriddata
          2.) run mkmapgrid (add files to XML database) (requires 1)
          3.) run mkmapdata (add files to XML database) (requires 2)
          4.) run mksurfdata_map (requires 3)
          5.) run gen_domain (requires 3 needed for datm)

      See the models/lnd/clm/tools/README file for more help on the process.

WARNING: YOU CAN'T CREATE SINGLE-POINT DATASETS WITH THIS VERSION! You can create frac/grid files with this
      version and then use an older verison of clm to use mksurfdata to create surface datasets. The mapping
      for single-point datasets using ESMF does NOT work -- although it does work if you have at least 4 points
      so you can create regional datasets.

      THIS MEANS PTCLM DOES NOT WORK FOR CREATING NEW DATASETS! It will work for datasets already created however.

CAUTION: Mapping files to allow mksurfdata to work are only provided for: f09, f19, f10, T31, f45, f25, ne30 and ne120

Bugs fixed (include bugzilla ID):
                                 1392 (US-UMB site has some incorrect data)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1393 (error when running Gregorian calendar)
                                 1397 (c2l_scale_type not specified for many history fields)
                                 1398 (clm and mksurfdata_map needs to check map files for consistency)
                                 1401 (Restart files do NOT have _FillValue/missing_value attributes on fields)
                                 1404 (Inconsistent domain and fatmlndfrc files)
                                 1405 (Problem with irrigation on clm4_0_34 with intel compiler)
                                 1407 (Build problem on jaguar for test_driver.sh with -c option)
                                 1409 (ne120 is having restart trouble on jaguar with NetCDF3)
                                 1410 (Problem running PST.f09_g16.I.jaguarpf)
                                 1411 (ERI_D.ne30_g16.I1850CN.jaguarpf.G.235924 fails on jaguarpf)
                                 1413 (re is in incorrect units in mksurfdata_map)
                                 1414 (Answers change @ f09 resolution w/o fatmgrid file)
                                 1415 (History files can't be written out for HOMME grids)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist:
   Can now read in domain files in place of fatmlndfrac
   fatmgrid no longer required (use fsurdat to get grid)
   fmapinp_rtm new namelist item to give mapping for RTM

List any changes to the defaults for the boundary datasets:

   Add: ne30np4/ne120np4 datasets, add 1850-2000 0.47x0.63 fpftdyn file

Describe any substantial timing or memory changes: None

Code reviewed by: self, mvertens, sacks

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share, datm

    scripts     to scripts4_110906
    csm_share   to share3_110906
    datm        to datm8_110908

List all files eliminated:

>>>>>>>>>>>> Rename mksurfdata to mksurfdata_map
   D   models/lnd/clm/tools/mksurfdata/*

>>>>>>>>>>>> Move source code to src subdirectory
   D   models/lnd/clm/tools/mkdatadomain/Mkdepends/Srcfiles/Filepath/Makefile/*.F90
   D   models/lnd/clm/tools/mkgriddata/Mkdepends/Srcfiles/Filepath/Makefile/*.F90
   D   models/lnd/clm/tools/interpinic/Mkdepends/Srcfiles/Filepath/Makefile/*.F90

List all files added and what they do:

>>>>>>>>>>>> Rename mksurfdata to mksurfdata_map, create src sub-directory
   A   models/lnd/clm/tools/mksurfdata_map
   A   models/lnd/clm/tools/mksurfdata_map/mksurfdata.pl
   A   models/lnd/clm/tools/mksurfdata_map/mksurfdata_map.namelist
   A   models/lnd/clm/tools/mksurfdata_map/pftdyn_hist_simyr1850-2005.txt
   A   models/lnd/clm/tools/mksurfdata_map/README
   A   models/lnd/clm/tools/mksurfdata_map/src
   A   models/lnd/clm/tools/mksurfdata_map/src/clm_varctl.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/clm_varpar.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/Filepath
   A   models/lnd/clm/tools/mksurfdata_map/src/fileutils.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/Macros.custom
   A   models/lnd/clm/tools/mksurfdata_map/src/Makefile
   A   models/lnd/clm/tools/mksurfdata_map/src/Mkdepends
   A   models/lnd/clm/tools/mksurfdata_map/src/mkdomainMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkfileMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkglcmecMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkgridmapMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkharvestMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mklaiMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mklanwatMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkncdio.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkpftMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mksoilMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mksurfdat.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkurbanparMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkvarctl.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkvarpar.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/mkvocefMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/nanMod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_const_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_file_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_kind_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_log_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_string_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_sys_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/shr_timer_mod.F90
   A   models/lnd/clm/tools/mksurfdata_map/src/Srcfiles

>>>>>>>>>>>> Scripts to use ESMF to create SCRIP mapping files from SCRIP grid files
   A   models/lnd/clm/tools/mkmapdata
   A   models/lnd/clm/tools/mkmapdata/mkmapdata.sh
   A   models/lnd/clm/tools/mkmapdata/mvNimport.sh
   A   models/lnd/clm/tools/mkmapdata/README
   A   models/lnd/clm/tools/mkmapdata/regridbatch.sh
   A   models/lnd/clm/tools/mkmapdata/rmdups.ncl ----- NCL script to remove duplicates

>>>>>>>>>>>> Program to create SCRIP grid files from CLM grid/frac files
   A   models/lnd/clm/tools/mkmapgrids
   A   models/lnd/clm/tools/mkmapgrids/mkmapgrids.csh
   A   models/lnd/clm/tools/mkmapgrids/mkmapgrids.namelist
   A   models/lnd/clm/tools/mkmapgrids/README
   A   models/lnd/clm/tools/mkmapgrids/src
   A   models/lnd/clm/tools/mkmapgrids/src/domainMod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/Filepath
   A   models/lnd/clm/tools/mkmapgrids/src/Macros.custom
   A   models/lnd/clm/tools/mkmapgrids/src/Makefile
   A   models/lnd/clm/tools/mkmapgrids/src/Mkdepends
   A   models/lnd/clm/tools/mkmapgrids/src/mkmapgrids.F90
   A   models/lnd/clm/tools/mkmapgrids/src/nanMod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/shr_file_mod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/shr_kind_mod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/shr_log_mod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/shr_sys_mod.F90
   A   models/lnd/clm/tools/mkmapgrids/src/Srcfiles

>>>>>>>>>>>> Programs to postprocess 1D vector unstructured grids
   A   models/lnd/clm/tools/mkprocdata_map
   A   models/lnd/clm/tools/mkprocdata_map/camhomme
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/mkprocdata_map_in
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/Depends
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/domainMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/Filepath
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/fileutils.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/gridmapMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/Makefile
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/mkprocdata_map.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/nanMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/shr_file_mod.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/shr_kind_mod.F90
   A   models/lnd/clm/tools/mkprocdata_map/camhomme/src/Srcfiles
   A   models/lnd/clm/tools/mkprocdata_map/clm
   A   models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_all
   A   models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_in
   A   models/lnd/clm/tools/mkprocdata_map/clm/mkprocdata_map_wrap
   A   models/lnd/clm/tools/mkprocdata_map/clm/README
   A   models/lnd/clm/tools/mkprocdata_map/clm/src
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/constMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/Filepath
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/fileutils.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/fmain.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/gridmapMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/Makefile
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/Mkdepends
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/mkprocdata_map.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/nanMod.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/shr_file_mod.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/shr_kind_mod.F90
   A   models/lnd/clm/tools/mkprocdata_map/clm/src/Srcfiles

>>>>>>>>>>>> Make macros files to customize how tools operate (allows all tools to have an identical Makefile)
   A   models/lnd/clm/tools/interpinic/src/Macros.custom
   A   models/lnd/clm/tools/mkgridata/src/Macros.custom
   A   models/lnd/clm/tools/mkdomaindata/src/Macros.custom

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Add tests for new grids/tools
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M   models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M   models/lnd/clm/test/system/tests_pretag_jaguarpf
   M   models/lnd/clm/test/system/tests_posttag_mirage
   M   models/lnd/clm/test/system/tests_posttag_intrepid
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression
   M   models/lnd/clm/test/system/README.testnames --------------- 4/5=mkmapgrids/gen_domain config
             I=CN spinup, @=ne120np4, #=ne30np4, *=ne16np4 run options

>>>>>>>>>>>> Change build/run for tools, update netcdf on bluefire, update modules on jaguar, add new tests
   M   models/lnd/clm/test/system/TCB.sh ------------- Remove setting of MACFILE not needed
   M   models/lnd/clm/test/system/TCBtools.sh -------- Add src directory, Mkdepends, Macros.custom
   M   models/lnd/clm/test/system/TBLscript_tools.sh - Set CLM_ROOT
   M   models/lnd/clm/test/system/TBLtools.sh -------- Set CLM_ROOT
   M   models/lnd/clm/test/system/TBL.sh ------------- Allow compile-only mode to work
   M   models/lnd/clm/test/system/TSM.sh ------------- Handle multi-instance rpointer files
   M   models/lnd/clm/test/system/test_driver.sh -- Get netcdf4.1.3 working on bluefire, get mirage build working,
              use glade paths, add ESMFBIN_PATH, update jaguar modules
   M   models/lnd/clm/test/system/input_tests_master - Fill out HM tests, add H#, H@, blJ07, 454, 5@4, 9#2, 953
              tests, mksurfdata=>mksurfdata_map
   M   models/lnd/clm/test/system/nl_files/clm_spin -- Change case to agree with 1850 MOAR case in CESM scripts
   M   models/lnd/clm/test/system/nl_files/mksrfdt_10x15_irr_1850 ------------ Remove -nomv option
   M   models/lnd/clm/test/system/nl_files/mksrfdt_1x1_vancouverCAN_2000 ----- Remove -nomv option
   M   models/lnd/clm/test/system/nl_files/mksrfdt_1x1_numaIA_mp20irrcr_2000 - Remove -nomv option

>>>>>>>>>>>> Run interpinic and checkin the result
   M   models/lnd/clm/tools/interpinic/clmi.BCN.1949-01-01_10x15_USGS_simyr1850_c100322.nc

>>>>>>>>>>>> Update to glade path, add notes on src subdirectory
   M   models/lnd/clm/tools/interpinic/README ------------------ Add notes about src subdirectory
   M   models/lnd/clm/tools/mkgriddata/mkgriddata.namelist ----- Use glade path
   M   models/lnd/clm/tools/mkgriddata/mkgriddata.regional ----- Use glade path
   M   models/lnd/clm/tools/mkgriddata/mkgriddata.singlept ----- Use glade path
   M   models/lnd/clm/tools/mkgriddata/mkgriddata.cesm_dom ----- Use glade path
   M   models/lnd/clm/tools/mkgriddata/README ------------------ Update with added src sub-directory
   M   models/lnd/clm/tools/mkdatadomain/mkdatadomain.namelist - Use glade path
   M   models/lnd/clm/tools/mkdatadomain/README ---------------- Add notes about src subdirectory

>>>>>>>>>>>> Update tools README information
   M   models/lnd/clm/tools/README.testing ------ Note about src subdirectory required
   M   models/lnd/clm/tools/README -------------- Updated with notes on new process
   M   models/lnd/clm/tools/README.filecopies --- Notes on list of file copies has changed

>>>>>>>>>>>> Changes to tools source codes moved to src subdirectories, Makefile was standardized
>>>>>>>>>>>> update shr_sys_mod.F90 file to latest csm_share
   M   models/lnd/clm/tools/interpinic/src/interpinic.F90 --- Add metadata on OPT and OMP
   M   models/lnd/clm/tools/interpinic/src/Makefile --------- Standardize
   M   models/lnd/clm/tools/interpinic/src/shr_sys_mod.F90 -- Update
   M   models/lnd/clm/tools/mkdatadomain/src/Makefile ------- Standardize
   M   models/lnd/clm/tools/mkdatadomain/src/Filepath ------- Only use local directory
   M   models/lnd/clm/tools/mkgriddata/src/Makefile --------- Standardize
   M   models/lnd/clm/tools/mkgriddata/src/shr_sys_mod.F90 -- Update
   M   models/lnd/clm/tools/mkgriddata/src/clm_varctl.F90 --- Update

>>>>>>>>>>>> Add RTM mapping file, change some namelist file required logic
   M   models/lnd/clm/bld/listDefaultNamelist.pl - Also get RTM mapping file, and use $CSMDATA if set
   M   models/lnd/clm/bld/build-namelist --------- If can't find a frac file use the datm domain file, only
             get fatmgrid file for fine-mesh, if RTM on get mapping file, if fine-mesh on and fatmgrid not found
             use fsurdat file
   M   models/lnd/clm/bld/clm.cpl7.template ------ Clarify documentation for CLM_RTM_RES

>>>>>>>>>>>> Add new files needed for ne30np4/ne120np4 and processing of them
   M   models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl --------- Add test for more resolutions
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Add: fmapinp_rtm, scripgriddata, mksrf_fglctopo,
              map, lmask, hgrid
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- Add: ne30np4/ne120np4 datasets, add
              1850-2000 0.47x0.63 fpftdyn file, remove some of the single-point fatmlndgrd files, add mapping files,
              add lmask/hgrid for different map types
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Add ne30np4/ne120np4 domain files

>>>>>>>>>>>> Use llatlon structure in place of lsmlat/lsmlon, required files a bit different, use fsurdat if
>>>>>>>>>>>> fatmgrid is not given, add RTM mapping file, if fatmlndfrc NOT set set mask/frac to 1.
   M   models/lnd/clm/src/biogeochem/CASAMod.F90 ------------ Use llatlon%ni/nj in place of lsmlon/lat
              don't allow 1D grids for CASA
   M   models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 - Use llatlon structure in place of lsmlon/lat
   M   models/lnd/clm/src/biogeochem/CNDVMod.F90 ------------ Use llatlon structure in place of lsmlon/lat
   M   models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 ---------- asca => ascale
   M   models/lnd/clm/src/main/organicFileMod.F90 ----------- Use llatlon structure in place of lsmlon/lat
   M   models/lnd/clm/src/main/clm_varpar.F90 --------------- Remove lsmlon/lsmlat parameters
   M   models/lnd/clm/src/main/clm_timemanager.F90 ---------- Add some meta-data to restart file, check restart values
   M   models/lnd/clm/src/main/clm_initializeMod.F90 -------- Remove cellarea, surfrd gets area
   M   models/lnd/clm/src/main/fileutils.F90 ---------------- Make iflag required argument
   M   models/lnd/clm/src/main/ndepStreamMod.F90 ------------ Use llatlon structure in place of lsmlon/lat
   M   models/lnd/clm/src/main/iniTimeConst.F90 ------------- Remove start/count lsmlon/lsmlat
   M   models/lnd/clm/src/main/histFileMod.F90 -------------- Add namea grid, replace lsmlon/lat with llatlon
              handle unstructured grids
   M   models/lnd/clm/src/main/controlMod.F90 --------------- If fatmgrid NOT set, use fsurdat, add fmapinp_rtm
              if fatmlndfrc NOT set, set mask/frac to 1.
   M   models/lnd/clm/src/main/clm_varctl.F90 --------------- Add fmapinp_rtm
   M   models/lnd/clm/src/main/ncdio_pio.F90 ---------------- Add ncd_inqfdims, io_type public, clmlevel set 
              earlier, remove switchdim from ncd_io_int_var2, handle switchdim in ncd_io_real_var2 read for
              singlept
   M   models/lnd/clm/src/main/surfrdMod.F90 ---------------- Remove surfrd, add surfrd_get_data hande 1D grids
   M   models/lnd/clm/src/main/domainMod.F90 ---------------- asca=>ascale
   M   models/lnd/clm/src/main/decompMod.F90 ---------------- Add namea remove get_clmlevel_dsize
   M   models/lnd/clm/src/main/clmtype.F90 ------------------ Increase len=8 to len=16
   M   models/lnd/clm/src/riverroute/RtmMod.F90 ------------- Add L2R_Decomp, remove lsmlat/lon for llatlon
              remove river meta-data
   M   models/lnd/clm/src/riverroute/RtmMapMod.F90 ---------- Pass in fracout
   M   models/lnd/clm/src/biogeophys/UrbanInputMod.F90 ------ Use llatlon in place of lsmlat/lon
   M   models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 -------- asca=>ascale

Summary of testing:

  bluefire: All PASS except...
015 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:1800 1.9x2.5 gx1v6@1850-2100 -10 cold FAIL! rc= 7
018 brX51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5
031 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5
035 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 4
  bluefire interactive testing: All PASS except...
009 blC97 TBL.sh _sc_do clm_spin^nl_urb 20030101:1800 4x5 gx3v7@1850 -6 arb_ic ..................FAIL! rc= 5
031 erAK4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
032 brAK4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
036 brAK8 TBR.sh _nrsc_ds clm_std^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 6
037 blAK8 TBL.sh _nrsc_ds clm_std^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 4
051 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:1800 1x1_brazil navy -670 arb_ic .................FAIL! rc= 5
004 blS63 TBL.sh _mec10sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ...................FAIL! rc= 7
005 smQQ4 TSM.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold .............FAIL! rc= 4
006 erQQ4 TER.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -3+-7 cold ............FAIL! rc= 5
007 brQQ4 TBR.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -5+-5 cold ............FAIL! rc= 5
008 blQQ4 TBL.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold .............FAIL! rc= 4
012 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 7
014 bl454 TBLtools.sh mkmapgrids tools__ds namelist .............................................FAIL! rc= 5
016 bl5@4 TBLtools.sh gen_domain tools__ds namelist .............................................FAIL! rc= 5
024 bl754 TBLtools.sh mksurfdata_map tools__s namelist ..........................................FAIL! rc= 5
025 sm774 TSMtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 5
026 bl774 TBLtools.sh mksurfdata_map tools__ds singlept .........................................FAIL! rc= 4
033 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 5
037 bl953 TBLscript_tools.sh mkmapdata mkmapdata.sh mkmapdata_if10 ..............................FAIL! rc= 5
039 bl954 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ......FAIL! rc= 6
043 bl974 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds FAIL! rc= 6
045 bl9T4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
047 bl9C4 TBLscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  bluefire/CESM testing: All PASS except...
FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire.compare_hist.clm4_0_34
FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire.compare.clm4_0_34
FAIL  ERP.f19_g16.IGRCP60CN.bluefire.compare_hist.clm4_0_34
FAIL  ERP.f19_g16.IGRCP60CN.bluefire.compare.clm4_0_34
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_34
BFAIL ERB.ne30_g16.I_1948-2004.bluefire.compare.clm4_0_34
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_34
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_34
  bluefire/PTCLM testing: All PASS
  lynx/pgi testing: All FAIL (build issues)
  lynx/pgi interactive testing: All PASS except...
010 erAL4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 7
011 brAL4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 6
  lynx/CESM extra testing: ...
PASS  ERS.ne30_g16.I1850CN.lynx_gnu 
PASS  ERS.ne30_g16.I1850CN.lynx_intel
PASS  ERS.ne30_g16.I1850CN.lynx_pathscale
  jaguarpf: All FAIL (system build issue)
  jaguarpf interactive testing: All PASS up to...
14 PTCLM.16750_US-UMB_ICN_exit_spinup.PTCLM                     PASS
  jaguarpf/CESM testing: All PASS except...
FAIL  PST.f09_g16.I.jaguarpf 
FAIL  ERI_D.ne30_g16.I1850CN.jaguarpf 
TFAIL ERH.ne120_g16.I2000CN.jaguarpf.G.235924
  jaguarpf/CESM additional testing: ...
FAIL  ERH.ne120_g16.ICN.jaguarpf 
PASS  SMS.ne120_g16.I.jaguarpf 
FAIL  ERS.ne120_g16.I.jaguarpf
  edinburgh/lf95 interactive testing: All PASS except...
006 erAL4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 7
007 brAL4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 6
008 blAL4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 5
025 sm978 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_brazil_1850^tools__ds .....FAIL! rc= 6
026 sm9T4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__dFAIL! rc= 6
027 sm9C4 TSMscript_tools.sh mksurfdata_map mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds FAIL! rc= 6
  edinburgh/CESM testing: ...
PASS  ERS.ne30_g16.I1850CN.edinburgh_pgi
PASS  ERS.ne30_g16.I1850CN.edinburgh_lahey
  edinburgh/PTCLM testing: All PASS up to...
14 PTCLM.30770_US-UMB_ICN_exit_spinup.PTCLM                     PASS
  mirage,storm/ifort interactive testing: All PASS

CLM tag used for the baseline comparison tests if applicable: clm4_0_34

Changes answers relative to baseline:

  f09_gx1v6, f19_gx1v6 are similar climate but different because of new RTM mapping files

===============================================================
===============================================================
Tag name:  clm4_0_34
Originator(s):  erik (Erik Kluzek)
Date: Thu Aug 18 13:14:01 MDT 2011
One-line Summary: Bring tcens branch to trunk, fix a few issues

Purpose of changes:

Remove -pftlc to mksurfdata.pl. Correct units of H2OSNOTOP, HC, and HCSOI history fields.
Remove fget_archdev. Fix single point restarts from Brenden Rogers (although now there
is a PIO issue). Fix pio error when clm is running at same grid as RTM from Mariana. 
Move Tony's "tcens" DART ensemble branch to trunk. Add save statement to ncdio. Have 
chkdatmfiles.ncl check both grid and frac files. 
Update pio/MCT/scripts/datm/PTCLM/csm_share.

Bugs fixed (include bugzilla ID):
                                 1383 (Remove no-VOC and MAXPFT=4 tests)
                                 1381 (Can't change monthly average files to NOT be one per month)
                                 1372 (pio problem writing out RTM hist fields at RTM res)
                                 1361 (Problem with transient compsets for PTCLM)
                                 1358 (incorrect units for a few history fields)
                                 1025 (SCM mode can NOT use a global finidat file) (partial)
                                 1017 (SCM mode can NOT restart) (partial)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1392 (US-UMB site has some incorrect data)
                                 1393 (error when running Gregorian calendar)
                                 1396 (pio problem reading 2D data with 1st dim=1)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system:
   Add -ninst_lnd for multiple ensembles of CLM for data assimulation to configure.
   Build pio and mct as seperate libraries (add -mct_dir/pio_dir to configure).

   Set multiple instances with NINST_LND env variable in env_mach_pes.xml
   (make sure NTASKS_LND is >= NINST_LND)

Describe any changes made to the namelist:
   Remove fget_archdev option (don't try to get input files from archival device).

   Set multiple instances of namelists by creating a "user_nl_clm" directory

   Inside of the directory place

   user_nl_clm ---- namelist changes to make for ALL instances
   user_nl_clm_1 -- namelist changes for first instance
   user_nl_clm_2 -- namelist changes for first instance
   user_nl_clm_3 -- namelist changes for third instance
.
.
.

   build-namelist will create a namelist for each instance of the model being run.

List any changes to the defaults for the boundary datasets: domain files updated

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):
    scripts   to scripts4_110812
    drv       to drvseq4_0_04
    datm      to datm8_110811
    csm_share to share3_110803
    mct       to MCT2_7_0_110804a
    pio       to pio1_3_9

List all files eliminated:

>>>>>>>>>> Delete some 4p and non-VOC tests to reduce testing
  D  models/lnd/clm/test/system/config_files/4p_vorsc_dm
  D  models/lnd/clm/test/system/config_files/17p_scnv_dm
  D  models/lnd/clm/test/system/config_files/4p_vorsc_do
  D  models/lnd/clm/test/system/config_files/17p_scnv_do
  D  models/lnd/clm/test/system/config_files/_scnv_dh
  D  models/lnd/clm/test/system/config_files/4p_vorsc_ds
  D  models/lnd/clm/test/system/config_files/17p_scnv_ds
  D  models/lnd/clm/test/system/config_files/_scnv_dm
  D  models/lnd/clm/test/system/config_files/_scnv_do
  D  models/lnd/clm/test/system/config_files/17p_scnv_m
  D  models/lnd/clm/test/system/config_files/17p_scnv_o
  D  models/lnd/clm/test/system/config_files/17p_scnv_s
  D  models/lnd/clm/test/system/config_files/4p_vorsc_h
  D  models/lnd/clm/test/system/config_files/4p_vorsc_o
  D  models/lnd/clm/test/system/config_files/17p_nrscnv_ds
  D  models/lnd/clm/test/system/config_files/4p_vonrsc_ds
  D  models/lnd/clm/test/system/config_files/4p_vorsc_dh
  D  models/lnd/clm/test/system/config_files/17p_scnv_dh

List all files added and what they do:

>>>>>>>>>> Add tests for multi-instance
  A  models/lnd/clm/test/system/config_files/_nrnil3sc_dh
  A  models/lnd/clm/test/system/config_files/_nrnil3sc_dm
  A  models/lnd/clm/test/system/config_files/_nil3sc_dh
  A  models/lnd/clm/test/system/config_files/_nil3sc_dm
  A  models/lnd/clm/test/system/nl_files/multi_inst/multi_inst
  A  models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_1
  A  models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_2
  A  models/lnd/clm/test/system/nl_files/multi_inst/multi_inst_3

List all existing files that have been modified, and describe the changes:

>>>>>>>>>> Remove old tests add new multi-instance tests in
  M  models/lnd/clm/test/system/tests_posttag_lynx_nompi
  M  models/lnd/clm/test/system/tests_pretag_bluefire
  M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi
  M  models/lnd/clm/test/system/tests_pretag_edinburgh
  M  models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
  M  models/lnd/clm/test/system/tests_posttag_kraken
  M  models/lnd/clm/test/system/tests_posttag_yong
  M  models/lnd/clm/test/system/tests_posttag_purempi_regression
  M  models/lnd/clm/test/system/tests_posttag_hybrid_regression
  M  models/lnd/clm/test/system/tests_pretag_jaguarpf
  M  models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
  M  models/lnd/clm/test/system/tests_posttag_mirage
  M  models/lnd/clm/test/system/tests_posttag_intrepid_nompi
  M  models/lnd/clm/test/system/tests_posttag_nompi_regression
  M  models/lnd/clm/test/system/tests_posttag_lynx

>>>>>>>>>> Handle clm* for multi-instance files, remove PFTDATA 
  M  models/lnd/clm/test/system/TCB.sh -- Set pio/mct_dir in configure, send MACFILE
           to make, and create clm exec temp for debug mode
  M  models/lnd/clm/test/system/TBL.sh --- compare clm* for multi-instance history
  M  models/lnd/clm/test/system/TBR.sh --- compare clm* for multi-instance history
  M  models/lnd/clm/test/system/TER.sh --- compare clm* for multi-instance history
  M  models/lnd/clm/test/system/TSMrst_tools.sh - compare clm* for multi-instance history
  M  models/lnd/clm/test/system/TSMpergro.sh - compare clm* for multi-instance history
  M  models/lnd/clm/test/system/TSMscript_tools.sh -- Remove PFTDATA setting
  M  models/lnd/clm/test/system/TSM.sh - compare clm* for multi-instance, cat lnd_in_000?  files
  M  models/lnd/clm/test/system/input_tests_master -- add new multi_inst tests remove old
  M  models/lnd/clm/test/system/mknamelist - add quotes
  M  models/lnd/clm/test/system/README - Remove storm
  M  models/lnd/clm/test/system/README.testnames -- Add nil tests remove some 4p no-voc
  M  models/lnd/clm/test/system/TBLrst_tools.sh - compare clm* for multi-instance history
  M  models/lnd/clm/test/system/CLM_runcmnd.sh - remove storm
  M  models/lnd/clm/test/system/test_driver.sh -- use glade paths, add mct/pio_dir
        add gres setting on jaguarpf, remove PFTDATA, remove storm, update cprnc on lynx
  M  models/lnd/clm/test/system/config_files/README - add nil3 config
          change x resolution from T31 to f19 (no datasets at T31 for glc)

>>>>>>>>>> Remove PFTDATA
  M  models/lnd/clm/test/system/nl_files/mksrfdt_10x15_irr_1850 --------- Remove PFTDATA
  M  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850-2000 --- Remove PFTDATA
  M  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_vancouverCAN_2000 -- Remove PFTDATA
  M  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850 -------- Remove PFTDATA
  M  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_numaIA_mp20irrcr_2000 -- Remove PFTDATA

>>>>>>>>>> Remove PFTDATA and -p option, add -nobreak to cprnc.pl, print out more info
  M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl - Remove PFTDATA
  M  models/lnd/clm/tools/ncl_scripts/cprnc.pl ----- Add -nobreak
  M  models/lnd/clm/tools/ncl_scripts/cprnc.ncl ----- Add BREAKONDIFF, print avg/max diffs

>>>>>>>>>> Add NINST_LND and build with new MCT/PIO where need mct_pio_dir
>>>>>>>>>> Handle user_nl_clm directory for multi-instance
  M  models/lnd/clm/bld/configure - Add ninst_lnd/mct_dir/pio_dir options
           change to work with new MCT/PIO
  M  models/lnd/clm/bld/config_files/config_definition.xml - add mct_dir/pio_dir/ninst_lnd/ninst_atm
  M  models/lnd/clm/bld/build-namelist - Add ability to write out multiple ensemble 
           namelist files, handle multiple infiles, and infile directories for multiple
           ensembles
  M  models/lnd/clm/bld/clm.cpl7.template - handle NINST_LND add user_nl_clm directory 
           for multiple ensembles

>>>>>>>>>> Compare grid/frac files, update domain files for datm, handle multiple infiles
  M  models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl - compare grid/frac files
  M  models/lnd/clm/bld/namelist_files/namelist_definition.xml - Add glc_pio stuff
  M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - New f45, f10, f09,
           f19, T31 domain files
  M  models/lnd/clm/bld/namelist_files/datm-build-namelist - Be able to handle multiple
           infiles
  M  models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml - Add glc_pio settings

>>>>>>>>>> Handle multi-instance SPMD and files, remove fget_archdev, fix problem
>>>>>>>>>> of running on RTM grid (mvertens), handle scam restart files (still fails
>>>>>>>>>> because of PIO problem)
  M  models/lnd/clm/src/biogeochem/CNDVMod.F90 - Add inst_suffix to hv files
  M  models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 - Handle multiple instances and
           multiple instances lnd_in and lnd_modelio.nml namelist files
  M  models/lnd/clm/src/main/fileutils.F90 -- Remove set_filename and putfil, simplify
           getfil to NOT do archival retreival
  M  models/lnd/clm/src/main/ndepStreamMod.F90 - Handle multi-instances
  M  models/lnd/clm/src/main/histFileMod.F90 --- Pass mfilt to set_hist_filename, don't
           require mfilt to be one if nhtfrq=0, only use monthly form of filenames if
           nhtfrq=0 AND mfilt=1
  M  models/lnd/clm/src/main/restFileMod.F90 - Handle multi-instance files
  M  models/lnd/clm/src/main/controlMod.F90 -- Remove fget_archdev
  M  models/lnd/clm/src/main/clm_varctl.F90 -- Remove fget_archdev, add inst_* vars
  M  models/lnd/clm/src/main/ncdio_pio.F90 --- Fix problem of running on RTM grid, handle
           multi-instance files, pass vardesc to scam_field_offsets, handle landunit
           in scam_field_offsets, start/count set for all dims, check that dimension
           sizes and names are equal in order to share iodesc
  M  models/lnd/clm/src/main/spmdMod.F90 ---- spmd_init has LNDID passed in
  M  models/lnd/clm/src/main/histFldsMod.F90 - Fix units/long_names
  M  models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 - Handle multi-instances and
           multiple instances lnd_in and lnd_modelio.nml namelist files
  M  models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90 -- Get LNDID

Summary of testing:

  bluefire: All PASS except TBL tests and...
>>>>>>> rpointer.lnd_* files empty
017 erX51 TER.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -3+-2 cold ..............FAIL! rc= 7
018 brX51 TBR.sh _nil3sc_dh clm_std^multi_inst 20020401:3600 10x15 USGS -2+-3 cold ..............FAIL! rc= 11
>>>>>>> Build fails
020 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 4
021 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -3+-7 cold ................FAIL! rc= 5
022 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -5+-5 cold ................FAIL! rc= 5
>>>>>>> Build fails
028 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 4
029 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -3+-7 arb_ic ............FAIL! rc= 5
030 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -5+-5 arb_ic ............FAIL! rc= 5
>>>>>>> Build fails
032 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 96 cold ...............FAIL! rc= 4
033 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 5
034 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 5
  bluefire interactive testing: All PASS except... (pio bug 1396)
031 erAK4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
032 brAK4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
036 brAK8 TBR.sh _nrsc_ds clm_std^nl_ptsmode_ocn 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .........FAIL! rc= 6
  bluefire/CESM testing: All PASS except...
FAIL  ERS_RLA.f45_f45.I.bluefire  -- pio bug 1396
>>>>>>> Compare fails because of new domain files/new pftdyn
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_33 
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_33 
BFAIL ERS_RLA.f45_f45.I.bluefire.generate.clm4_0_34 
BFAIL ERS_RLA.f45_f45.I.bluefire.compare.clm4_0_33 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_33 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_33 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare_hist.clm4_0_33 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_33 
FAIL  ERS_D.f19_g16.IGRCP26CN.bluefire.compare_hist.clm4_0_33 -- only glc map area?
FAIL  ERP.f19_g16.IGRCP60CN.bluefire.compare_hist.clm4_0_33 ---- only glc map area?
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_33 
FAIL  PST.f10_f10.I20TRCN.bluefire.compare.clm4_0_33 
FAIL  PET_PT.f10_f10.I20TRCN.bluefire.compare.clm4_0_33 
FAIL  SMS.f10_f10.IRCP45CN.bluefire.compare_hist.clm4_0_33 
FAIL  SMS.f10_f10.IRCP45CN.bluefire.compare.clm4_0_33 
  bluefire/PTCLM testing: All PASS
  jaguarpf interactive testing: All PASS except...
014 erAK4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 7
015 brAK4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -5+-5 cold .............FAIL! rc= 6
  edinburgh/lf95 interactive testing: All PASS, except TBL and... (pio bug 1396)
006 erAL4 TER.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 5
007 brAL4 TBR.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -5+-5 cold ................FAIL! rc= 5
  mirage,storm/ifort interactive testing: All fail -- problem with pio build
  yong/ifort interactive testing: All fail -- problem with pio build

CLM tag used for the baseline comparison tests if applicable: clm4_0_33

Changes answers relative to baseline: No bit-for-bit, except:

  f10_f10, f45_f45, f09_f09, f19_f19, T31_T31, with new domain files

===============================================================
===============================================================
Tag name:  clm4_0_33
Originator(s):  erik (Erik Kluzek)
Date: Mon Jul 25 14:34:18 MDT 2011
One-line Summary: Move changes on release branch over to trunk

Purpose of changes:

Move changes from release branch over to trunk. Update README files and documentation.
Add new tools testing. Use if masterproc and iulog for output. Move pft mksurfdata into
inputdata. rh files are t-1. All clm tools namelist items in XML database. Fix tools
Makefiles. Survey testlists, move tests around. Remove clm* from path, add quotes in test
scripts, remove CLM_CESMBLD. Remove getfil in mksurfdata, make fdynuse optional. Add
-nomv to getregional. Cleanup help and improve documentation in scripts and XML database.
Update datm8/scripts/drv/cism/csm_share. Update pergro data. Changes answers because of
drv update to cesm1_0_beta22 version (answers are identical to cesm1_0_beta22).

Bugs fixed (include bugzilla ID):
                                 1301 (Add doc on OpenMP fortran tools)
                                 1329 (Add new tool tests)
                                 1338 (Move raw pftdata into inputdata in XML database)
                                 1341 (Error running with crop for a single-point)
                                 1346 (save history namelist to the rh0 files NOT rh1)
                                 1351 (Add all CLM tools namelist items to XML)
                                 1351 (Problem with interpinic on non bluefire machines)
                                 1353 (Huge "ccsm.log" file)
                                 1367 (final_spinup stop time isn't right)
data)
Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1309 (Problem with building T31 rcp pftdyn files)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1339 (Increase streams file limit from 1000 to 2000)
                                 1358 (incorrect units for a few history fields)
                                 1360 (Can't do a ncdump on US-UMB data)
                                 1361 (Problem with transient compsets for PTCLM)
                                 1372 (pio problem writing out RTM hist fields at RTM res)
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1355 (tlai is zero for first two time-steps in CLMSP)
                                 1326 (Crop and irrigation sims give balance check error)
                                 1310 (Restart files different over different tasks)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts/drv/shr/cism/datm
   scripts   to scripts4_110711
   drv       to drvseq3_1_54
   datm      to datm8_110624
   csm_share to share3_110717
   cism      to cism1_110418

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>> Add new tests for tools
   A models/lnd/clm/test/system/TOPtools.sh ------- Ensure different number of threads
            give the same answers for tools
   A models/lnd/clm/test/system/TBLscript_tools.sh  Comparison test for script tools
   A models/lnd/clm/test/system/TBLrst_tools.sh --- Comparison test for rst_tools
   A models/lnd/clm/test/system/config_files/tools__do ---- Add OpenMP debug config
   A models/lnd/clm/test/system/config_files/17p_nrscnv_ds  Add non-RTM debug serial CN

>>>>>>>>>>> Make copies of existing files to inside of 
>>>>>>>>>>> individual tools so that tools can be standalone
   A models/lnd/clm/tools/mksurfdata/clm_varpar.F90
   A models/lnd/clm/tools/mksurfdata/shr_file_mod.F90
   A models/lnd/clm/tools/mksurfdata/shr_timer_mod.F90
   A models/lnd/clm/tools/mksurfdata/shr_log_mod.F90
   A models/lnd/clm/tools/mksurfdata/fileutils.F90
   A models/lnd/clm/tools/mksurfdata/shr_const_mod.F90
   A models/lnd/clm/tools/mksurfdata/shr_string_mod.F90
   A models/lnd/clm/tools/mksurfdata/clm_varctl.F90
   A models/lnd/clm/tools/mksurfdata/shr_sys_mod.F90
   A models/lnd/clm/tools/mksurfdata/shr_kind_mod.F90
   A models/lnd/clm/tools/mksurfdata/nanMod.F90
   A models/lnd/clm/tools/mksurfdata/Mkdepends
   A models/lnd/clm/tools/mksurfdata/clm_varpar.F90
   A models/lnd/clm/tools/mkgriddata/mkvarpar.F90
   A models/lnd/clm/tools/mkgriddata/clm_varctl.F90
   A models/lnd/clm/tools/mkgriddata/clm_varpar.F90
   A models/lnd/clm/tools/mkgriddata/shr_sys_mod.F90
   A models/lnd/clm/tools/mkgriddata/shr_log_mod.F90
   A models/lnd/clm/tools/mkgriddata/ncdio.F90
   A models/lnd/clm/tools/mkgriddata/shr_kind_mod.F90
   A models/lnd/clm/tools/mkgriddata/shr_const_mod.F90
   A models/lnd/clm/tools/mkgriddata/domainMod.F90
   A models/lnd/clm/tools/mkgriddata/areaMod.F90
   A models/lnd/clm/tools/mkgriddata/nanMod.F90
   A models/lnd/clm/tools/mkgriddata/Mkdepends
   A models/lnd/clm/tools/mkdatadomain/Mkdepends
   A models/lnd/clm/tools/mkdatadomain/shr_kind_mod.F90
   A models/lnd/clm/tools/mkdatadomain/shr_const_mod.F90

>>>>>>>>>>> Add new README files to talk about testing and file copies
   A models/lnd/clm/tools/README.testing
   A models/lnd/clm/tools/README.filecopies

>>>>>>>>>>> Add a new chapter for PTCLM
   A models/lnd/clm/doc/UsersGuide/ptclm.xml

List all existing files that have been modified, and describe the changes:


>>>>>>>>>>> Remove CLM_CESMBLD, remove clm* in pathname, add quotes in tests
>>>>>>>>>>> fix some spelling and unused vars, add new scripts tests
M    models/lnd/clm/test/system/TCB.sh -------------- Remove CLM_CESMBLD
M    models/lnd/clm/test/system/TSMncl_tools.sh ----- Remove clm* in pathname
M    models/lnd/clm/test/system/TBL.sh -------------- Remove clm* in pathname
M    models/lnd/clm/test/system/README.testnames ---- Update for new tests
M    models/lnd/clm/test/system/TBR.sh -------------- Remove unused cfgdir
M    models/lnd/clm/test/system/TCBtools.sh --------- Remove clm* in pathname, fix spelling
M    models/lnd/clm/test/system/TER.sh -------------- Remove unused cfgdir
M    models/lnd/clm/test/system/test_driver.sh ------ Remove CLM_CESMBLD, change temp on lynx
M    models/lnd/clm/test/system/TSMrst_tools.sh ----- Remove unused cfgdir, add quotes 
                in comparison
M    models/lnd/clm/test/system/nl_files/getregional - Add -nomv option in
M    models/lnd/clm/test/system/nl_files/mksrfdt_10x15_irr_1850 - Put -exedir last
M    models/lnd/clm/test/system/input_tests_master --- Add TBLtools, TOPtools, 
                TBLrst_tools, TBLscript_tools tests in
M    models/lnd/clm/test/system/TSMtools.sh ---------- Add CLM_RERUN (needed for
                TOPtools which runs the same test over for different threads)
                Remove clm* from path add quotes to some if tests
M    models/lnd/clm/test/system/TBLtools.sh ---------- Remove clm* from path

>>>>>>>>>>> Move tests around a bit
M    models/lnd/clm/test/system/tests_pretag_bluefire_nompi
M    models/lnd/clm/test/system/tests_pretag_edinburgh_nompi - Add TOP test
M    models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
M    models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>> Make fdynuse file optional and remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mklaiMod.F90 ---- Remove fdynuse file,
            remove use of getfil, all averaging is the same (no *_pft options)
M    models/lnd/clm/tools/mksurfdata/mksoilMod.F90 --- Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkharvestMod.F90  Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/creategridMod.F90 Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkglcmecMod.F90 - Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkvocefMod.F90 -- Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkglacierMod.F90  Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkurbanparMod.F90 Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/areaMod.F90 ----- Remove _pft methods
M    models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ---- Make mksrf_fdynuse optional
            remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mklanwatMod.F90 - Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/mkpftMod.F90 ---- Remove use of getfil
M    models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850-2005.txt -- new paths

>>>>>>>>>>> Updated RMS differences, and add -nomv option to getregional_datasets
M    models/lnd/clm/tools/ncl_scripts/RMSbluefire.dat ---------- Updated RMS differences
M    models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl -- Add -nomv option
M    models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - Add NOMV env var

>>>>>>>>>>> Fix bug 1351
M    models/lnd/clm/tools/interpinic/interpinic.F90 -------- Make sure: htop_var, 
            fpcgrid_var, present_var, itypveg_var are set
M    models/lnd/clm/tools/interpinic/interpinic.runoptions - Update the input file to use

>>>>>>>>>>> Work on formatting, remove use of getfils
M    models/lnd/clm/tools/mkgriddata/mkgriddata.F90 - Work on formatting a bit, 
            removed use of fileutils
M    models/lnd/clm/tools/mkgriddata/areaMod.F90 ---- Remove use of getfil
M    models/lnd/clm/tools/mkdatadomain/create_domain.F90 - Work on output write

>>>>>>>>>>> Update documentation in README files
M    models/lnd/clm/test/system/config_files/README
M    models/lnd/clm/bld/namelist_files/use_cases/README
M    models/lnd/clm/test/system/README
M    models/lnd/clm/tools/mkgriddata/README
M    models/lnd/clm/tools/mkdatadomain/README
M    models/lnd/clm/tools/interpinic/README
M    models/lnd/clm/tools/README.testing
M    models/lnd/clm/tools/README
M    models/lnd/clm/bld/README

>>>>>>>>>>> Sync up tools Makefile, make Filepath standalone (only includes .)
>>>>>>>>>>> Work on formatting, set OPT default, add TOOLROOT default
>>>>>>>>>>> compare to null instead of strip
M    models/lnd/clm/tools/mksurfdata/Makefile
M    models/lnd/clm/tools/mksurfdata/Filepath
M    models/lnd/clm/tools/mksurfdata/Srcfiles - Remove spmdMod,fileutils,
            abortutils/shr_cal_mod, ESMF, mpi, shr_mpi_mod
M    models/lnd/clm/tools/interpinic/Makefile
M    models/lnd/clm/tools/mkgriddata/Filepath
M    models/lnd/clm/tools/mkgriddata/Srcfiles - Remove fileutils,spmdMod,
            abortutils,shr_timer_mod,shr_mpi_mod,shr_file_mod,MPI
M    models/lnd/clm/tools/mkgriddata/Makefile
M    models/lnd/clm/tools/mkdatadomain/Filepath
M    models/lnd/clm/tools/mkdatadomain/Makefile

>>>>>>>>>>> Cleanup help and documentation
M    models/lnd/clm/bld/configure --------------- Cleanup help, remove cesm_bld
M    models/lnd/clm/bld/queryDefaultNamelist.pl - Cleanup help
M    models/lnd/clm/bld/listDefaultNamelist.pl -- Add more description, documentation
            set maxpft for crop
M    models/lnd/clm/bld/build-namelist ---------- Cleanup help, add papi_inparm
            remove some list options for non-CLM vars
M    models/lnd/clm/bld/clm.cpl7.template ------- Remove clm* in path
            remove warning about CAM and CLM dtime, remove comment about *.h files

>>>>>>>>>>> Make sure all 1x1 files are in supported single-point res
M    models/lnd/clm/bld/config_files/config_definition.xsl - Add CLM in descriptions
M    models/lnd/clm/bld/config_files/config_definition.xml - Add 
            1x1_numaIA,1x1_smallvilleIA to supported single-point resolutions
            cleanup spelling and a few descriptions

>>>>>>>>>>> Work on documentation descriptions, document all tools namelist items
M    models/lnd/clm/bld/namelist_files/checklatsfiles.ncl --------- Add doc, continue
            if file NOT found rather than abort
M    models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl --------- Add doc, continue
            if file NOT found rather than abort
M    models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Work on descriptions,
            add in all mksurfdata/mkdatadomain/mkgriddata namelist vars, add in 
            new driver namelist vars (so documented in table in UG), 
            add HCN,CH3CN to drydep
M    models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Add datasource
            small formatting change
M    namelist_files/namelist_defaults_drv.xml --------------------- Fix final_spinup
            (bug 1367)
M    models/lnd/clm/bld/namelist_files/namelist_defaults.xsl ------ Add attributes
            to output for: crop, irrig, ad_spinup, and source
M    models/lnd/clm/bld/namelist_files/namelist_definition.xsl ---- Work to improve
            output formatting of table
M    models/lnd/clm/bld/namelist_files/datm-build-namelist -------- Cleanup help / source
M    models/lnd/clm/bld/namelist_files/checktopofiles.ncl --------- Change res list,
            add documentation, continue rather than abort if file not found
M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml Update paths
            to landuse for mksurfdata as all in repo now, add default values for
            other mksurfdata namelist items

>>>>>>>>>>> Update documentation for latest release
M    models/lnd/clm/doc/UsersGuide/trouble_shooting.xml
M    models/lnd/clm/doc/UsersGuide/single_point.xml
M    models/lnd/clm/doc/UsersGuide/special_cases.xml
M    models/lnd/clm/doc/UsersGuide/tools.xml
M    models/lnd/clm/doc/UsersGuide/limitLineLen.pl
M    models/lnd/clm/doc/UsersGuide/preface.xml
M    models/lnd/clm/doc/UsersGuide/clm_ug.xml
M    models/lnd/clm/doc/UsersGuide/adding_files.xml
M    models/lnd/clm/doc/UsersGuide/appendix.xml
M    models/lnd/clm/doc/UsersGuide/custom.xml
M    models/lnd/clm/doc/UsersGuide/Makefile

>>>>>>>>>>> Update documentation for latest release
M    models/lnd/clm/doc/Quickstart.userdatasets
M    models/lnd/clm/doc/IMPORTANT_NOTES
M    models/lnd/clm/doc/Quickstart.GUIDE
M    models/lnd/clm/doc/CodeReference/Filepath
M    models/lnd/clm/doc/KnownLimitations
M    models/lnd/clm/doc/KnownBugs
M    models/lnd/clm/doc/README
M    README

>>>>>>>>>>> Add if masterproc, work on documentation, use iulog NOT unit 6
M    models/lnd/clm/src/biogeochem/CropRestMod.F90 ---------- Add if masterproc
M    models/lnd/clm/src/biogeochem/CASAMod.F90 -------------- Cleanup endrun statement
M    models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 --- Use iulog NOT unit 6
M    models/lnd/clm/src/biogeochem/CNDVMod.F90 -------------- Use iulog NOT unit 6
M    models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ------- Use iulog NOT unit 6
M    models/lnd/clm/src/biogeochem/CNAllocationMod.F90 ------ Ensure arepr is initialized
            (bug 1341)
M    models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 - Comment out debug write
M    models/lnd/clm/src/biogeochem/CNDVEstablishmentMod.F90 - Use iulog NOT unit 6

>>>>>>>>>>> Add if masterproc, work on documentation, rh files are t-1
M    models/lnd/clm/src/main/fileutils.F90 --- Add if masterproc
M    models/lnd/clm/src/main/pftdynMod.F90 --- Add if masterproc (fix bug 1353)
M    models/lnd/clm/src/main/histFileMod.F90 - Add if masterproc, rh files are t-1
            (bug 1346)
M    models/lnd/clm/src/main/clmtype.F90 ----- Work on documentation


Summary of testing:

  bluefire: All PASS except... (up to 43)
004 blC91 TBL.sh _sc_dh clm_std^nl_urb 20030101:3600 4x5 gx3v7 -6 arb_ic ........................FAIL! rc= 5
008 blTZ1 TBL.sh 21p_cncrpsc_dh clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 5
011 blD91 TBL.sh _persc_dh clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 5
015 blEH1 TBL.sh 4p_vorsc_dh clm_std^nl_urb 20021231:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic ......FAIL! rc= 5
019 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:1800 1.9x2.5 gx1v6@1850-2100 -10 cold FAIL! rc= 5
023 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:1800 10x15 USGS@2000 -90 cold ..................FAIL! rc= 5
027 blHo1 TBL.sh 17p_cnsc_dh clm_drydep 20000101:1800 10x15 USGS@2000 -10 cold ..................FAIL! rc= 5
028 smG41 TSM.sh 17p_scnv_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ...........FAIL! rc= 10
029 erG41 TER.sh 17p_scnv_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic .........FAIL! rc= 5
030 brG41 TBR.sh 17p_scnv_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic .........FAIL! rc= 5
031 blG41 TBL.sh 17p_scnv_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ...........FAIL! rc= 4
035 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 5
039 blG61 TBL.sh _scnv_dh clm_std^nl_urb 20020101:1800 1.9x2.5 gx1v6 48 startup .................FAIL! rc= 5
043 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 48 cold ...............FAIL! rc= 5
  bluefire interactive testing: All PASS except TBL tests
  bluefire/CESM testing: All PASS except compare tests to clm4_0_32
  bluefire/CESM extra testing (show that answers are identical with cesm1_0_beta22):
PASS  ERI.T31_g37.IGCN.bluefire
PASS  ERI.T31_g37.IGCN.bluefire.compare.cesm1_0_alpha22a
PASS  ERS.T31_g37.ITEST.bluefire
PASS  ERS.T31_g37.ITEST.bluefire.compare_hist.cesm1_0_alpha22a
PASS  ERS.T31_g37.ITEST.bluefire.compare.cesm1_0_alpha22a
PASS  ERS.f19_g16.IGCN.bluefire
PASS  ERS.f19_g16.IGCN.bluefire.compare_hist.cesm1_0_alpha22a
PASS  ERS.f19_g16.IGCN.bluefire.compare.cesm1_0_alpha22a
PASS  ERS.f45_g37.I4804.bluefire
PASS  ERS.f45_g37.I4804.bluefire.compare_hist.cesm1_0_alpha22a
PASS  ERS.f45_g37.I4804.bluefire.compare.cesm1_0_alpha22a
PASS  SMS_RLA.f45_f45.I.bluefire
PASS  SMS_RLA.f45_f45.I.bluefire.compare_hist.cesm1_0_alpha22a
PASS  SMS_RLA.f45_f45.I.bluefire.compare.cesm1_0_alpha22a
PASS  SMS_RLB.f45_f45.ITEST.bluefire
PASS  SMS_RLB.f45_f45.ITEST.bluefire.compare_hist.cesm1_0_alpha22a
PASS  SMS_RLB.f45_f45.ITEST.bluefire.compare.cesm1_0_alpha22a
  jaguarpf interactive testing: All PASS except...
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:1800 1x1_brazil navy -10 arb_ic ...............FAIL! rc= 5
008 blTZ3 TBL.sh 21p_cncrpsc_do clm_stdIgnYr^nl_crop 20020401:3600 10x15 USGS -10 cold ..........FAIL! rc= 5
012 blVU4 TBL.sh 21p_cncrpsc_ds clm_stdIgnYr^nl_crop 20020101:3600 1x1_smallvilleIA test -1100 cold FAIL! rc= 5
014 blAK4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -10 cold ...............FAIL! rc= 5
015 smG43 TSM.sh 17p_scnv_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ...........FAIL! rc= 10
016 erG43 TER.sh 17p_scnv_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic .........FAIL! rc= 5
017 brG43 TBR.sh 17p_scnv_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic .........FAIL! rc= 5
018 blG43 TBL.sh 17p_scnv_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ...........FAIL! rc= 4
022 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:1800 1x1_brazil navy -670 arb_ic .................FAIL! rc= 5
026 blSn3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp8.5 20331231:1800 1.9x2.5 gx1v6@1850-2100 48 arFAIL! rc= 5
030 blQQ4 TBL.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -150 cold .............FAIL! rc= 5
034 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 5
038 blS63 TBL.sh _mec10sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ...................FAIL! rc= 5
040 bl8Z3 TBLrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6FAIL! rc= 5
042 bl954 TBLscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_10x15_irr_1850^tools__ds ..........FAIL! rc= 6
046 bl9T4 TBLscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_1x1_numaIA_mp20irrcr_2000^tools__ds FAIL! rc= 6
050 bl9C4 TBLscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_1x1_vancouverCAN_2000^tools__ds ...FAIL! rc= 6
  edinburgh/lf95 interactive testing: All PASS except...
006 blAL4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 7
014 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:3600 1x1_vancouverCAN navy 331 arb_ic ...FAIL! rc= 7
  edinburgh/lf95 testing: All PASS except TBL tests
  lynx/intel testing: All PASS except TBL tests

CLM tag used for the baseline comparison tests if applicable: clm4_0_32

Changes answers relative to baseline: Yes (Driver change)

    But, answers are identical to cesm1_0_beta22 where the driver change
    was already in effect.

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: larger than roundoff/same climate

===============================================================
===============================================================
Tag name:  clm4_0_32
Originator(s):  erik (Erik Kluzek)
Date: Thu May 19 15:18:49 MDT 2011
One-line Summary: Make I1850SPINUPCN compset use MOAR data, various bug fixes, work on test lists

Purpose of changes:

Update datm and scripts so can run I1850SPINUPCN compset with MOAR data. Fix CN units.
Fix some documentation for crop. Add attribute that notes that flux variables are NOT
multiplied by landfrac. Change align year for I4804 and I4804CN compsets, add append/warn
option to xmlchange. Some clarifications to clm namelist. build-namelist can run list
options without a config_cache file. Add comment/title to output files. Remove the
2.65x3.33 grid, no longer supported. Work on test lists a bit.

Bugs fixed (include bugzilla ID):
                                 1337 (have ISPINUPCN compset use MOAR data)
                                 1336 (evaluate CLM testing for release)
                                 1327 (correct documentation of CN variable units)
                                 1158 (make 4804 compsets consistent with 1850 etc.)
                                 1151 (remove co2_ppmv when co2_type is NOT constant)
                                 1140 (build-namelist -list options die with config file)
                                 1108 (have append/warn mode for xmlchange)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1367 (final_spinup stop time isn't right)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: 

   I1850SPINUP compset changed to use MOAR data

   DATM_CPL_* variables added to env_conf.xml to set casename, years run over
   I4804 compsets ALIGN year changed to agree with doc. and I1850 compsets

   New options to xmlchange -- allow you to append (-a) to the end of something already
   there and another option (-w) warn you and abort if already set.

Describe any changes made to the namelist: Add options to build-namelist

    Add -co2_ppmv and -rtm_tstep options to set co2_ppmv when co2_type is constant
    and set rtm time-step when RTM is on.

    This way co2_ppmv and rtm_nsteps do NOT show up in the namelist if they aren't needed.

List any changes to the defaults for the boundary datasets: Remove 2.65x3.33 datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self, slevis (units change), sacks (crop doc)

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share, datm
    scripts   to scripts4_110517
    csm_share to share3_110516
    datm      to datm8_110517b

List all files eliminated:

>>>>>>>>>>>>> Remove as no longer needed to get lists for documentation
   D   models/lnd/clm/doc/UsersGuide/config_cache.xml

List all files added and what they do:

>>>>>>>>>>>>> Add new test configurations
   A   models/lnd/clm/test/system/config_files/_scnv_dm
   A   models/lnd/clm/test/system/config_files/17p_scnv_dm
   A   models/lnd/clm/test/system/config_files/17p_scnv_ds
   A   models/lnd/clm/test/system/config_files/17p_nrcnsc_do
   A   models/lnd/clm/test/system/config_files/17p_nrcnsc_ds
   A   models/lnd/clm/test/system/config_files/17p_scnv_m
   A   models/lnd/clm/test/system/config_files/17p_scnv_o
   A   models/lnd/clm/test/system/config_files/17p_scnv_s
   A   models/lnd/clm/test/system/config_files/17p_cnnfsc_dh -- turn on NOFIRE
   A   models/lnd/clm/test/system/config_files/17p_cnnfsc_dm -- turn on NOFIRE
   A   models/lnd/clm/test/system/config_files/17p_cnnfsc_do -- turn on NOFIRE
   A   models/lnd/clm/test/system/config_files/21p_nrcncrpsc_s
   A   models/lnd/clm/test/system/config_files/21p_nrcncrpsc_ds

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/test/system/config_files/README

>>>>>>>>>>>>> Change tests a bit to make them more consistent with naming convention
>>>>>>>>>>>>> make sure tests are covered, and have no-RTM tests for single-point
   M   models/lnd/clm/test/system/README.testnames
   M   models/lnd/clm/test/system/nl_files/clm_spin --- Use MOAR data on bluefire
   M   models/lnd/clm/test/system/input_tests_master

>>>>>>>>>>>>> Change test lists
   M   models/lnd/clm/test/system/tests_posttag_lynx_nompi
   M   models/lnd/clm/test/system/tests_pretag_bluefire
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M   models/lnd/clm/test/system/tests_pretag_edinburgh
   M   models/lnd/clm/test/system/tests_posttag_kraken
   M   models/lnd/clm/test/system/tests_posttag_yong
   M   models/lnd/clm/test/system/tests_posttag_purempi_regression
   M   models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M   models/lnd/clm/test/system/tests_pretag_jaguarpf
   M   models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi
   M   models/lnd/clm/test/system/tests_posttag_mirage
   M   models/lnd/clm/test/system/tests_posttag_intrepid
   M   models/lnd/clm/test/system/tests_posttag_intrepid_nompi
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression
   M   models/lnd/clm/test/system/tests_posttag_lynx

>>>>>>>>>>>>> Add -co2_ppmv, and -rtm_tstep options to build-namelist
>>>>>>>>>>>>> Don't require config file for build-namelist list options
>>>>>>>>>>>>> Remove 2.65x3.33 files, add capability to handle MOAR data
   M   models/lnd/clm/bld/build-namelist
   M   models/lnd/clm/bld/clm.cpl7.template
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml
   M   models/lnd/clm/bld/namelist_files/datm-build-namelist
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

>>>>>>>>>>>>> Correct documentation of units from kg to g
   M   models/lnd/clm/src/biogeochem/CNMRespMod.F90
   M   models/lnd/clm/src/biogeochem/CNPhenologyMod.F90 -- Also documentation changes
            from Bill Sacks
   M   models/lnd/clm/src/biogeochem/CNDecompMod.F90
   M   models/lnd/clm/src/biogeochem/CNAllocationMod.F90
   M   models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90

>>>>>>>>>>>>> Add title and comment attributes to output files
   M   models/lnd/clm/src/main/histFileMod.F90
   M   models/lnd/clm/src/main/restFileMod.F90

Summary of testing:

  bluefire interactive testing: All PASS up to...
006 smC97 TSM.sh _sc_do clm_spin^nl_urb 20030101:1800 4x5 gx3v7@1850 -6 arb_ic ..................FAIL! rc= 10
  bluefire/CESM testing: All PASS except...
BFAIL PST.f45_g37.I1850CN.bluefire.compare.clm4_0_31
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_31

CLM tag used for the baseline comparison tests if applicable: clm4_0_31

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_31
Originator(s):  erik (Erik Kluzek)
Date: Fri May 13 17:11:38 MDT 2011
One-line Summary: Fix answers for transient_CN, fix interpinic

Purpose of changes:

Fix interpinic test with finidat files. Fix CNPrecisionControl so answers with transient
CN are same as clm4_0_26 without crop.

Bugs fixed (include bugzilla ID):
                                 1335 (transient_CN sometimes different than clm4_0_26)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1318 (interpinic has trouble with new restart files)
                                 1319 (interpinic doesn't interpolate *_PERIOD)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1367 (final_spinup stop time isn't right)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>>>> Add transient 20th Century namelist config
   A   models/lnd/clm/test/system/nl_files/clm_transient_20thC

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Add f19 transient-CN tests that start in 1979 (which showed bug 1335)
   M   models/lnd/clm/test/system/input_tests_master - Add f19 transient CN tests
              Also make glc_nec interpinic test run for f09@1850
   M   models/lnd/clm/test/system/README.testnames --- Add run-4 for f19 transient CN
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi ------ Add f19 transient_CN
test
   M   models/lnd/clm/test/system/tests_posttag_purempi_regression - Add f19 transient_CN
test
   M   models/lnd/clm/test/system/tests_posttag_hybrid_regression -- Add f19 transient_CN
test
   M   models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi ------ Add f19 transient_CN
test
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression --- Add f19 transient_CN
test

>>>>>>>>>>>>>> Put changes from clm4_0_27 back in except those that cause runs to fail
   M   models/lnd/clm/tools/interpinic/interpinic.F90
   M   models/lnd/clm/tools/interpinic/Srcfiles ------ Add shr_const_mod.F90 back in

>>>>>>>>>>>>>>
   M   models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90 - Add if ( crop_prog ) to
               a crop change that needed it
   M   models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 ---- Remove pft_ctrunc not used
   M   models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90 -- Remove pft_ctrunc not used
   M   models/lnd/clm/src/biogeochem/DryDepVelocity.F90 -------- Set wesveg for crop_prog

Summary of testing:

  bluefire extra interactive testing:
001 bl853 TBLtools.sh interpinic tools__o runoptions ............................................PASS
001 sm893 TSMrst_tools.sh _sc_do interpinic clm_std^nl_urb 20000101:1800 1.9x2.5 gx1v6 4x5 gx3v7 -1 PASS
001 sm857 TSMrst_tools.sh 17p_cnsc_o interpinic clm_std^nl_urb 18500101:1800 1.9x2.5 gx1v6@1850 10x1PASS
002 sm8Z3 TSMrst_tools.sh 21p_cncrpsc_do interpinic clm_stdIgnYr^nl_crop 20000101:1800 1.9x2.5 gx1v6PASS
003 sm813 TSMrst_tools.sh 17p_cndvsc_do interpinic clm_std^nl_urb 18500101:1800 1.9x2.5 gx1v6@1850 4PASS
>>>>> This test compares to clm4_0_30 and rightly shows that answers change
001 blH43 TBL.sh 17p_cnsc_do clm_transient_20thC 19790101:1800 1.9x2.5 gx1v6@1850-2000 -10 startup FAIL! rc= 7
  bluefire/CESM testing: All PASS except... (why did these comparisons PASS in clm4_0_27)
BFAIL ERP.f19_g16.IGRCP60CN.bluefire.compare.clm4_0_30 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_30 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_30 
  bluefire/CESM testing compared to cesm1_0_beta19:
PASS  SMS_D.f09_g16.BRCP45CN.bluefire 
PASS  SMS_D.f09_g16.BRCP45CN.bluefire.compare_hist.cesm1_0_beta19 
PASS  SMS_D.f09_g16.BRCP45CN.bluefire.compare.cesm1_0_beta19 
PASS  ERS.f09_f09.FAMIPCN.bluefire 
PASS  ERS.f09_f09.FAMIPCN.bluefire.compare_hist.cesm1_0_beta19 
PASS  ERS.f09_f09.FAMIPCN.bluefire.compare.cesm1_0_beta19 
PASS  ERS.f19_f19.FAMIPC5.bluefire 
PASS  ERS.f19_f19.FAMIPC5.bluefire.compare_hist.cesm1_0_beta19 
PASS  ERS.f19_f19.FAMIPC5.bluefire.compare.cesm1_0_beta19 
PASS  ERS.f19_f19.FAMIPCN.bluefire 
PASS  ERS.f19_f19.FAMIPCN.bluefire.compare_hist.cesm1_0_beta19 
PASS  ERS.f19_f19.FAMIPCN.bluefire.compare.cesm1_0_beta19 
PASS  ERS.f09_g16.BRCP45CN.lynx_pgi 
PASS  ERS.f09_g16.BRCP45CN.lynx_pgi.compare_hist.cesm1_0_beta19 
PASS  ERS.f09_g16.BRCP45CN.lynx_pgi.compare.cesm1_0_beta19 

CLM tag used for the baseline comparison tests if applicable: clm4_0_30

Changes answers relative to baseline: Some transient_CN tests are different
   because of bug 1335 introduced in clm4_0_27
   
   With these changes answers are the same as clm4_0_26

===============================================================
===============================================================
Tag name:  clm4_0_30
Originator(s):  erik (Erik Kluzek)
Date: Wed May 11 14:32:19 MDT 2011
One-line Summary: New finidat/fsurdat files for T31

Purpose of changes:

Externals update, fix some PTCLM problems. New finidat/fsurdat files for T31, make sure
works.

Bugs fixed (include bugzilla ID):
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1248 (PTCLM can only go to 2005)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1318 (interpinic has trouble with new restart files)
                                 1319 (interpinic doesn't interpolate *_PERIOD)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1335 (transient_CN sometimes different than clm4_0_26)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    New finidat files for T31
    New fsurdat file for T31@2000

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, mct, pio

    scripts to scripts4_110511
    mct     to MCT2_7_0_110504a
    pio     to pio1_3_0

List all files eliminated: None

List all files added and what they do:

   A   models/lnd/clm/test/system/config_files/17p_cnsc_h
   A   models/lnd/clm/test/system/config_files/17p_cnsc_o

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/test/system/README.testnames --- Add R f19 rcp4.5 resol
   M   models/lnd/clm/test/system/input_tests_master - Make some tests startup, add
          some rcp tests, change some tests from T31 to f19
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Add new finidat
          files for T31@1850/2000, add new surdata file for T31@2000, remove empty
          half-degree pftdyn file

Summary of testing:

  bluefire: All PASS except...
024 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
025 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
026 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
027 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
049 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
050 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
051 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
052 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
054 erJ61 TER.sh 4p_casasc_dh clm_std^nl_urb 20021230:1800 1.9x2.5 gx1v6 10+38 cold .............FAIL! rc= 5
055 brJ61 TBR.sh 4p_casasc_dh clm_std^nl_urb_br 20021230:1800 1.9x2.5 gx1v6 72+72 cold ..........FAIL! rc= 5
056 blJ61 TBL.sh 4p_casasc_dh clm_std^nl_urb 20021230:1800 1.9x2.5 gx1v6 48 cold ................FAIL! rc= 4
  bluefire interactive testing: All PASS
  bluefire extra interactive testing:
001 smE13 TSM.sh 17p_vorsc_do clm_std^nl_urb 20021230:1800 48x96 gx3v7 96 startup ...............PASS
001 smH13 TSM.sh 17p_cnsc_do clm_ndepdyn^nl_cn_conly 20020101:1800 48x96 gx3v7@1850-2000 96 startup PASS
  bluefire/CESM testing: All PASS except...
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_29 
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_29 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_29 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_29 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare_hist.clm4_0_29 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_29 
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_29 
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_29 
BFAIL ERS_E.T31_g37.I1850.bluefire.compare.clm4_0_29 
BFAIL ERI.T31_g37.IG1850.bluefire.compare.clm4_0_29 
BFAIL ERS_D.f19_g16.IGRCP26CN.bluefire.compare.clm4_0_29 

  bluefire/CESM rcps extra testing: All PASS...
PASS  SMS.f09_g16.IRCP26CN.bluefire 
PASS  SMS.f09_g16.IRCP45CN.bluefire 
PASS  SMS.f09_g16.IRCP60CN.bluefire 
PASS  SMS.f09_g16.IRCP85CN.bluefire 
PASS  SMS.f09_g16.IGRCP26CN.bluefire 
PASS  SMS.f09_g16.IGRCP45CN.bluefire 
PASS  SMS.f09_g16.IGRCP60CN.bluefire 
PASS  SMS.f09_g16.IGRCP85CN.bluefire 
PASS  SMS.f19_g16.IRCP26CN.bluefire 
PASS  SMS.f19_g16.IRCP45CN.bluefire 
PASS  SMS.f19_g16.IRCP60CN.bluefire 
PASS  SMS.f19_g16.IGRCP45CN.bluefire 
PASS  SMS.f19_g16.IGRCP85CN.bluefire 

  bluefire/PTCLM testing: All PASS

CLM tag used for the baseline comparison tests if applicable: clm4_0_29

Changes answers relative to baseline: no bit-for-bit (except T31 with new files)

===============================================================
===============================================================
Tag name:  clm4_0_29
Originator(s):  erik (Erik Kluzek)
Date: Thu May  5 14:19:04 MDT 2011
One-line Summary: Backout interpinic changes to one that works

Purpose of changes:

Backout interpinic to Mariana's non2dgrid version. Won't work for new
files (have to remove fields to get it to work). Adds back in bugs 1318 and 1319.
Add more comparison tests for tools and add cprnc.pl/ncl scripts to compare files that 
don't have a time-axis.

Bugs fixed (include bugzilla ID):
                                 1328 (interpinic gives bad results that can NOT be used!)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1318 (interpinic has trouble with new restart files)
                                 1319 (interpinic doesn't interpolate *_PERIOD)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1335 (transient_CN sometimes different than clm4_0_26)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>>>> Add scripts to compare two NetCDF files and report if different
>>>>>>>>>>>>>> This mimic's the cprnc program, but also works on files without 
>>>>>>>>>>>>>> a time coordinate. For big files it's considerably slower as well.
   A   models/lnd/clm/tools/ncl_scripts/cprnc.pl
   A   models/lnd/clm/tools/ncl_scripts/cprnc.ncl

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Add tool comparison tests, use cprnc.pl for tool comparison
   M   models/lnd/clm/test/system/input_tests_master - Add TBLtools test for:
           mkgriddata, mksurfdata, mkdatadomain, and interpinic, remove pftdyn
           mksurfdata test
   M   models/lnd/clm/test/system/CLM_compare.sh ----- Remove unused variable
   M   models/lnd/clm/test/system/TSMtools.sh -------- Copy .txt files over if exist
   M   models/lnd/clm/test/system/TBLtools.sh -------- Use cprnc.pl in place of cprnc binary

>>>>>>>>>>>>>> Add tool comparison tests
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M   models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M   models/lnd/clm/test/system/tests_posttag_yong
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>>>>> Add notes on cprnc tools
   M   models/lnd/clm/tools/ncl_scripts/README

>>>>>>>>>>>>>> Move back to Mariana's version of interpinic in non2dgrid08_clm4_0_26
>>>>>>>>>>>>>> This means it won't work for new files, but will work for older files
>>>>>>>>>>>>>> and gives the same answers as the non2dgrid version.
   M   models/lnd/clm/tools/interpinic/interpinic.F90
   M   models/lnd/clm/tools/interpinic/Srcfiles


Summary of testing:

  bluefire interactive testing: These PASS

002 bl853 TBLtools.sh interpinic tools__o runoptions ............................................PASS (same as non2dgrid08_clm4_0_26)
001 bl754 TBLtools.sh mksurfdata tools__s namelist ..............................................PASS
002 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................PASS
001 bl654 TBLtools.sh mkgriddata tools__ds namelist .............................................PASS
001 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................PASS
002 blZ94 TBLtools.sh mkdatadomain tools__ds namelist ...........................................PASS

  yong/ifort interactive testing: These PASS

001 bl853 TBLtools.sh interpinic tools__o runoptions ............................................PASS (same as non2dgrid08_clm4_0_26)

CLM tag used for the baseline comparison tests if applicable: clm4_0_28

Changes answers relative to baseline: no bit-for-bit (except interpinic)

===============================================================
===============================================================
Tag name:  clm4_0_28
Originator(s):  erik (Erik Kluzek)
Date: Tue May  3 09:14:24 MDT 2011
One-line Summary: Remove DUST/PROGSSLT in land coupler layer, update driver and scripts

Purpose of changes:

Update drv to branch version, fix ram1/fv issue (remove DUST/PROGSSLT #ifdef's in
lnd_comp_*). Answers will then be identical to clm4_0_26 (except air density sent to
cpl). Don't allow both -irrig and -crop to be on at same time in scripts.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1328 (interpinic gives bad results that can NOT be used!)
                                 1335 (transient_CN sometimes different than clm4_0_26)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): drv, scripts
     scripts to scripts4_110428a
     drv     to branch version: t3148b_tags/t3148b02_drvseq3_1_48

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M models/lnd/clm/bld/build-namelist - Don't allow crop and irrig on at same time

   M models/lnd/clm/tools/interpinic/interpinic.F90 -------- Move input read up
   M models/lnd/clm/tools/interpinic/interpinic.runoptions - Use latest input file

   M models/lnd/clm/test/system/tests_pretag_bluefire -- Remove some tests
   M models/lnd/clm/test/system/README.testnames ------- Don't mix crop and irrig
   M models/lnd/clm/test/system/input_tests_master ----- Change irrig+crop tests to
          just crop


>>>>>>>>>> Remove DUST, PROGSSLT and VOC #ifdef's
   M models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
   M models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90

Summary of testing:

  bluefire: All PASS except...
024 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
025 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
026 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
027 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
049 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
050 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
051 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
052 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
058 sm8Z3 TSMrst_tools.sh 21p_cncrpsc_do interpinic clm_irrig^nl_crop 20000101:1800 1.9x2.5 gx1v6 10FAIL! rc= 4
  bluefire/CESM testing: All PASS except... (compare to clm4_0_26 with updated datm)
SFAIL ERS_D.T31_g37.IGRCP26CN.bluefire.GC.160557 
SFAIL ERP.T31_g37.IGRCP60CN.bluefire.GC.160557 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_26_datmdens 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_26_datmdens

CLM tag used for the baseline comparison tests if applicable: clm4_0_27

Changes answers relative to baseline: No bit-for-bit
    Although coupler log file will show changes in fv and ram1 to clm4_0_27, but
    will be identical to clm4_0_26 (although then dens in atm changes)

===============================================================
===============================================================
Tag name:  clm4_0_27
Originator(s):  erik (Erik Kluzek)
Date: Mon May  2 09:37:57 MDT 2011
One-line Summary: Move crop branch over to trunk

Purpose of changes:

Move crop branch to trunk. Add crop and noio options to configure. maxpft option to
configure can now only be a number (removing numpft+1 option to it). Add datasets for
crop. Add T31 historical and rcp2.6 transient dynpft datasets. Remove some of the CPP
tokens (DUST, PROGSSLT, etc.) Bring Marian Vertensteins version of interpinic over to the
trunk as well. This version is faster and is able to run for higher resolution cases.
Remove scaled_harvest and carbon_only namelist options and add suplnitro option
(supplemental Nitrogen which can be: NONE, PROG_CROP_ONLY, or ALL). Add number parameters
for the different nsrest settings, and have only one copy of is_restart in
clm_time_manager. Update to ESMF interface from Tony.

Bugs fixed (include bugzilla ID):
                                 1323 (Remove some unused items)
                                 1319 (interpinic doesn't interpolate *_PERIOD)
                                 1318 (interpinic has trouble with new restart files)
                                 1303 (remove complexity of no-urban in interpinic)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                  901 (remove some CPP tokens)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1325 (GDDHARV on hist causes model to die in debug)
                                 1328 (interpinic gives bad results that can NOT be used!)
                                 1335 (transient_CN sometimes different than clm4_0_26)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: Yes

   Add -crop and -noio options to configure, remove -dust and -progsslt options
   Remove "numpft+1" option to -maxpft. maxpft can go up to 17 without crop and
   needs to be 21 for crop.

  -crop adds the CROP #ifdef. Removes the DUST, PROGSSLT, CLAMP CPP tokens.
  Also remove: DISTURB, COUP_WRF, NO_DAYLEN_VCMAX, TCX_REMOVE_SEE_NOTES_ABOVE, and
  L2R_Decomp, and some testing/debug CPP defines

Describe any changes made to the namelist: Yes

   Remove Carbon_only and scaled_harvest options 
   Add suplnitro option which can be set to: NONE, PROG_CROP_ONLY, or ALL

   Add new history output variables:

        A5TMIN   5-day running mean of min 2-m temperature                         (K)
        A10TMIN  10-day running mean of min 2-m temperature                        (K)
        GDD0     Growing degree days base  0C from planting                        (ddays)
        GDD8     Growing degree days base  8C from planting                        (ddays)
        GDD10    Growing degree days base 10C from planting                        (ddays)
        GDD020   Twenty year average of growing degree days base  0C from planting (ddays)
        GDD820   Twenty year average of growing degree days base  8C from planting (ddays)
        GDD1020  Twenty year average of growing degree days base 10C from planting (ddays)
        GDDPLANT Accumulated growing degree days past planting date for crop       (ddays)
        GDDHARV  Growing degree days (gdd) needed to harvest                       (ddays)
        GDDTSOI  Growing degree-days from planting (top two soil layers)           (ddays)

List any changes to the defaults for the boundary datasets:
   New point mode for crop: 1x1_numaIA and 1x1_smallvilleIA
   pftcon: pft-physiology.c110425.nc
   surface datasets for crop mode for: f19, f10, 1x1_numaIA, and 1x1_smallvilleIA
   (also crop datasets with crop AND irrigation on)
   finidat file for crop for f19
   New T31 pftdyn file for historical and rcp2.6
   Raw veg and lai datasets for mksurfdata for crop

Describe any substantial timing or memory changes: Crop adds some additional variables
    and if checks that may make small differences in run-time and/or memory

Code reviewed by: self, slevis

List any svn externals directories updated (csm_share, mct, etc.): Almost all

    scripts to scripts4_110421
    share   to share3_110411
    drv     to drvseq3_1_53
    datm    to datm8_110419
    stubs   to stubs1_2_04

List all files eliminated:

>>>>>>>>>>>>>>> Remove test configs that explicitly have dust
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_dh
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_dm
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_do
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_ds
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_h
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_m
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_o
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_dh
    D  models/lnd/clm/test/system/config_files/4p_vodsnrsc_ds
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_dm
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_do
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_h
    D  models/lnd/clm/test/system/config_files/17p_vodsrsc_ds
    D  models/lnd/clm/test/system/config_files/4p_vodsrsc_o

>>>>>>>>>>>>>>> Remove test for scaled_harvest namelist item
    D  models/lnd/clm/test/system/nl_files/nl_noicertm_sclharv

>>>>>>>>>>>>>>> Remove sample namelists and always use mksurfdata.pl script
    D  models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig
    D  models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn

>>>>>>>>>>>>>>> Remove these two from changes that mvertens applied
    D  models/lnd/clm/tools/interpinic/addglobal.F90
    D  models/lnd/clm/tools/interpinic/wrap_nf.F90

>>>>>>>>>>>>>>> Update sample IC file 
    D  models/lnd/clm/tools/interpinic/clmi.IQ.1953-01-01_10x15_USGS_simyr2000_c081202.nc

List all files added and what they do:

>>>>>>>>>>>>>>> Add crop test configs
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_do
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_s
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_ds
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dh
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_dm
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_do
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_ds
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_h
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_m
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_o
    A  models/lnd/clm/test/system/config_files/21p_cndvcrpsc_s
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_h
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_dh
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_m
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_o
    A  models/lnd/clm/test/system/config_files/21p_cncrpsc_dm
>>>>>>>>>>>>>>> Add test configs without dust
    A  models/lnd/clm/test/system/config_files/4p_vorsc_dm
    A  models/lnd/clm/test/system/config_files/4p_vorsc_do
    A  models/lnd/clm/test/system/config_files/4p_vorsc_ds
    A  models/lnd/clm/test/system/config_files/17p_vorsc_h
    A  models/lnd/clm/test/system/config_files/17p_vorsc_m
    A  models/lnd/clm/test/system/config_files/17p_vorsc_o
    A  models/lnd/clm/test/system/config_files/4p_vorsc_h
    A  models/lnd/clm/test/system/config_files/4p_vorsc_o
    A  models/lnd/clm/test/system/config_files/17p_vorsc_dm
    A  models/lnd/clm/test/system/config_files/17p_vorsc_dh
    A  models/lnd/clm/test/system/config_files/17p_vorsc_do
    A  models/lnd/clm/test/system/config_files/17p_vorsc_ds
    A  models/lnd/clm/test/system/config_files/4p_vorsc_dh

>>>>>>>>>>>>>>> Add crop restart variables
    A  models/lnd/clm/src/biogeochem/CropRestMod.F90

>>>>>>>>>>>>>>> Add namelist for crop, and mksurfdata to create crop single point
    A  models/lnd/clm/test/system/nl_files/nl_crop
    A  models/lnd/clm/test/system/nl_files/nl_cn_conly
    A  models/lnd/clm/test/system/nl_files/clm_stdIgnYr
    A  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_numaIA_mp20irrcr_2000

    A  models/lnd/clm/test/system/TSMrst_tools.sh - Add test to use finidat files
            run interpinic on it and then make sure you can startup from the result

>>>>>>>>>>>>>>> Explicitly add csm_share files into interpinic build
    A  models/lnd/clm/tools/interpinic/Mkdepends
    A  models/lnd/clm/tools/interpinic/shr_sys_mod.F90
    A  models/lnd/clm/tools/interpinic/shr_log_mod.F90
    A  models/lnd/clm/tools/interpinic/shr_kind_mod.F90
    A  models/lnd/clm/tools/interpinic/shr_const_mod.F90

>>>>>>>>>>>>>>> Add the latest 10x15 initial conditions file to test on
    A  models/lnd/clm/tools/interpinic/clmi.BCN.1949-01-01_10x15_USGS_simyr1850_c100322.nc

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>> Set maxpft to number
    M  models/lnd/clm/test/system/config_files/README
    M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_m
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_o
    M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
    M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_s
    M  models/lnd/clm/test/system/config_files/_nrmexsc_ds
    M  models/lnd/clm/test/system/config_files/17p_cnsc_dh
    M  models/lnd/clm/test/system/config_files/17p_cnsc_m
    M  models/lnd/clm/test/system/config_files/17p_cnsc_dm
    M  models/lnd/clm/test/system/config_files/_nrvansc_ds
    M  models/lnd/clm/test/system/config_files/17p_cnsc_do
    M  models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
    M  models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
    M  models/lnd/clm/test/system/config_files/17p_cnc13sc_do
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_dh
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_dm
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_do
    M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
    M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
    M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
    M  models/lnd/clm/test/system/config_files/4p_vonrsc_ds
    M  models/lnd/clm/test/system/config_files/17p_cndvsc_h

>>>>>>>>>>>>>>> Remove some tests add new crop tests
    M  models/lnd/clm/test/system/README.testnames ----------------
    M  models/lnd/clm/test/system/tests_posttag_lynx_nompi --------
    M  models/lnd/clm/test/system/tests_pretag_bluefire -----------
    M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi -----
    M  models/lnd/clm/test/system/tests_pretag_edinburgh ----------
    M  models/lnd/clm/test/system/tests_pretag_edinburgh_nompi ----
    M  models/lnd/clm/test/system/tests_posttag_yong --------------
    M  models/lnd/clm/test/system/tests_pretag_jaguarpf -----------
    M  models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi -----
    M  models/lnd/clm/test/system/tests_posttag_mirage ------------
    M  models/lnd/clm/test/system/tests_posttag_purempi_regression
    M  models/lnd/clm/test/system/tests_posttag_hybrid_regression -
    M  models/lnd/clm/test/system/tests_posttag_nompi_regression --

    M  models/lnd/clm/test/system/TCBtools.sh ------- Add TOOL_ROOT
    M  models/lnd/clm/test/system/test_driver.sh ---- Use path to glade, update path
    M  models/lnd/clm/test/system/mknamelist -------- Add ability to set finidat file on
         startup
    M  models/lnd/clm/test/system/input_tests_master  Change out vodsrsc for vorsc,
         add crop tests, add interpinic restart tests
    M  models/lnd/clm/test/system/tests_posttag_lynx  Add sm9T4 test
    M  models/lnd/clm/test/system/CLM_runcmnd.sh ---- Remove -d

    M  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850  Change from 1850-2000
          to just 1850
    M  models/lnd/clm/test/system/nl_files/clm_irrig -------------- Use ignore_ic_year
          instead of ignore_ic_date

>>>>>>>>>>>>>>> Add ability to add crop in, add -crop to mksurfdata.pl which sets the
>>>>>>>>>>>>>>> numpft=20 namelist item
    M  models/lnd/clm/tools/mksurfdata/mkvarpar.F90 - Add numstdpft
    M  models/lnd/clm/tools/mksurfdata/mkvarctl.F90 - Add numpft
    M  models/lnd/clm/tools/mksurfdata/ncdio.F90 ---- Add nf_get_att_double/nf_get_var_text
    M  models/lnd/clm/tools/mksurfdata/mklaiMod.F90 - Use numpft
    M  models/lnd/clm/tools/mksurfdata/mkfileMod.F90  Add mksrf_flai/mksrf_firrig to file
    M  models/lnd/clm/tools/mksurfdata/areaMod.F90 -- Put numpft in mkvarctl
    M  models/lnd/clm/tools/mksurfdata/mksrfdat.F90 - Add numpft to namelist
    M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl  Handle crop and irrig and change 
         names accordingly
    M  models/lnd/clm/tools/mksurfdata/mkpftMod.F90 - Add numpft and add to namelist
         if numpft = 20 add crop in

>>>>>>>>>>>>>>> Bring in interpinic version from Mariana Vertenstein
>>>>>>>>>>>>>>> Make faster and use less memory, update NetCDF interface, make
>>>>>>>>>>>>>>> standalone so not dependant on other directories
    M  models/lnd/clm/tools/interpinic/interpinic.F90 - Make faster by saving indices,
         use less memory, update to F90 NetCDF interface, make standalone
    M  models/lnd/clm/tools/interpinic/fmain.F90 ------ Add -a option to NOT override missing
    M  models/lnd/clm/tools/interpinic/Srcfiles ------- Remove mpi files
    M  models/lnd/clm/tools/interpinic/Filepath ------- Make standalone
    M  models/lnd/clm/tools/interpinic/Makefile ------- Use local MkDepends, compare
           to null, change interface for testing a bit
    M  models/lnd/clm/tools/interpinic/README --------- Add note about SMP, update clmi file
    M  models/lnd/clm/tools/interpinic/interpinic.runoptions Use new file

>>>>>>>>>>>>>>> Add numpft
    M  models/lnd/clm/tools/mkgriddata/mkvarctl.F90

>>>>>>>>>>>>>>> Add crop/noio remove dust and progsslt and CLAMP setting
    M  models/lnd/clm/bld/configure ------------- Add -crop/-noio remove -dust/-progsslt
          turn RTM off for sitespf_pt, error check crop, maxpft, remove CLAMP setting
    M  models/lnd/clm/bld/listDefaultNamelist.pl  Add loop for crop
    M  models/lnd/clm/bld/build-namelist -------- Sense crop=on/off, add suplnitro remove
          Carbon_only
    M  models/lnd/clm/bld/clm.cpl7.template ----- Change order of $CLM_CONFIG_OPTS
          so will be done last and override other settings
    M  models/lnd/clm/bld/config_files/config_definition.xml Add crop/noio, remove dust/progsslt
          have maxpft only allow numbers up to 21

>>>>>>>>>>>>>>>  New files for crop, remove old namelist items add new, add crop datasets
    M  models/lnd/clm/bld/namelist_files/namelist_definition.xml --------- Remove
        Carbon_only add suplnitro, remove scaled_harvest, correct spellings
        1x1_numaIA,1x1_smallvilleIA resolutions
    M  models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml --- Add
        1x1_numaIA,1x1_smallvilleIA
    M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ------ Add
        1x1_numaIA,1x1_smallvilleIA
    M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------- Add
       settings for suplnitro, new fpftcon, finidat for crop f19, add crop parameters
       files for crop for f19,f10,1x1_numaIA,1x1_smallvilleIA, fix T31 files
       turn create_crop_landunit on for crop
    M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Add
       mksrf_flai/mksrf_fvegtyp for crop add crop=on/off for those files

>>>>>>>>>>>>>>> Use nsrest parameters, use secspday/days_per_year, handle prognostic crop
>>>>>>>>>>>>>>> Remove CLAMP/is_restart/DUST/DISTURB/CLAMP
>>>>>>>>>>>>>>> if soil also check if crop, use vegetation indices, add initialization
>>>>>>>>>>>>>>> subroutines, pass crop filters down, suplementatal Nitrogen can be for
>>>>>>>>>>>>>>> nothing, just for crop, or for all.
    M  models/lnd/clm/src/biogeochem/CASAPhenologyMod.F90 ----- Use nsrest parameters, secspday
    M  models/lnd/clm/src/biogeochem/CNGapMortalityMod.F90 ---- Use secspday
    M  models/lnd/clm/src/biogeochem/CNGRespMod.F90 ----------- Handle crop
    M  models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 --- Handle crop
    M  models/lnd/clm/src/biogeochem/CNFireMod.F90 ------------ Use secspday/days_per_year
    M  models/lnd/clm/src/biogeochem/CNMRespMod.F90 ----------- If crop add livestem
    M  models/lnd/clm/src/biogeochem/CASAMod.F90 -------------- Remove CLAMP is_restart
          if soil or crop, nsrest parameters, use veg indices
    M  models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90  Handle crop
    M  models/lnd/clm/src/biogeochem/CNSummaryMod.F90 --------- Remove CLAMP, add crop
    M  models/lnd/clm/src/biogeochem/DUSTMod.F90 -------------- Remove DUST, if soil or crop
    M  models/lnd/clm/src/biogeochem/CNPhenologyMod.F90 ------- Add init and crop-Phenology
    M  models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 --- Add prog crop
    M  models/lnd/clm/src/biogeochem/CNDecompMod.F90 ---------- Pass crop filter down
          use secspday
    M  models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ------- Remove extra use
    M  models/lnd/clm/src/biogeochem/CNrestMod.F90 ------------ Remove is_restart
    M  models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90 ---- Add CROP #ifdef to CNDV
    M  models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90 ------- Use dayspyr and secspday
    M  models/lnd/clm/src/biogeochem/CNAllocationMod.F90 ------ Add init subroutine
          section for prognostic crop, supplemental Nitrogen can be on for nothing,
          crop only, or everything
    M  models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90 ---- Add init subroutine, 
          add crop filters
    M  models/lnd/clm/src/biogeochem/CNSetValueMod.F90 -------- Set crop vars remove CLAMP
    M  models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 - Add if section for crop
    M  models/lnd/clm/src/biogeochem/CNDVEstablishmentMod.F90 - Remove DISTURB

>>>>>>>>>>>>>>> Use nsrest parameters, update ESMF interface
    M  models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90 --- Use nsrest parameters
    M  models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90 - Update interface from Tony Craig
          Use nsrest parameters, use phase as a keyword.
    M  models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90 -- Update interface from Tony Craig
          compare success to ESMF_SUCCESS rather than 0.

>>>>>>>>>>>>>>>  Add istcrop and if statements for istsoil also test for istcrop
>>>>>>>>>>>>>>>  Remove CLAMP/DUST/PROGSSLT/debug ifdef/vcmx25/dw_fcel/dw_flig
>>>>>>>>>>>>>>>  /scaled_harv/ bad hist indices. Set if prog_crop in surfrdMod
>>>>>>>>>>>>>>>  Use secspday and days_per_year, more vars on pft-physiology file
>>>>>>>>>>>>>>>  Add parameters for nsrest settings, new hist vars, error check CROP
    M  models/lnd/clm/src/main/clm_varcon.F90 -------- Add istcrop
    M  models/lnd/clm/src/main/clm_varpar.F90 -------- Add numveg and mxpft
    M  models/lnd/clm/src/main/CNiniTimeVar.F90 ------ Remove CLAMP, if soil or crop
          also set some crop vars
    M  models/lnd/clm/src/main/dynlandMod.F90 -------- If soil or crop
    M  models/lnd/clm/src/main/accumulMod.F90 -------- Remove is_restart, add missing to _PERIOD
    M  models/lnd/clm/src/main/clm_initializeMod.F90 - Remove CLAMP/DUST, use nsrest parameters
          add call to CNEcosystemDynInit
    M  models/lnd/clm/src/main/subgridRestMod.F90 ---- Remove incorrect grid indices (bug 1310)
    M  models/lnd/clm/src/main/accFldsMod.F90 -------- Add GDD0/8/10/PLANT/HARV/TSOI/TDM5/10
    M  models/lnd/clm/src/main/clmtypeInitMod.F90 ---- Remove CLAMP
          CROP & C13 is not valid, add crop vars, remove vcmx25/dw_fcel/dw_flig
    M  models/lnd/clm/src/main/ndepStreamMod.F90 ----- Use secspday in place of 86400
    M  models/lnd/clm/src/main/pftdynMod.F90 --------- Use days_per_year in place of 365
          move pconv/pprod10/pprod100 to pft-physiology file, if soil or crop
          use nsrest parameters, remove scaled_harvest
    M  models/lnd/clm/src/main/iniTimeConst.F90 ------ Add graincn, remove: vcmx25/dw_fcel/dw_flig
    M  models/lnd/clm/src/main/histFileMod.F90 ------- Use secspday in place of 86400
          fix Conventions, use nsrest parameters, comment out indices (bug 1310)
    M  models/lnd/clm/src/main/clm_atmlnd.F90 -------- Remove DUST/PROGSSLT/1==1
    M  models/lnd/clm/src/main/restFileMod.F90 ------- Use nsrest parameters, add CropRest
          fix Conventions
    M  models/lnd/clm/src/main/controlMod.F90 -------- Remove scaled_harvest/Carbon_only
          use nsrest parameters, add suplnitro
    M  models/lnd/clm/src/main/initSurfAlbMod.F90 ---- if soil or crop, send crop filters
          to CNEcosystemDyn
    M  models/lnd/clm/src/main/clm_time_manager.F90 -- Remove COUP_WRF, add get_driver_start_ymd
    M  models/lnd/clm/src/main/filterMod.F90 --------- Add filter for prognostic-crop
          if soil or crop
    M  models/lnd/clm/src/main/clm_varctl.F90 -------- Add parameters for nsrest valid
           values: nsrStartup, nsrContinue, nsrBranch, remove scaled_harvest
           make sure crop allocates all PFT's
    M  models/lnd/clm/src/main/clm_driver.F90 -------- Remove DUST send crop filters
           to CNEcosystemDyn
    M  models/lnd/clm/src/main/initGridCellsMod.F90 -- If crop send istcrop to set_landunit_crop_noncompete
    M  models/lnd/clm/src/main/CASAiniTimeVarMod.F90 - Remove CLAMP
    M  models/lnd/clm/src/main/pftvarcon.F90 --------- Add crop vars, corn,
            temperate sping/winter cereal, and soybean, remove vcmx25/dw_flig/dw_fcel
            add new variables for crop add npcropmin, npcropmax and error checking
    M  models/lnd/clm/src/main/ncdio_pio.F90 --------- Add logical field support
    M  models/lnd/clm/src/main/spmdMod.F90 ----------- Add MPI_LOR
    M  models/lnd/clm/src/main/surfrdMod.F90 --------- Add crop_prog as public module data
            Remove TCX_REMOVE_SEE_NOTES_ABOVE, error checking if prognostic crops avail
            and CROP not defined and vice versa
    M  models/lnd/clm/src/main/clmtype.F90 ----------- New variables for CROP, remove CLAMP
            Remove dw_fcel, dw_flig, vcmx25
    M  models/lnd/clm/src/main/histFldsMod.F90 ------- Remove CLAMP and DUST, T10 output
             for CNDV or CROP, add A5TMIN, A10TMIN, GDD0, GDD8, GDD10, GDD020, GDD820,
             GDD1020, GDDPLANT, GDDTSOI and GDDHARV for crop (as inactive)
             
    M  models/lnd/clm/src/main/mkarbinitMod.F90 ------ If soil or crop

    M  models/lnd/clm/src/riverroute/RtmMod.F90 - Remove L2R_Decomp #ifdef, and #if (1 ==
          Remove is_restart and use clm_time_manager version.
0)

>>>>>>>>>>>>>>> Change if statements on "if soil" to "if soil or crop"
>>>>>>>>>>>>>>> Remove DUST, NO_DAYLEN_VCMAX #ifdefs, is_restart, vcmx25, avcmx, 
>>>>>>>>>>>>>>> and SNICAR stats. vcmx calc is different for crop and btran for soybean
    M  models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90 - If soil or crop
    M  models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 -- If soil or crop
    M  models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90 ---- If soil or crop
    M  models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 --- If soil or crop
    M  models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90 --- If soil or crop
    M  models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90 - Remove DUST #ifdef
    M  models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 ---- If soil or crop
    M  models/lnd/clm/src/biogeophys/Hydrology1Mod.F90 ------- If soil, urb, wet or crop
    M  models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ------- If soil or crop
    M  models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --- Remove is_restart use
          clm_time_manger version, use nsrest parameters
    M  models/lnd/clm/src/biogeophys/SNICARMod.F90 ----------- Remove commented out SNICAR stats
    M  models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 - If soil or crop
    M  models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90 ----- Remove NO_DAYLEN_VCMAX,
          and vcmx25,avcmx, vcmx calc different for crop and btran for soybean.

Summary of testing:

  bluefire: All PASS except...
008 blAZ1 TBL.sh 21p_cncrpsc_dh clm_irrig^nl_crop 20020401:3600 10x15 USGS -10 cold .............FAIL! rc= 5
015 blE91 TBL.sh 4p_vorsc_dh clm_std^nl_urb 20021230:1800 4x5 gx3v7 48 arb_ic ...................FAIL! rc= 5
020 blF92 TBL.sh 17p_vorsc_dm clm_std^nl_urb 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 5
024 blEH1 TBL.sh 4p_vorsc_dh clm_std^nl_urb 20021231:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic ......FAIL! rc= 5
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
041 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:3600 10x15 USGS@1850-2000 -10 arb_ic ..............FAIL! rc= 7
059 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
060 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
061 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
062 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
032 blF93 TBL.sh 17p_vorsc_do clm_std^nl_urb 20021230:1800 4x5 gx3v7 48 cold ....................FAIL! rc= 5
056 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
057 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
058 sm8Z3 TSMrst_tools.sh 21p_cncrpsc_do interpinic clm_irrig^nl_crop 20000101:1800 1.9x2.5 gx1v6 10FAIL! rc= 4
  bluefire/CESM testing: All PASS except... (dens, fv and ram1 change)
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_26 
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_26 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_26 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_26 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare_hist.clm4_0_26 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_26 
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_26 
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_26 
FAIL  PST.f45_g37.I1850.bluefire.compare.clm4_0_26 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_26 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare_hist.clm4_0_26 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare.clm4_0_26 
FAIL  ERI.f19_g16.IG1850.bluefire.compare.clm4_0_26 
SFAIL ERS_D.T31_g37.IGRCP26CN.bluefire.GC.231059 
SFAIL ERP.T31_g37.IGRCP60CN.bluefire.GC.231059 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_26 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_26 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_26 
FAIL  PST.f10_f10.I20TRCN.bluefire.compare.clm4_0_26 
FAIL  PET_PT.f10_f10.I20TRCN.bluefire.compare.clm4_0_26 
FAIL  SMS.f10_f10.IRCP45CN.bluefire.compare_hist.clm4_0_26 
FAIL  SMS.f10_f10.IRCP45CN.bluefire.compare.clm4_0_26 
  bluefire/PTCLM testing: All PASS up to..
US-Ha1_ICN_ad_spinup.PTCLM                PASS
  jaguarpf interactive testing: All PASS up to...
008 blAZ3 TBL.sh 21p_cncrpsc_do clm_irrig^nl_crop 20020401:3600 10x15 USGS -10 cold .............FAIL! rc= 5
011 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
012 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
013 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
014 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
035 sm8Z3 TSMrst_tools.sh 21p_cncrpsc_do interpinic clm_irrig^nl_crop 20000101:1800 1.9x2.5 gx1v6 10FAIL! rc= 4
  edinburgh/lf95 interactive testing: All PASS except...
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:1800 1x1_brazil navy -10 arb_ic ...............FAIL! rc= 7
010 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic .............FAIL! rc= 7
014 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:3600 1x1_vancouverCAN navy 331 arb_ic ...FAIL! rc= 7
018 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 158 arb_ic ..FAIL! rc= 7
026 blL74 TBL.sh _nrsc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -10 arb_ic ................FAIL! rc= 7
  mirage,storm/ifort interactive testing: All PASS except...
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 10+38 arb_ic ...........FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm4_0_26

Changes answers relative to baseline: no bit-for-bit
    with the exception that the new crop mode is NOT in previous tags

===============================================================
===============================================================
Tag name:  clm4_0_26
Originator(s):  erik (Erik Kluzek)
Date: Wed Mar 23 11:43:00 MDT 2011
One-line Summary: Update externals, driver update changes answers, drydep changes from fvitt, fix bugs

Purpose of changes:

Update externals to latest pre-cesm1_0_beta17 version. driver to beyond cesm1_0_beta16
version -- so answers change. Always update ndep_interp in clm_driver -- so restarts are
exact. Bring in Francis Vitt drydep changes. Remove bad T31 pftdyn datasets add in 
a new T31 rcp2.6 T31 dataset. Fix interpinic _var bug. Remove HIRES from bld. Change 
tools Makefile's so that you can set env variables. Change test_driver to use newer 
version of cprnc.

Bugs fixed (include bugzilla ID):
                                 1284 (Crop restart test fails)
                                 1304 (bug in interpinic *_var)
                                 1308 (tools Make doesn't allow setting env vars)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: more fields added for drydep namelist

List any changes to the defaults for the boundary datasets:
   Remove bad T31 pftdyn datasets 

Describe any substantial timing or memory changes: none

Code reviewed by: self, drydep changes from fvitt and JFL

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, cprnc

   scripts to scripts4_110314
   drv     to drvseq3_1_51
   cprnc   to cprnc_110310

List all files eliminated: None

List all files added and what they do:

   A   README_EXTERNALS -- Describes how to work with externals (similar to cam file)

List all existing files that have been modified, and describe the changes:

   M   README - Update with new 

   M   models/lnd/clm/test/system/CLM_compare.sh - Update for latest cprnc which
           doesn't have a "completed successfully line at the end"
   M   models/lnd/clm/test/system/test_driver.sh - Use newer cprnc on bluefire

>>>>>>>>>>> Change tools build so that you can set env variables for SMP/USER_FC/CC
   M   models/lnd/clm/tools/mksurfdata/Makefile -------- Compare to ,null rather than strip
   M   models/lnd/clm/tools/interpinic/Makefile -------- Compare to ,null rather than strip
   M   models/lnd/clm/tools/mkgriddata/Makefile -------- Compare to ,null rather than strip
   M   models/lnd/clm/tools/mkdatadomain/Makefile ------ Compare to ,null rather than strip

   M   models/lnd/clm/tools/interpinic/interpinic.F90 -- Make sure htop_var/fpcgrid_var
          are initialized to false each time comes into routine (bug 1304)

   M   models/lnd/clm/bld/configure -- Remove HIRES setting for stand-alone testing

   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New rcp2.6 T31
          pftdyn dataset remove rcp4.5,6,8.5 T31 pftdyn files as they only go to 2035

   M   models/lnd/clm/src/biogeochem/DryDepVelocity.F90 - Pick wesveg and index_season
           differently for special landunits, add max for rc, assume no surface
           resistance for SO2 over water, use has_rain logical (from fvitt)
   M   models/lnd/clm/src/main/clm_driver.F90 ----------- Always call ndep_interp
          even if (stream_year_first_ndep /= stream_year_last_ndep) as can change
          answers if not

Summary of testing:

  bluefire: All PASS except TBL tests and...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
063 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
064 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
065 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
  bluefire interactive testing: All PASS except TBL tests
  bluefire/CESM testing: All PASS (even the comparision tests)
  bluefire/PTCLM testing: All PASS up to...
US-Ha1_ICN_ad_spinup.PTCLM                PASS
  edinburgh/lf95 interactive testing: All PASS except...
021 brVx3 TBR.sh _mec10sc_do clm_transient_glcMEC_rcp4.5^nl_urb_br 20331231:1800 48x96 gx3v7@1850-21FAIL! rc= 10
  mirage,storm/ifort interactive testing: All PASS except TBL tests and...
016 smVx3 TSM.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 10
017 erVx3 TER.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -4+-6 aFAIL! rc= 5
018 brVx3 TBR.sh _mec10sc_do clm_transient_glcMEC_rcp4.5^nl_urb_br 20331231:1800 48x96 gx3v7@1850-21FAIL! rc= 5
024 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
025 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 10+38 arb_ic ...........FAIL! rc= 5
026 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
 yong/ifort interactive testing: All PASS except...
011 smD94 TSM.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_25

Changes answers relative to baseline: Yes! Greater than roundoff

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change:(larger than roundoff/same climate

   driver mapping changes, drydep code has changes, ndep_interp is always called
   which changes answers on some platforms/compilers (such as intel compiler).

===============================================================
===============================================================
Tag name:  clm4_0_25
Originator(s):  erik (Erik Kluzek)
Date: Tue Mar 22 10:13:08 MDT 2011
One-line Summary: Always output restart-history files add more meta-data to them, 
      fix urbanc_alpha and 2.5x3.33 datasets, Changes from Keith O on SNOWLIQ/SNOWICE

Purpose of changes:

Move history namelist information to restart history files and always output them. Add
attributes and meta-data to the restart history files. Fix urbanc_alpha test site surface
dataset. Fix datm namelist for urban cases. Use new crop pft-physiology file. Update
scripts and csm_share. Changes from Keith O on SNOWLIQ/SNOWICE so goes to zero rather
than missing value. Update 2.5x3.33 datasets. Fix dvolrdt units documentation, call
mksoifmaxInit.

Bugs fixed (include bugzilla ID):
                                 1247 (Some changes to ncd_pio in clm)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    New pft-physiology file with fields for prognostic crop
    New surface dataset for urbanc_alpha
    New grid/topo/frac/domain files for 2.5x3.33

Describe any substantial timing or memory changes: None

Code reviewed by: self, snowliq/snowice changes by oleson

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm, cism, csm_share

    scripts    to scripts4_110204
    datm       to datm8_110210
    cism       to cism1_110220
    csm_share  to share3_110201

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/test/system/input_tests_master - Change start dates of urban tests

>>>>>>>>>>>> Move mksoil*Init subroutines private to mksoilMod, and call a mksoilInit
>>>>>>>>>>>> routine from mksrfdata, making sure mksoifmaxInit is called.
   M   models/lnd/clm/tools/mksurfdata/mksoilMod.F90 - Add mksoilInit to call
              mksoitexInit/mksoicolInit and mksoifmaxInit (mksoifmaxInit was missing)
              fix mksoifmaxInit, and make mksoitex/col/fmaxInit routines private
   M   models/lnd/clm/tools/mksurfdata/mksrfdat.F90 -- Call mksoilInit, 
              remove mksoicol/texInit

>>>>>>>>>>>> Add notes about setting path to NetCDF, and other gmake options
   M   models/lnd/clm/tools/mksurfdata/README
   M   models/lnd/clm/tools/interpinic/README
   M   models/lnd/clm/tools/mkgriddata/README
   M   models/lnd/clm/tools/mkdatadomain/README

   M   models/lnd/clm/bld/queryDefaultNamelist.pl - Remove white-space from input options
   M   models/lnd/clm/bld/listDefaultNamelist.pl -- Also list datm_internal files
   M   models/lnd/clm/bld/build-namelist ---------- Add drv_final_spinup from PTCLM
              document precidence of the different env_conf.xml 

>>>>>>>>>>>> Fix 2.5x3.33 and urbanc_alpha files, change some settings for CLM1PT
>>>>>>>>>>>> or pt1_pt1 resolution, remove ndepsrc.
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml --------- Add
              taxmode and dtlimit, add 2.5x3.33 resolution
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml --- Add
              sim_year="2000" sim_year_range="constant" for pft1_pt1 datm_presaero files
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ------ Add
              1x1_numaIA and 1x1_smallvilleIA domain/preseaero files, update 2.5x3.33 domain
              make mapalgo nn for CLM1PT, set taxmode and tintalgo appropriately
              if CLM1PT is set. Add transient presaero file for 1x1_tropicAtl.
   M   models/lnd/clm/bld/namelist_files/use_cases/stdurbpt_pd.xml ------- Set
              dtime to 1800 for 1x1_urbanc_alpha
   M   models/lnd/clm/bld/namelist_files/datm-build-namelist ------------- Set
              tintalgo, mapalgo by datm_source, and set taxmode as well. Remove
              option for datm_presaero="none". Set mapalgo=nn for datm_presaero=pt1_pt1.
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------- Update
              urbanc_alpha surface dataset, 2.5x3.33 grid/topo/frac datasets
              Remove ndepsrc="stream" in ndepmapalgo settings as doesn't exist anymore.
              Use latest pft-physiology file from CROP branch (has extra data needed
              for prognostic crop)
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ------- Set
              atm_cpl_dt=1800 for urbanc_alpha, set stop_option/stop_n for
              urban sites carefully (add 1 time-step to stop_n, double for urbanc_alpha).
              Use "test" mask for urbanc_alpha
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Remove
              ndepsrc="stream"

>>>>>>>>>>>> Add meta-data to restart hist files, put history restart data on
>>>>>>>>>>>> restart hist files and off master restart files (so initial condition
>>>>>>>>>>>> files aren't cluttered with information only needed for continue runs).
>>>>>>>>>>>> Some changes to SNOWLIQ/SNOWICE, document dvolrdt units.
   M   models/lnd/clm/src/main/histFileMod.F90 - Use htape_create for restart_hist
              files, modify hist_restart_ncd so that namelist vars on one restart
              history files and they are always output, add more metadata to
              restart hist files, remove some temp arrays. Restart history files
              now always needed for continue runs, but not for other run types,
              and restart history information does not clutter the master restart
              files. The only history variables on master restart files are the
              history and restart filenames. Comments on the files make this clear.
   M   models/lnd/clm/src/main/restFileMod.F90 - Change hist_restart_ncd calls
   M   models/lnd/clm/src/main/ncdio_pio.F90 --- Add ncd_io_log_var0_nf interface
              add options for attributes: comment, flag_values, flag_meanings, and
              nvalid_range for variables., fix an issue in ncd_io_int_var0_nf
   M   models/lnd/clm/src/main/histFldsMod.F90 - Change default for SNOWLIQ/SNOWICE
              to "Average" rather than "Instant" (from oleson).
   M   models/lnd/clm/src/riverroute/RtmMod.F90 ---- Document dvolrdt conversion
   M   models/lnd/clm/src/riverroute/RunoffMod.F90 - Document dvolrdt units
              correctly.
   M   models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 - Initialize snowice/snowliq
              to zero over lake filter (from oleson).

Summary of testing:

  bluefire: All PASS except TBL tests and...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
063 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
064 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
065 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
  bluefire interactive testing: All PASS except all TBL tests fail
  bluefire/CESM testing: All PASS except...
FAIL  SMS_RLA.f45_f45.I.bluefire.generate.clm4_0_25 
FAIL  SMS_RLB.f45_f45.I.bluefire.generate.clm4_0_25 
FAIL  SMS_ROA.f45_f45.I.bluefire.generate.clm4_0_25 
FAIL  ERS_D.f45_g37.I.bluefire.generate.clm4_0_25 
BFAIL ERS_D.f45_g37.I.bluefire.compare.clm4_0_23 
FAIL  PST.f45_g37.I1850.bluefire.generate.clm4_0_25 
FAIL  PET_PT.f45_g37.I1850.bluefire.generate.clm4_0_25 
FAIL  ERS_E.f19_g16.I1850.bluefire.generate.clm4_0_25 
FAIL  ERI.f19_g16.IG1850.bluefire.generate.clm4_0_25 
FAIL  ERS_D.T31_g37.IGRCP26CN.bluefire.generate.clm4_0_25 
FAIL  ERP.T31_g37.IGRCP60CN.bluefire.generate.clm4_0_25 
BFAIL ERP.T31_g37.IGRCP60CN.bluefire.compare.clm4_0_23 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.generate.clm4_0_25 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_25 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.generate.clm4_0_25 
BFAIL ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_23 
FAIL  PST.f10_f10.I20TRCN.bluefire.generate.clm4_0_25 
FAIL  PET_PT.f10_f10.I20TRCN.bluefire.generate.clm4_0_25 
FAIL  SMS.f10_f10.IRCP45CN.bluefire.generate.clm4_0_25 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.generate.clm4_0_25 
BFAIL ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_23
  jaguarpf interactive testing:
002 erA74 TER.sh _nrsc_ds clm_std^nl_urb 20030101:1800 1x1_brazil navy -5+-5 arb_ic .............FAIL! rc= 13
003 brA74 TBR.sh _nrsc_ds clm_std^nl_urb_br 20030101:1800 1x1_brazil navy -5+-5 arb_ic ..........FAIL! rc= 11
006 erAZ3 TER.sh _sc_do clm_irrig 20020401:3600 10x15 USGS -3+-7 cold ...........................FAIL! rc= 13
007 brAZ3 TBR.sh _sc_do clm_irrig 20020401:3600 10x15 USGS -5+-5 cold ...........................FAIL! rc= 11
011 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
012 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
013 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
016 erJ74 TER.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:3600 1x1_tropicAtl test -10+-10 arb_ic ..FAIL! rc= 13
017 brJ74 TBR.sh 4p_nrcasasc_ds clm_std^nl_urb_br 10001230:3600 1x1_tropicAtl test -3+-3 arb_ic .FAIL! rc= 11
020 erK74 TER.sh 17p_cndvsc_s clm_std 19971231:1800 1x1_brazil navy -334+-336 arb_ic ............FAIL! rc= 13
021 brK74 TBR.sh 17p_cndvsc_s clm_std 19971231:1800 1x1_brazil navy -334+-336 arb_ic ............FAIL! rc= 11
024 erVx3 TER.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -4+-6 aFAIL! rc= 13
025 brVx3 TBR.sh _mec10sc_do clm_transient_glcMEC_rcp4.5^nl_urb_br 20331231:1800 48x96 gx3v7@1850-21FAIL! rc= 11
028 erHQ4 TER.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -3+-7 cold ............FAIL! rc= 13
029 brHQ4 TBR.sh _nrcnsc_ds clm_drydep 20000214:1800 1x1_brazil navy@2000 -5+-5 cold ............FAIL! rc= 11
032 erV63 TER.sh _mec10sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 10+38 arb_ic ................FAIL! rc= 13
  jaguarpf/CESM testing: All PASS including comparision tests except...
FAIL  PST.f10_f10.I20TRCN.jaguarpf 
  edinburgh/lf95 interactive testing:
002 erA74 TER.sh _nrsc_ds clm_std^nl_urb 20030101:1800 1x1_brazil navy -5+-5 arb_ic .............FAIL! rc= 13
003 brA74 TBR.sh _nrsc_ds clm_std^nl_urb_br 20030101:1800 1x1_brazil navy -5+-5 arb_ic ..........FAIL! rc= 11
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:1800 1x1_brazil navy -10 arb_ic ...............FAIL! rc= 7
006 blAL4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 7
008 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -45+-45 arb_ic .........FAIL! rc= 13
009 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:3600 1x1_camdenNJ navy -10+-10 arb_ic ......FAIL! rc= 11
010 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:3600 1x1_camdenNJ navy -90 arb_ic .............FAIL! rc= 7
012 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:3600 1x1_vancouverCAN navy 115+115 arb_ic FAIL! rc= 13
013 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:3600 1x1_vancouverCAN navy 72+72 arb_ic FAIL! rc= 11
014 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:3600 1x1_vancouverCAN navy 331 arb_ic ...FAIL! rc= 5
016 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 58+100 arb_ic FAIL! rc= 13
017 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:3600 1x1_mexicocityMEX navy 72+72 arb_ic FAIL! rc= 11
018 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:3600 1x1_mexicocityMEX navy 158 arb_ic ..FAIL! rc= 5
020 erVx3 TER.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -4+-6 aFAIL! rc= 13
021 brVx3 TBR.sh _mec10sc_do clm_transient_glcMEC_rcp4.5^nl_urb_br 20331231:1800 48x96 gx3v7@1850-21FAIL! rc= 11
022 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 7
024 erL74 TER.sh _nrsc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -5+-5 arb_ic ..............FAIL! rc= 13
025 brL74 TBR.sh _nrsc_s clm_std^nl_urb_br 20020101:1800 1x1_brazil navy -10+-10 arb_ic .........FAIL! rc= 11
026 blL74 TBL.sh _nrsc_s clm_std^nl_urb 20020101:1800 1x1_brazil navy -10 arb_ic ................FAIL! rc= 7
  edinburgh/CESM testing: All PASS including comparision tests
  yong/intel testing:
011 smD94 TSM.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 2
012 erD94 TER.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 72+72 cold ....................FAIL! rc= 5
019 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
020 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11
022 smV24 TSM.sh _mec10sc_ds clm_glcmec 19980115:1800 48x96 gx3v7 96 arb_ic .....................FAIL! rc= 10
023 erV24 TER.sh _mec10sc_ds clm_glcmec 19980115:1800 48x96 gx3v7 10+38 arb_ic ..................FAIL! rc= 5
024 brV24 TBR.sh _mec10sc_ds clm_glcmec^nl_urb_br 19980115:1800 48x96 gx3v7 72+72 arb_ic ........FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm4_0_24

Changes answers relative to baseline: answers bit-for-bit, but SNOWLIQ/SNOWICE on history
   files change.

===============================================================
===============================================================
Tag name:  clm4_0_24
Originator(s):  erik (Erik Kluzek)
Date: Wed Feb  9 13:20:39 MST 2011
One-line Summary: Fix mksurfdata and add ability to override soil_fmax

Purpose of changes:

Fix mksurfdata for urban. Add soil_fmx to mksurfdata. Add attributes to suface datasets
that tell you the special namelist settings (such as all_urban, soil_, pft_). Add -irrig
as option to mksurfdata.pl. Update datm with new datasets for urbanc_alpha. Add new frac
dataset for urbanc_alpha. Update documentation to cesm1_0_rel_09_clm4_0_14 tag. Change
test_driver from jaguar to jaguarpf. Fix bug in build-namelist creating namelist
with clm_usr_name option.

Bugs fixed (include bugzilla ID):
                                 1281 (bug in mksurfdata for urban_only case)
                                 1280 (improve modularity of mksurfdata) [partial]
                                 1276 (urbanc_alpha site does not work)  [partial]

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1283 (CLM with glacier-MEC fails running on intel)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    Update frac and domain file for urbanc_alpha site

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

 scripts, drv and csm_share to cesm1_0_beta15 versions

    scripts   to scripts4_110204
    drv       to drvseq3_1_48
    csm_share to share3_110201
    datm      to datm8_110204

List all files eliminated:

   D   models/lnd/clm/tools/mksurfdata/mkfmaxMod.F90 --- Put inside of mksoilMod.F90

   D   models/lnd/clm/test/system/tests_pretag_jaguar ------- rename to jaguarpf
   D   models/lnd/clm/test/system/tests_pretag_jaguar_nompi - rename to jaguarpf

>>>>>>>>>>>> Remove files that were no longer used 
>>>>>>>>>>>> (they are already in mksoilMod or mkpftMod)
   D   models/lnd/clm/tools/mksurfdata/mkorganic.F90
   D   models/lnd/clm/tools/mksurfdata/mkrank.F90
   D   models/lnd/clm/tools/mksurfdata/mkirrig.F90
   D   models/lnd/clm/tools/mksurfdata/mksoicolMod.F90

List all files added and what they do:

>>>>>>>>>>>> Add an irrigation and urban test for mksurfdata
   A   models/lnd/clm/test/system/nl_files/mksrfdt_10x15_irr_1850
   A   models/lnd/clm/test/system/nl_files/mksrfdt_1x1_vancouverCAN_2000

   A   models/lnd/clm/test/system/tests_pretag_jaguarpf ------- rename from jaguar
   A   models/lnd/clm/test/system/tests_pretag_jaguarpf_nompi - rename from jaguar

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Add all_urban and irrigation mksurfdata tests
>>>>>>>>>>>> Update jaguar to jaguarpf
   M   models/lnd/clm/test/system/tests_posttag_lynx_nompi
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M   models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M   models/lnd/clm/test/system/tests_posttag_yong
   M   models/lnd/clm/test/system/tests_pretag_jaguar_nompi
   M   models/lnd/clm/test/system/input_tests_master
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression
   M   models/lnd/clm/test/system/TCBtools.sh ---- Remove copy of *.h files
   M   models/lnd/clm/test/system/test_driver.sh - change jaguar to jaguarpf, update
          modules to agree with scripts
   M   models/lnd/clm/test/system/CLM_runcmnd.sh - change jaguar to jaguarpf

>>>>>>>>>>>> Add soil_fmax option and soil_fmx, soil_col and irrig option to
>>>>>>>>>>>> mksurfdata.pl. Add attributes to file for override cases.
>>>>>>>>>>>> Put mkfmax inside of mksoilMod, add mksoilAtt and mkpftAtt methods.
   M   models/lnd/clm/tools/mksurfdata/Srcfiles -------- Remove unused files
   M   models/lnd/clm/tools/mksurfdata/mksoilMod.F90 --- Move mkfmax inside here
          add mksoifmaxInit, mkfmax, and mksoilAtt interfaces, add soil_fmax as
          an override setting
   M   models/lnd/clm/tools/mksurfdata/mkpftMod.F90 ---- Fix bug in if statement 
          (needed to also ask if .not. zerod_out). Create mkpftAtt interface, move
          settings from mkfileMod.F90 to there.
   M   models/lnd/clm/tools/mksurfdata/mkfileMod.F90 --- Move soil and pft specific 
          declarations to either mksoilAtt or mkpftAt interfaces
          if all_urban is set add all_urban=TRUE attribute to file
   M   models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ---- Add soil_fmax to namelist
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.pl --- Add ability to set soil_col,
          soil_fmax and irrig on command line
          bring irrigation, setting of numpft and query of lai file from crop branch

>>>>>>>>>>>> Update urbanc_alpha domain/frac files
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml -------- Add mksrf_flai
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml -- Set
            urbanc_alpha default mask to test
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ----- urbanc_alpha
            domain file
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------ urbanc_alpha
            frac file
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml  Add in 
            mksrf_flai file

>>>>>>>>>>>> Update to cesm1_0_rel_09_clm4_0_14 documentation (includes info on new bugs)
   M   models/lnd/clm/doc/UsersGuide/single_point.xml
   M   models/lnd/clm/doc/UsersGuide/tools.xml
   M   models/lnd/clm/doc/KnownBugs

Summary of testing:

  bluefire interactive testing:
009 blHS3 TBL.sh _nrcnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic ......FAIL! rc= 5
  jaguarpf interactive testing:
011 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
012 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
013 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
014 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
026 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 5
034 blV63 TBL.sh _mec10sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ...................FAIL! rc= 7
  edinburgh/lf95 interactive testing:
022 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 5
  mirage/intel interactive testing: All PASS except...
017 erVx3 TER.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -4+-6 aFAIL! rc= 5
018 brVx3 TBR.sh _mec10sc_do clm_transient_glcMEC_rcp4.5^nl_urb_br 20331231:1800 48x96 gx3v7@1850-21FAIL! rc= 5
019 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 4
021 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 10+38 cold .........FAIL! rc= 13
022 brR53 TBR.sh 17p_cnc13sc_do clm_std^nl_urb_br 20020115:1800 10x15 USGS@1850 72+72 cold ......FAIL! rc= 11
024 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
025 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 10+38 arb_ic ...........FAIL! rc= 5
026 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
027 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
029 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
030 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11
  yong/intel interactive testing:
011 smD94 TSM.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 10
012 erD94 TER.sh _persc_ds clm_per^nl_per 20021231:1200 4x5 gx3v7 72+72 cold ....................FAIL! rc= 5
019 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
020 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11
022 smV24 TSM.sh _mec10sc_ds clm_glcmec 19980115:1800 48x96 gx3v7 96 arb_ic .....................FAIL! rc= 10
023 erV24 TER.sh _mec10sc_ds clm_glcmec 19980115:1800 48x96 gx3v7 10+38 arb_ic ..................FAIL! rc= 5
024 brV24 TBR.sh _mec10sc_ds clm_glcmec^nl_urb_br 19980115:1800 48x96 gx3v7 72+72 arb_ic ........FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm4_0_23

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_23
Originator(s):  erik (Erik Kluzek)
Date: Thu Feb  3 13:42:17 MST 2011
One-line Summary: Add in new glacier-MEC use-cases

Purpose of changes:

Add in new datasets and use-cases for glc_mec to support glc_nec=10 for 1850, 2000,
1850-2000, and 1850-2100 for all 4 rcp's. Standardize naming convention for use-cases.
Use scripts branch that has new compsets in it that access the new use-cases. Make sure
ncdpio is used for all I/O. Work with PTCLM a bit, and PTCLM testing. Change precedence
for build-namelist so that use-case is lower after user_nl_clm.

Bugs fixed (include bugzilla ID):
                                 1273 (fix pts_mode problem on jaguar)
                                 1256 (fix PTCLM testcases.csh on jaguar to use netcdf/3)
                                 1254 (PTCLM add .nc and date to pft-physiology file copy)
                                 1250 (add scratchroot in PTCLM for generic machines)
                                 1247 (some changes in ncdio_pio) [partial]
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1168 (Change precedence so user_nl_clm used over use-case)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1276 (urbanc_alpha site does not work)
                                 1279 (Latest version of PTCLM requires python2.5)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist: Change order of precedence so that
     use_case is AFTER -namelist -infile and clm_usr_name options.
     Thus values in your user_nl_clm file will be used instead of what's in
     the use_case.

     New precedence is...
       1. values set on the command-line using the -namelist option,
       2. values read from the file specified by -infile,
       3. datasets from the -clm_usr_name option,
       4. values set from a use-case scenario, e.g., -use_case
       5. values from the namelist defaults file.
List any changes to the defaults for the boundary datasets:
     New datasets for glc_nec="10"
               surfdata for 1850@(f09,f19,T31)
               pftdyn for 1850-2000@(f09,f19,T31)
               pftdyn for 1850-2100@(f09,f19,T31) rcp (2.6,4.5,6,8.5)

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm, cism

      scripts to glccsbr01_scripts4_110111
      datm    to datm8_110124
      cism    to cism1_110125

List all files eliminated:

    Rename use-cases to versions with an _pd ending or 2000_*_control form

         models/lnd/clm/bld/namelist_files/use_cases/...
    D    .../use_cases/stdurbpt.xml ----- rename to stdurbpt_pd
    D    .../use_cases/glacier_mec.xml -- rename to 2000_glacierMEC_control
    D    .../use_cases/pergro.xml ------- rename to pergro_pd
    D    .../use_cases/pergro0.xml ------ rename to pergro0_pd

List all files added and what they do:

>>>>>>>>>>>>>> Add tests for all new glacier-MEC use-cases
    A    models/lnd/clm/test/system/nl_files/clm_glcmec
    A    models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp2.6
    A    models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp4.5
    A    models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp8.5
    A    models/lnd/clm/test/system/nl_files/clm_transient_glcMEC_rcp6

    A    models/lnd/clm/test/system/nl_files/nl_per - PERGRO testing namelist

>>>>>>>>>>>>>>
         models/lnd/clm/bld/namelist_files/use_cases/...
    A    .../use_cases/pergro_pd.xml -------------- Renamed from pergro
    A    .../use_cases/2000_glacierMEC_control.xml  Copy of glacier_mec_pd
    A    .../use_cases/stdurbpt_pd.xml ------------ Renamed from stdurbpt
    A    .../use_cases/pergro0_pd.xml ------------- Renamed from pergro0
    A    .../use_cases/README --------------------- Add README file to describe
             naming convention for use_cases

>>>>>>>>>>>>>> Add new glacier_MEC use_cases
         models/lnd/clm/bld/namelist_files/use_cases/...
    A    .../use_cases/1850_glacierMEC_control.xml
    A    .../use_cases/20thC_glacierMEC_transient.xml
    A    .../use_cases/1850-2100_rcp6_glacierMEC_transient.xml
    A    .../use_cases/1850-2100_rcp2.6_glacierMEC_transient.xml
    A    .../use_cases/1850-2100_rcp4.5_glacierMEC_transient.xml
    A    .../use_cases/1850-2100_rcp8.5_glacierMEC_transient.xml
    A    .../use_cases/glacierMEC_pd.xml --- renamed from glacier_mec

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Add some new glacierMEC use-case tests
    M    models/lnd/clm/test/system/README.testnames ------------- Add n,w,x,y glcMEC resolutions
    M    models/lnd/clm/test/system/tests_posttag_lynx_nompi
    M    models/lnd/clm/test/system/tests_pretag_bluefire
    M    models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
    M    models/lnd/clm/test/system/tests_posttag_kraken
    M    models/lnd/clm/test/system/tests_posttag_yong
    M    models/lnd/clm/test/system/tests_pretag_jaguar_nompi
    M    models/lnd/clm/test/system/tests_posttag_mirage
    M    models/lnd/clm/test/system/tests_posttag_purempi_regression
    M    models/lnd/clm/test/system/tests_posttag_hybrid_regression
    M    models/lnd/clm/test/system/tests_posttag_intrepid_nompi
    M    models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>>>>> Get glcmec branch testing to work and pergro testing working with
>>>>>>>>>>>>>> build-namelist precedence change
    M    models/lnd/clm/test/system/TBR.sh ------------- Match history files 
                NOT restart-history files
    M    models/lnd/clm/test/system/nl_files/clm_per0 -- Change use-case name
    M    models/lnd/clm/test/system/nl_files/nl_urb_br - Add hist_fincl2 to remove
                any secondardy history files from use-case
    M    models/lnd/clm/test/system/nl_files/clm_per --- Change use-case name
    M    models/lnd/clm/test/system/input_tests_master - Add new tests
    M    models/lnd/clm/test/system/TSM.sh ------------- Make restart file touched
           with .nc extension, remove bit about deleting clm.i files

>>>>>>>>>>>>>> Use mksrf_glacier files from XML database, add glc_nec to mksurfdata.pl,
>>>>>>>>>>>>>> allow glc_nec=0, and don't write out glcmec fields if glc_nec=0.
    M    models/lnd/clm/tools/mksurfdata/mkfileMod.F90 --- Don't define glc_nec
               fields if nglcec == 0.
    M    models/lnd/clm/tools/mksurfdata/mkglcmecMod.F90 - Set nglcec=0 by default, 
               add ability to handle nglcec=0
    M    models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ---- Don't write out or call
               glc-mec stuff if nglcec == 0.
    M    models/lnd/clm/tools/mksurfdata/mksurfdata.pl --- Add ability to set glc_nec
               get mksrf_glacier file from XML database

>>>>>>>>>>>>>> Add in new glc_nec=10 datasets, change precedence order in
>>>>>>>>>>>>>> build-namelist so use_case is AFTER -namelist/-infile/-clm_usr_name.
>>>>>>>>>>>>>> Add mksrf_glacier files to XML database
    M    models/lnd/clm/bld/listDefaultNamelist.pl - Make faster and add settings
               for glc_nec and glc_grid, also add loop over sim_year_range
    M    models/lnd/clm/bld/build-namelist --------- Change precedence order so
               that use-cases are after namelist and infile (thus user_nl_clm files
               are used in place of the use-case. Check that the use-cases follow
               a strict naming convention (ensures will work with PTCLM.py).
               This is the new order of precedence
+      1. values set on the command-line using the -namelist option,
+      2. values read from the file specified by -infile,
+      3. datasets from the -clm_usr_name option,
+      4. values set from a use-case scenario, e.g., -use_case
+      5. values from the namelist defaults file.

    M    models/lnd/clm/bld/namelist_files/namelist_definition.xml --------- Add
               mksrf_glacier file for mksurfdata.pl to XML database
    M    models/lnd/clm/bld/namelist_files/datm-build-namelist ------------- Change
               order of precedence so that use_case is after infile and namelist
    M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------- New glc datasets
               surfdata for 1850@(f09,f19,T31)
               pftdyn for 1850-2000@(f09,f19,T31)
               pftdyn for 1850-2100@(f09,f19,T31) rcp (2.6,4.5,6,8.5)
    M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Add
               mksrf_glacier datasets for glc_nec=0 (previous version), glc_nec=3,5,10 
               use older glacier dataset that Bill Lipscomb says has better glacier
               representation over greenland
>>>>>>>>>>>>>> Remove direct calls to pio -- use ncdio_pio module for all NetCDF
>>>>>>>>>>>>>> read/write/define/query. Write out at initialization if there is no
>>>>>>>>>>>>>> land and won't be running CLM.
    M    models/lnd/clm/src/main/clm_initializeMod.F90 - Set subname and write out
               if no land exists and clm will NOT be run
    M    models/lnd/clm/src/main/iniTimeConst.F90 ------ Use ncd_io to read in mxsoil_color
               (remove direct calls to pio)
    M    models/lnd/clm/src/main/histFileMod.F90 ------- Use ncd_io to read/write
               everything (remove direct calls to pio). Add max_nFields function.
    M    models/lnd/clm/src/main/restFileMod.F90 ------- Change use of PIO_GLOBAL
               to NCD_GLOBAL
    M    models/lnd/clm/src/main/ncdio_pio.F90 --------- Remove making pio interfaces
               public, add new interfaces to ncd_io global, add dimexist as optional
               argument to ncd_inqdid, and name as optional argument to ncd_inqdlen
               change ncd_io interfaces that could NOT need to call scam_field_offsets
               so that they don't. Initialize data_offset and pfts to bigint NOT nan.
         New interfaces:
+     module procedure ncd_io_char_var1_nf
+     module procedure ncd_io_char_var3_nf
+     module procedure ncd_io_char_varn_strt_nf
    M    models/lnd/clm/src/main/surfrdMod.F90 --------- Use ncd_inqdid and ncd_inqvid
              instead of pio interfaces directly.

Summary of testing:

  bluefire: All PASS except...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
057 blV61 TBL.sh _mec10sc_dh clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ...................FAIL! rc= 7
061 blVn1 TBL.sh _mec10sc_dh clm_transient_glcMEC_rcp8.5 20331231:1800 1.9x2.5 gx1v6@1850-2100 48 arFAIL! rc= 5
063 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
064 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
065 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
066 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4

glcmec TBL tests fail since they didn't exist in previous version

  bluefire interactive testing:
006 smHS3 TSM.sh _nrcnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic ......FAIL! rc= 8
007 erHS3 TER.sh _nrcnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -3+-3 arb_ic ...FAIL! rc= 5
008 brHS3 TBR.sh _nrcnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -3+-3 arb_ic ...FAIL! rc= 5
009 blHS3 TBL.sh _nrcnsc_do clm_usrdat 20030101:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic ......FAIL! rc= 4
044 blV63 TBL.sh _mec10sc_do clm_glcmec 19980115:1800 1.9x2.5 gx1v6 48 arb_ic ...................FAIL! rc= 7
060 sm974 TSMscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds ....FAIL! rc= 6
  bluefire/CESM testing: All PASS except... (new compare tests fail since didn't exist before)
BFAIL ERI.f19_g16.IG1850.bluefire.compare.clm4_0_22 
BFAIL ERS_D.T31_g37.IGRCP26CN.bluefire.compare.clm4_0_22 
BFAIL PST.f10_f10.I20TRCN.bluefire.compare.clm4_0_22 
BFAIL PET_PT.f10_f10.I20TRCN.bluefire.compare.clm4_0_22 
BFAIL SMS.f10_f10.IRCP45CN.bluefire.compare.clm4_0_22 

PEND  ERS_D.f45_g37.I.bluefire.GC.003008 
PEND  ERP.T31_g37.IGRCP60CN.bluefire.GC.003008 
PEND  ERH_D.f10_f10.I1850CN.bluefire.GC.003008 
PEND  ERS_D.f19_g16.IRCP85CN.bluefire.GC.003008 

  bluefire/CESM Extra testing: 
PASS  ERI.f19_g16.IG1850.bluefire 
PASS  ERI.f19_g16.IG1850CN.bluefire 
PASS  ERS.T31_g37.IGRCP45CN.bluefire 
PASS  ERS.T31_g37.IGRCP85CN.bluefire 

PASS  ERS_D.T31_g37.IG.bluefire 
PASS  ERS_D.f19_g16.IGCN.bluefire 

  bluefire/CESM Extra testing for coupled with CAM and CAM/POP: 
PASS  ERI.f19_g16.BGCN.bluefire 
PASS  SMS_D.f19_g16.BG1850CN.bluefire 
PASS  ERP.f09_g16.BG20TRCN.bluefire 
PASS  ERS.T31_g37.BGRCP26CN.bluefire 
RUN   ERS_D.T31_g37.BGRCP45CN.bluefire.111336  --- takes too long
PASS  ERS.T31_g37.BGRCP60CN.bluefire 
RUN   ERS_D.T31_g37.BGRCP85CN.bluefire.111336  --- takes too long
FAIL  SMS.f19_f19.EGCN.bluefire  ----------------- seg-fault
FAIL  SMS.T31_T31.EG1850CN.bluefire  ------------- seg-fault
PASS  ERI.f09_f09.FGCN.bluefire 
PASS  SMS.f19_f19.FG1850CN.bluefire 
PASS  SMS.T31_T31.FG20TRCN.bluefire 
FAIL  SMS.T31_g37.TG.bluefire

  bluefire/PTCLM testing:
PTCLM.631306_1x1_mexicocityMEX_ICN.PTCLM          PASS
PTCLM.631306_1x1_mexicocityMEX_I.PTCLM    PASS
PTCLM.631306_1x1_mexicocityMEX_I_QIAN.PTCLM       PASS
PTCLM.631306_US-Ha1_I_1850.PTCLM          PASS
PTCLM.631306_US-Ha1_I20TR.PTCLM   PASS
PTCLM.631306_US-Ha1_I20TRCN.PTCLM         PASS
PTCLM.631306_US-Ha1_ICN.PTCLM     PASS
PTCLM.631306_US-Ha1_I1850CN.PTCLM         PASS
PTCLM.631306_US-Ha1_IRCP85CN.PTCLM        PASS
PTCLM.631306_US-Ha1_I.PTCLM       PASS
PTCLM.631306_US-Ha1_I_QIAN.PTCLM          PASS
PTCLM.631306_US-Ha1_I.PTCLM       PASS
PTCLM.631306_US-UMB_I.PTCLM       PASS
PTCLM.631306_US-UMB_I_QIAN.PTCLM          PASS
PTCLM.631306_US-UMB_I.PTCLM       PASS
US-Ha1_ICN_ad_spinup.PTCLM                PASS
  jaguar interactive testing: All PASS except...
011 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
012 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
013 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
014 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
026 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 5
  jaguar/PTCLM testing:
PTCLM.4224_1x1_mexicocityMEX_ICN.PTCLM	  PASS
PTCLM.4224_1x1_mexicocityMEX_I.PTCLM    PASS
PTCLM.4224_1x1_mexicocityMEX_I_QIAN.PTCLM   PASS
PTCLM.4224_US-Ha1_I_1850.PTCLM	  FAIL 0
PTCLM.4224_US-Ha1_I20TR.PTCLM   FAIL 0
PTCLM.4224_US-Ha1_I20TRCN.PTCLM	  FAIL 0
PTCLM.4224_US-Ha1_ICN.PTCLM   FAIL 0
PTCLM.4224_US-Ha1_I1850CN.PTCLM	  FAIL 0
PTCLM.4224_US-Ha1_IRCP85CN.PTCLM    FAIL 0
PTCLM.4224_US-Ha1_I.PTCLM   FAIL 0
PTCLM.4224_US-Ha1_I_QIAN.PTCLM	  FAIL 0
PTCLM.4224_US-Ha1_I.PTCLM   FAIL 0
PTCLM.4224_US-UMB_I.PTCLM   FAIL 0
PTCLM.4224_US-UMB_I_QIAN.PTCLM	  FAIL 0
PTCLM.4224_US-UMB_I.PTCLM   FAIL 0
US-Ha1_ICN_ad_spinup.PTCLM      PASS
  edinburgh/lf95 interactive testing: All PASS up to...
022 blVx3 TBL.sh _mec10sc_do clm_transient_glcMEC_rcp4.5 20331231:1800 48x96 gx3v7@1850-2100 -10 arbFAIL! rc= 5
  edinburgh/PTCLM testing: Fails because Python is too OLD (2.4 when needs 2.5)
  yong/intel/PTCLM testing: Following PASS...
PTCLM.4900_1x1_mexicocityMEX_ICN.PTCLM	  PASS
PTCLM.4900_1x1_mexicocityMEX_I.PTCLM    PASS
PTCLM.4900_1x1_mexicocityMEX_I_QIAN.PTCLM   PASS
PTCLM.4900_US-Ha1_I_1850.PTCLM	  PASS
PTCLM.4900_US-Ha1_I20TR.PTCLM   PASS
PTCLM.4900_US-Ha1_I20TRCN.PTCLM	  PASS
PTCLM.4900_US-Ha1_ICN.PTCLM   PASS

CLM tag used for the baseline comparison tests if applicable: clm4_0_22

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_22
Originator(s):  erik (Erik Kluzek)
Date: Thu Jan 20 13:17:56 MST 2011
One-line Summary: Move coupler field indicies to clm, move cpl_* directories up a level, add the cpl_share directory

Purpose of changes:

Move cpl_* directories up a level, add cpl_shr directory. Update driver, move coupler
field indicies to clm, and allow fields to be passed in driver with just names added to
namelist. Make is_restart() public in clm_time_manager.F90. Fix PTS_MODE. Don't pass
Sl_landfrac to driver in run-phase.

Bugs fixed (include bugzilla ID):
                                 1271 (Problem in PTS_MODE with clm)
                                 1270 (Make is_restart public in clm_time_manager.F90)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1273 (fix pts_mode problem on jaguar)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1110 (dtlimit error in datm8 with partial year forcing)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: Change Filepath

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, mvertens (most code changes originate from mvertens)
   I made some tweaks after the review and added protex header documentation to the 
   new clm_cpl_indices file.

List any svn externals directories updated (csm_share, mct, etc.): datm, cism
    datm to datm8_110118
    cism to cism1_100913

List all files eliminated:

>>>>>>>>> Move to directories up a level
   D   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90
   D   models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90
   D   models/lnd/clm/src/main/cpl_esmf/lnd_comp_mct.F90

List all files added and what they do:

>>>>>>>>> Use this local version of indices rather than seq_indices_mod.F90
   A   models/lnd/clm/src/cpl_share/clm_cpl_indices.F90

>>>>>>>>> Move to directories up a level, use local version of indices rather
>>>>>>>>> than seq_* version and remove sending landfrac at run phase.
   A   models/lnd/clm/src/cpl_mct/lnd_comp_mct.F90
   A   models/lnd/clm/src/cpl_esmf/lnd_comp_esmf.F90
   A   models/lnd/clm/src/cpl_esmf/lnd_comp_mct.F90

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/doc/README -- Update directory info.

>>>>>>>>> Change pts_mode test so that RTM is not turned on.
   M   models/lnd/clm/test/system/input_tests_master

>>>>>>>>> Change Filepath
   M   models/lnd/clm/bld/configure

>>>>>>>>> Make is_restart() method public
   M   models/lnd/clm/src/main/clm_time_manager.F90

>>>>>>>>> Fix PTS_MODE.
   M   models/lnd/clm/src/main/pftvarcon.F90 ------- Pass posNOTonfile=.true. down
          to ncd_io methods so won't check for lat/lon
   M   models/lnd/clm/src/main/ncdio_pio.F90 ------- Add posNOTonfile option to global
          reads so that if set, won't try to find nearest lat/lon to PTS_MODE point
          (for files that are global data NOT spatial).
   M   models/lnd/clm/src/biogeophys/SNICARMod.F90 - Pass posNOTonfile=.true. down
          to ncd_io methods so won't check for lat/lon

Summary of testing:

  bluefire: All PASS except...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
059 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
060 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
061 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
062 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
>>>>>>>> Test was changed to remove RTM
025 blAK4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 1.9x2.5 gx1v6 -10 cold ...............FAIL! rc= 5
  bluefire/CESM testing: All PASS except...
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_20 
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_20 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_20 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_20 
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_20 
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_20 
FAIL  PST.f45_g37.I1850.bluefire.compare.clm4_0_20 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_20 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare.clm4_0_20 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare_hist.clm4_0_20 
FAIL  ERI.f19_g16.IG.bluefire.compare.clm4_0_20 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_20 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_20 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_20 
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm4_0_20 
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_20 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_20 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_20 
>>>>>>>> Compare tests fail because Sl_landfrac is missing on new case
>>>>>>>> Everything else is identical
  bluefire/PTCLM testing: All PASS
  edinburgh/lf95 interactive testing: All PASS except...
006 blAL4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 5
  yong/intel interactive testing:
006 blAL4 TBL.sh _nrsc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ..................FAIL! rc= 5
011 smD94 TSM.sh _persc_ds clm_per^nl_urb 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 10
012 erD94 TER.sh _persc_ds clm_per^nl_urb 20021231:1200 4x5 gx3v7 72+72 cold ....................FAIL! rc= 5
013 blD94 TBL.sh _persc_ds clm_per^nl_urb 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 4
019 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
020 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11

CLM tag used for the baseline comparison tests if applicable: clm4_0_21

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_21
Originator(s):  jedwards (Jim Edwards)
Date: Wed Jan 12 14:50:45 MST 2011
One-line Summary:  Remove includes, finish PIO transition

Purpose of changes: 

Code cleanup

Remove misc.h/preproc.h, update SNICARMod to use ncdio_pio calls rather than NetCDF
directly. 

Bugs fixed (include bugzilla ID):
                                 394 (misc.h and preproc.h NOT used at all anymore)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1271 (Problem in PTS_MODE with clm)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1110 (dtlimit error when a full year isn't available)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system:  Removed generation of files misc.h and preproc.h

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, Erik K

List any svn externals directories updated (csm_share, mct, etc.):  None

List all files eliminated: misc.h, preproc.h

D       models/lnd/clm/tools/mksurfdata/misc.h
D       models/lnd/clm/tools/mksurfdata/preproc.h
D       models/lnd/clm/tools/mkdatadomain/preproc.h
D       models/lnd/clm/tools/mkdatadomain/misc.h

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

       models/lnd/clm/tools/mkgriddata/README
       models/lnd/clm/tools/mksurfdata/README
       models/lnd/clm/tools/mkdatadomain/README
       models/lnd/clm/tools/README
       models/lnd/clm/bld/configure
       models/lnd/clm/bld/clm.cpl7.template	
       models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90
       models/lnd/clm/src/biogeochem/CASAPhenologyMod.F90
       models/lnd/clm/src/biogeochem/CNGapMortalityMod.F90
       models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90
       models/lnd/clm/src/biogeochem/CNGRespMod.F90
       models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90
       models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90
       models/lnd/clm/src/biogeochem/CNNStateUpdate3Mod.F90
       models/lnd/clm/src/biogeochem/CNFireMod.F90
       models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90
       models/lnd/clm/src/biogeochem/CNSummaryMod.F90
       models/lnd/clm/src/biogeochem/CNDVLightMod.F90
       models/lnd/clm/src/biogeochem/CNPhenologyMod.F90
       models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90
       models/lnd/clm/src/biogeochem/CNCStateUpdate3Mod.F90
       models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90
       models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90
       models/lnd/clm/src/biogeochem/CNDVEcosystemDynIniMod.F90
       models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90
       models/lnd/clm/src/biogeochem/C13SummaryMod.F90
       models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90
       models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90
       models/lnd/clm/src/biogeochem/CNAllocationMod.F90
       models/lnd/clm/src/biogeochem/CNC13FluxMod.F90
       models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90
       models/lnd/clm/src/biogeochem/CNSetValueMod.F90
       models/lnd/clm/src/biogeochem/CNDVEstablishmentMod.F90
       models/lnd/clm/src/main/organicFileMod.F90
       models/lnd/clm/src/main/dynlandMod.F90
       models/lnd/clm/src/main/accFldsMod.F90
       models/lnd/clm/src/main/fileutils.F90
       models/lnd/clm/src/main/pftdynMod.F90
       models/lnd/clm/src/main/pft2colMod.F90
       models/lnd/clm/src/main/restFileMod.F90
       models/lnd/clm/src/main/clm_varsur.F90
       models/lnd/clm/src/main/controlMod.F90
       models/lnd/clm/src/main/initSurfAlbMod.F90
       models/lnd/clm/src/main/filterMod.F90
       models/lnd/clm/src/main/clm_varorb.F90
       models/lnd/clm/src/main/initGridCellsMod.F90
       models/lnd/clm/src/main/pftvarcon.F90
       models/lnd/clm/src/main/spmdMod.F90
       models/lnd/clm/src/main/domainMod.F90
       models/lnd/clm/src/riverroute/RunoffMod.F90
       models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90
       models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90
       models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90
       models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90
       models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90
       models/lnd/clm/src/biogeophys/QSatMod.F90
       models/lnd/clm/src/biogeophys/clm_driverInitMod.F90
       models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90
	
       models/lnd/clm/src/biogeophys/SNICARMod.F90
       models/lnd/clm/src/main/ncdio_pio.F90

	Removed reference to preproc.h and misc.h in all files.   Converted snicarmod to use pio 
	and added support for a 3d non-decomposed real variable in ncdio.
	
Summary of testing:

  bluefire: All PASS except...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
059 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
060 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
061 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
062 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
NOTE: pts_mode tests failed... (bug 1271)
  bluefire/CESM testing: All PASS

  jaguarpf:  All pass except ...
007 brB91 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:1800 4x5 gx3v7 72+72 arb_ic ..................FAIL! rc= 10
022 erH92 TER.sh 17p_cnsc_dm clm_ndepdyn^nl_cn_conly 20020101:1800 4x5 gx3v7@1850-2000 10+38 cold FAIL! rc= 13
023 brH92 TBR.sh 17p_cnsc_dm clm_ndepdyn^nl_cn_conly 20020101:1800 4x5 gx3v7@1850-2000 72+72 cold FAIL! rc= 11
038 smLI2 TSM.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
039 erLI2 TER.sh _sc_dm clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
040 brLI2 TBR.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
041 blLI2 TBL.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
042 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 96 arb_ic ....................FAIL! rc= 10
043 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
044 brL58 TBR.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
045 blL58 TBL.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 48 arb_ic ....................FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm4_0_19

Changes answers relative to baseline: bit-for-bit
	
===============================================================
Tag name:  clm4_0_20
Originator(s):  erik (Erik Kluzek)
Date: Tue Jan 11 11:18:30 MST 2011
One-line Summary: Update for ESMF metadata, update doc. from release branch, 
                  bug fixes (doc of qflx_evap_tot, threading CNDV, aer/ndepregrid)

Purpose of changes:

Update externals, fix in datm speeds up single-point simulations, update for esmf
metadata capability. Update documentation from Release branch (cesm1_0_rel07_clm4_0_14). 
Fix documentation of qflx_evap_tot. Fix ndepregrid/aerdepregrid scripts. Fix threading 
problem with CNDV.

Bugs fixed (include bugzilla ID):
                                1266 (Threading problem with CNDV)
                                1265 (Fix ndep/aerdepregrid.ncl)
                                1264 (Incorrect doc of qflx_evap_tot in the code)
                                1258 (runinit_ibm.csh needs to be updated)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1281 (bug in mksurfdata for urban_only case)
                                 1282 (Trouble running to last CLM1PT atm time-step)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1110 (dtlimit error when a full year isn't available)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes:
    Small section of clm_driver was moved to a OMP loop. This should
    improve threading performance slightly.

Code reviewed by: self, doc of qflx_evap_tot by Keith Oleson

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, 
     stubs, datm, csm_share, timing

    scripts   to scripts4_110108
    drv       to drvseq3_1_47
    sice      to stubs1_2_03
    socn      to stubs1_2_03
    sglc      to stubs1_2_03
    datm      to datm8_110106
    csm_share to share3_101231
    timing    to timing_101215

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

>>>>>>>>> Fix deposition regrid scripts so they will work (from crop04)
  M  models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl - Fix XML queries so will
        work, using the datm_internal namelist now
  M  models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --- Fix XML queries so will
        work, using stream_fldfilename_ndep in the ndepdyn_nml namelist.

>>>>>>>>> Fix so will work (from rel07)
  M  models/lnd/clm/tools/interpinic/runinit_ibm.csh - Fix config options so will work
  M  models/lnd/clm/bld/config_files/config_definition.xsl ---- Remove extra empty rows
  M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl  Fix missing ">"

>>>>>>>>> Update documentation (from rel07)
  M  models/lnd/clm/doc/UsersGuide/single_point.xml - Change how supported single-point
          cases are handled and add documentation on setting start/stop times
  M  models/lnd/clm/doc/UsersGuide/tools.xml -------- Add new options to mksurfdata.pl
          add notes about bugs, add notes that aer/ndepregid is optional
  M  models/lnd/clm/doc/UsersGuide/preface.xml ------ Update what_is_new section
  M  models/lnd/clm/doc/UsersGuide/clm_ug.xml ------- Add more versions in quicklist
  M  models/lnd/clm/doc/UsersGuide/appendix.xml ----- Add note about runinit_ibm.csh
          problem
  M  models/lnd/clm/doc/UsersGuide/custom.xml ------- Remove DATM_PRESAERO=none option,
          remove hist_crtinic, and use_ndepstream namelist settings

>>>>>>>>> Update documentation (from rel07)
  M  models/lnd/clm/doc/KnownLimitations - Add doc on dtlimit error
  M  models/lnd/clm/doc/KnownBugs -------- Add bug 1168, remove bug 498
  M  models/lnd/clm/doc/README ----------- Rework what's new
  M  models/lnd/clm/doc/index.shtml ------ Add link to KnownLimitations
  M  README ------------------------------ Rework what's new

>>>>>>>>> Fix threading problem with CNDV, by adding an OMP loop in a section
>>>>>>>>> in clm_driver that didn't have one, pass down beg/end c|g|p indices
>>>>>>>>> as needed
  M  models/lnd/clm/src/biogeochem/CNSetValueMod.F90 - Pass in begc/endc, begp/endp
  M  models/lnd/clm/src/main/clm_initializeMod.F90 --- Add OMP loop over setFilters
  M  models/lnd/clm/src/main/pftdynMod.F90 ----------- Pass down beg/end indices as needed
        pftdyn_wbal_init, pftdyn_cnbal, pftwt_interp, 
  M  models/lnd/clm/src/main/filterMod.F90 ----------- Pass clump index down to setFilters
        remove OMP from inside
  M  models/lnd/clm/src/main/clm_driver.F90 ---------- Add OMP loop around section that
        wasn't inside an OMP loop

>>>>>>>>> Fix the documentation of the qflx_evap_tot field
  M  models/lnd/clm/src/main/clmtype.F90 -------------------- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/main/clm_atmlnd.F90 ----------------- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/main/histFldsMod.F90 ---------------- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ------ Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 ---- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90 ---- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 -------- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90 - Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/UrbanMod.F90 ------------- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90 ----- Fix qflx_evap_tot doc
  M  models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 -- Fix qflx_evap_tot doc

>>>>>>>>> Add component meta-data for ESMF
  M  models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 - Add meta-data description
        of CLM
  M  models/lnd/clm/src/main/cpl_esmf/lnd_comp_mct.F90 -- Add more arguments to 
        lnd_register method

Summary of testing:

  bluefire: All PASS except...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 4
037 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
059 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
060 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
061 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
062 blLI1 TBL.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 4
  bluefire interactive testing: All PASS
  bluefire/CESM testing: All PASS
  bluefire/PTCLM testing: All PASS
  jaguar interactive testing: All PASS except (up to 017 brJ74)...
011 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic
.............FAIL! rc= 10
012 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic
...........FAIL! rc= 5
013 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
  up to....

017 brJ74 TBR.sh 4p_nrcasasc_ds clm_std^nl_urb_br 10001230:3600 1x1_tropicAtl test -3+-3 arb_ic .PASS
  edinburgh/lf95 interactive testing: All PASS except...
005 smAL4 TSM.sh _sc_ds clm_std^nl_ptsmode 20030101:1800 10x15 USGS -10 cold ....................FAIL! rc= 10
  edinburgh/PTCLM testing: All PASS up to ...
myPTCLMtests_US-Ha1_I_1850.PTCLM    FAIL 0
  mirage,storm/ifort interactive testing: All PASS except...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 10+38 cold .........FAIL! rc= 13
018 brR53 TBR.sh 17p_cnc13sc_do clm_std^nl_urb_br 20020115:1800 10x15 USGS@1850 72+72 cold ......FAIL! rc= 11
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 10+38 arb_ic ...........FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
025 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
026 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11

CLM tag used for the baseline comparison tests if applicable: clm4_0_19

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_19
Originator(s):  erik (Erik Kluzek)
Date: Wed Dec  8 22:20:30 MST 2010
One-line Summary: Bring irrigation branch to the trunk

Purpose of changes:

Add option for simple code to redirect some riverflow to irrigate generic crops.
Irrigation is turned on at 6AM, runs for 4 hours and keeps soil moisture to 0.7.
Change corn and wheat indices to c3crop and irrigated generic c3 crop.
Add QIRRIG as a history file output. Change pft-physiology and RTM flow files from
ASCII to NetCDF. Single pft-physiology file can handle all cases (has extra FCUR value
for CNDV), also has for new fields for crops that will come in later: corn, spring-wheat,
winter-wheat and soybean. Add findat and fsurdat files for irrigation (f09, f19, f10, finidat
only for f19). Split RTM run method into three and move subroutines around to where makes
more sense. Fix a mksurfdata PFT override bug. Synchronize the Makefiles for the tools
and add build for Darwin intel and PGI and remove Darwin XLF. Remove concurrent
directives and UNICOSMP, CPP_VECTOR, NEC_SX CPP #ifdefs. Remove some #include
misc.h/preproc.h statements. Switch pio_close for ncd_close calls. Replace some constants
with parameters. Remove clm_comp layer and call clm_initialize and clm_driver directly.
Change mk*.F90 subroutines in mksurfdata into modules, so that argument checking will
happen at compile-time.

Bugs fixed (include bugzilla ID):
                                  964 (Remove UNICOS #ifdef logic in clm)
                                 1238 (PST test fails)
                                 1249 (problem in mksurfdata for PFT override mode)
                                 1253 (mkglacier in mksurfdata has arguments in wrong order)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1248 (PTCLM can only go to 2005)
                                 1251 (PTCLM testcases aborts in I_QIAN case)
                                 1258 (runinit_ibm.csh needs to be updated)
                                 1264 (Incorrect doc of qflx_evap_tot in the code)
                                 1265 (Fix ndep/aerdepregrid.ncl)
                                 1266 (Threading problem with CNDV)
                                 1298 (Can NOT turn RTM off in CLM_CONFIG_OPTS)
                                 1299 (interpinic does NOT work going from non glc_mec)
                                 1304 (bug in interpinic *_var)
                                 1306 (mksoifmaxInit is NOT called)
                                 1305 (dvolrdt is documented with the wrong units)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: std-test

Describe any changes made to build system: None

Describe any changes made to the namelist:
   Add -irrig and -rtm_res options to build-namelist

+     -irrig                   Seek surface datasets with irrigation turned on.
+     -rtm_res "resolution"    Specify river transport model resolution.
    (Still only have half-degree files in the XML database)

   Add new history field:

           QIRRIG  water added through irrigation (mm/s)

List any changes to the defaults for the boundary datasets: NetCDF pft-phys/RTM files
  NetCDF PT-physiology file: pft-physiology.c101006.nc
  finidat and surfdata files for irrigation (for 1.9x2.5@2000)
  surfdata files for irrigation (for f09 and f10)
  NetCDF River-direction file: clmi.IQirrcr_2000-01-01_1.9x2.5_gx1v6_c101115.nc

Describe any substantial timing or memory changes: None

Code reviewed by: self, slevis, dlawren, wsacks, mvertens, swensosc
       slevis/wsacks -- irrigation changes
       dlawren -------- convert pft-physiology file to NetCDF
       mvertens ------- high level restructuring
       swensosc ------- convert RTM flow file to NetCDF

List any svn externals directories updated (csm_share, mct, etc.): scripts and csm_share

    scripts to scripts4_101206
    csm_share to csm_share3_101122

List all files eliminated:

D       models/lnd/clm/src/main/inicFileMod.F90 --------- Move to inicPerpMod
D       models/lnd/clm/src/main/clm_comp.F90 ------------ Move to clm_initialize and
               clm_driver
D       models/lnd/clm/src/main/scam_setlatlonidx.F90 --- Use shr_scam version
D       models/lnd/clm/src/main/snowdp2lev.F90 ---------- Move to mkarbinitMod
D       models/lnd/clm/src/main/areaMod.F90 ------------- Split out into relavent modules:
                celledge      -> RtmMapMod
                map_setmapsAr -> RmtMapMod
                cellarea      -> clm_initialize
                map_setgatm   -> downscaleMod
D       models/lnd/clm/test/system/tests_posttag_spot1 -- rename to yong

D       models/lnd/clm/tools/mksurfdata/mkfmax.F90 ---- rename to mkfmaxMod.F90
D       models/lnd/clm/tools/mksurfdata/mkvocef.F90 --- rename to mkvocefMod.F90
D       models/lnd/clm/tools/mksurfdata/mkglacier.F90 - put in mkglcmecMod.F90
D       models/lnd/clm/tools/mksurfdata/mklanwat.F90 -- rename to mklanwatMod.F90
D       models/lnd/clm/tools/mksurfdata/mkelev.F90 ---- put in mkurbanparMod.F90
D       models/lnd/clm/tools/mksurfdata/mkurban.F90 --- put in mkurbanparMod.F90
D       models/lnd/clm/tools/mksurfdata/mksoitexMod.F90 rename to mksoilMod.F90

List all files added and what they do:

A  +    models/lnd/clm/test/system/nl_files/clm_irrig -- New irrigation test

>>>>>>>>>>> Some high level restructuring/renames
A  +    models/lnd/clm/src/main/inicPerpMod.F90 -------- From inicFileMod
A  +    models/lnd/clm/src/riverroute/RtmMapMod.F90 ---- From areaMod.F90
A       models/lnd/clm/test/system/tests_posttag_yong -- rename add more tests

>>>>>>>>>>> Rename mksurfdata subroutines into modules
A       models/lnd/clm/tools/mksurfdata/mkfmaxMod.F90
A       models/lnd/clm/tools/mksurfdata/mksoilMod.F90
A       models/lnd/clm/tools/mksurfdata/mkvocefMod.F90
A       models/lnd/clm/tools/mksurfdata/mklanwatMod.F90

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> Add irrigation "AZ" tests at 10x15 with irrigation on
M       models/lnd/clm/test/system/tests_posttag_lynx_nompi
M       models/lnd/clm/test/system/tests_pretag_bluefire
M       models/lnd/clm/test/system/tests_pretag_edinburgh
M       models/lnd/clm/test/system/tests_pretag_jaguar_nompi
M       models/lnd/clm/test/system/tests_posttag_hybrid_regression
M       models/lnd/clm/test/system/tests_posttag_purempi_regression
M       models/lnd/clm/test/system/tests_posttag_intrepid_nompi
M       models/lnd/clm/test/system/tests_posttag_nompi_regression
M       models/lnd/clm/test/system/tests_pretag_bluefire_nompi -- Remove repeated test

M       models/lnd/clm/test/system/README.testnames --- Add Z res (10x15 with irrig)
M       models/lnd/clm/test/system/test_driver.sh ----- Changes for lynx and yong

>>>>>>>>>>> Fix bug 1249 for PFT overrides, correct irrigation sample namelist
>>>>>>>>>>> Change subroutines into modules for mk*.F90 files (allows compiler to check args)
>>>>>>>>>>> Fix bug 1253 putting mksoitex call after mkglacier
M       models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig - Correct name of irrigation dataset
M       models/lnd/clm/tools/mksurfdata/mksrfdat.F90  nullify pctpft_i
M       models/lnd/clm/tools/mksurfdata/mkpftMod.F90  Set nlat_i/nlon_i to 1 if PFT override
M       models/lnd/clm/tools/mksurfdata/mkglcmecMod.F90 -- Add mkglacier subroutine
M       models/lnd/clm/tools/mksurfdata/mkurbanparMod.F90  Add mkurban and mkelev subroutines
M       models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ----- Change subroutines into modules
           nullify pctpft_i, put mksoitex call after mkglacier
M       models/lnd/clm/tools/mksurfdata/Srcfiles --------- Change names of files
M       models/lnd/clm/tools/mksurfdata/mkpftMod.F90 ----- Add mkirrig subroutine


>>>>>>>>>>> Sync up the tools Makefiles and add darwin intel and pgi build (remove darwin xlf)
M       models/lnd/clm/tools/mksurfdata/Makefile ---- Sync up makefiles, add darwin build
M       models/lnd/clm/tools/interpinic/Makefile ---- Sync up makefiles, add darwin build
M       models/lnd/clm/tools/mkgriddata/Makefile ---- Sync up makefiles, add darwin build
M       models/lnd/clm/tools/mkdatadomain/Makefile -- Sync up makefiles, add darwin build

>>>>>>>>>>>  Add -irrig and -rtm_res options, update files to new NetCDF versions,
>>>>>>>>>>>  add in findat/fsurdat files for irrigation (f19,f10, f09)
M       models/lnd/clm/bld/build-namelist ----- Add -irrig, -rtm_res options
              set do_budgets, and budget_inst in drv_namelist, finidat/fsurdat depend on irrig
              set create_crop_landunit by irrig
M       models/lnd/clm/bld/clm.cpl7.template -- Set CLM_RTM_RES to half-degree and pass
              to build-namelist
M       models/lnd/clm/bld/namelist_files/namelist_definition.xml ------ add irrig and rtm_res
M       models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml  default for irrig and rtm_res
M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ---- New NetCDF 
              pft-physiology file (for all configs), finidat and fsurdat files check
              irrig, f19, f10, and f09 surfdata files for irrigation (and f19 finidat)
              defaults for create_croplandunit, new NetCDF RTM direction file
M       models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ---- Set do_budgets
              to .true. and budget_inst to 1.

>>>>>>>>>>> Remove concurrent directives and misc.h/preproc.h #includes
>>>>>>>>>>> Remove scam_setlatlonidx and use shr_scam_.
>>>>>>>>>>> Switch ncorn for nc3crop and nwheat for nirrig change pio_close for ncd_close
M       models/lnd/clm/src/biogeochem/CNMRespMod.F90 -------- Remove concurrent directives
            remove misc.h/preproc.h #includes
M       models/lnd/clm/src/biogeochem/CASAMod.F90 ----------- Change pio_closefile to
            ncd_pioclosefile
M       models/lnd/clm/src/biogeochem/CNWoodProductsMod.F90 - Remove directives
M       models/lnd/clm/src/biogeochem/DUSTMod.F90 ----------- Remove directives
M       models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90  ncorn->nc3crop, 
            use shr_scam_getCloseLatLon in place of scam_setlatlonidx, 
            Remove directives, switch pio_close with ncd_pio_closefile
M       models/lnd/clm/src/biogeochem/CNDecompMod.F90 ------- Remove directives and #includes
M       models/lnd/clm/src/biogeochem/CNDVMod.F90 ----------- Switch pio_plosefile with ncd_close
M       models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ---- ncorn->nc2crop
M       models/lnd/clm/src/biogeochem/DryDepVelocity.F90 ---- ncorn->nc3crop, nwheat->nirrig
             and remove #includes
M       models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 ncorn->nc3crop, nwheat->nirrig
             and remove #includes

>>>>>>>>>>> Remove concurrent directives and misc.h/preproc.h #includes
>>>>>>>>>>> Remove scam_setlatlonidx and use shr_scam_.
>>>>>>>>>>> Switch ncorn for nc3crop and nwheat for nirrig change pio_close for ncd_close
M       models/lnd/clm/src/main/clm_varcon.F90 ------- Add degpsec, isecspday,
             and remove #includes
M       models/lnd/clm/src/main/clm_varpar.F90 ------- Remove #includes, add ivis/inir
             indices, and make rtmlat/rtmlon variables not parameters
M       models/lnd/clm/src/main/CNiniTimeVar.F90 ----- Remove directives, and #includes, 
             add qflx_irrig
M       models/lnd/clm/src/main/abortutils.F90 ------- Remove directives, and #includes
             and NEC_SX, and UNICOSMP CPP defines
M       models/lnd/clm/src/main/accumulMod.F90 ------- Remove directives
M       models/lnd/clm/src/main/decompInitMod.F90 ---- Remove UNICOSMP CPP defines
M       models/lnd/clm/src/main/clm_initializeMod.F90  Move cellarea from areaMod to here
             work with downscale a bit, add stuff from clm_comp init to here
M       models/lnd/clm/src/main/clmtypeInitMod.F90 --- Add irrig_rate and n_irrig_steps_left
M       models/lnd/clm/src/main/iniTimeConst.F90 ----- Switch pio_close with ncd_close,
             add single-column read for PCT_CLAY, switch 86400 for secspday
M       models/lnd/clm/src/main/histFileMod.F90 ------ Remove UNICOSMP, switch pio_close
             with ncd_close
M       models/lnd/clm/src/main/restFileMod.F90 ------ Switch pio_close with ncd_close
There's also a new driver namelist setting that will update the orbit each year
(setting orb_mode and orb_iyear_align).

Bugs fixed (include bugzilla ID):
                                 1225 (abort if both trigrid and finemesh on)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  935 (RTM warning NOT an error)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on mirage...)
                                 1165 (Restart trouble for scaled harvest test on mirage)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1238 (PST test fails)
                                 1239 (ESMF build fails)
                                 1240 (lynx_pgi build fails)
                                 1249 (problem in mksurfdata for PFT override mode)
                                 1258 (runinit_ibm.csh needs to be updated)
                                 1264 (Incorrect doc of qflx_evap_tot in the code)
                                 1265 (Fix ndep/aerdepregrid.ncl)
                                 1266 (Threading problem with CNDV)
                                 1318 (interpinic has trouble with new restart files)
                                 1372 (pio problem writing out CLM history files for CRU
                                 1381 (Can't change monthly average files to NOT be one per month)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart)
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: Add in darwin_intel build

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets: Add in T341 datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm,
           csm_share, pio, mct, cprnc

    scripts     to mpiserial07_scripts4_101117
    drv         to drv3_1_45
    datm        to datm8_101105
    csm_share   to share3_101118
    pio         to pio1_2_6
    mct         to MCT2_7_0_100228-mpiserial101109_tag02
    cprnc       to cprnc_101119

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M  models/lnd/clm/test/system/tests_pretag_jaguar - remove non-existant tests

>>>>>>>>>> Remove clmi frequency setting, add darwin build/run
   M  models/lnd/clm/test/system/input_tests_master
   M  models/lnd/clm/test/system/TBR.sh
   M  models/lnd/clm/test/system/test_driver.sh - Add darwin builds
   M  models/lnd/clm/test/system/mknamelist

>>>>>>>>>> Change orb_iyear for orb_iyear_ad
   M  models/lnd/clm/test/system/nl_files/nl_urb
   M  models/lnd/clm/test/system/nl_files/nl_noicertm_sclharv
   M  models/lnd/clm/test/system/nl_files/clm_ndepdyn -- remove ndepsrc stream setting
              Can now replace usage of this file with clm_std
   M  models/lnd/clm/test/system/nl_files/nl_cn_conly
   M  models/lnd/clm/test/system/nl_files/nl_urb_br

>>>>>>>>>> Get build working with darwin_intel
   M  models/lnd/clm/bld/configure ------ get it working with darwin_intel
   M  models/lnd/clm/bld/clm.cpl7.template - Use $GMAKE, set to gmake if not set

>>>>>>>>>> Remove non-existant resolution: 2.5x3.33
   M  models/lnd/clm/bld/namelist_files/checklatsfiles.ncl
   M  models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl

>>>>>>>>>> Add orb_mode, set orbit based on it, also add orb_iyear_align
>>>>>>>>>> Add run_barriers, pio_inparm namelist, add T341 resolution (512x1024)
   M  models/lnd/clm/bld/build-namelist - Set orbit based on orb_mode, set pio namelist
             for stand-alone testing, 
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Remove pio namelist
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml
   M  models/lnd/clm/bld/namelist_files/datm-build-namelist
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- Add T341: griddata,
             fracdata, surfdata, topodata (fracdata for USGS and tx0.1 masks)`
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml

>>>>>>>>>> Switch orb_iyear for orb_iyear_ad
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml

>>>>>>>>>> Switch ncd_x for pio_x/nf_x
>>>>>>>>>> Fix a couple memory leaks that Jim Edwards found
>>>>>>>>>> Make ncd_pio private, add documentation add attributes for restart history
>>>>>>>>>> files, add 2D character read (needed for NetCDF pft-physiology file read on
>>>>>>>>>> irrigation branch)
   M  models/lnd/clm/src/biogeochem/CASAMod.F90 ------------ Replcae pio_x
   M  models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 - use masterproc at top of module
   M  models/lnd/clm/src/biogeochem/CNDVMod.F90 ------------ Replace pio_x
   M  models/lnd/clm/src/biogeochem/CNrestMod.F90 ---------- Replace pio_x
   M  models/lnd/clm/src/main/inicFileMod.F90 -------------- Add use MPI_LOGICAL
   M  models/lnd/clm/src/main/accumulMod.F90 --------------- Replace pio_x
   M  models/lnd/clm/src/main/clm_initializeMod.F90 -------- Remove samegrids use downscale,
                don't pass namelist to ncd_pio initialization
   M  models/lnd/clm/src/main/subgridRestMod.F90 ----------- Add use endrun, switch ncd_x for nf_x
   M  models/lnd/clm/src/main/ndepStreamMod.F90 ------------ PIO initialization uses 
                driver settings, pass get_calendar to initialization
   M  models/lnd/clm/src/main/histFileMod.F90 -------------- Add attributes to history restart files
   M  models/lnd/clm/src/main/restFileMod.F90 -------------- Replace pio_x
   M  models/lnd/clm/src/main/clm_time_manager.F90 --------- Replace nf_x with ncd_x add
                get_calendar
   M  models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 ----- Abort if trigrid and downscale
                Update orbit params in run-phase
   M  models/lnd/clm/src/main/clm_varctl.F90 --------------- Remove samegrids
   M  models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 --- Abort if trigrid and downscale
                Update orbit params in run-phase
   M  models/lnd/clm/src/main/ncdio_pio.F90 ---------------- Update documentation, make private
                add ncd_pio_closefile wrapper, make some pio interfaces public from here,
                add ncd_io_char_var2_nf for NetCDF pft-physiology file, remove pio namelist
                remove a second allocation that Jim Edwards found
   M  models/lnd/clm/src/main/surfrdMod.F90 ---------------- Fix memory leak from Jim Edwards
   M  models/lnd/clm/src/riverroute/RtmMod.F90 ------------- Switch nf_x with ncd_x
   M  models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 -- Add use for spval and iulog,
                change nf_x for ncd_x

Summary of testing:

All TBL tests fail... (although you can use clm4_0_16 with updated externals and show b4b)

  bluefire: All PASS except...
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
055 smLI1 TSM.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
056 erLI1 TER.sh _sc_dh clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
057 brLI1 TBR.sh _sc_dh clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
  bluefire interactive testing: All PASS
  bluefire/CESM testing:
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_16 
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_16 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_16 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_16 
FAIL  SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_16 
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_16 
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_16 
FAIL PST.f45_g37.I1850.bluefire <<<<< Didn't create scripts problem, bug 1238
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_16 
FAIL  ERS_E.f19_g16.I1850.bluefire <<<< Scripts build issue, bug 1239
BFAIL ERS_E.f19_g16.I1850.bluefire.generate.clm4_0_17 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare_hist.clm4_0_16 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_16 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_16 
FAIL  PST.f10_f10.I8520CN.bluefire <<<<< Didn't create scripts problem, bug 1238
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_16 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_16 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_16 
  bluefire/PTCLM testing: All PASS
  jaguar: All PASS except...
007 brB91 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:1800 4x5 gx3v7 72+72 arb_ic ..................FAIL! rc= 13
022 erH92 TER.sh 17p_cnsc_dm clm_ndepdyn^nl_cn_conly 20020101:1800 4x5 gx3v7@1850-2000 10+38 cold FAIL! rc= 13
023 brH92 TBR.sh 17p_cnsc_dm clm_ndepdyn^nl_cn_conly 20020101:1800 4x5 gx3v7@1850-2000 72+72 cold FAIL! rc= 11
038 smLI2 TSM.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10 arb_ic .............................FAIL! rc= 10
039 erLI2 TER.sh _sc_dm clm_std 20020101:1800 94x192 T62 -5+-5 arb_ic ...........................FAIL! rc= 5
040 brLI2 TBR.sh _sc_dm clm_std 20020101:1800 94x192 T62 -10+-10 arb_ic .........................FAIL! rc= 5
042 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 96 arb_ic ....................FAIL! rc= 10
043 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
044 brL58 TBR.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
  jaguar interactive testing: All PASS except...
007 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
008 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
009 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
027 sm974 TSMscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds ....FAIL! rc= 6
  edinburgh/lf95 interactive testing: All PASS
  edinburgh/lf95 testing: All PASS except...
005 smD91 TSM.sh _persc_dh clm_per^nl_urb 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 10
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:1200 4x5 gx3v7 72+72 cold ....................FAIL! rc= 5
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
012 smG56 TSM.sh 17p_sc_m clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic ..............FAIL! rc= 10
013 smE91 TSM.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:1800 4x5 gx3v7 96 arb_ic .................FAIL! rc= 10
014 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:1800 4x5 gx3v7 10+38 arb_ic ..............FAIL! rc= 5
015 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:1800 4x5 gx3v7 72+72 arb_ic ...........FAIL! rc= 5
018 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:1800 10x15 USGS@2000 10+38 cold ............FAIL! rc= 13
019 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:1800 10x15 USGS@2000 72+72 cold .........FAIL! rc= 11
025 smL51 TSM.sh _sc_dh clm_std^nl_urb 20020115:1800 10x15 USGS 96 arb_ic .......................FAIL! rc= 10
026 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:1800 10x15 USGS 10+38 arb_ic ....................FAIL! rc= 5
027 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:1800 10x15 USGS 72+72 arb_ic .................FAIL! rc= 5
029 smH41 TSM.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 96 cold ..FAIL! rc= 10
030 erH41 TER.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 5
031 brH41 TBR.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 5
033 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:1800 10x15 USGS 96 arb_ic ....................FAIL! rc= 10
  edinburgh/PTCLM testing: All PASS up to...
myPTCLMtests_US-Ha1_I_1850.PTCLM    FAIL 0
  mirage,storm/ifort interactive testing: All PASS except...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:1800 10x15 USGS@1850 10+38 cold .........FAIL!  rc= 13
018 brR53 TBR.sh 17p_cnc13sc_do clm_std^nl_urb_br 20020115:1800 10x15 USGS@1850 72+72 cold ......FAIL! rc= 11
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 144 arb_ic .............FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 10+38 arb_ic ...........FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:1800 10x15 USGS@1000-1002 72+72 arb_ic ...........FAIL! rc= 5
025 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 10+38 cold FAIL! rc= 13
026 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:1800 10x15 USGS@2000 72+72 cold FAIL! rc= 11
  lynx/pgi testing: All FAIL scripts build issue <<<< bug 1240
  yong/darwin_intel testing: All PASS up to ...
005 smD94 TSM.sh _persc_ds clm_per^nl_urb 20021231:1200 4x5 gx3v7 144 cold ......................FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_16


IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All with datm
    - what platforms/compilers: All
    - nature of change: roundoff

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

     PERGRO test on bluefire

===============================================================
===============================================================
Tag name:  clm4_0_16
Originator(s):  erik/mvertens (Kluzek Erik 1326 CGD) (Vertenstein Mariana 1349 CGD)
Date: Wed Oct 27 13:33:21 MDT 2010
One-line Summary: Fix downscaling roundoff difference for same-grids by copying scale factor when needed

Purpose of changes:

Fix bug 1230, that caused problems with runoff to the ocean when running fully coupled. The global integrals of runoff fields
was the same in the coupler -- but the values where roundoff different. This caused problems both in testing for bit-for-bit with
the previous version and with restarts. The problem was that in the downscaling changes made in clm4_0_15 the areal scaling factor
asca needed to be copied from adomain into ldomain is no downscaling is taking place.

Bugs fixed (include bugzilla ID):
===============================================================
Tag name:  clm4_0_14
Originator(s):  erik (Erik Kluzek)
Date: Tue Oct 19 13:12:36 MDT 2010
One-line Summary: Fix finidat file for T31 sim_year=2000 cases

Purpose of changes:

Remove the 1850 T31 finidat file for sim_year=2000 and use the previous sim_year=2000
files (created using interpinic). Update scripts and datm.

Bugs fixed (include bugzilla ID): Correct finidat file for T31 sim_year=2000

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1249 (problem in mksurfdata for PFT override mode)
                                 1258 (runinit_ibm.csh needs to be updated)
                                 1264 (Incorrect doc of qflx_evap_tot in the code)
                                 1265 (Fix ndep/aerdepregrid.ncl)
                                 1266 (Threading problem with CNDV)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Go back to T31,sim_year=2000
finidat file

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts and datm

   scripts to mpiserial05_scripts4_101018
   datm    to datm8_101008

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M       models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- Return to old
                                                  finidat file for T31 sim_year=2000
M       models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - change
                                                  fearedep to datm_file_aero

Summary of testing:

  bluefire/CESM testing:
PASS  SMS_D.T31_g37.I1850CN.bluefire 
PASS  SMS_D.T31_g37.ICN.bluefire 

CLM tag used for the baseline comparison tests if applicable: clm4_0_13

Changes answers relative to baseline: T31 2000 cases

===============================================================
===============================================================
Tag name:  clm4_0_13
Originator(s):  erik (Erik Kluzek)
Date: Sat Oct 16 09:14:08 MDT 2010
One-line Summary: Bring in PTCLM branch, add in T31 finidat file and turn off ice_runoff for T31

Purpose of changes:

Bring in PTCLM work. Update externals for scripts, datm, drv. Get mksurfdata to have options to override soil/PFT with user input values. Fix some issues with getregional_datasets.pl.  Remove old stand-alone CLM Makefile (always use CESM Macro's files and Makefile). More removal of ndepsrc in build-namelist. Turn off ice_runoff for T31. Add in T31 finidat file.

Bugs fixed (include bugzilla ID):
                                 1189 (Create ability to change soil color/texture in mksurfdata)
                                 1188 (Add ability to handle control transient land-cover change)
                                 1206 (Problem looping over a single year of CPLHIST forcing)
                                 1211 (Small memory leak in CLM4 initialization)
                                 1223 (ESMF problem)
Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1224 (Fix -aerdepgrid/ndepgrid options in PTCLM.py)
                                 1249 (problem in mksurfdata for PFT override mode)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1017 (SCM mode can NOT restart
                                  452 (Problem with support of soil-colors != 8 or 20)

Type of tag: standard

Describe any changes made to build system: 

    Remove custom options to stand-alone build/test, require using cesm make files

Describe any changes made to the namelist: None, although many new options to mksurfdata namelist

List any changes to the defaults for the boundary datasets: New T31 finidat files

Describe any substantial timing or memory changes: none

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm, csm_share

   drv       to drvseq3_1_37
   datm      to datm8_100921
   csm_share to share3_101001
   scripts   to PTCLM03_scripts4_101005

List all files eliminated:

   R models/lnd/clm/test/system/tests_posttag_breeze >>> rename to mirage
>>>>>>>>>>> Rename to module
   R models/lnd/clm/tools/mksurfdata/mkglcmec.F90
   R models/lnd/clm/tools/mksurfdata/mksoicol.F90
   R models/lnd/clm/tools/mksurfdata/mksoitex.F90

   R models/lnd/clm/bld/config_files/Makefile.in --- Remove always use CESM make

List all files added and what they do:

>>>>>>>>>>> Renames
   A models/lnd/clm/test/system/tests_posttag_mirage
   A models/lnd/clm/tools/mksurfdata/mkglcmecMod.F90
   A models/lnd/clm/tools/mksurfdata/mksoitexMod.F90
   A models/lnd/clm/tools/mksurfdata/mksoicolMod.F90

>>>>>>>>>>> Namelist settings for standard urban single-point
   A models/lnd/clm/bld/namelist_files/use_cases/stdurbpt.xml

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> Remove PTS_MODE restart/branch tests
   M models/lnd/clm/test/system/tests_posttag_lynx_nompi
   M models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M models/lnd/clm/test/system/tests_posttag_spot1 --------- remove hybrid test
   M models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M models/lnd/clm/test/system/tests_pretag_jaguar_nompi
   M models/lnd/clm/test/system/tests_posttag_intrepid_nompi
   M models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>> Change breeze+ for mirage changes for new build that requires CESM build files
   M models/lnd/clm/test/system/TCB.sh -------------------- Set nc_path
   M models/lnd/clm/test/system/config_files/_nrmexsc_ds -- Use -sitespf_pt
   M models/lnd/clm/test/system/config_files/_nrvansc_ds -- Use -sitespf_pt
   M models/lnd/clm/test/system/test_driver.sh ------------ Swap out mirage/storm for breeze+, add GEN machine options, remove CLM_CESMBLD
   M models/lnd/clm/test/system/mknamelist ---------------- Use config_file variable
   M models/lnd/clm/test/system/TSMscript_tools.sh -------- Add exedir
   M models/lnd/clm/test/system/CLM_runcmnd.sh ------------ Add more options for yong, change breeze+ to mirage/storm
   M models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850 ------ Add exedir
   M models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850-2000 - Add exedir

>>>>>>>>>>> Add new options to override dataset setttings with your own values for: soil color/texture, and PFT
   M models/lnd/clm/tools/mksurfdata/mkvarctl.F90 ----- Make private
   M models/lnd/clm/tools/mksurfdata/mkglacier.F90 ---- Add option to zero out glacier
   M models/lnd/clm/tools/mksurfdata/mkharvestMod.F90 - Add mkharvest_parse_oride to override harvesting
   M models/lnd/clm/tools/mksurfdata/mkfileMod.F90 ---- Move nglcec here
   M models/lnd/clm/tools/mksurfdata/mklanwat.F90 ----- Add option to zero out lake
   M models/lnd/clm/tools/mksurfdata/mkurban.F90 ------ Add option to zero out urban
   M models/lnd/clm/tools/mksurfdata/mkvarsur.F90 ----- Make private
   M models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ----- Add new namelist options: soil_color, soil_sand, soil_clay, pft_idx, pft_frc
   M models/lnd/clm/tools/mksurfdata/mkpftMod.F90 ----- Add init and override methods: mkpftInit, mkpft, and mkpft_parse_oride
   M models/lnd/clm/tools/mksurfdata/Filepath --------- Add esmf_wrf_timemgr to directory list
   M models/lnd/clm/tools/mksurfdata/Srcfiles --------- Change names, add shr_cal_mod, shr_string_mod, and ESMF files

   M models/lnd/clm/tools/mksurfdata/mksurfdata.pl ---- Add new options to override your own values, and error check the input:
+     -dynpft "filename"            Dynamic PFT/harvesting file to use
+                                   (rather than create it on the fly)
+                                   (must be consistent with first year)
+     -exedir "directory"           Directory where mksurfdata program is
+                                   (by default assume it's in the current directory)
+OPTIONS to override the mapping of the input gridded data with hardcoded input
+
+     -pft_frc "list of fractions"  Comma delimited list of percentages for veg types
+     -pft_idx "list of veg index"  Comma delimited veg index for each fraction
+     -soil_cly "% of clay"         % of soil that is clay
+     -soil_snd "% of sand"         % of soil that is sand

>>>>>>>>>>> Start fixing some issues with getregional scripts
M       models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl
M       models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl

>>>>>>>>>>> Add USER_FCTYP
   M models/lnd/clm/tools/mksurfdata/Makefile
   M models/lnd/clm/tools/interpinic/Makefile
   M models/lnd/clm/tools/mkgriddata/Makefile
   M models/lnd/clm/tools/mkdatadomain/Makefile

>>>>>>>>>>>  Remove stand-alone user options and require cesm_bld, add ice_runoff run_stopdate, and new finidat files for T31, more ndepmapalgo defaults
>>>>>>>>>>>  Change stop_n values for urban single-point so will run to completion
   M models/lnd/clm/bld/configure --------------- Remove options: test, cc, cflags, fc, fflags, fopt, gmake, ldflags, linker, mpi/nc_inc/_lib
                                                  add nc_path and mpi_path options, require cesm_bld, and remove logic for doing 
                                                  clm-stand-alone build
   M models/lnd/clm/bld/queryDefaultNamelist.pl - Check for valid values, add list options, 
   M models/lnd/clm/bld/queryDefaultXML.pm ------ Change a comment
   M models/lnd/clm/bld/build-namelist ---------- Add setting of ice_runoff
   M models/lnd/clm/bld/config_files/config_sys_defaults.xml --- Set more default machine names
   M models/lnd/clm/bld/config_files/config_definition.xml ----- Remove compiler options above and add nc_path/mpi_path

   M models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Add run_stopdate and work on comments
   M models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Add ice_runoff defaults, new finidat files for T31, add more ndepmapalgo defaults
   M models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml - Change stop_n for urban single-point, add stop_date

   M models/lnd/clm/doc/UsersGuide/preface.xml - Change comment

>>>>>>>>>>> Fix two code bugs (1211 and 1223)
   M models/lnd/clm/src/main/iniTimeConst.F90 ------------ make sure to deallocate memory
   M models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 -- add use statement needed for endrun

Summary of testing:

  bluefire testing: All PASS except.. (up to 054 smI59)
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  bluefire interactive testing: All PASS except..
061 sm9S4 TSMscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................FAIL! rc= 6
  bluefire/CESM testing: All PASS except
BFAIL SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_11
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_11
  jaguar interactive testing: All PASS except...
005 smAK4 TSM.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............FAIL! rc= 10
007 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
008 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
009 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/lf95 interactive testing: All PASS
  mirage/storm.intel interactive testing: ALL PASS up to...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 10+38 cold ....FAIL! rc= 13

CLM tag used for the baseline comparison tests if applicable: clm4_0_12

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_12
Originator(s):  erik (Erik Kluzek)
Date: Fri Sep 10 13:07:03 MDT 2010
One-line Summary: Add U10 to history, cesm1_0_rel06 updates, PTCLM02 updates (except 
                  mksurfdata), remove ndepdat/dyn/faerdep

Purpose of changes:

Update to latest cesm1 release branch. Change SPMD from spmd to use_mpiserial in
configure. Remove old aerdep and ndepdat/dyn files from code and scripts. Change ccsm in
scripts to cesm. Add in new U10 field to history files, change old name to U10_DUST. Some
updates from PTCLM branch for XML database. Also perturb initial conditions read in from
initial file by pertlim. With with PERGRO CPP #ifdef a bit. Start adding in testing on 
lynx.

Bugs fixed (include bugzilla ID):
                                 1199 (Add trusted machine history file for PERGRO analysis)
                                 1196 (Add urban option to configure, delete GRANDVIEW ifdefs)
                                 1191 (UG documentation for single-point needs to change que to shared-que)
                                 1167 (Add note about reducing PE's for single-point mode)
                                 1115 (Make config_definition names the same as configure options)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1206 (Problem looping over a single year of CPLHIST forcing)
    http://bugs.cgd.ucar.edu/

Known Limitations:
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1147 (mkgriddata can't straddle over Greenwich)

Type of tag: std-test

Describe any changes made to build system:
    Names of configure modes changed: seq_ccsm to clm_stndln, and ext_ccsm_seq to ext_cesm
    Add sitespf_pt option which will set either MEXICOCITY or VANCOUVER cpp ifdefs
    Names of some configure options changed to make consistent with config_definition file.

Describe any changes made to the namelist: Remove use_ndepstream/fndepdat/fndepdyn/faerdep

List any changes to the defaults for the boundary datasets:

     New 10x15 rcp6 transient 1850-2100 pftdyn dataset
     Add navy oro file to clm_tools XML file

Describe any substantial timing or memory changes: None

Code reviewed by: self, U10 code from Keith Oleson

List any svn externals directories updated (csm_share, mct, etc.): scripts and datm
   scripts to scripts4_100901a
   datm    to datm8_100830

List all files eliminated:

   D    models/lnd/clm/src/main/aerdepMod.F90
   D    models/lnd/clm/src/main/ndepFileMod.F90
   D    models/lnd/clm/tools/ncl_scripts/convertUrbanOffline2Seq.ncl
   D    models/lnd/clm/tools/ncl_scripts/getndepdatFrom20thCentury.ncl
   D    models/lnd/clm/tools/mkgriddata/mkgriddata.ccsm_dom -- Rename to .cesm_dom
   D    models/lnd/clm/doc/UsersGuide/fixvan_datm.buildnml.diff

List all files added and what they do:

>>>>>>>>>> Transient test files for rcp2.6 and rcp4.5, start adding lynx testing
   A    models/lnd/clm/test/system/nl_files/clm_transient_rcp2.6
   A    models/lnd/clm/test/system/nl_files/clm_transient_rcp4.5
   A    models/lnd/clm/test/system/tests_posttag_lynx
   A    models/lnd/clm/test/system/tests_posttag_lynx_nompi

>>>>>>>>>> Sample perturbation growth data for jaguar, intel and lahey
   A    models/lnd/clm/tools/ncl_scripts/RMSjaguar.dat
   A    models/lnd/clm/tools/ncl_scripts/RMSintel.dat
   A    models/lnd/clm/tools/ncl_scripts/RMSlahey.dat

   A    models/lnd/clm/tools/mkgriddata/mkgriddata.cesm_dom - rename from .ccsm_dom

>>>>>>>>>> Plot of sample bad perturbation error growth
   A    models/lnd/clm/doc/UsersGuide/badpergro.jpg

List all existing files that have been modified, and describe the changes:

>>>>>>>>>> Change ccsm_seq=>clm_stndln, spmd=>nouse_mpiserial
   M    models/lnd/clm/test/system/config_files/_nrsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
   M    models/lnd/clm/test/system/config_files/17p_nrsc_ds
   M    models/lnd/clm/test/system/config_files/17p_scnv_do
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_m
   M    models/lnd/clm/test/system/config_files/_scnv_dh
   M    models/lnd/clm/test/system/config_files/_nrsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_o
   M    models/lnd/clm/test/system/config_files/4p_nrcasasc_ds
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
   M    models/lnd/clm/test/system/config_files/_nrsc_do
   M    models/lnd/clm/test/system/config_files/_persc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_s
   M    models/lnd/clm/test/system/config_files/_nrsc_ds
   M    models/lnd/clm/test/system/config_files/_scnv_do
   M    models/lnd/clm/test/system/config_files/_persc_dm
   M    models/lnd/clm/test/system/config_files/_persc_do
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_dh
   M    models/lnd/clm/test/system/config_files/_persc_ds
   M    models/lnd/clm/test/system/config_files/_nrmexsc_ds
   M    models/lnd/clm/test/system/config_files/_mec10sc_dh
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_dm
   M    models/lnd/clm/test/system/config_files/_nrcnsc_do
   M    models/lnd/clm/test/system/config_files/17p_sc_dh
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_do
   M    models/lnd/clm/test/system/config_files/_mec10sc_dm
   M    models/lnd/clm/test/system/config_files/_nrcnsc_ds
   M    models/lnd/clm/test/system/config_files/4p_casasc_dh
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_ds
   M    models/lnd/clm/test/system/config_files/17p_sc_dm
   M    models/lnd/clm/test/system/config_files/_mec10sc_do
   M    models/lnd/clm/test/system/config_files/17p_sc_do
   M    models/lnd/clm/test/system/config_files/_sc_dh
   M    models/lnd/clm/test/system/config_files/_mec10sc_ds
   M    models/lnd/clm/test/system/config_files/4p_casasc_dm
   M    models/lnd/clm/test/system/config_files/4p_casasc_do
   M    models/lnd/clm/test/system/config_files/17p_sc_ds
   M    models/lnd/clm/test/system/config_files/_sc_dm
   M    models/lnd/clm/test/system/config_files/4p_casasc_ds
   M    models/lnd/clm/test/system/config_files/_nrsc_s
   M    models/lnd/clm/test/system/config_files/_sc_do
   M    models/lnd/clm/test/system/config_files/17p_cnsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnsc_m
   M    models/lnd/clm/test/system/config_files/_sc_ds
   M    models/lnd/clm/test/system/config_files/17p_cnsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnsc_do
   M    models/lnd/clm/test/system/config_files/_nrvansc_ds
   M    models/lnd/clm/test/system/config_files/17p_sc_h
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_do
   M    models/lnd/clm/test/system/config_files/4p_casasc_h
   M    models/lnd/clm/test/system/config_files/17p_sc_m
   M    models/lnd/clm/test/system/config_files/17p_sc_o
   M    models/lnd/clm/test/system/config_files/_sc_h
   M    models/lnd/clm/test/system/config_files/4p_casasc_m
   M    models/lnd/clm/test/system/config_files/4p_casasc_o
   M    models/lnd/clm/test/system/config_files/_sc_m
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_h
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_dh
   M    models/lnd/clm/test/system/config_files/_sc_o
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_m
   M    models/lnd/clm/test/system/config_files/_sc_s
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_dm
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_o
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_do
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_dh
   M    models/lnd/clm/test/system/config_files/_scsnf_dh
   M    models/lnd/clm/test/system/config_files/4p_vodsnrsc_ds
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_dm
   M    models/lnd/clm/test/system/config_files/_scsnf_dm
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_do
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_h
   M    models/lnd/clm/test/system/config_files/_scsnf_do
   M    models/lnd/clm/test/system/config_files/17p_vodsrsc_ds
   M    models/lnd/clm/test/system/config_files/_mec10sc_h
   M    models/lnd/clm/test/system/config_files/4p_vodsrsc_o
   M    models/lnd/clm/test/system/config_files/_mec10sc_m
   M    models/lnd/clm/test/system/config_files/_mec10sc_o
   M    models/lnd/clm/test/system/config_files/17p_scnv_dh
   M    models/lnd/clm/test/system/config_files/17p_cndvsc_h
   M    models/lnd/clm/test/system/config_files/README --- seq-ccsm=>standalone clm

>>>>>>>>>> Change comments of CCSM to CESM, start adding in test support of lynx, convert
>>>>>>>>>> SPMD to NOUSE_MPISERIAL, change mode name of seq_ccsm to clm_stndln, add tests
>>>>>>>>>> for more rcp's.
   M    models/lnd/clm/test/system/TCB.sh ------------- CCSM_MACH=>CESM_MACH, ccsm_bld=>cesm_bld
   M    models/lnd/clm/test/system/README.testnames --- Change ccsm=>cesm, seq_ccsm=>clm_stndln
   M    models/lnd/clm/test/system/test_driver.sh ----- Change CLM_CCSMBLD=>CLM_CESMBLD,
                                                        Start adding lynx.
   M    models/lnd/clm/test/system/input_tests_master - Add HX and HY tests, ccsm=>cesm
   M    models/lnd/clm/test/system/README ------------- CLM_CCSMBLD=>CLM_CESMBLD
   M    models/lnd/clm/test/system/CLM_runcmnd.sh ----- NOSPMD=>NOUSE_MPISERIAL

>>>>>>>>>> Change comments from ccsm to cesm, change namelist to get faerdep file from,
>>>>>>>>>> work on pergro plot so can plot more graphs.
   M    models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl --- ccsm=>cesm, 
   M    models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl -- ccsm=>cesm, 
                     get aerdep file from clmexp clm_tool namelist
   M    models/lnd/clm/tools/ncl_scripts/RMSintrepid.dat ---- New data
   M    models/lnd/clm/tools/ncl_scripts/RMSbluefire.dat ---- New data
   M    models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl --- Get from clmexp namelist
   M    models/lnd/clm/tools/ncl_scripts/pergroPlot.ncl ----- Add ability to plot up to
                     five files, make sure lines are different, add success line to end.
   M    models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl - Do some operations with
                     out meta-data to save time and remove warnings
   M    models/lnd/clm/tools/ncl_scripts/README --------- Change ccsm=>cesm and improve
   M    models/lnd/clm/tools/interpinic/runinit_ibm.csh - Change ccsm=>cesm
   M    models/lnd/clm/tools/mkgriddata/mkvarctl.F90 ---- Correct documentation, ccsm=>cesm
   M    models/lnd/clm/tools/mkgriddata/mkgriddata.F90 -- ccsm=>cesm
   M    models/lnd/clm/tools/mkgriddata/README ---------- ccsm=>cesm
   M    models/lnd/clm/tools/mkdatadomain/addglobal.F90 - ccsm=>cesm

>>>>>>>>>> Changes comments of ccsm to cesm, add sitespf_pt config option, remove
>>>>>>>>>> -ndepsrc, add ndepmapalgo, switch prog_seasalt for progsslt, spmd for
>>>>>>>>>> nouse_mpiserial, change names of modes
   M    models/lnd/clm/bld/configure ---------------- ccsm=>cesm, +sitespf_pt,
               prog_seasalt=>progsslt, spmd=>nouse_mpiserial, modes changed to 
               ext_cesm, and clm_stndln, remove setting of SPMD cppdef
   M    models/lnd/clm/bld/queryDefaultNamelist.pl -- ccsm=>cesm
   M    models/lnd/clm/bld/queryDefaultXML.pm ------- Remove ability to use cam config 
               file, spmd=>nouse_mpiserial
   M    models/lnd/clm/bld/build-namelist ----------- ccsm=>cesm, remove -ndepsrc,
               add rcp to some settings, ccsm_seq=>clm_stndln, set start_ymd from
               runstart_date, add settings of ndepmapalgo, remove fndepdat/dyn/faerdep
   M    models/lnd/clm/bld/clm.cpl7.template -------- Remove -spmd, mode now ext_cesm,
               ccsm=>cesm
   M    models/lnd/clm/bld/README ------------------- CCSM=>CESM
   M    models/lnd/clm/bld/config_files/Makefile.in - SPMD=>NOUSE_MPISERIAL, ccsm=>cesm
   M    models/lnd/clm/bld/config_files/config_definition.xsl --- Titles to caption, 
               put valid_values under description
   M    models/lnd/clm/bld/config_files/config_sys_defaults.xml - spmd=>nouse_mpiserial
   M    models/lnd/clm/bld/config_files/config_definition.xml --- +sitespf_pt,
               comp_interface=>comp_intf, ccsm=>cesm, spmd=>nouse_mpiserial, mode
               valid values are: ext_cesm, clm_stndln

>>>>>>>>>> Remove ndepsrc/usr_ndepstream/fndepdat/fndepdyn/faerdep add mksrf_navyoor
>>>>>>>>>> Change comments from ccsm to cesm, exchange run_startdate for start_ymd, add
>>>>>>>>>> ndepmapalo, add stop_option/stop_n settings for spinup modes
   M    models/lnd/clm/bld/namelist_files/namelist_definition.xml --------- Remove
               ndepsrc/use_ndepstream/fndepdat/dyn/faerdep, ccsm=>cesm, add mksrf_navyoro,
               run_startdate, faerdep and fndepdat for aerdepregrid/ndepregrid tools,
               add 0.33x0.33 resolution for navyoro file
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml --- Remove
               ndepsrc add defaults when sitespf_pt is set
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ------ rcp6 datm_presaero
   M    models/lnd/clm/bld/namelist_files/namelist_defaults.xsl ----------- Add sitespf_pt
   M    models/lnd/clm/bld/namelist_files/namelist_definition.xsl --------- Headers to captions
   M    models/lnd/clm/bld/namelist_files/datm-build-namelist ------------- ccsm=>cesm
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ------- ccsm=>cesm,
               remove use_ndepstream, faerdep, fndepdat, fndepdyn
               add ndepmapalgo
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml - Add navy oro
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ------- Add 
               stop_option/stop_n for spinup modes, change start_ymd for run_startdate
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Add ndepmapalgo

>>>>>>>>>> Change config mode names (from ccsm_seq to clm_stndln), remove ndepsrc,
>>>>>>>>>> remove start_ymd, clm_demand just sets fpftdyn (fndepdat/dyn removed)
   M    models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml ---- mode
               changes to clm_stndln
   M    models/lnd/clm/bld/namelist_files/use_cases/glacier_mec.xml ----- mode
               changes to clm_stndln
   M    models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml ---- mode
               changes to clm_stndln
   M    models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml - mode
               changes to clm_stndln, remove start_ymd, clm_demand just sets fpftdyn
               remove ndepsrc
   M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml - mode
   M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml - mode
               changes to clm_stndln, remove start_ymd, clm_demand just sets fpftdyn
               remove ndepsrc
   M    models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml - mode
               changes to clm_stndln, clm_demand just sets fpftdyn remove ndepsrc
   M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml --- mode
               changes to clm_stndln, remove start_ymd, clm_demand just sets fpftdyn
               remove ndepsrc
   M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml - mode
               changes to clm_stndln, remove start_ymd, clm_demand just sets fpftdyn
               remove ndepsrc
   M    models/lnd/clm/bld/namelist_files/use_cases/pergro.xml -- Also output TSA
   M    models/lnd/clm/bld/namelist_files/use_cases/pergro0.xml - Also output TSA

>>>>>>>>>> Change so any scripts calls start with "./", ccsm=>cesm, remove ndepsrc
>>>>>>>>>> Use macro for PTS_MODE, use .submit rather than .run scripts.
>>>>>>>>>> Add bit about managing your data with link_dirtree, add more notes and
>>>>>>>>>> examples for PERGRO testing, add more notes about using batch for single-pt
>>>>>>>>>> mode
   M    models/lnd/clm/doc/UsersGuide/trouble_shooting.xml -- Add more about ccsm log file
   M    models/lnd/clm/doc/UsersGuide/config_cache.xml ------ Update from configure
   M    models/lnd/clm/doc/UsersGuide/single_point.xml ------ Add section on which mode
             Add warning about single-point on batch machines, remove warning about
             error that was fixed, remove notes about setting ndepsrc
   M    models/lnd/clm/doc/UsersGuide/special_cases.xml ----- Use .submit, add notes
             about using provided history files from bluefire for PERGRO testing, and
             add bit about TSA as well as TSOI, add more machines and examples of
             bad pergro for PERGRO examples.
   M    models/lnd/clm/doc/UsersGuide/tools.xml ------------- Remove ndepsrc stuff
   M    models/lnd/clm/doc/UsersGuide/preface.xml ----------- Talk about very latest updates.
             remove bit about PERGRO not validated
   M    models/lnd/clm/doc/UsersGuide/clm_ug.xml ------------ Update version, remove bug fix
   M    models/lnd/clm/doc/UsersGuide/appendix.xml ---------- 
   M    models/lnd/clm/doc/UsersGuide/adding_files.xml ------ Add bit about managing your
             data when you use link_dirtree, update table, remove ndepsrc
   M    models/lnd/clm/doc/UsersGuide/custom.xml ------------ Remove bit about rcp experimental
             comment out tables that cause docbook to fail with a seg fault.
   M    models/lnd/clm/doc/UsersGuide/pergro.jpg ------------ New data
   M    models/lnd/clm/doc/UsersGuide/Makefile -------------- Remove vandif bug fix
   M    models/lnd/clm/doc/Quickstart.userdatasets ---------- Shorten lines remove faerdep
             correct procedure
   M    models/lnd/clm/doc/Quickstart.GUIDE ----------------- Use .submit script
   M    models/lnd/clm/doc/UsersGuide/stylesheethtml2docbook.xsl - Change tables from
             informal to formal, using captions for titles, add template for bold.

>>>>>>>>>> Changes comments for CCSM to CESM, remove misc.h and preproc.h #includes
>>>>>>>>>> Remove use_ndepstream/fndepdat/fndepdyn/faerdep/set_*dep_from_file
>>>>>>>>>> Add u10_clm and va, add ability to perturb IC from startup finidat file
   M    models/lnd/clm/src/biogeochem/DUSTMod.F90 ----- CCSM=>CESM, remove misc/preproc.h
   M    models/lnd/clm/src/main/clm_comp.F90 ---------- CCSM=>CESM
   M    models/lnd/clm/src/main/clm_initializeMod.F90 - Remove use_ndepstream logic
              hardwire it to on
   M    models/lnd/clm/src/main/clm_glclnd.F90 -------- CCSM=>CESM
   M    models/lnd/clm/src/main/clmtypeInitMod.F90 ---- Add u10 and va
   M    models/lnd/clm/src/main/clm_atmlnd.F90 -------- Rm set_caerdep_from_file/dustdep
   M    models/lnd/clm/src/main/controlMod.F90 -------- Rm fndepdat, fndepdyn,
              use_ndepstream, faerdep, ccsm=>cesm
   M    models/lnd/clm/src/main/clm_time_manager.F90 -- ccsm=>cesm, remove misc/preproc.h
   M    models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 --- lnd_chkAerDep_mct just
              aborts if aerosols NOT sent from atm.
   M    models/lnd/clm/src/main/clm_driver.F90 ------------- Rm aerdep and old ndep interpoaltion
   M    models/lnd/clm/src/main/clm_varctl.F90 ------------- Rm set_caerdep_from_file/dustdep,
              faerdep, fndepdat, fndepdyn, use_ndepstream
   M    models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 - lnd_chkAerDep_mct just
              aborts if aerosols NOT sent from atm.
   M    models/lnd/clm/src/main/cpl_esmf/lnd_comp_mct.F90 -- ccsm=>cesm
   M    models/lnd/clm/src/main/surfrdMod.F90 ---------- ccsm=>cesm, remove misc/preproc.h
   M    models/lnd/clm/src/main/domainMod.F90 ---------- Rm misc/preproc.h, ccsm=>cesm
   M    models/lnd/clm/src/main/clmtype.F90 ------------ Add u10_clm, and va
   M    models/lnd/clm/src/main/histFldsMod.F90 -------- Add U10, and VA, and mv old U10 to U10_DUST
   M    models/lnd/clm/src/main/mkarbinitMod.F90 ------- Make into module, remove 
              misc/preproc.h, add seperate subroutine to perturb initial conditions
   M    models/lnd/clm/src/biogeophys/UrbanInitMod.F90 - Remove misc/preproc.h, 
              remove GRANDVIEW #ifdefs
   M    models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90 - Add u10/va, 
              remove misc/preproc.h and concurrent loops
   M    models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90  Add some PERGRO #ifdef
              remove misc/preproc.h
   M    models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --- Add perturbIC call
              remove misc/preproc.h and concurrent loops
   M    models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90 ---- Remove misc/preproc.h, 
              KO comments and concurrent loops
   M    models/lnd/clm/src/biogeophys/UrbanMod.F90 ------------ Remove misc/preproc.h,
              and GRANDVIEW #ifdefs

   M    README - Start with ./, and correct .build script name, and use .submit in exp

Summary of testing:

  bluefire interactive testing: All PASS except...
025 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  jaguar: All PASS except...
007 brB91 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 72+72 arb_ic .............FAIL! rc= 13
  jaguar interactive testing:
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  edinburgh/lf95 interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
  edinburgh/lf95: All PASS except...
005 smD91 TSM.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 10
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 5
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 smG56 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
013 smE91 TSM.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 96 arb_ic ............FAIL! rc= 10
014 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 10+38 arb_ic .........FAIL! rc= 5
015 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 arb_ic ......FAIL! rc= 5
018 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38 cold .......FAIL! rc= 13
019 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@2000 72+72 cold ....FAIL! rc= 11
025 smL51 TSM.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
026 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
027 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
029 smH41 TSM.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 96 cold FAIL! rc= 10
030 erH41 TER.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 5
031 brH41 TBR.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 5
033 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 10+38 cold ....FAIL! rc= 13
018 brR53 TBR.sh 17p_cnc13sc_do clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@1850 72+72 cold .FAIL! rc= 11
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
025 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 13
026 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 11

CLM tag used for the baseline comparison tests if applicable: clm4_0_11

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_11
Originator(s):  erik (Erik Kluzek)
Date: Fri Aug 27 14:14:37 MDT 2010
One-line Summary: New files for rcp6, fix MPI bug, update externals

Purpose of changes:

Add in new pftdyn and stream_ndep files for rcp=6.0. Fix MPI bug where send array was the same as receive array.
Fix problem with datm template on gust, and syntax errors for pt1_pt1 mode. Add start_tod to drv/scripts.

Bugs fixed (include bugzilla ID):
                                 1197 (MPI problem sending and receiving data in same array)
                                 1207 (Problem with datm template on gust)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1206 (Problem looping over a single year of CPLHIST forcing)
    http://bugs.cgd.ucar.edu/

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist:
   Add ndepmapalgo
   Move datasets just for clm tools to clm_tools namelist_defaults XML file

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm,
csm_share
   scripts    to scripts4_100730
   drv        to drvseq3_1_33
   datm       to datm8_100728
   csm_share  to share3_100802

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>> Add configure test file for serial
   A  models/lnd/clm/test/system/config_files/4p_vodsnrsc_ds

>>>>>>>>>>>> Add some files to test mksurfdata.pl script
   A  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850
   A  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850-2000

>>>>>>>>>>>> Put all files for clm-tools in seperate file
   A  models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml

>>>>>>>>>>>> Add new chapter on trouble shooting, add a script to limit
>>>>>>>>>>>> the line lengths, add style sheet to convert HTML XSL table
>>>>>>>>>>>> to docbook. Add file to fix vancouver problem.
   A  models/lnd/clm/doc/UsersGuide/trouble_shooting.xml
   A  models/lnd/clm/doc/UsersGuide/limitLineLen.pl
   A  models/lnd/clm/doc/UsersGuide/addxhtmlhead.pl
   A  models/lnd/clm/doc/UsersGuide/stylesheethtml2docbook.xsl
   A  models/lnd/clm/doc/UsersGuide/fixvan_datm.buildnml.diff

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Change some of the tests around
   M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M  models/lnd/clm/test/system/tests_pretag_edinburgh
   M  models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M  models/lnd/clm/test/system/tests_pretag_jaguar
   M  models/lnd/clm/test/system/tests_pretag_jaguar_nompi
   M  models/lnd/clm/test/system/tests_posttag_purempi_regression
   M  models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M  models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>>> Work with testing a bit, add mksurfdata.pl and drydep tests
   M  models/lnd/clm/test/system/README.testnames ---- Add "V" drydep test
   M  models/lnd/clm/test/system/test_driver.sh ------ Add pftdata, change
multi-processing a bit
   M  models/lnd/clm/test/system/TSMscript_tools.sh -- Fix some glitches
   M  models/lnd/clm/test/system/gen_test_table.sh --- Convert to xhtml
   M  models/lnd/clm/test/system/nl_files/clm_usrdat - Remove non-streams mode for ndep
and aerdep
   M  models/lnd/clm/test/system/input_tests_master -- Add mksurfdata.pl and drydep tests
             make scsnf 4x5 rather than 10x15

>>>>>>>>>>>> Add -nomv, usrname, and pftdyn options, add ability to run in 
>>>>>>>>>>>> a different directory, check for vegtyp files before running.
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl

>>>>>>>>>>>> Handle rcp's correctly, and handle datm streams for presaero files
>>>>>>>>>>>> and ndep streams files
   M  models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl -- default rcp=hist, set
             RCP to ncl script
   M  models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - add ability to handle
             usrname files, and handle ndep and aerdep streams files correctly

>>>>>>>>>>>> Move tools files into clm_tools default file, add ndepmapalgo
>>>>>>>>>>>> Work on the formatting of the files, do better with clm_usrdat_name
   M  models/lnd/clm/bld/queryDefaultNamelist.pl - Add clm_tools default file.
                  Don't limit list to -var, as now done in .pm file below.
   M  models/lnd/clm/bld/queryDefaultXML.pm ------ If -var set, don't process variables
                  that don't match
   M  models/lnd/clm/bld/config_files/config_definition.xsl - Change to lowercase
                  for xhtml standard, remove glacier list
   M  models/lnd/clm/bld/config_files/config_definition.xml - Put glc_nec in physics list
   M  models/lnd/clm/bld/build-namelist --------------------- Fix minor doc issues
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Add ndepmapalgo,
                  change formatting for GPTL options
   M  models/lnd/clm/bld/namelist_files/namelist_defaults.xsl ----- Improve formatting,
                  put note in table if All: res, masks, yrs, or sim_yr_rng
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl --- Improve formatting
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Remove mksrf_fvegtyp
                  files and fndepdat files for single-years only used for processing
tools
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Add in handling
                  of rcp's, and stream_fldfilename_ndep, remove fndepdat/dyn

>>>>>>>>>>>> Update to documentation from update to cesm1_0_rel_05
   M  models/lnd/clm/doc/UsersGuide/single_point.xml
   M  models/lnd/clm/doc/UsersGuide/get_Icaselist.pl
   M  models/lnd/clm/doc/UsersGuide/special_cases.xml
   M  models/lnd/clm/doc/UsersGuide/co2_streams.txt
   M  models/lnd/clm/doc/UsersGuide/tools.xml
   M  models/lnd/clm/doc/UsersGuide/preface.xml
   M  models/lnd/clm/doc/UsersGuide/clm_ug.xml
   M  models/lnd/clm/doc/UsersGuide/appendix.xml
   M  models/lnd/clm/doc/UsersGuide/adding_files.xml
   M  models/lnd/clm/doc/UsersGuide/custom.xml
   M  models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff
   M  models/lnd/clm/doc/UsersGuide/Makefile
   M  models/lnd/clm/doc/Quickstart.userdatasets
   M  models/lnd/clm/doc/KnownBugs
   M  models/lnd/clm/doc/README
   M  models/lnd/clm/src/main/ndepStreamMod.F90
   M  models/lnd/clm/src/main/surfrdMod.F90

>>>>>>>>>>>> Update to documentation from update to cesm1_0_rel_05
   M  Copyright
   M  README

Summary of testing:

  bluefire: All PASS except...
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
038 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 10
039 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -3+-7 arb_ic .......FAIL! rc= 5
040 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -5+-5 arb_ic .......FAIL! rc= 5
041 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 4
  bluefire interactive testing: All PASS except...
006 smHS3 TSM.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .FAIL! rc= 8
007 erHS3 TER.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -3+-3 arb_ic FAIL! rc= 5
008 brHS3 TBR.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -3+-3 arb_ic FAIL! rc= 5
009 blHS3 TBL.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .FAIL! rc= 4
025 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
026 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
030 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
065 sm9S4 TSMscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................FAIL! rc= 6
066 sm974 TSMscript_tools.sh mksurfdata mksurfdata.pl mksrfdt_1x1_brazil_1850-2000^tools__ds ....FAIL! rc= 6
  bluefire/CESM testing:
FAIL  SMS_RLA.f45_f45.I.bluefire
BFAIL SMS_RLA.f45_f45.I.bluefire.generate.clm4_0_11
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_10
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_10
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_10
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_10
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_10
FAIL  ERI.f19_g16.IG.bluefire.compare.clm4_0_10
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_10
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_11
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_10
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm4_0_10
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_10
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_10
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_10

CLM tag used for the baseline comparison tests if applicable: clm4_0_10

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_10
Originator(s):  erik (Erik Kluzek)
Date: Wed Aug  4 14:37:59 MDT 2010
One-line Summary: Update doc to cesm_rel05, bug-fixes, fix issues for single-point, mksurfdata/getregional scripts

Purpose of changes:

Use nn instead of copy for CO2 patch file. Update documentation to latest cesm version
05. Update externals. Some changes to build-namelist for generic single-point
simulations. Move tools XML files to clm_tools namelist_default file. Add 4x5 drydep
test, work with testing a bit. Add tests for getregional.pl and mksurfdata.pl scripts.
Add: usrname, nomv and pftdata options to mksurfdata.pl. Get RCP's working in getregional
script. Update getregional to handle ndep and aerdep streams, also get it to run in a
different directory. XML query wont test variables that don't match when -var option is
specified. Convert test table to xhtml. Move glc_nec to physics. Add option for
ndepmapalgo. Get faerdep and fndep streams files working right in
namelist_defaults_usrdat.xml file.

Bugs fixed (include bugzilla ID):
                                 1166 (get_regional script needs to be updated)
                                 1190 (add ndepmapalgo to ndep streams)
                                 1192 (Y1K problem for mksurfdata.pl)
                                 1193 (bug in reading GLCMASK)
                                 1207 (Problem with datm template on gust)

Update of datm also fixes several issues with datm for single pt simulations: 1173, 1175, 1176, 1181

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1197 (MPI problem sending and receiving data in same array)
                                 1206 (Problem looping over a single year of forcing)
    http://bugs.cgd.ucar.edu/

Type of tag: standard

Describe any changes made to build system: None

Describe any changes made to the namelist:
   Add ndepmapalgo
   Move datasets just for clm tools to clm_tools namelist_defaults XML file

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm, csm_share
   scripts    to scripts4_100730
   drv        to drvseq3_1_33
   datm       to datm8_100728
   csm_share  to share3_100802

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>> Add configure test file for serial
   A  models/lnd/clm/test/system/config_files/4p_vodsnrsc_ds

>>>>>>>>>>>> Add some files to test mksurfdata.pl script
   A  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850
   A  models/lnd/clm/test/system/nl_files/mksrfdt_1x1_brazil_1850-2000

>>>>>>>>>>>> Put all files for clm-tools in seperate file
   A  models/lnd/clm/bld/namelist_files/namelist_defaults_clm_tools.xml

>>>>>>>>>>>> Add new chapter on trouble shooting, add a script to limit
>>>>>>>>>>>> the line lengths, add style sheet to convert HTML XSL table
>>>>>>>>>>>> to docbook. Add file to fix vancouver problem.
   A  models/lnd/clm/doc/UsersGuide/trouble_shooting.xml
   A  models/lnd/clm/doc/UsersGuide/limitLineLen.pl
   A  models/lnd/clm/doc/UsersGuide/addxhtmlhead.pl
   A  models/lnd/clm/doc/UsersGuide/stylesheethtml2docbook.xsl
   A  models/lnd/clm/doc/UsersGuide/fixvan_datm.buildnml.diff

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Change some of the tests around
   M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M  models/lnd/clm/test/system/tests_pretag_edinburgh
   M  models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M  models/lnd/clm/test/system/tests_pretag_jaguar
   M  models/lnd/clm/test/system/tests_pretag_jaguar_nompi
   M  models/lnd/clm/test/system/tests_posttag_purempi_regression
   M  models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M  models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>>> Work with testing a bit, add mksurfdata.pl and drydep tests
   M  models/lnd/clm/test/system/README.testnames ---- Add "V" drydep test
   M  models/lnd/clm/test/system/test_driver.sh ------ Add pftdata, change multi-processing a bit
   M  models/lnd/clm/test/system/TSMscript_tools.sh -- Fix some glitches
   M  models/lnd/clm/test/system/gen_test_table.sh --- Convert to xhtml
   M  models/lnd/clm/test/system/nl_files/clm_usrdat - Remove non-streams mode for ndep and aerdep
   M  models/lnd/clm/test/system/input_tests_master -- Add mksurfdata.pl and drydep tests
             make scsnf 4x5 rather than 10x15

>>>>>>>>>>>> Add -nomv, usrname, and pftdyn options, add ability to run in 
>>>>>>>>>>>> a different directory, check for vegtyp files before running.
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl

>>>>>>>>>>>> Handle rcp's correctly, and handle datm streams for presaero files
>>>>>>>>>>>> and ndep streams files
   M  models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl -- default rcp=hist, set
             RCP to ncl script
   M  models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - add ability to handle
             usrname files, and handle ndep and aerdep streams files correctly

>>>>>>>>>>>> Move tools files into clm_tools default file, add ndepmapalgo
>>>>>>>>>>>> Work on the formatting of the files, do better with clm_usrdat_name
   M  models/lnd/clm/bld/queryDefaultNamelist.pl - Add clm_tools default file.
                  Don't limit list to -var, as now done in .pm file below.
   M  models/lnd/clm/bld/queryDefaultXML.pm ------ If -var set, don't process variables
                  that don't match
   M  models/lnd/clm/bld/config_files/config_definition.xsl - Change to lowercase
                  for xhtml standard, remove glacier list
   M  models/lnd/clm/bld/config_files/config_definition.xml - Put glc_nec in physics list
   M  models/lnd/clm/bld/build-namelist --------------------- Fix minor doc issues
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Add ndepmapalgo,
                  change formatting for GPTL options
   M  models/lnd/clm/bld/namelist_files/namelist_defaults.xsl ----- Improve formatting,
                  put note in table if All: res, masks, yrs, or sim_yr_rng
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl --- Improve formatting
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Remove mksrf_fvegtyp
                  files and fndepdat files for single-years only used for processing tools
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml - Add in handling
                  of rcp's, and stream_fldfilename_ndep, remove fndepdat/dyn

>>>>>>>>>>>> Update to documentation from update to cesm1_0_rel_05
   M  models/lnd/clm/doc/UsersGuide/single_point.xml
   M  models/lnd/clm/doc/UsersGuide/get_Icaselist.pl
   M  models/lnd/clm/doc/UsersGuide/special_cases.xml
   M  models/lnd/clm/doc/UsersGuide/co2_streams.txt
   M  models/lnd/clm/doc/UsersGuide/tools.xml
   M  models/lnd/clm/doc/UsersGuide/preface.xml
   M  models/lnd/clm/doc/UsersGuide/clm_ug.xml
   M  models/lnd/clm/doc/UsersGuide/appendix.xml
   M  models/lnd/clm/doc/UsersGuide/adding_files.xml
   M  models/lnd/clm/doc/UsersGuide/custom.xml
   M  models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff
   M  models/lnd/clm/doc/UsersGuide/Makefile
   M  models/lnd/clm/doc/Quickstart.userdatasets
   M  models/lnd/clm/doc/KnownBugs
   M  models/lnd/clm/doc/README
   M  models/lnd/clm/src/main/ndepStreamMod.F90
   M  models/lnd/clm/src/main/surfrdMod.F90

>>>>>>>>>>>> Update to documentation from update to cesm1_0_rel_05
   M  Copyright
   M  README

Summary of testing:

  bluefire: All PASS except...
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
055 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
056 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
057 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
058 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
009 blHS3 TBL.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .FAIL! rc= 4
025 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
026 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
030 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CESM testing: All PASS except...
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_10
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_09
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  edinburgh/lf95 interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
  edinburgh/lf95: All PASS except...
005 smD91 TSM.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 10
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 5
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 4
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG56 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
013 smE91 TSM.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 96 arb_ic ............FAIL! rc= 10
014 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 10+38 arb_ic .........FAIL! rc= 5
015 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 arb_ic ......FAIL! rc= 5
016 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 arb_ic ............FAIL! rc= 4
018 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38 cold .......FAIL! rc= 13
019 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@2000 72+72 cold ....FAIL! rc= 11
025 smL51 TSM.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
026 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
027 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
028 blL51 TBL.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 4
029 smH41 TSM.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 96 cold FAIL! rc= 10
030 erH41 TER.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 5
031 brH41 TBR.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 5
032 blH41 TBL.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 48 cold FAIL! rc= 4
033 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_09

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_09
Originator(s):  erik (erik)
Date: Mon Jun 14 00:02:12 MDT 2010
One-line Summary: Fix some small issues, update documentation, and externals

Purpose of changes:

Work on documentation for CESM1.0 release, with glcec changes, and namelist changes. Run
testing and fix bugs. Move documentation changes from release branch to trunk. Fix
getregional script for transient. Remove "At point 2" from lnd log files. Update
csm_share, and scripts version so can now run testing with lahey compiler. Get CO2 patch
file working.

Bugs fixed (include bugzilla ID):
                                 1092 (Problems running on dublin with datm8 with debug)
                                 1159 (date in fco2 file is not used)
                                 1160 (Fix mksurfdata.pl script to work with 1000-1004)
                                 1167 (doc. about running single point reduce pes)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1166 (get_regional script needs to be updated)
                                 1192 (Y1K problem for mksurfdata.pl)
                                 1193 (bug in reading GLCMASK)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: std-test

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm,
cism, csm_share
    scripts   to scripts4_100612
    drv       to drvseq3_1_31
    datm      to datm8_100612
    cism      to cism1_100608
    csm_share to share3_100607

List all files eliminated: None

List all files added and what they do: None

>>>>>>>>>>>> Add testing configure file
   A   models/lnd/clm/test/system/config_files/_nrcnsc_do

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Add CLM_USRDAT_NAME and getregional.pl tests
   M   models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M   models/lnd/clm/test/system/tests_pretag_edinburgh_nompi
   M   models/lnd/clm/test/system/tests_posttag_nompi_regression
   M   models/lnd/clm/test/system/README.testnames
   M   models/lnd/clm/test/system/TSMscript_tools.sh
   M   models/lnd/clm/test/system/nl_files/clm_usrdat
   M   models/lnd/clm/test/system/nl_files/getregional
   M   models/lnd/clm/test/system/input_tests_master
   M   models/lnd/clm/test/system/README

>>>>>>>>>>>> 
   M   models/lnd/clm/tools/ncl_scripts/getco2_historical.ncl ---- Add comment that 
                 date variable is NOT used
   M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl -- Add path to scripts
                 so can run from a different directory
   M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - Fix warnings and
                 allow some files to not be converted if not needed
   M   models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl ------- Re-order longitudes
                 so from -180-180 rather than 0-360

>>>>>>>>>>>> 
   M   models/lnd/clm/bld/queryDefaultXML.pm ----- Get working for usrdat better
   M   models/lnd/clm/bld/listDefaultNamelist.pl - Get working for usrdat files
   M   models/lnd/clm/bld/build-namelist --------- Allow lnd_res to be usrdat name
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Set year first/last
                 for datm_presaero for clim_2000
   M   models/lnd/clm/bld/namelist_files/datm-build-namelist -------- Don't allow 
                 prognostic for datm_presaero

>>>>>>>>>>>> Update documentation, add cprnc README to document
   M   models/lnd/clm/doc/UsersGuide/tools.xml
   M   models/lnd/clm/doc/UsersGuide/preface.xml
   M   models/lnd/clm/doc/UsersGuide/clm_ug.xml
   M   models/lnd/clm/doc/UsersGuide/adding_files.xml
   M   models/lnd/clm/doc/UsersGuide/appendix.xml
   M   models/lnd/clm/doc/UsersGuide/custom.xml
   M   models/lnd/clm/doc/UsersGuide/single_point.xml
   M   models/lnd/clm/doc/UsersGuide/Makefile
   M   models/lnd/clm/doc/UsersGuide/special_cases.xml
   M   models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff - Update patch to
          work with the latest datm with DATM_PRESAERO

>>>>>>>>>>>> Remove "at point 2" and fix esmf duplication from fix by Mariana
   M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90
   M   models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90

>>>>>>>>>>>> Update README files and use CESM in place of CCSM
   M   models/lnd/clm/doc/Quickstart.userdatasets
   M   models/lnd/clm/doc/IMPORTANT_NOTES
   M   models/lnd/clm/doc/KnownBugs
   M   models/lnd/clm/doc/README
   M   models/lnd/clm/doc/index.shtml
   M   Copyright
   M   README

Summary of testing:

  bluefire: All PASS except...
016 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 cold .............FAIL! rc= 5
017 smEH1 TSM.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 10
018 erEH1 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 5
019 brEH1 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 5
020 blEH1 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 4
021 smHN1 TSM.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 8
022 erHN1 TER.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -3+-7 cFAIL! rc= 3
023 brHN1 TBR.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -5+-5 cFAIL! rc= 3
024 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 3
025 smHO2 TSM.sh 17p_cnsc_dm clm_drydep 20000704:NONE:1800 10x15 USGS@2000 -90 cold .............FAIL! rc= 3
026 erHO2 TER.sh 17p_cnsc_dm clm_drydep 20000704:NONE:1800 10x15 USGS@2000 -3+-7 cold ...........FAIL! rc= 3
027 brHO2 TBR.sh 17p_cnsc_dm clm_drydep 20000704:NONE:1800 10x15 USGS@2000 -5+-5 cold ...........FAIL! rc= 3
028 blHO2 TBL.sh 17p_cnsc_dm clm_drydep 20000704:NONE:1800 10x15 USGS@2000 -90 cold .............FAIL! rc= 3
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 3
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 3
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 3
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 3
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 3
034 smH41 TSM.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 96 cold FAIL! rc= 3
035 erH41 TER.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 3
036 brH41 TBR.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 3
037 blH41 TBL.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 48 cold FAIL! rc= 3
038 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 3
039 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -3+-7 arb_ic .......FAIL! rc= 3
040 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -5+-5 arb_ic .......FAIL! rc= 3
041 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 3
042 smC61 TSM.sh _scnv_dh clm_std^nl_urb 20020101:NONE:1800 1.9x2.5 gx1v6 -6 startup ............FAIL! rc= 3
043 erC61 TER.sh _scnv_dh clm_std^nl_urb 20020101:NONE:1800 1.9x2.5 gx1v6 10+38 startup .........FAIL! rc= 3
044 brC61 TBR.sh _scnv_dh clm_std^nl_urb_br 20020101:NONE:1800 1.9x2.5 gx1v6 -3+-3 startup ......FAIL! rc= 3
045 blC61 TBL.sh _scnv_dh clm_std^nl_urb 20020101:NONE:1800 1.9x2.5 gx1v6 48 startup ............FAIL! rc= 3
046 smH52 TSM.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 96 cold ..........FAIL! rc= 3
047 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38 cold .......FAIL! rc= 3
048 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@2000 72+72 cold ....FAIL! rc= 3
049 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold ..........FAIL! rc= 3
050 smV61 TSM.sh _mec10sc_dh clm_glcmec 19980115:NONE:1800 1.9x2.5 gx1v6 96 arb_ic ..............FAIL! rc= 3
051 erV61 TER.sh _mec10sc_dh clm_glcmec 19980115:NONE:1800 1.9x2.5 gx1v6 10+38 arb_ic ...........FAIL! rc= 3
052 brV61 TBR.sh _mec10sc_dh clm_std 19980115:NONE:1800 1.9x2.5 gx1v6 72+72 arb_ic ..............FAIL! rc= 3
053 blV61 TBL.sh _mec10sc_dh clm_glcmec 19980115:NONE:1800 1.9x2.5 gx1v6 48 arb_ic ..............FAIL! rc= 3
054 smI59 TSMcnspinup.sh 17p_cnadspinupsc_dm 17p_cnexitspinupsc_dm 17p_cnsc_dm clm_std 20020115:NONEFAIL! rc= 3
055 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 3
056 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 3
057 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 3
058 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 3
059 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 3
060 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 3
061 brL58 TBR.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 3
062 blL58 TBL.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 48 arb_ic ...............FAIL! rc= 3
063 smJ61 TSM.sh 4p_casasc_dh clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 3
064 erJ61 TER.sh 4p_casasc_dh clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 3
065 brJ61 TBR.sh 4p_casasc_dh clm_std^nl_urb_br 20021230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 3
066 blJ61 TBL.sh 4p_casasc_dh clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 3
067 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v6 48 arb_ic .....FAIL! rc= 3
  bluefire interactive testing: All PASS except...
009 blHS3 TBL.sh _nrcnsc_do clm_usrdat 20030101:NONE:1800 13x12pt_f19_alaskaUSA gx1v6 -6 arb_ic .FAIL! rc= 5
021 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic FAIL! rc= 5
025 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
026 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
030 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
062 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 3
063 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 3
064 smZ94 TSMtools.sh mkdatadomain tools__ds namelist ...........................................FAIL! rc= 3
065 sm9S4 TSMscript_tools.sh ncl_scripts getregional_datasets.pl getregional ....................FAIL! rc= 3
  bluefire/CESM testing: All PASS except...
BFAIL SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_08 
BFAIL ERI.f19_g16.IG.bluefire.compare.clm4_0_08 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_09 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_08 
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 smV23 TSM.sh _mec10sc_do clm_glcmec 19980115:NONE:1800 48x96 gx3v7 96 arb_ic ................FAIL! rc= 8
026 erV23 TER.sh _mec10sc_do clm_glcmec 19980115:NONE:1800 48x96 gx3v7 10+38 arb_ic .............FAIL! rc= 5
027 brV23 TBR.sh _mec10sc_do clm_std 19980115:NONE:1800 48x96 gx3v7 72+72 arb_ic ................FAIL! rc= 5
  jaguar/CESM testing: All PASS
  edinburgh/lf95 interactive testing: All PASS except...
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 5
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
008 blAL4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -10 cold ...............FAIL! rc= 5
012 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 5
  edinburgh/lf95: All PASS except...
005 smD91 TSM.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 10
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 5
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 4
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG56 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
013 smE91 TSM.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 96 arb_ic ............FAIL! rc= 10
014 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 10+38 arb_ic .........FAIL! rc= 5
015 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 arb_ic ......FAIL! rc= 5
016 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 arb_ic ............FAIL! rc= 4
018 erH52 TER.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38 cold .......FAIL! rc= 13
019 brH52 TBR.sh 17p_cnsc_dm clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@2000 72+72 cold ....FAIL! rc= 11
025 smL51 TSM.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
026 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
027 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
028 blL51 TBL.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 4
029 smH41 TSM.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 96 cold FAIL! rc= 10
030 erH41 TER.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 5
031 brH41 TBR.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 5
032 blH41 TBL.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 48 cold FAIL! rc= 4
033 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_08

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_08
Originator(s):  erik (erik)
Date: Fri Jun  4 01:25:39 MDT 2010
One-line Summary: Snow hydrology bug fix from Keith and Dave

Purpose of changes:

SnowHydrology bug fix from Keith Oleson. For test-suite, make default to send aerosol
data through datm. Update version of cism, scripts and datm. Remove some of the old aerdep
stuff from the XML database as we now are using presaero from datm (leave 1-deg and
2-deg).

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1166 (get_regional script needs to be updated)
                                 1192 (Y1K problem for mksurfdata.pl)
                                 1193 (bug in reading GLCMASK)
                                 1197 (MPI problem sending and receiving data in same array)
                                 1206 (Problem looping over a single year of forcing)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system: none

Describe any changes made to the namelist: Move datm_presaero to overall defaults

List any changes to the defaults for the boundary datasets:
    Remove all faerdep files except f09 and f19

Describe any substantial timing or memory changes: None

Code reviewed by: self
    code changes come from Keith Oleson and Dave Lawrence

List any svn externals directories updated (csm_share, mct, etc.):  scripts, cism and drv
   scripts to scripts4_100603a
   drv     to drvseq3_1_29
   cism    to cism1_100603

List all files eliminated: None

List all files added and what they do:

   A   models/lnd/clm/test/system/config_files/17p_cnsc_m

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/test/system/nl_files/clm_ndepdyn - Switch demand for ndepdyn for
          ndepsrc stream

   M   models/lnd/clm/bld/build-namelist ----- Get datm_presaero if not null
            do NOT set faerdep
   M   models/lnd/clm/bld/clm.cpl7.template -- Set datm_presaero by DATM_PRESAERO
            if datm or to prognostic if not (so aerosol dep require from atm)

   M   models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Set
            datm_presaero by resolution, sim_year, sim_year_range and rcp
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ---- Remove datm_presaero
   M   models/lnd/clm/bld/namelist_files/datm-build-namelist ----------- Set
            datm_presaero by resolution, sim_year, sim_year_range and rcp
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- Remove
            all faerdep files except for f09 and 19

   M   models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90 - Snow hydrology fix

Summary of testing:

  bluefire interactive testing: All PASS up to...
014 smJ74 TSM.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test
-1100 arb_ic FAIL! rc= 10
  bluefire/CCSM testing: All PASS except..
FAIL  SMS_RLB.f45_f45.I.bluefire 
BFAIL SMS_RLB.f45_f45.I.bluefire.generate.clm4_0_08 
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_06 
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_06 
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_06 
FAIL  PST.f45_g37.I1850.bluefire.compare.clm4_0_06 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_06 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare_hist.clm4_0_06 
FAIL  ERS_E.f19_g16.I1850.bluefire.compare.clm4_0_06 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_06 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_08 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_06 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_06 
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm4_0_06 
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_06 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_06 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_06 
   Extra testing:
PASS  ERI.f19_g16.IG.bluefire
Make sure answers agree with /OLESON/csm/ccsm4_0_beta52_ndepaer other than VOC fields
Test that F case will configure..
create_newcase -compset F -case testF -res f19_g16 -mach bluefire -skip_rundb

CLM tag used for the baseline comparison tests if applicable: clm4_0_07

Changes answers relative to baseline: YES

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: ALL
    - what platforms/compilers: ALL
    - nature of change: larger than roundoff/same climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
       
   - platform/compilers: IBM
   - compset (and additional configure options): I1850CN
   - build-namelist options (or complete namelist): -ndepsrc stream

   MSS location of control simulations used to validate new climate:

  /OLESON/csm/ccsm4_0_beta52_ndepaer
  /OLESON/csm/ccsm4_0_beta52_ndepaertrans

   The above is identical to this tag (other than the two VOC fields that changed)
	
===============================================================
===============================================================
Tag name:  clm4_0_07
Originator(s):  erik (erik)
Date: Thu Jun  3 21:22:46 MDT 2010
One-line Summary: Some cleanup/fix bugs, add RTM var, add albice to namelist, allow last-millenium in mksurfdata, allow setting of datm_presaero in clm test-suite

Purpose of changes:

Fix mksurfdata.pl, to correctly create 1000-1004 test datasets. Fix drydep for OpenMP.
Update 1x1_tropicAtl_1000-1004 test fsurdat file. Move glc_grid from configure to
build-namelist. Add in alb_ice to namelist. Start adding in the capability to handle
mksurfdata from 0850-1850AD, put all mksrf_fvegtyp files in XML database (remove some of
the sample pftdyn text files). New RTM field on history output from Sean (VOLR and
VOLR_ICE, only VOLR output by default). Allow use of aerosol data from datm for I cases
in the clm test suite. Split out datm-build-namelist from clm build-namelist (put in
bld/namelist_files).

Bugs fixed (include bugzilla ID):
                                 1162 (OpenMP bug with dry-deposition code in clm)
                                  883 (aerosol deposition not from atm)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1164 (Restart trouble for CN13 on gust...)
                                 1165 (Restart trouble for scaled harvest test on gust)
                                 1166 (get_regional script needs to be updated)
                                 1192 (Y1K problem for mksurfdata.pl)
                                 1193 (bug in reading GLCMASK)
                                 1197 (MPI problem sending and receiving data in same array)
                                 1206 (Problem looping over a single year of forcing)
    http://bugs.cgd.ucar.edu/

Type of tag: standard

Describe any changes made to build system: Move glc_grid to build-namelist
     remove esmf_libdir, fix ccsm_bld so will build threaded properly

Describe any changes made to the namelist: Add albice to namelist
   Add new history fields VOLR and VOLR_ICE

      VOLR     RTM storage: LIQ  (m3)
      VOLR_ICE RTM storage: ICE  (m3)

List any changes to the defaults for the boundary datasets:
  New datasets for 1x1_tropicAtl 1000 tests

Describe any substantial timing or memory changes: None

Code reviewed by: self, VOLR changes come from Sean Swenson

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, pio
    scripts to scripts4_100601
    drv     to drvseq3_1_28
    pio     to pio1_1_1

List all files eliminated:

>>>>>>>>>>>>>>> Remove mksurdata pftdyn text files, let XML database create them
   D  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr2000.txt
   D  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850.txt
   D  models/lnd/clm/tools/mksurfdata/pftdyn_rcp6.0_simyr1850-2100.txt
   D  models/lnd/clm/tools/mksurfdata/pftdyn_rcp2.6_simyr1850-2100.txt
   D  models/lnd/clm/tools/mksurfdata/pftdyn_rcp4.5_simyr1850-2100.txt
   D  models/lnd/clm/tools/mksurfdata/pftdyn_rcp8.5_simyr1850-2100.txt

List all files added and what they do:

>>>>>>>>>>>>>>> Split out datm part of build-namelist into it's own script
   A  models/lnd/clm/bld/namelist_files/datm-build-namelist

   A  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr2000-2000.txt -- Same as
         old file with 2000.txt name rather than 2000-2000.txt name.

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>> Move glc_grid to build-namelist, remove kraken
   M  models/lnd/clm/test/system/config_files/_mec10sc_dh
   M  models/lnd/clm/test/system/config_files/_mec10sc_dm
   M  models/lnd/clm/test/system/config_files/_mec10sc_do
   M  models/lnd/clm/test/system/config_files/_mec10sc_ds
   M  models/lnd/clm/test/system/config_files/_mec10sc_h
   M  models/lnd/clm/test/system/config_files/_mec10sc_m
   M  models/lnd/clm/test/system/config_files/_mec10sc_o
   M  models/lnd/clm/test/system/test_driver.sh --------- Remove kraken, update dataroot
            for bluefire, and tempworkspacefor intrepid
   M  models/lnd/clm/test/system/CLM_runcmnd.sh --------- Remove kraken
   M  models/lnd/clm/test/system/nl_files/clm_drydep ---- Change drydep to drv_drydep

>>>>>>>>>>>>>>> Use XML database for pftdyn files, have mksrfdata.pl write out pftdyn files 
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig - change pftdyn file name
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.regional ---- change pftdyn file name
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn ------ start at 1850
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.singlept ---- change pftdyn file name
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.namelist ---- change pftdyn file name
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl ---------- Get mksrf_vegtyp filenames
            from XML database for all files, and write out pftdyn files with them
            also get working for 1000-1004 test cases (specifically for 1x12_tropicAtl 
            test case)
   M  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850-2005.txt - Use CSMDATA versions
         of 1850 and 2000 files

>>>>>>>>>>>>>>> Move glc_grid to namelist, fix ccsm_bld=on, add datm_presaero
>>>>>>>>>>>>>>> Only do COLD start for startup type
   M  models/lnd/clm/bld/configure --------------- Remove glc_grid and esmf_libdir
               add in control of CCSM_VOC, set compile_threaded for ccsm_bld on,
   M  models/lnd/clm/bld/queryDefaultNamelist.pl - Remove double reading of namelist_defaults_overall.xml
   M  models/lnd/clm/bld/queryDefaultXML.pm ------ Add csmdata to beginning of file, only
              if it's a relative pathname (to handle instances of /cgd/tss for mksrf_vegtyp files)
   M  models/lnd/clm/bld/config_files/config_definition.xml - Remove glc_grid/esmf_libdir
   M  models/lnd/clm/bld/listDefaultNamelist.pl --- Move glc_grid to namelist vars
   M  models/lnd/clm/bld/build-namelist ----------- Add in glc_grid, and datm_presaero
             change -drydep to -drv_drydep option, set glc_nthreads, outnc_large_files
             and albice if glc_nec>0, move datm settings to own datm-build-namelist.
   M  models/lnd/clm/bld/clm.cpl7.template -------- Move glc_grid to build-namelist,
             remove outnc_large_files setting (now in build-namelist), only do
             COLD start for startup type (NOT for hybrid or branch).

>>>>>>>>>>>>>>> Add albice/glc_grid/datm_presaero/outnc_large_files
>>>>>>>>>>>>>>> New datasets for 1x1_tropicAtl 1000 tests
>>>>>>>>>>>>>>> Add in all mksrf_fvegtyp files and include last-millenium
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml ------ Add in albice, 
             and glc_* settings for drv (glc_nthreads, glc_ntasks etc.), add presaero
             datam_presaero, datm_file_aero, datm_year_first_aero, datm_year_last_aero,
             datm_year_align_aero, and glc_grid. Add 0.5x0.5 resolution (for mksurfdata)
             and some premillenial years (850,1100,1350,1600) and sim-year ranges
             (850-1100,1100-1350,1350-1600,1600-1850)
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Set default
             masks here, and add in glc_grid default
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ---- Add in some 
             new domain files that are in datm template, and add in datm_presaero
             settings needed: datm_file_aero, datm_aero_streams, datm_year_first_aero
Â             datm_year_last_aero, and datm_year_align_aero
   M  models/lnd/clm/bld/namelist_files/namelist_defaults.xsl --------- Show
             datm_presaero setting if set.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- Add
             outnc_large_files, albice, and move mask to overall, update
             1x1_tropicAtl files for 1000, 1000-1004, add in all mksrf_fvegtyp
             files for all scenarios and last-millenium. Add in diri and diro.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ----- Get URL
             svn keyword set properly.

>>>>>>>>>>>>>>> Put datm/drv settings on bottom (only for mode=ccsm_seq)
>>>>>>>>>>>>>>> set datm_presaero and data_cycle_beg/end years
   M  models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml -- default
                datm_presaero is clim_2000
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml - default
                datm_presaero is rcp8.5, beg/end year 1972-2004
   M  models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml - default
                datm_presaero is rcp8.5, beg/end year 1972-2004
   M  models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml ------------ default
                datm_presaero is trans_1850-2000, beg/end year 1948-1972, co2=386.9
   M  models/lnd/clm/bld/namelist_files/use_cases/glacier_mec.xml ---------------- default
                datm_presaero is clim_2000
   M  models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml --------------- default
                datm_presaero is clim_1850, beg/end year 1948/1972
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml - default
                datm_presaero is rcp2.6, beg/end year 1972-2004
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml --- default
                datm_presaero is rcp6.0, beg/end year 1972-2004
   M  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml - default
                datm_presaero is rcp4.5, beg/end year 1972-2004

>>>>>>>>>>>>>>> Add in albice to namelist, add VOLR and VOLR_ICE to history files
>>>>>>>>>>>>>>> always call interpMonthlyVeg for drydep
   M  models/lnd/clm/src/biogeochem/DryDepVelocity.F90 - Remove interpMonthlyVeg
             call as coming from a threaded region
   M  models/lnd/clm/src/main/clm_comp.F90 ------------- Call interpMonthlyVeg 
             for drydep even if CN is on
   M  models/lnd/clm/src/main/controlMod.F90 ----------- Add albice
   M  models/lnd/clm/src/main/clm_varcon.F90 ----------- Remove albice
   M  models/lnd/clm/src/main/clm_driver.F90 ----------- Always call interpMonthlyVeg
             if drydep is on (even when NOT doalb)
   M  models/lnd/clm/src/main/histFldsMod.F90 ---------- Add VOLR and VOLR_ICE
             (VOLR_ICE is an optional field)
   M  models/lnd/clm/src/riverroute/RtmMod.F90 --------- Handle volr under runoff
             type, rather than as local variable
   M  models/lnd/clm/src/riverroute/RunoffMod.F90 ------ Add volr, volrlnd, volr_nt1/2
   M  models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 Add albice as public var
             that can be set in controlMod on namelist

Summary of testing:

  bluefire: All PASS except (up to test 061 nl_crcrop)
061 brL58 TBR.sh _sc_dh clm_std^nl_crcrop
004 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -6 arb_ic ...................FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 7
011 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 arb_ic ............FAIL! rc= 7
020 blEH1 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 7
024 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 7
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
037 blH41 TBL.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 48 cold FAIL! rc= 7
045 blC61 TBL.sh _scnv_dh clm_std^nl_urb 20020101:NONE:1800 1.9x2.5 gx1v6 48 startup ............FAIL! rc= 7
  bluefire interactive testing: All PASS up to...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing: All PASS except..
FAIL  ERI.f19_g16.IG.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_06


  bluefire/extra CCSM testing:
Make sure answers agree with /OLESON/csm/ccsm4_0_beta52_ndepaer other than VOC fields
  (when snowhydrology changes are put in)

  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 10+38 cold ....FAIL! rc= 13
018 brR53 TBR.sh 17p_cnc13sc_do clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@1850 72+72 cold .FAIL! rc= 11
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
025 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coFAIL! rc= 13
026 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coFAIL! rc= 11

CLM tag used for the baseline comparison tests if applicable: clm4_0_06

Changes answers relative to baseline: no bit-for-bit (except omp active stand-alone tests)
   The standalone tests with OpenMP on are different because the previous tag
   wasn't building with OpenMP

===============================================================
===============================================================
Tag name:  clm4_0_06
Originator(s):  erik (erik)
Date: Wed May 26 10:35:26 MDT 2010
One-line Summary: Update gglc to cism

Purpose of changes:

Changes from jwolfe to lnd_comp* subroutines to exchange cism fields. Requires an update
to the driver for the index of the fieldnames passed. Change paths of gglc glc_grid files
from gglc to cism. Make stream the default for all resolutions for ndepsrc.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1162 (OpenMP bug with dry-deposition code in clm)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system:
    Change name of ice model from gglc to cism
    Change list of fields exchanged with cism

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
     Change pathnames for gglc fglcmask datasets to cism

Describe any substantial timing or memory changes: None

Code reviewed by: self, jwolfe, lipscomb

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, cism
    scripts  to scripts4_100525
    drv      to drvseq3_1_26
    cism     to cism1_100525b

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

    M   models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Change default
           of ndepsrc for f19 and f09 to stream
    M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- Change pathnames
           for fglcmask files to pathame with cism instead of gglc

    M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 ---------------- Pass a different
           set of fields for sno (needed for update to cism)

    M   models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 -------------- Pass a different
           set of fields for sno (needed for update to cism)

Summary of testing:

  bluefire/CCSM testing:
FAIL  ERI.f19_g16.IG.bluefire
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_06
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_05
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_05
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_05
  bluefire/CCSM extra testing:
PASS  SMS.f19_g16.IG.bluefire
PASS  ERS.f19_g16.IG.bluefire

CLM tag used for the baseline comparison tests if applicable: clm4_0_05

Changes answers relative to baseline: Only when glc is active
      Or for f19 and f09 with CN as now ndepsrc streams is the default for all resolutions
      (previously ndepsrc data was the default for f19 and f09)

===============================================================
===============================================================
Tag name:  clm4_0_05
Originator(s):  erik (erik)
Date: Tue May 25 15:13:30 MDT 2010
One-line Summary: Move Nitrogen deposition stream branch to trunk

Purpose of changes:

Move branch that treats ndepdyn files as streams to trunk. Change csm_share to have a
simpler normalization for coszen scaling (from dlawren/kauff in datm/csm_share). Fix
fragile code in clm_atmlnd, from Mariana. Update to datm8 that can set streams for
aerosols. Fix template so that CLM_BLDNML_OPTS is active. Update scripts and get in 
other new finidat files, change clm test list, include _E test and IG f19 test.

Bugs fixed (include bugzilla ID):
                                 1161 (New history fields added that should NOT be)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1162 (OpenMP bug with dry-deposition code in clm)
                                 1163 (finidat file has a bunch of NaN's in it)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: Add -ndepsrc option to build-namelist

List any changes to the defaults for the boundary datasets: 
   Add new datasets for Nitrogen deposition streams files (same as fndepdyn files)
   Remove fndepdat/fndepdyn files for resolutions other than f09 and f19

Describe any substantial timing or memory changes: None

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm, csm_share
   scripts   to scripts4_100524b
   drv       to drvseq3_1_23
   datm      to datm8_100420
   csm_share to share3_100423

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>>> Handle Nitrogen deposition streams
A    models/lnd/clm/src/main/ndepStreamMod.F90

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>> Add some CN drydep tests for hybrid/open-MP
M    models/lnd/clm/test/system/tests_pretag_jaguar
M    models/lnd/clm/test/system/input_tests_master

>>>>>>>>>>>> Add ability to handle ndep streams namelists
>>>>>>>>>>>> Add ability to set CLM_BLDNML_OPTS
M    models/lnd/clm/bld/build-namelist
M    models/lnd/clm/bld/clm.cpl7.template
M    models/lnd/clm/bld/namelist_files/namelist_definition.xml
M    models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml
M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
>>>>>>>>>>>> Set ndepstreams variables if ndepsrc=stream, otherwise set fndep files
M    models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml
M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
M    models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
M    models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
M    models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml
M    models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml

>>>>>>>>>>>> Handle new ndep streams namelist and namelist variables
>>>>>>>>>>>> Remove misc.h and preproc.h #includes
M    models/lnd/clm/src/main/clm_comp.F90 ---------- Renumber starting at 1 not 0
M    models/lnd/clm/src/main/clm_initializeMod.F90 - Handle initialization both
            for ndep streams and old ndep handling
M    models/lnd/clm/src/main/aerdepMod.F90 --------- Check if allocated before allocate
M    models/lnd/clm/src/main/iniTimeConst.F90 ------ Move setting of ndep out of here
M    models/lnd/clm/src/main/clm_atmlnd.F90 -------- Remove fragile code
M    models/lnd/clm/src/main/controlMod.F90 -------- Handle use_ndepstream
M    models/lnd/clm/src/main/clm_varctl.F90 -------- Add use_ndepstream
M    models/lnd/clm/src/main/clm_driver.F90 -------- Add ndep_interp if use_ndepstream
             and first and last years are different
M    models/lnd/clm/src/main/ndepFileMod.F90 ------- Make fndepdat optional input so
             can do this way (old way) or ndep streams (new way).
M    models/lnd/clm/src/main/clm_glclnd.F90 -------- Change order of vars from Bill Lipscomb

M    models/lnd/clm/src/main/areaMod.F90 - Add interfaces for MCT datatypes

M    models/lnd/clm/src/main/clmtypeInitMod.F90 - Remove unfilled history vars
M    models/lnd/clm/src/main/clmtype.F90 -------- Remove unfilled history vars
M    models/lnd/clm/src/main/histFldsMod.F90 ---- Remove unfilled history vars, add QTOPSOIL
         as an optional history variable.
M    models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 - Handle fragile code mapping with MCT
M    models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 --- Handle fragile code mapping with MCT

Summary of testing:

  bluefire: All PASS except...
029 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
030 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
031 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
032 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
033 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
037 blH41 TBL.sh 17p_cnsc_dh clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 48 cold FAIL! rc= 7
049 blH52 TBL.sh 17p_cnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold ..........FAIL! rc= 7
055 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
056 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
057 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
058 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
  bluefire interactive testing: All PASS except...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
040 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:NONE:1800 1x1_brazil navy -670 arb_ic ............FAIL! rc= 7
048 blHQ4 TBL.sh _nrcnsc_ds clm_drydep 20000214:NONE:1800 1x1_brazil navy@2000 -150 cold ........FAIL! rc= 7
  bluefire/CCSM testing: All PASS except...
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm4_0_04
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_04
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm4_0_04
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_04
FAIL  SMS_ROA.f45_f45.I.bluefire.compare_hist.clm4_0_04
FAIL  SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_04
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm4_0_04
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm4_0_04
FAIL  PST.f45_g37.I1850.bluefire.compare.clm4_0_04
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_04
BFAIL ERS_E.f19_g16.I1850.bluefire.compare.clm4_0_04
FAIL  ERI.f19_g16.IG.bluefire
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_04
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_05
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_04
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm4_0_04
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm4_0_04
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm4_0_04
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm4_0_04
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_04
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
017 erR53 TER.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 10+38 cold ....FAIL! rc= 13

CLM tag used for the baseline comparison tests if applicable: clm4_0_04

Changes answers relative to baseline: Yes!

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: same climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
        ndepaer01_clm3_7_15 + SnowHydrology changes
   - platform/compilers: IBM
   - compset (and additional configure options): I1850CN
   - build-namelist options (or complete namelist): -ndepsrc stream

   MSS location of control simulations used to validate new climate:

  /OLESON/csm/ccsm4_0_beta52_ndepaer
  /OLESON/csm/ccsm4_0_beta52_ndepaertrans
   
===============================================================
===============================================================
Tag name:  clm4_0_04
Originator(s):  erik (erik)
Date: Thu May 20 10:57:54 MDT 2010
One-line Summary: New namelist items: ice_runoff, scaled_harvest, carbon_only, new 
    RTM hist vars, new finidat files, update esmf interface, turn off aerosol read quicker

Purpose of changes:

Redo all fndepdyn datasets for f19. Add namelist option to turn off ice-flow and send it
to liquid runoff: ice_runoff (by default .true.).  Add new coefficients for harvest from
Johann, and add ability to trigger it on and off for backwards compatibility
(scaled_harvest, by default .false.). Change SUPLN from CPP token to carbon_only namelist
item. Add in new RTM variable to history files from Sean. Add in T31 1850/2000 CN/non-CN
and 2-deg 2000 CNDV finidat files.  Turn off reading of aerosol/dust at initialization
rather than run time, so files aren't even opened if CAM is passing data to clm. Update
lnd_comp_esmf to same as mct interface.

New history fields are incorrect. This is bug 1161. Since, time-lines are critical
and testing was completed, these changes will go in, but will be removed next week.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1161 (New history fields added that should NOT be)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system: Remove SUPLN #ifdef change to namelist option

Describe any changes made to the namelist: Add namelist items

    ice_runoff     = If true, river runoff will be split up into liquid and ice streams,
               otherwise ice runoff will be zero and all runoff directed to liquid stream
    scaled_harvest = If true, harvesting will be scaled according to coeffecients
                     determined by Johann Feddema, 2009
    carbon_only    = If true, and CLMCN carbon-nitrogen model is on, Nitrogen will be
                     prescribed rather than prognosed

List any changes to the defaults for the boundary datasets:
    New fndepdyn files with correct time coordinate
    New finidat files for T31 1850/2000 and f19 2000 for CNDV

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):  None

List all files eliminated:

>>>>>>>>>>>>>> Remove SUPLN build tests
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_h
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_m
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_o
    D    models/lnd/clm/test/system/config_files/_cnnsc_h
    D    models/lnd/clm/test/system/config_files/_cnnsc_m
    D    models/lnd/clm/test/system/config_files/_cnnsc_o
    D    models/lnd/clm/test/system/config_files/17p_nrcnnsc_ds
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_dh
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_dm
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_do
    D    models/lnd/clm/test/system/config_files/_cnnsc_dh
    D    models/lnd/clm/test/system/config_files/17p_cnnsc_ds
    D    models/lnd/clm/test/system/config_files/_cnnsc_dm
    D    models/lnd/clm/test/system/config_files/_cnnsc_do
    D    models/lnd/clm/test/system/config_files/_cnnsc_ds

>>>>>>>>>>>>>> Remove namelist files no longer used
    D    models/lnd/clm/test/system/nl_files/scam
    D    models/lnd/clm/test/system/nl_files/ext_ccsm_seq_cam
    D    models/lnd/clm/test/system/nl_files/nl_glcsmb
    D    models/lnd/clm/test/system/nl_files/scam_prep

List all files added and what they do:

>>>>>>>>>>>>>> Add ice_runoff=.false., scaled_harvest=.true., and carbon_only tests
    A    models/lnd/clm/test/system/nl_files/nl_noicertm_sclharv
    A    models/lnd/clm/test/system/nl_files/nl_cn_conly

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Switch SUPLN tests for carbon_only
>>>>>>>>>>>>>> Add ice_runoff=.false., scaled_harvest=.true tests
    M    models/lnd/clm/test/system/tests_pretag_bluefire
    M    models/lnd/clm/test/system/tests_pretag_bluefire_nompi
    M    models/lnd/clm/test/system/config_files/README
    M    models/lnd/clm/test/system/tests_pretag_edinburgh
    M    models/lnd/clm/test/system/tests_pretag_jaguar
    M    models/lnd/clm/test/system/tests_posttag_breeze
    M    models/lnd/clm/test/system/README.testnames
    M    models/lnd/clm/test/system/tests_pretag_jaguar_nompi
    M    models/lnd/clm/test/system/tests_posttag_purempi_regression
    M    models/lnd/clm/test/system/tests_posttag_hybrid_regression
    M    models/lnd/clm/test/system/input_tests_master
    M    models/lnd/clm/test/system/tests_posttag_nompi_regression

>>>>>>>>>>>>>> Remove setting of supln to off
    M    models/lnd/clm/test/system/config_files/17p_cnsc_dh
    M    models/lnd/clm/test/system/config_files/17p_cnsc_dm
    M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
    M    models/lnd/clm/test/system/config_files/17p_cnsc_do
    M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
    M    models/lnd/clm/test/system/config_files/17p_cnc13sc_do

>>>>>>>>>>>>>> Remove SUPLN from configure
    M    models/lnd/clm/bld/configure
    M    models/lnd/clm/bld/config_files/config_definition.xml

>>>>>>>>>>>>>> Add carbon_only, scaled_harvest and ice_runoff options
>>>>>>>>>>>>>> T31 1850/2000 finidat files, f19 CNDV 2000 finidat file
>>>>>>>>>>>>>> Add error checking, change fndepdyn files for ones with
>>>>>>>>>>>>>> corrected time axis.
    M    models/lnd/clm/bld/build-namelist
    M    models/lnd/clm/bld/namelist_files/namelist_definition.xml
    M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

>>>>>>>>>>>>>> Remove SUPLN #ifdef for carbon_only namelist
    M    models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 - Correct comment
    M    models/lnd/clm/src/biogeochem/CNAllocationMod.F90 ---- Switch SUPLN for carbon_only
    M    models/lnd/clm/src/biogeochem/DryDepVelocity.F90 ----- Remove ltype as duplicated

>>>>>>>>>>>>>> Add carbon_only, scaled_harvest, and ice_runoff options
>>>>>>>>>>>>>> Add new RTM history variables
    M    models/lnd/clm/src/main/clmtypeInitMod.F90 ----------- Add res_sno, topo_ndx,
                topo_slope, var_track, var_track2, frost_table, zwt_perched,
                qflx_top_soil, qflx_snow_out, qflx_drain_perched
    M    models/lnd/clm/src/main/pftdynMod.F90 ---------------- Add CN ifdef's for harvest
             add if for scaled_harvest or not
    M    models/lnd/clm/src/main/iniTimeConst.F90 ------------- Add CN ifdef's for ndep
    M    models/lnd/clm/src/main/histFileMod.F90 -------------- Add RTM ifdef's for frivinp_rtm
    M    models/lnd/clm/src/main/controlMod.F90 --------------- Put options in appropriate
                RTM and CN #ifdef blocks. Add ice_runoff, scaled_harvest and carbon_only to namelist
    M    models/lnd/clm/src/main/clm_varctl.F90 --------------- Add CN/RTM #ifdefs, add
               scaled_harvest and ice_runoff
    M    models/lnd/clm/src/main/clm_driver.F90 --------------- Add CN #ifdef for ndepdyn
    M    models/lnd/clm/src/main/ndepFileMod.F90 -------------- Add CN #ifdef
    M    models/lnd/clm/src/main/clmtype.F90 ------------------ Add res_sno, topo_ndx,
                topo_slope, var_track, var_track2, frost_table, zwt_perched,
                qflx_top_soil, qflx_snow_out, qflx_drain_perched
    M    models/lnd/clm/src/main/histFldsMod.F90 -------------- Add
	  FROST_TABLE, ZWT_PERCH, QDRAI_PERCH, QTOPSOIL

    M    models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 ----- Move lnd_chkAerDep_mct to init
            add ice_runoff option to output rtm streams
    M    models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 --- Move lnd_chkAerDep_mct to
            add ice_runoff option to output rtm streams. And sync up with lnd_comp_mct
init


Summary of testing:

  bluefire interactive extra checking:
001 smH43 TSM.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 96 cold PASS
002 erH43 TER.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 10+38 coPASS
003 brH43 TBR.sh 17p_cnsc_do clm_std^nl_noicertm_sclharv 20021230:NONE:1800 10x15 USGS@2000 72+72 coPASS
005 smH93 TSM.sh 17p_cnsc_do clm_ndepdyn^nl_cn_conly 20020101:NONE:1800 4x5 gx3v7@1850-2000 96 cold PASS
006 erH93 TER.sh 17p_cnsc_do clm_ndepdyn^nl_cn_conly 20020101:NONE:1800 4x5 gx3v7@1850-2000 10+38 coPASS
007 brH93 TBR.sh 17p_cnsc_do clm_ndepdyn^nl_cn_conly 20020101:NONE:1800 4x5 gx3v7@1850-2000 72+72 coPASS
  bluefire/CCSM testing: All PASS except...
FAIL  ERI.T31_g37.IG.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_04 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_03 
  jaguar/CCSM testing: All FAIL
FAIL  ERS_D.f09_g16.I1850.jaguar 
FAIL  PST.f10_f10.I8520CN.jaguar 
FAIL  PET_PT.f10_f10.I8520CN.jaguar 
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm4_0_03

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_03
Originator(s):  erik (erik)
Date: Mon May 17 14:06:50 MDT 2010
One-line Summary: Changes from Francis for VOC and drydep

Purpose of changes:

Changes from Francis Vitt and Jean-Francois Lamarque for VOC and drydep. Add a scaling
factor for VOC isoprene. Get annual LAI and differences from CLMSP even when CLMCN is
on when sending drydep to atm, as need LAI monthly differences to estimate season index.
Get these changes to work with CN on and off and also get it to work with DEBUG mode
on. Use clm veg indicies in pftvarcon and abort drydep if don't find a wesley veg type
index. Fix ndeplintInterp.ncl script for rcp=-999.9 historical (bug 1153). Add in quarter
degree gx1v6 fraction dataset. 

Bugs fixed (include bugzilla ID):
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1158 (I_1850-2000_CN (I4804CN) inconsistent with I_1850-2000 (I4804) compset)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: qtr-degree, gx1v6 frac/domain datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self, dlawren, fvitt

List any svn externals directories updated (csm_share, mct, etc.): scripts

    scripts to scripts4_100513

List all files eliminated: None

List all files added and what they do:

   A    models/lnd/clm/test/system/config_files/_nrcnsc_ds --- cn test without rtm or supln

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> Add in qtr-degree fraction and domain file datasets
>>>>>>>>>>> Make gx1v6 default mask for qtr-degree
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml
   M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

>>>>>>>>>>> Separate out CN+SUPLN tests as H and CN only as P
   M    models/lnd/clm/test/system/tests_pretag_bluefire
   M    models/lnd/clm/test/system/README.testnames
   M    models/lnd/clm/test/system/tests_posttag_purempi_regression
   M    models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M    models/lnd/clm/test/system/nl_files/clm_drydep ---- correct build-nml options
   M    models/lnd/clm/test/system/input_tests_master ----- Remove 360x720 tests, add
                          drydep tests with CN and without, have start dates for drydep
                          tests span the year

>>>>>>>>>>> A few small fixes to tools
   M    models/lnd/clm/tools/mksurfdata/mkvocef.F90 --------- Remove diagnostics as nonsensical
                                     (also was incorrect, see bug 1157)
   M    models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl - Fix so can work with historical case

>>>>>>>>>>> Allow some CLMSP subroutines to be called even with CLMCN so that LAI can help set 
>>>>>>>>>>> the season index when dry-deposition is active (and only when dry-dep is active)
   M    models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 - Change #ifdefs so that
               some can be called from drydep even when CN is on. Don't allow 
               EcosystemDyn to be called if CN on though.
   M    models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ----- Add a scaling factor
               for isoprene
   M    models/lnd/clm/src/biogeochem/DryDepVelocity.F90 ----- Make winter season on
               anytime you have snow. Use pftvarcon indices to set wesveg type from
               clmveg type. Add landuse type and set to desert winter if not veg type.
               (so won't abort on DEBUG mode)
   M    models/lnd/clm/src/main/clm_initializeMod.F90 -------- Also call
	  EcosystemDynini and readAnnualVegetation even if CN is on when drydep is on.

Summary of testing:

  bluefire: Ran 100 days of 1850CN, compared to Francis's mods and the two results were identical
  bluefire interactive testing:
001 smCO3 TSM.sh _sc_do clm_drydep^nl_urb 20021001:NONE:3600 10x15 USGS -10 cold ................PASS
002 erCO3 TER.sh _sc_do clm_drydep^nl_urb 20021001:NONE:3600 10x15 USGS -3+-7 cold ..............PASS
003 brCO3 TBR.sh _sc_do clm_drydep^nl_urb_br 20021001:NONE:3600 10x15 USGS -5+-5 cold ...........PASS
004 blCO3 TBL.sh _sc_do clm_drydep^nl_urb 20021001:NONE:3600 10x15 USGS -30 cold ................PASS
005 smCP3 TSM.sh _sc_do clm_drydep^nl_urb 20020317:NONE:1800 1.9x2.5 gx1v6 -15 startup ..........PASS
006 erCP3 TER.sh _sc_do clm_drydep^nl_urb 20020317:NONE:1800 1.9x2.5 gx1v6 -3+-7 startup ........PASS
007 brCP3 TBR.sh _sc_do clm_drydep^nl_urb_br 20020317:NONE:1800 1.9x2.5 gx1v6 -5+-5 startup .....PASS
008 blCP3 TBL.sh _sc_do clm_drydep^nl_urb 20020317:NONE:1800 1.9x2.5 gx1v6 -15 startup ..........PASS
001 sm654 TSMtools.sh mkgriddata tools__ds namelist .............................................PASS
002 sm674 TSMtools.sh mkgriddata tools__ds singlept .............................................PASS
003 sm774 TSMtools.sh mksurfdata tools__ds singlept .............................................PASS
004 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................SKIPPED*
005 sm853 TSMtools.sh interpinic tools__o runoptions ............................................PASS
  bluefire/CCSM testing: All PASS except...
BFAIL SMS_RLA.f45_f45.I.bluefire.compare.clm4_0_0+upext
BFAIL SMS_RLB.f45_f45.I.bluefire.compare.clm4_0_0+upext
BFAIL SMS_ROA.f45_f45.I.bluefire.compare.clm4_0_0+upext
FAIL  ERI.T31_g37.IG.bluefire
BFAIL ERB.f09_g16.I_1948-2004.bluefire.compare.clm4_0_0+upext
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_03
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm4_0_0+upext

CLM tag used for the baseline comparison tests if applicable: clm4_0_02

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_02
Originator(s):  erik (erik)
Date: Thu May 13 00:47:40 MDT 2010
One-line Summary: Make sure dtime is initialized, so that answers are consistently the same as clm4_0_00

Purpose of changes:

Make sure dtime is initialized before it is used in lnd_run_mct/lnd_run_esmf so
that results are consistent. This bug has been around since clm3_6_36 where doalb
logic was changed. However, until clm4_0_01 results seemed to have been consistent,
but with clm4_0_01 results were inconsistent, and usually incorrect for nstep=1 (in
calculating calday1 and hence doalb).

Bugs fixed (include bugzilla ID):
                                 1156 (Reproducability problem with clm4_0_01)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: critical

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, mvertens

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: None

List all files added and what they do:

>>>>>>>>> Add a reproducability test
   A   models/lnd/clm/test/system/TRP.sh

List all existing files that have been modified, and describe the changes:

>>>>>>>>> Add reproducability test
   M   models/lnd/clm/test/system/input_tests_master

>>>>>>>>> Set glcmec by GLC_NEC_ $ifdefs
   M   models/lnd/clm/src/main/clm_varpar.F90

>>>>>>>>> Make sno fields NOT optional, and set dtime before use in _run
   M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90
   M   models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90

Summary of testing:

  bluefire interactive testing:
001 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........PASS
  bluefire/CCSM testing:
PASS  PST.f45_g37.I1850.bluefire.compare.clm4_0_0+upext 
PASS  PET_PT.f45_g37.I1850.bluefire.compare.clm4_0_0+upext 
PASS  ERS.f19_g16.I1850.bluefire.compare_hist.clm4_0_0+upext 
PASS  ERS.f19_g16.I1850.bluefire.compare.clm4_0_0+upext 
PASS  PST.f10_f10.I8520CN.bluefire.compare.clm4_0_0+upext 
PASS  PET_PT.f10_f10.I8520CN.bluefire.compare.clm4_0_0+upext 

CLM tag used for the baseline comparison tests if applicable: clm4_0_00

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_01
Originator(s):  erik (erik)
Date: Tue May 11 14:39:25 MDT 2010
One-line Summary: Move glacier multiple elevation class branch to the trunk so that we can work with the active glacier model

Purpose of changes:

Add ability to handle glacier multiple elevation classes (glc_mec) in clm, so that we 
can interact with the active glacier component (glc). Adds glacier elevation classes 
to the surface datasets and requires they be read in when glacier multiple elevation 
classes are active.  New namelist options for glc_mec include glc_smb and glc_dyntopo.
At build-time the number of glc_mec classes is set (can be 0, 1, 3, 5, or 10). The
model also interacts with the mask of valid glacier points that the active glacier
model determined (input with the fglcmask file), and set by glc_grid (which can be
gland5,gland10, or gland20 for 5-20km resolution over Greenland). glc_grid is set at
build time, but should be moved to the build-namelist.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1156 (Reproducability problem with clm4_0_01)
                                 1157 (Problem with VOC interpolation in mksurfdata)
                                 1197 (MPI problem sending and receiving data in same array)
    http://bugs.cgd.ucar.edu/

Type of tag: standard

Describe any changes made to build system: Add glc_nec and glc_grid options to configure
   glc_nec can be 1,3,5, or 10 and MUST match the number on the input surface dataset
           the elevation classes themselves are read from the surface dataset
   glc_grid can be gland5, gland10, gland20 for greenland 5, 10, or 20km resolution
            it is merely passed on to build-namelist to pick the glcmask file

Describe any changes made to the namelist:

- create_glacier_mec_landunit (= T when these landunits are created; F by default)
- glc_smb (= T if passing surface mass balance to GLC; else pass PDD info; T by default)
- glc_dyntopo (= T if CLM topography changes dynamically; currently F)
              (NOT fully implemented yet)

  New history fields:
             QICE      ice growth/melt    (mm/s)
             QICEYR    ice growth/melt    (mm/s)
             gris_mask Greenland mask     (unitless)
             gris_area Greenland ice area (km^2)
             aais_mask Antarctic mask     (unitless)
             aais_area Antarctic ice area (km^2)

Changes to build-namelist:

  finidat file and possibly the fsurdat files include glc_nec values
    Currently only support glc_nec=0 or glc_nec=10

List any changes to the defaults for the boundary datasets: Update datm domain file for T31

Describe any substantial timing or memory changes: None

Code reviewed by: self, jwolfe, lipscomb, dlawren

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share
     Also add in active glacier model
   scripts   to scripts4_100510a
   csm_share to share3_100423
   gglc      to glc4_100507

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>> Add mec tests
    A    models/lnd/clm/test/system/config_files/_mec10sc_dh
    A    models/lnd/clm/test/system/config_files/_mec10sc_dm
    A    models/lnd/clm/test/system/config_files/_mec10sc_do
    A    models/lnd/clm/test/system/config_files/_mec10sc_ds
    A    models/lnd/clm/test/system/config_files/_mec10sc_h
    A    models/lnd/clm/test/system/config_files/_mec10sc_m
    A    models/lnd/clm/test/system/config_files/_mec10sc_o
    A    models/lnd/clm/test/system/nl_files/clm_glcmec
    A    models/lnd/clm/test/system/nl_files/nl_glcsmb

>>>>>>>>>> Handle passing of data from clm to the active glacier model
    A    models/lnd/clm/src/main/clm_glclnd.F90 -- handle passing data to glc model

List all existing files that have been modified, and describe the changes:

>>>>>>>>>> Add mec tests
    M    models/lnd/clm/test/system/tests_pretag_jaguar
    M    models/lnd/clm/test/system/input_tests_master
    M    models/lnd/clm/test/system/tests_posttag_purempi_regression
    M    models/lnd/clm/test/system/tests_posttag_hybrid_regression
    M    models/lnd/clm/test/system/tests_pretag_bluefire
    M    models/lnd/clm/test/system/tests_pretag_bluefire_nompi
    M    models/lnd/clm/test/system/config_files/README
    M    models/lnd/clm/test/system/README.testnames

>>>>>>>>>>>> Add GLC_MEC to mksurfdata, add ability to set glc_nec on namelist
    M    models/lnd/clm/tools/mksurfdata/mkglcmec.F90
    M    models/lnd/clm/tools/mksurfdata/mkvarctl.F90
    M    models/lnd/clm/tools/mksurfdata/mkfileMod.F90
    M    models/lnd/clm/tools/mksurfdata/Makefile ------ Add gfortran remove xlf90 for Darwin
    M    models/lnd/clm/tools/mksurfdata/mkvarpar.F90
    M    models/lnd/clm/tools/mksurfdata/README
    M    models/lnd/clm/tools/mksurfdata/mksrfdat.F90

>>>>>>>>>>>> Add some more checking for glc settings
    M    models/lnd/clm/bld/listDefaultNamelist.pl - Try to make faster, add loop over
                                                     glc_nec and glc_grid
    M    models/lnd/clm/bld/build-namelist --------- Get default glc_smb when
                                                     create_glacier_mec_landunits is on
    M    models/lnd/clm/bld/clm.cpl7.template ------ Add glc_ settings
    M    models/lnd/clm/bld/namelist_files/namelist_defaults.xsl
    M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Add glc_nec to 
             finidat files, add glc_nec="10" fsurdat files for T31, 1-deg, 2-deg
    M    models/lnd/clm/bld/configure
    M    models/lnd/clm/bld/config_files/Makefile.in - Add gfortran to Darwin and remove
xlf90
    M    models/lnd/clm/bld/config_files/config_definition.xsl - Add glacier types
    M    models/lnd/clm/bld/config_files/config_definition.xml

>>>>>>>>>>>> Read in glacier elevation classes from surfdata file as GLC_MEC
>>>>>>>>>>>> require it when create_glacier_mec_landunits is .true. and use it
>>>>>>>>>>>> to set value of glc_topomax. Add checking for glc options.
>>>>>>>>>>>> Also remove concurrent directives
    M    models/lnd/clm/src/main/clm_varcon.F90 -------- Add h2osno_max, lapse_glcmec 
                  and istice_mec, change albice when GLC_NEC>0
    M    models/lnd/clm/src/main/clm_varpar.F90 -------- Add npatch_glacier_mec
    M    models/lnd/clm/src/main/dynlandMod.F90 -------- Add checking for istice_mec
    M    models/lnd/clm/src/main/decompInitMod.F90 ----- Pass glcmask in
    M    models/lnd/clm/src/main/clm_initializeMod.F90 - Handle create_glacier_mec_landunit
    M    models/lnd/clm/src/main/ncdio.F90 ------------- Add 2D module procedures to ncd_iolocal interface
    M    models/lnd/clm/src/main/subgridMod.F90 -------- Handle create_glacier_mec_landunit if true
    M    models/lnd/clm/src/main/clmtypeInitMod.F90 ---- Add glcmecpoi and greenland and antarctic mask/area
                       add forc_pbot, forc_rho, glc_topo, forc_t, forc_th to ces, forc_q to cws, eflx_bot to cef
                       add qflx_glcice, glc_rofi, glc_rofl
    M    models/lnd/clm/src/main/pftdynMod.F90 --------- Change comments
    M    models/lnd/clm/src/main/iniTimeConst.F90 ------ Handle istice_mec
    M    models/lnd/clm/src/main/clm_atmlnd.F90 -------- Fix comment
    M    models/lnd/clm/src/main/clm_varsur.F90 -------- Add topoxy
    M    models/lnd/clm/src/main/controlMod.F90 -------- Add create_glacier_mec_landunit, glc_dyntopo, glc_smb, fglcmask to namelist
    M    models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 - Add sno_export/import
    M    models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90 Add sno_export/import
    M    models/lnd/clm/src/main/filterMod.F90 --------- Add istice_mec
    M    models/lnd/clm/src/main/clm_varctl.F90 -------- Add fglcmask, create_glacier_mec_landunit,
                glc_dyntopo, glc_smb, glc_nec, and glc_topomax add some error checking for them
    M    models/lnd/clm/src/main/initGridCellsMod.F90 -- Make ice sheet masks and deal with glcmask
    M    models/lnd/clm/src/main/surfrdMod.F90 --------- Read GLCMASK, GLC_MEC, PCT_GLC_MEC and TOPO_GLC_MEC when create_glacier_mec_landunit
    M    models/lnd/clm/src/main/domainMod.F90 --------- Add glcmask
    M    models/lnd/clm/src/main/clmtype.F90 ----------- Add forc_pbot, forc_rho, glc_frac, glc_topo add
                forc_t, forc_q, eflx_bot, qflx_glcice, glc_rofi, glc_rofl, glcmecpoi, gris and assis mask/area
    M    models/lnd/clm/src/main/histFldsMod.F90 ------- Add new fields when create_glacier_mec_landunit
    M    models/lnd/clm/src/main/histFileMod.F90 ------- Add glacier_mec to notes, set_noglcmec to hist_addfld1d
    M    models/lnd/clm/src/main/mkarbinitMod.F90 ------ Set mask sno to h2osno_max, use istice_mec
    M    models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ----- Assess if istice_mec and add qflx_glcice for glc_dyntopo
P
    M    models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90 - Assess if istice_mec
    M    models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 -- Assess if istice_mec and add eflx_bot
    M    models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90 ---- Assess if istice_mec
    M    models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 --- Move forc_pbot/forc_q/forc_t/forc_th from g to c, assess istice_mec
    M    models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 ---- Assess if isice_mec
    M    models/lnd/clm/src/biogeophys/Hydrology1Mod.F90 ------- Assess if isice_mec move force_t from g to c
    M    models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ------- Assess if istice_mec and add qflx_glcice
    M    models/lnd/clm/src/biogeophys/clm_driverInitMod.F90 --- Downscale forc_t, forc_th, forc_q, forc_pbot from gridcell to columns
                  based on surface eleveation for glc_mec landunits
    M    models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 - Change forcing from g to c

Summary of testing:

  bluefire interactive testing: All PASS up to..
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing:
FAIL  PST.f45_g37.I1850.bluefire.compare.clm3_7_15
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm3_7_15
FAIL  ERS.f19_g16.I1850.bluefire.compare_hist.clm3_7_15
FAIL  ERS.f19_g16.I1850.bluefire.compare.clm3_7_15
FAIL  ERI.T31_g37.IG.bluefire
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_7_15
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm4_0_01
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_15
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm3_7_15
FAIL  PET_PT.f10_f10.I8520CN.bluefire.compare.clm3_7_15

PASS  SMS_D.f19_g16.IG.bluefire
PASS  ERS.f19_g16.IG.bluefire
FAIL  SMS.T31_g37.IG.bluefire
FAIL  SMS.f09_g16.IG.bluefire

  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_7_15

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm4_0_00
Originator(s):  erik (erik)
Date: Tue May  4 23:02:18 MDT 2010
One-line Summary:  Update to datm8, redirect aquifer overflow to drainage, add 
       gx3v7 masks, script to extract regional datasets, add harvesting for CN, 
       modify shrubs, include urban model, ice stream for snowcapping, new 
       build-namelist system, scale solar by solar zenith angle in datm, deep 
       soil with bedrock at bottom, organic matter in soils, SNICAR for snow 
       radiation, sparce dense aero, snow cover changes

Type of tag: doc

Software engineering changes:

    Update to cpl7 and scripts.
    Remove offline and cpl6 modes.
    Remove support for CASA model.
    Update to datm8 atmospheric data model.
    Add gx3v7 land mask for T31 and fv-4x5 horizontal resolutions.
    Add gx1v6 land mask for f05, f09, and f19 horizontal resolutions.
    Add tx1v1 land mask and 1.9x2.5_tx1v1 horizontal resolution.
    Add in 2.5x3.33 horizontal resolution.
    Add in T62 horizontal resolution so can run at same resolution as input datm data.
    Allow first history tape to be 1D.
    Add ability to use own version of input datasets with CLM_USRDAT_NAME variable.
    Add a script to extract out regional datasets.
    New build-namelist system with XML file describing all namelist items.
    Add glacier_mec use-case and stub glacier model.
    Add ncl script to time-interpolate between 1850 and 2000 for fndepdat dataset, for fndepdyn version.
    Make default of maxpatch_pft=numpft+1 instead of 4.
    Only output static 3D fields on first h0 history file to save space.
    Add new fields for VOC (Volatile Organic Compounds) on some surface datasets
    Add irrigation area to mksurfdata tool (NOT used in CLM yet).
    Add multiple elevation class option for glaciers in mksurfdata tool (NOT used in CLM yet).
    Add ascale field to land model in support of model running on it's own grid.

Science changes:

    Change to freezing temperature constant      
    Forcing height at atm plus z0+d on each tile                    
    Effective porosity divide by zero fix                          
    Sparse/dense canopy aerodynamic parameters                 
    Ground/snow emissivity smooth transition                                                       
    Thermal and hydraulic properties of organic soil                                                                        
    Init h2osoi=0.3                                                            
    Snow compaction fix                                                          
    Snow T profile during layer splitting fix                                  
    Snow burial fraction                                                             
    Snow cover fraction                                                                   
    SNICAR (snow aging, black carbon and dust deposition, vertical distribution of solar energy) 
    Remove SNOWAGE, no longer used                                                   
    Deep soil (15 layers, ~50m), 5 new layers are hydrologically inactive bed rock                          
    Ground evap (beta), stability, and litter resistance                      
    Organic/mineral soil hydraulic conductivity percolation theory       
    Richards equation modifications                                         
    Normalization of frozen fraction of soil formulation                                 
    One-step solution for soil moisture and qcharge                          
    Changes to rsub_max for drainage and decay factor for surface runoff      
    Fixed diurnal cycle of solar radiation in offline forcing data                            
    Back to CLM3 lakes and wetlands datasets, but 1% rather than 5% threshold (same for glacier) 
    Changes to pft physiology file from CN                                                                                     
    New grass optical properties                                                                   
    New surface dataset assuming no herbaceous understory  
    Direct versus diffuse radiation offline                                           
    New VOC model (MEGAN)                                                                                            
    Snow-capped runoff goes to new ice stream and routed to ocean as ice                                         
    Dust model always on, LAI threshold parameter change from 0.1 to 0.3     
    Daylength control on vcmax                                                           
    SAI and get_rad_dtime fix                                                              
    Always run with MAXPATCH_PFT=npfts + 1 instead of 4                                                                               
    Transient land cover/use mode - datasets, energy and water balance   
    RTM sub-cycling                                                     
    Twostream bug fix                                
    Update soil colors     
    2m relative humidity        
    Fix for aquifer leak (SoilHydrologyMod, BalanceCheckMod)              
    New nitrogen deposition file (units and sum of NOx, NHy)  

Quickstart to new cpl7 scripts...

         cd scripts
         ./create_newcase -help      # get help on how to run create_newcase
         ./create_newcase -case testI -mach bluefire -res f19_g16 -compset I    # create new "I" case for bluefire at 1.9x2.5_gx1v6 res
                                     # "I" case is clm active, datm7, and inactive ice/ocn
         cd testI
         ./xmlchange -help           # Get help on editor for XML files
         ./xmlchange <options> env_conf.xml env_mach_pes  # Edit configure files if needed
         configure -case             # create scripts
         ./xmlchange <options> env_build.xml              # Edit build files if needed
         testI.build                 # build model and create namelists
         ./xmlchange <options> env_run.xml                # Edit run files if needed
         bsub < testI.run            # submit script
                                     # (NOTE: edit env_run.xml to set RESUBMIT to number of times to automatically resubmit)
Quickstart to use of regional extraction scripts and PERSONAL datasets:

       # Run the script to create an area to put your files (assume CSMDATA set to standard inputdata)
       cd scripts
       setenv MYCSMDATA $HOME/myinputdata
       link_dirtree $CSMDATA $MYCSMDATA

       # Run the extraction for data from 52-73 North latitude, 190-220 longitude
       # that creates 13x12 gridcell region from the f19 (1.9x2.5) global resolution over
       # Alaska
       cd ../models/lnd/clm/tools/ncl_scripts
       setenv MYID 13x12pt_f19_alaskaUSA
       getregional_datasets.pl -sw 52,190 -ne 73,220 -id $MYID -mycsmdata $MYCSMDATA

       # Now create a case that uses these datasets
       cd ../../../../../scripts
       create_newcase -case testregional -compset I -mach bluefire -res pt1_pt1
       cd testregional
       $EDITOR env_conf.xml # change CLM_BLDNML_OPTS to include "-clm_usr_name $MYID" (expand $MYID)
       $EDITOR env_mach_pes.xml # Change tasks/threads as appropriate (defaults to serial)
       xmlchange -file env_run.xml -id DIN_LOC_ROOT_CSMDATA -val $MYCSMDATA

       # Do other changes to xml files as appropriate
       # configure as normal, then edit the datm namelist

       configure -case

       # Then build and run the case as normal

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
                                 1197 (MPI problem sending and receiving data in same array)
Describe any changes made to build system:

   Change directory structure to match CCSM.
   Add BGP target.
   Add choice between ESMF and MCT frameworks.
   Start removing #ifdef and directives that supported Cray-X1 Phoenix as now decommissioned.
   Make default of maxpatch_pft=numpft+1 instead of 4 for all configurations.
   By default turn on CLAMP when either CN or CASA is enabled
   New SNICAR_FRC, CARBON_AERO, and C13 CPP ifdef tokens.

   New options added to configure:

     -comp_intf <name>   Component interface to use (ESMF or MCT) (default MCT)
     -nofire             Turn off wildfires for bgc setting of CN (default includes fire for CN)
     -pio <name>         Switch enables building with Parallel I/O library. [on | off] (default is on)
     -snicar_frc <name>  Turn on SNICAR radiative forcing calculation. [on | off] (default is off)

Describe any changes made to the namelist:

   NOTE: build-namelist now checks the validity of your namelist you generate by looking at data in the namelist_definition.xml
         file. In order to add new namelist items you need to change the code and also edit this file. To view information
         on the namelist view the file:
         models/lnd/clm/bld/namelist_files/namelist_definition.xml
         in your browser and you'll see the names, type, description and valid_values for all namelist variables.

   Changes to build-namelist:
     Transient sim_year ranges (i.e. 1850-2000)
     Remove cam_hist_case option.
     Make sure options ONLY used for stand-alone testing have a "drv_" or "datm_" prefix in them and list these
     options all together and last when asking for help from build-namelist.
   New options to build-namelist:
     -clm_usr_name     "name" Dataset resolution/descriptor for personal datasets. Default: not used
                              Example: 1x1pt_boulderCO_c090722 to describe location,
                                       number of pts, and date files created
   New list options to build-namelist:
     build-namelist -res list          # List valid resolutions
     build-namelist -mask list         # List valid land-masks
     build-namelist -sim_year list     # List valid simulation years and simulation year ranges
     build-namelist -clm_demand list   # List namelist variables including those you could demand to be included.
     build-namelist -use_case list     # List valid use-cases
     build-namelist -rcp list          # List valid representative concentration pathways
                                       # for future scenarios

     List of use-cases for build-namelist:

1850-2100_rcp4.5_transient = Simulate transient land-use, and aerosol deposition changes
with historical data from 1850 to 2005 and then with the RCP4.5 scenario from MINICAM

1850-2100_rcp8.5_transient = Simulate transient land-use, and aerosol deposition changes
with historical data from 1850 to 2005 and then with the RCP8.5 scenario from MESSAGE

   1850_control = Conditions to simulate 1850 land-use
2000-2100_rcp8.5_transient = Simulate transient land-use, and aerosol deposition changes
with historical data from 2000 to 2005 and then with the RCP8.5 scenario from MESSAGE

   2000_control = Conditions to simulate 2000 land-use
20thC_transient = Simulate transient land-use, and aerosol deposition changes from 1850
to 2005
         pergro = Perturbation error growth test with initial conditions perturbed by
roundoff level
        pergro0 = Perturbation error growth test with unperturbed initial conditions


   New namelist items:

        urban_hac = OFF, ON or ON_WASTEHEAT   (default OFF)     Flag for urban Heating and Air-Conditioning
                                                       OFF          = Building internal temperature is un-regulated.
                                                       ON           = Building internal temperature is bounded to reasonable range.
                                                       ON_WASTEHEAT = Building internal temperature is bounded and resultant waste
                                                                      heat is given off.
        urban_traffic = .true. or .false.     (default .false.) Flag to include additional multiplicative factor of urban traffic
                                                                to sensible heat flux.
        fsnowoptions = filename          file for snow/aerosol optical properties (required)
        fsnowaging   = filename          file for snow aging parameters (required)
        faerdep      = filename          file of aerosol deposition (required)

  New history variables: (note watt vs. W in units, 26 vs. 76)
     BCDEP                      total BC deposition (dry+wet) from atmosphere                kg/m^2/s
     BIOGENCO                   biogenic CO flux                                             uGC/M2/H
     C13_PRODUCT_CLOSS          C13 total carbon loss from wood product pools                gC13/m^2/s
     DSTDEP                     total dust deposition (dry+wet) from atmosphere              kg/m^2/s
     EFLX_DYNBAL                dynamic land cover change conversion energy flux             W/m^2
     FGR12                      heat flux between soil layers 1 and 2                        watt/m^2
     FSAT                       fractional area with water table at surface                  unitless
     FSH_NODYNLNDUSE		sensible heat flux not including correction for land use change
                                                                                             watt/m^2
     GC_HEAT1                   initial gridcell total heat content                          J/m^2
     GC_HEAT2                   post land cover change total heat content                    J/m^2    inactive
     GC_ICE1                    initial gridcell total ice content                           mm/s
     GC_ICE2                    post land cover change total ice content                     mm/s     inactive
     GC_LIQ1                    initial gridcell total liq content                           mm
     GC_LIQ2                    initial gridcell total liq content                           mm       inactive <<<< name??
     H2OSNO_TOP                 mass of snow in top snow layer                               kg
     HEAT_FROM_AC               sensible heat flux put into canyon due to heat removed from air conditioning
                                                                                             watt/m^2
     HK                         hydraulic conductivity                                       mm/s     inactive
     ISOPRENE                   isoprene flux                                                uGC/M2/H
     LAND_USE_FLUX              total C emitted from land cover conversion and wood produc t pools gC/m^2/s
     LAND_UPTAKE                NEE minus LAND_USE_FLUX, negative for update                 gC/m^2/s
     LWup                       upwelling longwave radiation                                 watt/m^2 inactive
     MONOTERP                   monoterpene flux                                             uGC/M2/H
     NBP                        net biome production, includes fire, landuse, and harvest flux, positive for sink
                                                                                             gC/m^2/s
     OCDEP                      total OC deposition (dry+wet) from atmosphere                kg/m^2/s
     OVOC                       other VOC flux                                               uGC/M2/H
     ORVOC                      other reactive VOC flux                                      uGC/M2/H
     PBOT                       atmospheric pressure                                         Pa
     PCO2                       atmospheric partial pressure of CO2                          Pa
     PRODUCT_CLOSS              total carbon loss from wood product pools                    gC/m^2/s
     PRODUCT_NLOSS              total N loss from wood product pools                         gN/m^2/s
     Qair                       atmospheric specific humidity                                kg/kg    inactive
     Qanth                      anthropogenic heat flux                                      watt/m^2 inactive
     Qtau                       momentum flux                                                kg/m/s^2
     QFLX_LIQ_DYNBAL            liq dynamic land cover change conversion runoff flux         mm/s
     QFLX_ICE_DYNBAL            ice dynamic land cover change conversion runoff flux         mm/s
     QRUNOFF_NODYNLNDUSE        total liquid runoff not including correction for land use change (does not include QSNWCPICE) 
                                                                                             mm/s
     QSNWCPICE                  excess snowfall due to snow capping                          mm/s
     QSNWCPICE_NODYNLNDUSE      excess snowfall due to snow capping not including correction for land use change
                                                                                             mm/s
     QSNWCPLIQ                  excess rainfall due to snow capping                          mm/s     inactive
     SMP                        soil matric potential                                        mm       inactive
     SNOAERFRC2L                surface forcing of all aerosols in snow, averaged only when snow is present (land)
                                                                                             watt/m^2
     SNOAERFRCL                 surface forcing of all aerosols in snow (land)               watt/m^2
     SNOBCFRCL                  surface forcing of BC in snow (land)                         watt/m^2
     SNOBCMCL                   mass of BC in snow column                                    kg/m2
     SNOBCMSL                   mass of BC in top snow layer                                 kg/m2
     SNOdTdzL                   top snow layer temperature gradient (land)                   K/m
     SNODSTFRC2L                surface forcing of dust in snow, averaged only when snow is present (land)
                                                                                             watt/m^2
     SNODSTFRCL                 surface forcing of dust in snow (land)                       watt/m^2
     SNODSTMCL                  mass of dust in snow column                                  kg/m2
     SNODSTMSL                  mass of dust in top snow layer                               kg/m2
     SNOFSRND                   direct nir reflected solar radiation from snow               watt/m^2 inactive
     SNOFSRNI                   diffuse nir reflected solar radiation from snow              watt/m^2 inactive
     SNOFSRVD                   direct vis reflected solar radiation from snow               watt/m^2 inactive
     SNOFSRVI                   diffuse vis reflected solar radiation from snow              watt/m^2 inactive
     SNOFSDSND                  direct nir incident solar radiation on snow                  watt/m^2 inactive
     SNOFSDSNI                  diffuse nir incident solar radiation on snow                 watt/m^2 inactive
     SNOFSDSVD                  direct vis incident solar radiation on snow                  watt/m^2 inactive
     SNOFSDSVI                  diffuse vis incident solar radiation on snow                 watt/m^2 inactive
     SNOLIQFL                   top snow layer liquid water fraction (land)                  fraction inactive
     SNOOCMCL                   mass of OC in snow column                                    kg/m2
     SNOOCMSL                   mass of OC in top snow layer                                 Kg/m2
     SNOOCFRC2L                 surface forcing of OC in snow, averaged only when snow is present (land)
     SNOOCFRCL                  surface forcing of OC in snow (land)                         watt/m^2
                                                                                             watt/m^2
     SNORDSL                    top snow layer effective grain radius                        m^-6     inactive
     SNOTTOPL                   snow temperature (top layer)                                 K/m      inactive <<< units?
     SOILWATER_10CM             soil liquid water + ice in top 10cm of soil                  kg/m2
     SWup                       upwelling shortwave radiation                                watt/m^2 inactive
     TSOI_10CM                  soil temperature in top 10cm of soil                         K
     URBAN_AC                   urban air conditioning flux                                  watt/m^2
     URBAN_HEAT                 urban heating flux                                           watt/m^2
     VOCFLXT                    total VOC flux into atmosphere                               uGC/M2/H
     Wind                       atmospheric wind velocity magnitude                          m/s      inactive
     WOOD_HARVESTC              wood harvest (to product pools)                              gC/m^2/s
     WOOD_HARVESTN              wood harvest (to product pools)                              gN/m^2/s

  History field name changes:

     ANNSUM_PLANT_NDEMAND  => ANNSUM_POTENTIAL_GPP
     ANNSUM_RETRANSN       => ANNMAX_RETRANSN
     C13_DWT_PROD10C_LOSS  => C13_PROD10C_LOSS
     C13_DWT_PROD100C_LOSS => C13_PROD100C_LOSS
     C13_DWT_PROD10N_LOSS  => C13_PROD10N_LOSS
     C13_DWT_PROD100C_LOSS => C13_PROD100C_LOSS
     DWT_PROD100N_LOSS     => PROD10N_LOSS
     DWT_PROD100N_LOSS     => PROD100N_LOSS
     DWT_PROD100C_LOSS     => PROD10C_LOSS
     DWT_PROD100C_LOSS     => PROD100C_LOSS
     HCSOISNO              => HC
     TEMPSUM_PLANT_NDEMAND => TEMPSUM_POTENTIAL_GPP
     TEMPSUM_RETRANSN      => TEMPMAX_RETRANSN

   History field names deleted:
     SNOWAGE, TSNOW, FMICR, FCO2, DMI, QFLX_SNOWCAP

  Add new urban oriented _U, and _R (Urban and Rural) for:
        EFLX_LH_TOT, FGR, FIRA, FSH, FSM, Q2M, QRUNOFF, RH2M, SoilAlpha, TG, TREFMNAV, TREFMXAV, and TSA
        (missing _R for SoilAlpha)

Describe timing and memory performance:

Versions of any externally defined libraries:

   scripts             scripts4_100108b
   drv                 vocemis-drydep12_drvseq3_1_11
   datm                datm8_091218
   socn                stubs1_2_02/socn
   sice                stubs1_2_02/sice
   sglc                stubs1_2_02/sglc
   csm_share           vocemis-drydep13_share3_091217
   esmf_wrf_timemgr    esmf_wrf_timemgr_090402
   timing              timing_090929
   mct                 MCT2_7_0_100106
   pio                 pio60_prod
   cprnc               cprnc_081022

Summary of testing:

  bluefire: All PASS except...
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
029 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
043 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
044 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
045 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
046 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
048 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 12
  bluefire interactive testing: All PASS except...
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 5
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CCSM testing: All PASS except
FAIL  PST.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_15 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_10 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_10 
BFAIL PST.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
BFAIL PET_PT.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm3_7_10 
  jaguar: All PASS except..
005 smB51 TSM.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 144 arb_ic ..............FAIL! rc= 10
006 erB51 TER.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
007 brB51 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
026 smLI2 TSM.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
027 erLI2 TER.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
028 brLI2 TBR.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
030 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10
031 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 5
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/ifort interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
014 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_FAIL! rc= 5
015 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arbFAIL! rc= 5
016 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 4
018 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
019 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
020 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
  edinburgh/ifort: All PASS except...
002 erA92 TER.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic ................FAIL! rc= 7
003 brA92 TBR.sh _sc_dm clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic .............FAIL! rc= 6
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 5
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
011 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_5_00

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: new climate for clm4

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
    ccsm4_0_beta35
    bluefire
    -compset B_1850_TRACK1_CN -res f19_g16

   MSS location of control simulations used to validate new climate:

/DLAWREN/csm/b40.1850.track1.2deg.003.snow
   
   URL for LMWG diagnostics output used to validate new climate:

http://www.cgd.ucar.edu/ccr/paleo/b40.snow/b40.1850.track1.2deg.003.snow-b40.1850.track1.2deg.003.control/
	
===============================================================

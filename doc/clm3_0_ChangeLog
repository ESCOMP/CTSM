===============================================================
Tag name:  clm3_8_00
Originator(s):  erik (erik)
Date: Tue May  4 22:39:18 MDT 2010
One-line Summary: Get future scenarios working, finalize documentation, bring in MEGAN VOC and CNDV, simplify, mksurfdata optimization, fix bugs: snow enthalpy, BMOZ, pergro, use pft weights from fsurdat NOT finidat

Purpose of changes:

Get all of the future scenarios working (other than rcp=6.0) and get all of the datasets
for these scenarios (pftdyn, fndepdyn, and aerdep files, for rcp=2.6,4.5, and 8.5).
Finalize the User's Guide for now, with reviews from: Sam, Keith, Dave, and Sean, as
well as more work on tools chapter, and adding testing chapter in appendix. We brought
in the MEGAN version of the Volatile Organic Compounds (VOC) module which also reads
in VOC emission factors from the surface dataset, and hence all fsurdat files needed
to be replaced. Along with this the mksurfdata tool was changed in order to handle VOC's
and effort was made to optimize it, add shared memory paralelism, and do memory
optimization. We also removed the old Dynamic Global Vegetation Model (DGVM) and replaced
it with the Carbon Nitrogen Dynamic Vegetation model (CNDV). Make some simplifications
in the configure system to always use the CCSM version of build files, remove some 
unused options, put standalone test options last in configure. Improve documenation in
XML files for configure and build-namelist options.

Fix many different bugs. Enthalpy in snow combination was sometimes NOT conserved and now
is. There was a problem running DryDeposition for the BMOZ compset that is now fixed.
There were multiple issues running PERGRO testing that is now fixed. Previously, if 
both the finidat file and the fsurdat file had PFT weights on them, the values from
the finidat file was used, now it will use the values from the fsurdat file. There are
also several cases where if the weights are different it will abort with an error, or
at least send a message to the log file about the differences.

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Type of tag: doc

Describe any changes made to build system:
   Switch cndv for dgvm, Have configure disallow bad cases
   Change configure to NOT allow supln with spinup cases
   Do NOT allow exit_spinup and ad_spinup at the same time.
   Only allow voc to be set for seq_ccsm NOT ext_ccsm_seq
   Remove carbon_aero and pio from configure (always build with pio)
   emove unused configure options: clm_exe, -clm_exedir, and -clm_bld.
   Move standalone testing options to the end of help. Use CCSM version
   of mkSrcfiles/mkDepends, separate config vars into categories, work
   on documentation with comments from Keith/Sam.

Describe any changes made to the namelist:
   Add 2000-2100 simulation year range as allowed option

   Two new history fields:

        TSOI_10CM      = soil temperature in top 10cm of soil (K)
        SOILWATER_10CM = soil liquid water + ice in top 10cm of soil (kg/m2)

   Check for some files based on rcp (fpftdyn, ndepdyn, and aerdep)

   Add in ability to add a user namelist in your case directory to input
   namelist items at configure time. Simply add a file called "user_nl_clm"
   as a valid namelist and the items in that namelist will show up in the initial
   BuildConf/clm.buildnml.csh file.

List any changes to the defaults for the boundary datasets:
    get urbanc_alpha grid and frac files in
    get in new single-point datasets
              new qtr-degree, T62 and T85 fsurdat
              new f10, f05, f09, 1850 fsurdat
              new rcp=8.5, f19 pftdyn, 
              new rcp=4.5 f09, f19, f10 pftdyn
              new rcp=2.6 f09, f19, f10 pftdyn
              new rcp=8.5/4.5/2.6 f19 aerdep 1850-2100 datasets
              new rcp=8.5/4.5 f19 fndepdyn 1850-2100 datasets
              new rcp=2.6/4.5 f10, f45, f25, f09 aerdep/ndepdyn datasets
              new rcp=2.6/4.5,8.5 f19 decadal averages for ndepdat
   (Note: harvest was updated in PFTDYN files and raw PFT input files for 2006).
   New 10x15 and 4x5 finidat files so that transient cases will work at those resolutions
     New finidat files for 1-deg and 2-deg (from fully coupled simulations)
     New datasets for I cases that are set in scripts
   Duplicate cn datasets for cndv
    New pft-physiology files with extra fields for CNDV
   Remove 360x720 files, gx3v5, gx1v5 files
   Remove 1x1.25, 2x2.5, and 2.5x3.33 grid resolutions
   Remove gx1v3, gx1v4, gx1v5 land masks, add drydep defaults.
   add mksrf_fvegtyp@1000-1004

Describe any substantial timing or memory changes: None

Code reviewed by:
    snow changes came from dlawren and also reviewed by oleson
    PFT weight change also reviewed by: dlawren, slevis, oleson
    CNDV came from slevis
    VOC changes came from Francis Vitt and Jean-Francois Lamarque
    history changes came from Keith Oleson, reviewed by Dave Lawrenece
    OpenMP bug fix came from Mariana-Vertenstein, reviewed by Pat Worley

List any svn externals directories updated (csm_share, mct, etc.): all
    scripts    to scripts4_100406a
    drv        to drvseq3_1_23
    datm       to datm8_100406
    csm_share  to share3_100407
    pio        to pio1_0_18
    timing     to timing_091021

Summary of testing:

  bluefire: All PASS except...
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
029 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
043 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
044 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
045 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
046 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
048 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 12
  bluefire interactive testing: All PASS except...
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 5
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CCSM testing: All PASS except
FAIL  PST.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_15 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_10 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_10 
BFAIL PST.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
BFAIL PET_PT.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm3_7_10 
  jaguar: All PASS except..
005 smB51 TSM.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 144 arb_ic ..............FAIL! rc= 10
006 erB51 TER.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
007 brB51 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
026 smLI2 TSM.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
027 erLI2 TER.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
028 brLI2 TBR.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
030 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10
031 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 5
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/ifort interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
014 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_FAIL! rc= 5
015 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arbFAIL! rc= 5
016 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 4
018 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
019 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
020 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
  edinburgh/ifort: All PASS except...
002 erA92 TER.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic ................FAIL! rc= 7
003 brA92 TBR.sh _sc_dm clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic .............FAIL! rc= 6
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 5
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
011 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_7_00

Changes answers relative to baseline: Yes!
    snow change has a small effect on climate (see below)
    Bringing in MEGAN VOC changes answers for VOC fluxes in a diagnostic way
    Changing to use weights from fsurdat file rather than finidat file, changes
      answers for cases with finidat startup files, if the weights are different.

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: same climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
    ccsm4_0_beta35
    bluefire
    -compset B_1850_TRACK1_CN -res f19_g16

   MSS location of control simulations used to validate new climate:

/DLAWREN/csm/b40.1850.track1.2deg.003.snow
   
   URL for LMWG diagnostics output used to validate new climate:

http://www.cgd.ucar.edu/ccr/paleo/b40.snow/b40.1850.track1.2deg.003.snow-b40.1850.track1.2deg.003.control/
http://www.cgd.ucar.edu/ccr/dlawren/research/clm4.0_dev/b40.1850.track1.2deg.003.snowa-b40.1850.track1.2deg.003.controla/setsIndex.html
	
===============================================================
===============================================================
Tag name:  clm3_7_15
Originator(s):  erik (erik)
Date: Tue Apr 27 10:13:57 MDT 2010
One-line Summary: Finish User's Guide, surfdata files for urban-1pt, fix mksurfdata ifort bugs, work with testing

Purpose of changes:

Fix all urban single-point datasets (mexicocity, urbanc_alpha), fix get_regional script
to work. Add more documentation on mksurfdata to users-guide, add pergro procedure
examples, more to testing section. Remove "moving the sun" warning. Fix
ndeplintInterp.ncl and getregional_datasets.ncl scripts.

Bugs fixed (include bugzilla ID):
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1150 (Bug in indices in getregional_datasets.ncl script)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Type of tag: std-test

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: New fsurdat files for urban-1p datasets
      1x1_vancouverCAN, 1x1_mexicocityMEX, 1x1_urbanc_alpha, 1x1_asphaltjungleNJ

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): datm

   datm to datm8_100406

List all files eliminated:

>>>>>>>>>>> Remove test lists no longer used
     D   models/lnd/clm/test/system/tests_pretag_bangkok
     D   models/lnd/clm/test/system/tests_pretag_calgary
     D   models/lnd/clm/test/system/tests_posttag_lightning_nompi

List all files added and what they do:

>>>>>>>>>>> Add plot of pergro testing
     A   models/lnd/clm/doc/UsersGuide/pergro.jpg
>>>>>>>>>>> Add in plotting for pergro testing
     A   models/lnd/clm/tools/ncl_scripts/RMSbluefire.dat
     A   models/lnd/clm/tools/ncl_scripts/RMSintrepid.dat
     A   models/lnd/clm/tools/ncl_scripts/pergroPlot.ncl

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> Remove tests no longer used, work on documentation
     M   models/lnd/clm/test/system/test_driver.sh ---- Remove calgary, work on doc
     M   models/lnd/clm/test/system/gen_test_table.sh - Remove note for calgary
     M   models/lnd/clm/test/system/README ------------ Clarify documentation
     M   models/lnd/clm/test/system/CLM_runcmnd.sh ---- Remove calgary
>>>>>>>>>>> Fix ifort compiler problems, point to $CSMDATA locations of 1850
>>>>>>>>>>> and 2000 PFT datasets
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig ---- Change path
     M   models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr2000.txt - Change path
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.regional ------- Change path
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn --------- Change path
     M   models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850.txt - Change path
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.singlept ------- Change path
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.namelist ------- Change path
     M   models/lnd/clm/tools/mksurfdata/README -------------------- Update documentation
     M   models/lnd/clm/tools/mksurfdata/mksrfdat.F90 -------------- outnc_double to
                    .true., fix implicit none statements, add documentation
     M   models/lnd/clm/tools/mksurfdata/mksurfdata.pl ------------- Add ability to set 
                    inputdata directory
     M   models/lnd/clm/tools/mksurfdata/creategridMod.F90 --------- Change where to loops
>>>>>>>>>>> Fix bug in time axis and getregional indices
     M   models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl - Fix time axis and check it
     M   models/lnd/clm/tools/ncl_scripts/README ------------- Add note about pergroPlot
     M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl
>>>>>>>>>>> Fix CLM_USRDAT_NAME and add urban 1pt datasets
     M   models/lnd/clm/bld/clm.cpl7.template ------------------------ Set resolution for CLM_USRDAT_NAME
     M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New urban pt1
               datasets: 1x1_vancouverCAN, 1x1_mexicocityMEX, 1x1_urbanc_alpha, 1x1_asphaltjungleNJ
>>>>>>>>>>> Remove SNICAR message about moving the sun
     M   models/lnd/clm/src/biogeophys/SNICARMod.F90
>>>>>>>>>>> Finish off current User's Guide
>>>>>>>>>>> Bring rel03->rel04 updates in, run ispell on everything
>>>>>>>>>>> Work on mksurfdata and testing sections, give instructions for pergro
>>>>>>>>>>> Add help from mksurfdata.pl and test_driver.sh scripts
     M   models/lnd/clm/doc/KnownBugs -- Add note that mkgriddata can not straddle Greenwich
     M   models/lnd/clm/doc/UsersGuide/tools.xml
     M   models/lnd/clm/doc/UsersGuide/preface.xml
     M   models/lnd/clm/doc/UsersGuide/clm_ug.xml
     M   models/lnd/clm/doc/UsersGuide/adding_files.xml
     M   models/lnd/clm/doc/UsersGuide/appendix.xml
     M   models/lnd/clm/doc/UsersGuide/config_cache.xml
     M   models/lnd/clm/doc/UsersGuide/custom.xml
     M   models/lnd/clm/doc/UsersGuide/single_point.xml
     M   models/lnd/clm/doc/UsersGuide/Makefile
     M   models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff
     M   models/lnd/clm/doc/UsersGuide/special_cases.xml

Summary of testing:

  bluefire: All PASS except...
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
029 smG55 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
043 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
044 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
045 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
046 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
048 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 12
  bluefire interactive testing: All PASS except...
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 5
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CCSM testing: All PASS except
FAIL  PST.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  PET_PT.f45_g37.I1850.bluefire.compare.clm3_7_10 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_15 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_10 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_10 
BFAIL PST.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
BFAIL PET_PT.f10_f10.I8520CN.bluefire.compare.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm3_7_10 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm3_7_10 
  jaguar: All PASS except..
005 smB51 TSM.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 144 arb_ic ..............FAIL! rc= 10
006 erB51 TER.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
007 brB51 TBR.sh _scsnf_dh clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
026 smLI2 TSM.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
027 erLI2 TER.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
028 brLI2 TBR.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
030 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10
031 erL58 TER.sh _sc_dh clm_std^nl_crcrop 20020115:NONE:1800 10x15 USGS 12+84 arb_ic ............FAIL! rc= 5
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/ifort interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
014 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_FAIL! rc= 5
015 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arbFAIL! rc= 5
016 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 4
018 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
019 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
020 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
  edinburgh/ifort: All PASS except...
002 erA92 TER.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic ................FAIL! rc= 7
003 brA92 TBR.sh _sc_dm clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic .............FAIL! rc= 6
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 72+72 cold ...............FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 5
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
011 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
020 smG53 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG53 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG53 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG53 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_7_14

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_7_14
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Thu Apr  8 16:15:35 MDT 2010
One-line Summary: Fix rcp=2.6/4.5 1-degree fndepdyn filenames

Purpose of changes:

Fix the names of the rcp=2.6/4.5 1-degree fndepdyn filenames (had a 100208 file creation
date but should be 100407).

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Fix fndepdyn filenames

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Fix fndepdyn filenames

Summary of testing: None

===============================================================
===============================================================
Tag name:  clm3_7_13
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Thu Apr  8 10:53:06 MDT 2010
One-line Summary: Add in missing rcp=2.6/6 use-cases, and fix syntax errors in the namelist_defaults file

Purpose of changes:

Add in missing use cases for rcp=4.5 and rcp=6 transient future scenarios. Fix syntax errors in the namelist_defaults_clm
file.

Bugs fixed (include bugzilla ID):  Above two problems

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Nonae

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

A      models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp2.6_transient.xml
A      models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp6_transient.xml

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Fix syntax errors

Summary of testing: None, other than script creation testing

===============================================================
===============================================================
Tag name:  clm3_7_12
Originator(s):  erik (erik)
Date: Thu Apr  8 00:30:30 MDT 2010
One-line Summary: rcp=2.6/4.5 datasets for fndepdyn and aerdepdat, fix some minor issues, new 1pt urban surfdata files

Purpose of changes:

Add in urban single-point surfdata files.  Add in regridded ndepdyn/aerdep files: f09,
f45, f10, f25. Fix name of f05, 1850 fsurdat file, add in new urban single point
datasets, add back urbanc_alpha grid/frac files. Put rcp in filenames for aerdep/ndep
regrid scripts. chomp frac filename in mksurfdata.pl, for urban single-point files. Make
OPT=TRUE default for mksurfdata. Lengthen allowed gridname for mksurfdata.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    aerdep/ndepdyn for rcp=2.6/4.5 f10, f45, f25, f09
    fix name of f05 fsurdata file for 1850
    get urbanc_alpha grid and frac files in
    get in new urban single-point datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):
    csm_share to share3_100407

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M    models/lnd/clm/tools/mksurfdata/Makefile ------ make OPT=TRUE the default
M    models/lnd/clm/tools/mksurfdata/mksrfdat.F90 -- lengthen gridname to 32
M    models/lnd/clm/tools/mksurfdata/mksurfdata.pl - make sure to chomp fracdata file

M    models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl - Add rcp to filename
M    models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --- Add rcp to filename

M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New datasets
                    aerdep/ndepdyn for rcp=2.6/4.5 f10, f45, f25, f09
                    fix name of f05 fsurdata file for 1850
                    get urbanc_alpha grid and frac files in
                    get in new urban single-point datasets

Summary of testing:

  bluefire interactive testing: All PASS except up to 014 smJ74
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
010 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10

===============================================================
===============================================================
Tag name:  clm3_7_11
Originator(s):  erik (erik)
Date: Wed Apr  7 11:59:22 MDT 2010
One-line Summary: qtr-degree and T85 surfdata, rcp=2.6/4.5 datasets, doc updates

Purpose of changes:

Documentation updates, for users guide and namelist and configure xml files (rel04 to
rel05 update). Fix missing deallocate (bug 1133), and line length for NEE. Changes in
mksurfdata so that will run for qtr-degree. New rcp datasets for 4.5 and 2.6, aerdep
(only f19)/ndepdyn/pftdyn datasets. Fix CN spinup test, fix test name for bluefire tests.
Add in qtr-degree and T85 surfdata files.

Bugs fixed (include bugzilla ID):
                                 1141 (CN spinup test)
                                 1137 (qtr-deg fsurdat)
                                 1136 (line length for NEE in histFlds)
                                 1135 (miss smG45 test)
                                 1133 (missing deallocate)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                      (partial T85 and qtr-degree)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
              new qtr-degree and T85 fsurdat
              new rcp=8.5, f19 pftdyn, rcp=4.5 f09, f19, f10 pftdyn
              new rcp=2.6 f09, f19, f10 pftdyn
              new rcp=4.5/2.6 f19 aerdep 1850-2100 datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv
    scripts to scripts4_100406a
    drv     to drvseq3_1_23

List all files eliminated:

   D  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850.txt -- Rename with _hist_
   D  models/lnd/clm/tools/mksurfdata/pftdyn_simyr2000.txt -- Rename with _hist_

List all files added and what they do:

   A  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr2000.txt - Renamed from above
   A  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850.txt - Renamed from above

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>> Turn supln off for spinup modes
   M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
   M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
   M  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
   M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
   M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
   M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
   M  models/lnd/clm/test/system/tests_pretag_bluefire --------------- Change name of missing test smG45->smG55

>>>>>>>>>>>>> Change names of pftdyn text files to include _hist_
>>>>>>>>>>>>> Memory updates so uses less memory (allocate just before needed
>>>>>>>>>>>>> deallocate after done). This is from the ccsm4_0_rel05 update
>>>>>>>>>>>>> Mariana started the changes and Erik added some more.
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.namelist
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.regional
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.singlept
   M  models/lnd/clm/tools/mksurfdata/README
   M  models/lnd/clm/tools/mksurfdata/mkurbanparMod.F90 ----- Memory updates

   M  models/lnd/clm/bld/clm.cpl7.template - Use $CASETOOLS for Makefile

   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - 
              new qtr-degree and T85 fsurdat
              new rcp=8.5, f19 pftdyn, rcp=4.5 f09, f19, f10 pftdyn
              new rcp=2.6 f09, f19, f10 pftdyn
              new rcp=4.5/2.6 f19 aerdep 1850-2100 datasets

>>>>>>>>>>>>> Documentation udpates updating from rel04 to ccsm4_0_rel05
   M  models/lnd/clm/bld/configure -------------------------- change CVS to SVN
   M  models/lnd/clm/bld/config_files/config_definition.xsl - Correct name
   M  models/lnd/clm/bld/config_files/config_definition.xml - Add category for maxpft

   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml - Work with categories
                    and improve descriptions, remove rpntpath
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl - Seperate out
                    stand-alone testing categories, improve documentation, work
                    on categories.

>>>>>>>>>>>>> Documentation udpates updating from rel04 to ccsm4_0_rel05
>>>>>>>>>>>>> Updates from Sam, Keith, and Sean, more doc on tools and appendix
   M  models/lnd/clm/doc/UsersGuide/co2_streams.txt
   M  models/lnd/clm/doc/UsersGuide/tools.xml
   M  models/lnd/clm/doc/UsersGuide/preface.xml
   M  models/lnd/clm/doc/UsersGuide/clm_stylesheet.dsl
   M  models/lnd/clm/doc/UsersGuide/clm_ug.xml
   M  models/lnd/clm/doc/UsersGuide/adding_files.xml
   M  models/lnd/clm/doc/UsersGuide/appendix.xml
   M  models/lnd/clm/doc/UsersGuide/custom.xml
   M  models/lnd/clm/doc/UsersGuide/single_point.xml
   M  models/lnd/clm/doc/UsersGuide/Makefile
   M  models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff
   M  models/lnd/clm/doc/UsersGuide/special_cases.xml
   M  models/lnd/clm/doc/KnownBugs --------------------------- Add notes on: 
       bugzilla bugs: 669, 1024, 1124, 1125, 1127

   M  models/lnd/clm/src/main/accFldsMod.F90 -- Deallocate outside #ifdef
   M  models/lnd/clm/src/main/histFldsMod.F90 - Shorten long line for NEE

Summary of testing:

  bluefire: All PASS up to 024, blHN1 test except...
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  bluefire interactive testing: All PASS except (up to 26 brAK8 test)
006 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
007 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
008 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
018 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  jaguar interactive testing: All PASS up to smAK4 test except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
008 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............SKIPPED*
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
008 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_7_10

Changes answers relative to baseline: no (b4b)

===============================================================
===============================================================
Tag name:  clm3_7_10
Originator(s):  erik (erik)
Date: Mon Mar 22 23:54:48 MDT 2010
One-line Summary: Fix drydep so that BMOZ case will work

Purpose of changes:

Update externals, fix drydep bug (so that BMOZ case will run bug 1132). Add 10x15 and 4x5
finidat files, so that bluefire.clm.auxtest PET and PST cases will work. Fix
documentation on transient CO2.

Bugs fixed (include bugzilla ID):
                                 1132 (clm failure for BMOZ compset)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
   New 10x15 and 4x5 finidat files so that transient cases will work at those resolutions

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm, pio
  Update to ccsm4_0_beta47 versions
   scripts  to scripts4_100322b
   drv      to drvseq3_1_20
   datm     to datm8_100225
   pio      to pio1_0_18 

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/doc/UsersGuide/Makefile ---------- Fix conversion to xml
M      models/lnd/clm/doc/UsersGuide/special_cases.xml - Fix transient CO2 doc
M      models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff - Fix CO2 file

M      models/lnd/clm/tools/mksurfdata/mksurfdata.pl --- Fix historical rcp value
M      models/lnd/clm/tools/interpinic/runinit_ibm.csh - Fix so will run

M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Add 10x15, 4x5
              finidat files

M      models/lnd/clm/src/main/clm_comp.F90 ------- check drydep_method
M      models/lnd/clm/src/main/clmtypeInitMod.F90 - check drydep_method
M      models/lnd/clm/src/main/clm_atmlnd.F90 ----- check drydep_method, don't pass
                  drydep stuff unless drydep_method is DD_XLND

Summary of testing:

  bluefire/CCSM testing: All PASS except...
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_10 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_07 

CLM tag used for the baseline comparison tests if applicable: clm3_7_09

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_7_09
Originator(s):  erik (erik)
Date: Sun Mar 21 21:08:54 MDT 2010
One-line Summary: Fix snow enthalpy bug, cndv datasets, various fixes

Purpose of changes:

Fix snow enthalpy bug from Dave Lawrence. Add rcp to mksurfdata.pl. Add new 2006 datasets
for pftdyn files for mksurfdata. Fix history bug. New rcp 8.5 1-degree pftdyn dataset.
Duplicate all cn datasets for cndv. pergro use cases output in double precision. Some
work on documentation.

Bugs fixed (include bugzilla ID):
                                 1128 (cndv needs the same input files as cn)
                                 1130 (History problem on restarts)
                                 1131 (pergro use cases need double output files)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1124 (Reported energy for pftdyn grid-cell not right)
                                 1125 (T85, qtr-degree and urban pt surface datasets)
                                 1132 (clm failure for BMOZ compset)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:

   New 1-degree rcp=8.5 pftdyn dataset with harvest for 2006
   Duplicate cn datasets for cndv

Describe any substantial timing or memory changes: None

Code reviewed by: self
   snow changes come from dlawren and also reviewed by oleson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

>>>>>>>>>>> Add AIM rcp datasets
A    models/lnd/clm/tools/mksurfdata/pftdyn_rcp6.0_simyr1850-2100.txt

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> New 2006 file
M    models/lnd/clm/tools/mksurfdata/pftdyn_rcp2.6_simyr1850-2100.txt - New 2006 file
M    models/lnd/clm/tools/mksurfdata/pftdyn_rcp4.5_simyr1850-2100.txt - New 2006 file
M    models/lnd/clm/tools/mksurfdata/pftdyn_rcp8.5_simyr1850-2100.txt - New 2006 file
M    models/lnd/clm/tools/mksurfdata/mksurfdata.pl - Add rcp as argument
M    models/lnd/clm/tools/mksurfdata/README -------- Document mksurfdata.pl and rcp files

M    models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl - Get rid of old masks

M    models/lnd/clm/tools/interpinic/runinit_ibm.csh - Get rid of old masks/grids, and sim_year
M    models/lnd/clm/tools/interpinic/README ---------- Update documentation

M    models/lnd/clm/tools/mkgriddata/mkgriddata.ccsm_dom - Add clm grid file
M    models/lnd/clm/tools/mkgriddata/README  ------------- More documentation

M    models/lnd/clm/bld/namelist_files/use_cases/pergro.xml ------ Output history in double
M    models/lnd/clm/bld/namelist_files/use_cases/pergro0.xml ----- Output history in double
M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Duplicate cn files for cndv
                                      New 1-degree rcp=8.5 pftdyn file

M    models/lnd/clm/src/main/histFileMod.F90 - Make sure 3D fields defined before output

M    models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90 - conserve enthalpy on snow combination

M    models/lnd/clm/doc/IMPORTANT_NOTES ----- Add notes about fine-mesh
M    models/lnd/clm/doc/UsersGuide/Makefile - Remove file for realclean

Summary of testing:

  bluefire:
003 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v7 -3+-3 arb_ic .............FAIL! rc= 11
004 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v7 -6 arb_ic ...................FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v7 144 cold .................FAIL! rc= 7
010 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 arb_ic ......FAIL! rc= 11
011 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 arb_ic ............FAIL! rc= 7
015 brF92 TBR.sh 17p_vodsrsc_dm clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 cold .......FAIL! rc= 11
016 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 cold .............FAIL! rc= 7
019 brEH1 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 13
020 blEH1 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 7
023 brHN1 TBR.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -5+-5 cFAIL! rc= 13
024 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 7
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  bluefire interactive testing:
003 brA74 TBR.sh _nrsc_ds clm_std^nl_urb_br 20030101:NONE:1800 1x1_brazil navy -5+-5 arb_ic .....FAIL! rc= 13
006 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
007 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
008 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
016 brJ74 TBR.sh 4p_nrcasasc_ds clm_std^nl_urb_br 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_icFAIL! rc= 11
018 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
031 brF93 TBR.sh 17p_vodsrsc_do clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v7 72+72 cold .......FAIL! rc= 11
032 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 cold .............FAIL! rc= 7
035 brL83 TBR.sh _nrsc_do clm_std^nl_urb_br 20020115:NONE:3600 5x5_amazon navy -10+-10 arb_ic ...FAIL! rc= 13
040 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:NONE:1800 1x1_brazil navy -670 arb_ic ............FAIL! rc= 7
045 bl754 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 7
047 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 7
049 bl754 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 2
  jaguar interactive testing:
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/ifort: interactive testing:
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
009 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
010 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
011 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
013 smOC4 TSM.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 10
014 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_FAIL! rc= 5
015 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arbFAIL! rc= 5
017 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
018 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
019 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
  edinburgh/ifort
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm3_7_08

Changes answers relative to baseline: YES

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: same climate

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
    ccsm4_0_beta35
    bluefire
    -compset B_1850_TRACK1_CN -res f19_g16

   MSS location of control simulations used to validate new climate:

/DLAWREN/csm/b40.1850.track1.2deg.003.snow
   
   URL for LMWG diagnostics output used to validate new climate:

http://www.cgd.ucar.edu/ccr/paleo/b40.snow/b40.1850.track1.2deg.003.snow-b40.1850.track1.2deg.003.control/
http://www.cgd.ucar.edu/ccr/dlawren/research/clm4.0_dev/b40.1850.track1.2deg.003.snowa-b40.1850.track1.2deg.003.controla/setsIndex.html
	
===============================================================
===============================================================
Tag name:  clm3_7_08
Originator(s):  Mariana Vertenstein (mvertens)
Date: Fri Mar 12 13:26:09 MST 2010
One-line Summary: Removal of check for weights if dynamic land use is used

Purpose of changes:
This one line change enabled the vast majority of the CCSM tests to pass.
	
Verified that ERI 20th century tests in CCSM test suite for ccsm4_0_beta46 now passed with this changed 
	
This was reviewed by Dave Lawrence and Sam Levis	
	
Everything from clm3_7_07 applies except for the following:
	
M      biogeophys/BiogeophysRestMod.F90
  -   if ( nsrest == 1 .or. (nsrest == 3 .and. fpftdyn /= ' ') )then
  -   ! Do NOT do any testing for restart or a pftdyn branch case
  +   if ( nsrest == 1 .or. fpftdyn /= ' ' )then
  +   ! Do NOT do any testing for restart or a pftdyn case
  also added in a #if CNDV 

M      biogeochem/CNDVEstablishmentMod.F90
M      main/clmtypeInitMod.F90
       - fix for case when leaf area index is pathologically large
         the original fix for this was not longer working - and the above changes address this

M      bld/build-namelist
M      bld/namelist_files/namelist_defaults_clm.xml
       - fixed issues related to getting fndepdat for -bgc cndv

===============================================================
Tag name:  clm3_7_07
Originator(s):  erik (erik)
Date: Wed Mar 10 23:35:37 MST 2010
One-line Summary: New finidat datasets for 1-deg, 2-deg, and abort if weights from finidat/fsurdat files are too different, and use fsurdat files as truth

Purpose of changes:

Use surfdata weights and stop if finidat file weights are too different. Use ccsm4init
datasets for finidat files for 1-deg and 2-deg. In I compsets, setup for special I case
finidat files. Update scripts. Drydep changes from Francis. Change cell_method to
cell_methods. Allow clm_start_type to be overridden if on use_case. Only set orb_iyearad
for standalone clm testing. Allow vars on use_cases to not be set for some configs. Make
sure all BGC modes are set for variables on use_cases. Set cold-start for pergro cases.
Update documentation.

Bugs fixed (include bugzilla ID):
                                1098 (use weights from surdat file rather than finidat file)
                                1121 (history variable attribute cell_methods misnamed)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1132 (clm failure for BMOZ compset)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:

     New finidat files for 1-deg and 2-deg (from fully coupled simulations)
     New datasets for I cases that are set in scripts

Describe any substantial timing or memory changes: None

Code reviewed by: self, dlawren, slevis, oleson

List any svn externals directories updated (csm_share, mct, etc.): scripts

    scripts to scripts4_100310c

    This version of scripts sets up special finidat files that will be used
    for all I cases (other cases use the fully coupled datasets that are stored
    in the namelist_defaults_clm.xml database).

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New finidat files
M      models/lnd/clm/src/biogeochem/DryDepVelocity.F90 ------------ Changes from Francis
M      models/lnd/clm/src/main/ncdio.F90 --------------------------- Change cell_method to cell_methods
M      models/lnd/clm/src/main/clm_initializeMod.F90 --------------- Remove second call to pftdyn_interp
M      models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --------- Compare weights only
                if NOT restart and NOT branch with pftdyn. If weights are too different
                abort, if close enough write a warning and continue using the surfdata
                weights

>>>>>>>>>>>>>>>> Some work on documentation
M      models/lnd/clm/doc/KnownBugs
M      models/lnd/clm/doc/UsersGuide/preface.xml
M      models/lnd/clm/doc/IMPORTANT_NOTES
M      models/lnd/clm/doc/Quickstart.GUIDE

>>>>>>>>>>>>>>>> Allow clm_start_type to be overridden if on use_case
>>>>>>>>>>>>>>>> Allow vars in use_cases to not be set for some configs
M      models/lnd/clm/bld/build-namelist

>>>>>>>>>>>>>>>> Change start_type to clm_start_type for all use-cases
>>>>>>>>>>>>>>>> Only set orb_iyearad for standalone clm testing
M      models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml
M      models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
M      models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml
M      models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml
M      models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml
M      models/lnd/clm/bld/namelist_files/use_cases/pergro.xml --------- Set start to cold
M      models/lnd/clm/bld/namelist_files/use_cases/pergro0.xml -------- Set start to cold
M      models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml

Summary of testing:

  bluefire: All PASS except...
024 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 7
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  bluefire interactive testing: All PASS except...
006 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
007 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
008 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
018 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CCSM testing: All PASS except...
FAIL  ERS.f19_g16.I1850.bluefire.compare_hist.clm3_7_06 
FAIL  ERS.f19_g16.I1850.bluefire.compare.clm3_7_06 
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_7_06 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_07 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_06 
SFAIL PST.f10_f10.I8520CN.bluefire.GC.201955 
SFAIL PET_PT.f10_f10.I8520CN.bluefire.GC.201955 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare_hist.clm3_7_06 
FAIL  ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm3_7_06 
  jaguar interactive testing: All PASS up to...
005 smAK4 TSM.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold

CLM tag used for the baseline comparison tests if applicable: clm3_7_06

Changes answers relative to baseline: Different initial condition datasets, 
                also now using weights from surfdata files rather than finidat files

===============================================================
===============================================================
Tag name:  clm3_7_06
Originator(s):  erik (erik)
Date: Wed Mar 10 16:35:57 MST 2010
One-line Summary: Bring cndv branch to trunk

Purpose of changes:

Bring CNDV branch to trunk cndv16_clm3_7_05 (erik/slevis).  Fix bug 978 for Sam (nl
option for branch). Put CROP part of CNDV branch on it's own branch. Add a couple more
history fields (LAND_USE_FLUX, and LAND_UPTAKE). Add HTOP to default output. SNICAR_FRC
fix, test SNICAR_FRC. Fix VOC by making sure fsun240 is between 0 and 1. Fix CO2 PPMV for
I cases. Add in script to create CO2 streams file that can be used by datm8. Update VOC
documentation. Get in updates from ccsm4_0_rel branch. Remove 360x720 grid, files with
gx3v5/gx1v5 masks. Fix bug 1120, by initializing displavegc+ for CN, Change start_type to
clm_start_type, don't allow both fndepdat and fndepdyn. Don't allow spinup modes with
supln, and don't allow both ad_spinup and exit_spinup. Move testing from gx3v5 to gx3v7
mask

Bugs fixed (include bugzilla ID):
                                 1104 (Restart problem with pftdyn mode)
                                 1118 (Restarts with SNICAR_FRC fail)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1132 (clm failure for BMOZ compset)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Switch cndv for dgvm, Have configure disallow
bad cases
    Change configure to NOT allow supln with spinup cases
    Do NOT allow exit_spinup and ad_spinup at the same time.
    Only allow voc to be set for seq_ccsm NOT ext_ccsm_seq

Describe any changes made to the namelist: Add override_nsrest namelist option

List any changes to the defaults for the boundary datasets:
    New pft-physiology files with extra fields for CNDV
    Add new f05 1850 surfdata file
    Remove 360x720 files, gx3v5, gx1v5 files

Describe any substantial timing or memory changes: None

Code reviewed by: slevis, self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, csm_share, mct, and pio

   scripts   to scripts4_100306
   drv       to drvseq3_1_19
   csm_share to share3_100228
   mct       to MCT2_7_0_100228
   pio       to pio1_0_15

List all files eliminated: Remove DGVM files

   D   models/lnd/clm/src/biogeochem/DGVMLightMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMReproductionMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMAllocationMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMEcosystemDynMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMKillMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMEstablishmentMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMRestMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMMortalityMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMTurnoverMod.F90
   D   models/lnd/clm/src/biogeochem/DGVMFireMod.F90

List all files added and what they do:

>>>>>>>>>>>>> Add CNDV files
   A    models/lnd/clm/src/biogeochem/CNDVEstablishmentMod.F90
   A    models/lnd/clm/src/biogeochem/CNDVLightMod.F90
   A    models/lnd/clm/src/biogeochem/CNDVMod.F90
   A    models/lnd/clm/src/biogeochem/CNDVEcosystemDynIniMod.F90
>>>>>>>>>>>>> Add script to convert CAM historical greenhouse gas file to CO2 history
>>>>>>>>>>>>> file that can be used in datm streams
   A   models/lnd/clm/tools/ncl_scripts/getco2_historical.ncl
>>>>>>>>>>>>> Add SNICAR_FRC and CNDV config files to test
   A   models/lnd/clm/test/system/config_files/_scsnf_dh
   A   models/lnd/clm/test/system/config_files/_scsnf_dm
   A   models/lnd/clm/test/system/config_files/_scsnf_do
   A   models/lnd/clm/test/system/config_files/17p_cndvsc_dh
   A   models/lnd/clm/test/system/config_files/17p_cndvsc_dm
   A   models/lnd/clm/test/system/config_files/17p_cndvsc_do
   A   models/lnd/clm/test/system/config_files/17p_cndvsc_h

>>>>>>>>>>>>> Add files to describe how to add streams for CO2
   A   models/lnd/clm/doc/UsersGuide/addco2_datm.buildnml.diff
   A   models/lnd/clm/doc/UsersGuide/co2_streams.txt

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>> Document new getco2 script, use correct namelist in getregional script
   M   models/lnd/clm/tools/ncl_scripts/README
   M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl

>>>>>>>>>>>>>>> Add K configure tests for CNDV, B configure tests for SNICAR_FRC, 
>>>>>>>>>>>>>>> and create_croplunit tests Change maxpft 17 tests to numpft+1
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_h
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_m
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_o
   M    models/lnd/clm/test/system/config_files/17p_cnsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnsc_do
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnc13sc_do
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_dh
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_dm
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_do
   M    models/lnd/clm/test/system/config_files/17p_cnnsc_ds

   M    models/lnd/clm/test/system/tests_pretag_bluefire
   M    models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M    models/lnd/clm/test/system/tests_pretag_jaguar
   M    models/lnd/clm/test/system/tests_posttag_kraken
   M    models/lnd/clm/test/system/tests_posttag_breeze
   M    models/lnd/clm/test/system/tests_pretag_jaguar_nompi
   M    models/lnd/clm/test/system/tests_pretag_bangkok
   M    models/lnd/clm/test/system/tests_posttag_purempi_regression
   M    models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M    models/lnd/clm/test/system/tests_posttag_nompi_regression
   M    models/lnd/clm/test/system/tests_pretag_calgary

   M    models/lnd/clm/test/system/input_tests_master - Add B and K tests
   M    models/lnd/clm/test/system/test_driver.sh ----- Update for bluefire changes
                                   to scripts
   M    models/lnd/clm/test/system/mknamelist --------- Change start_type to
                                   clm_start_type add in nrevsnfile
   M    models/lnd/clm/test/system/README.testnames --- Change K configure
tests to mean CNDV

>>>>>>>>>>>>> 
   M   models/lnd/clm/bld/configure ---- Swap out cndv for dgvm. -bgc cndv turns on
                                         both CN AND CNDV cpp tokens.
                                         voc part of standalone_test arguments
                                         supln and spinup options can't be on at the same
time
                                         exit_spinup and ad_spinup can't be on at the
same time
   M    models/lnd/clm/bld/queryDefaultXML.pm ---------------- Swap cndv for DGVM
   M   models/lnd/clm/bld/config_files/config_definition.xml - Swap cndv for dgvm
                    voc in standalone_test, maxpft lists valid numbers
category
   M   models/lnd/clm/bld/build-namelist ----- Change start_type to clm_start_type
                                               Don't allow both fndepdyn and fndepdat to e set
                                               Work with nrevsn, so not always given
   M   models/lnd/clm/bld/clm.cpl7.template -- Rename start_type to clm_start_type, and
                                               let default be "default"
   M   models/lnd/clm/bld/namelist_files/checkdatmfiles.ncl ------ Update mask list
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml - Add override_nsrest, 
                    mkghg_bndtvghg, rename start_type to clm_startype

  M   models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Add
clm_start_type
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml ---- Remove domain
files
                                               with gx3v5 and gx1v5 masks
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- new pft-physiology files for CNDV
                                               Use same fndepdat datasets for cndv
                                               Remove 360x720 files,
                                               files with gx3v5 and gx1v5 masks
                                               New 1850 f05 fsurdat file
                                               Add mkghg_bndtvghg dataset to point to CAM
                                               historical greenhouse dataset
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ----- Remove
start_type

   M   models/lnd/clm/doc/UsersGuide/tools.xml
   M   models/lnd/clm/doc/UsersGuide/preface.xml
   M   models/lnd/clm/doc/UsersGuide/clm_ug.xml
   M   models/lnd/clm/doc/UsersGuide/adding_files.xml
   M   models/lnd/clm/doc/UsersGuide/appendix.xml
   M   models/lnd/clm/doc/UsersGuide/custom.xml
   M   models/lnd/clm/doc/UsersGuide/single_point.xml
   M   models/lnd/clm/doc/UsersGuide/Makefile
   M   models/lnd/clm/doc/UsersGuide/special_cases.xml

>>>>>>>>>>>>> Add in landuseflux/landuptake, always use hardwire_sla for VOC
>>>>>>>>>>>>> Set displavegc for CN not just CNDV, new fields for SNICAR_FRC restarts
   M   models/lnd/clm/src/biogeochem/CNSummaryMod.F90 --------- Calculate landuseflux/landuptake
   M   models/lnd/clm/src/biogeochem/CNPhenologyMod.F90 ------- Calculate pftmayexist for CNDV
                                       Remove concurrent directives
   M   models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ------- Always use hardwire_sla
                          Remove DGVM CPP ifdefs, fix for transient problem from Dave
                          loop over soil filter rather than non-lake
   M   models/lnd/clm/src/biogeochem/CNSetValueMod.F90 -------- Set displavegc etc. for CN as well as CNDV
                                   Add some CNDV fields
   M   models/lnd/clm/src/main/clmtypeInitMod.F90 ------------- Remove agdd0/agdd5,fnpsn10,
                                                                initialize landuseflux/landuptake
   M   models/lnd/clm/src/main/CNiniSpecial.F90 --------------- initialize landuseflux/landuptake
   M   models/lnd/clm/src/main/clmtype.F90 -------------------- Swap DGVM vars for CNDV
                                                                add pftmayexist, landuseflux/landuptake
   M   models/lnd/clm/src/main/histFldsMod.F90 ---------------- Add LAND_USE_FLUX, LAND_UPTAKE, make HTOP active
                     Swap DGVM fields for CNDV
   M   models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 ---- Add fields needed for SNICAR_FRC

   M   models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90 --- Remove uneeded use statement
   M   models/lnd/clm/src/biogeochem/CNGapMortalityMod.F90 ---- CNDV changes
   M   models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90 - Remove junk
   M   models/lnd/clm/src/biogeochem/CNGRespMod.F90 ----------- Remove junk
   M   models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 --- Remove junk
   M   models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90 ----
   M   models/lnd/clm/src/biogeochem/CNNStateUpdate3Mod.F90 ---
   M   models/lnd/clm/src/biogeochem/CNFireMod.F90 ------------ CNDV section
   M   models/lnd/clm/src/biogeochem/CNMRespMod.F90 ----------- Remove junk
   M   models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90  Remove junk
   M   models/lnd/clm/src/biogeochem/CNDecompMod.F90 ---------- Pass lbp, ubp to CNAllocate
   M   models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 --- Formatting changes
   M   models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 --- Swap CNDV for DGVM
   M   models/lnd/clm/src/biogeochem/CNCStateUpdate3Mod.F90 --- Remove junk
   M   models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90 - Remove junk
   M   models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90 - Remove junk
   M   models/lnd/clm/src/biogeochem/CNrestMod.F90 ------------ Add CNDV section
   M   models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90 ---- Add CNDV section
   M   models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90 --- Remove junk
   M   models/lnd/clm/src/biogeochem/C13SummaryMod.F90 -------- Remove junk
   M   models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90 ------- Remove junk
   M   models/lnd/clm/src/biogeochem/CNAllocationMod.F90 ------ Pass pft loop indices in, 
                                  formatting changes remove junk
   M   models/lnd/clm/src/biogeochem/CNC13FluxMod.F90 --------- Remove junk
   M   models/lnd/clm/src/biogeochem/DryDepVelocity.F90 ------- Swap CNDV for DGVM
   M   models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90 ---- Pass lbp, ubp to CNDecompAlloc
   M   models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 - Use dwood from pft-physiology file
                  Add CNDV section

   M   models/lnd/clm/src/main/clm_varpar.F90 --------- Change some of the names around
   M   models/lnd/clm/src/main/CNiniTimeVar.F90 ------- CNDV section for litter fall
   M   models/lnd/clm/src/main/clm_comp.F90 ----------- Swap CNDV for DGVM
   M   models/lnd/clm/src/main/clm_initializeMod.F90 -- Swap CNDV for DGVM
   M   models/lnd/clm/src/main/accFldsMod.F90 --------- Swap CNDV for DGVM 
   M   models/lnd/clm/src/main/subgridMod.F90 --------- Handle create_croplandunit correctly
   M   models/lnd/clm/src/main/pftdynMod.F90 ---------- Add CNDV subroutine: pftwt_init
                 For CNDV make pftwt_interp public
and 
   M   models/lnd/clm/src/main/iniTimeConst.F90 ------- Change dgvm vars init
   M   models/lnd/clm/src/main/restFileMod.F90 -------- Remove DGVM
   M   models/lnd/clm/src/main/controlMod.F90 --------- Add override_nsrest, swap CNDV for DGVM
   M   models/lnd/clm/src/main/initSurfAlbMod.F90 ----- Swap CNDV for DGVM
   M   models/lnd/clm/src/main/filterMod.F90 ---------- Swap CNDV for DGVM remove concurrent directives
   M   models/lnd/clm/src/main/clm_driver.F90 --------- Swap CNDV for DGVM
   M   models/lnd/clm/src/main/clm_varctl.F90 --------- Swap CNDV for DGVM, fix check for create_croplandunit
   M   models/lnd/clm/src/main/ndepFileMod.F90 -------- Remove junk
   M   models/lnd/clm/src/main/initGridCellsMod.F90 --- Fix create_croplandunit
   M   models/lnd/clm/src/main/pftvarcon.F90 ---------- New CNDV parameters, formatting changes,
                              Always read all parameters to make read easier to understand
   M   models/lnd/clm/src/main/surfrdMod.F90 ---------- Swap CNDV for DGVMA, fix create_croplandunit, change some names

   M   models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ----- Remove junk
   M   models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90 - Remove junk add comments
   M   models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 --- Remove junk
   M   models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90 - Change comments remove DGVM
   M   models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 ---- Change formatting add comments
   M   models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ------- Remove DGVM
   M   models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 - Remove junk
   M   models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90 ----- Remove DGVM add in CNDV

Summary of testing:

  bluefire:
FAIL! rc= 7
025 smK51 TSM.sh 17p_cndvsc_dh clm_std 19981231:NONE:1800 10x15 USGS 48 arb_ic ..................PASS
026 erK51 TER.sh 17p_cndvsc_dh clm_std 19981231:NONE:1800 10x15 USGS 10+38 arb_ic ...............PASS
027 brK51 TBR.sh 17p_cndvsc_dh clm_std 19981231:NONE:1800 10x15 USGS 24+24 arb_ic ...............PASS
028 blK51 TBL.sh 17p_cndvsc_dh clm_std 19981231:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 5
029 smHN1 TSM.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colPASS
030 erHN1 TER.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -3+-7 cFAIL! rc= 13
031 brHN1 TBR.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -5+-5 cFAIL! rc= 11
032 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 7
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  bluefire interactive testing: All PASS except...
006 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
007 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
008 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
018 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
032 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v7 48 cold .............FAIL! rc= 5
036 blL83 TBL.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 7
040 blK74 TBL.sh 17p_cndvsc_s clm_std 19971231:NONE:1800 1x1_brazil navy -670 arb_ic ............FAIL! rc= 5
  bluefire/CCSM testing: All PASS except.. (compare tests fail because CO2 level was changed for 2000 compsets)
FAIL  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm3_7_05
FAIL  SMS_RLA.f45_f45.I.bluefire.compare.clm3_7_05
FAIL  SMS_RLB.f45_f45.I.bluefire.compare_hist.clm3_7_05
FAIL  SMS_RLB.f45_f45.I.bluefire.compare.clm3_7_05
BFAIL ERS_D.f45_g37.I.bluefire.compare.clm3_7_05
FAIL  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_7_05
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_06
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_05
BFAIL ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_05
FAIL  PST.f10_f10.I8520CN.bluefire.compare.clm3_7_05
BFAIL PET_PT.f10_f10.I8520CN.bluefire.compare.clm3_7_05
BFAIL ERS_D.f19_g16.IRCP85CN.bluefire.compare.clm3_7_05
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm3_7_05

Changes answers relative to baseline: I2000 cases are different because of new CCSM_CO2_PPMV

===============================================================
===============================================================
Tag name:  clm3_7_05
Originator(s):  erik (erik)
Date: Wed Feb 24 00:33:08 MST 2010
One-line Summary: Bring VOC branch source code to trunk

Purpose of changes:

Move VOC branch over to trunk (vocemis-drydep19_clm3_7_04), this includes source code
changes for VOC and drydep. Ensure answers for f09, f19, f10 are identical to clm3_7_02
(other than VOC fields). Split users guide into separate files by chapter. Remove dublin.
Add rcp option to getregional dataset script.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1104 (Restart problem with pftdyn mode)
                                 1118 (Restarts with SNICAR_FRC fail)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1132 (clm failure for BMOZ compset)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
   Fix date of 1x1_tropicAtl surfdata
   New T62 fsurdat  file with VOC
   Fix syntax error in default_datm file

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts and drv

    scripts to scripts4_100222 (uses new bluefire compiler with bug-fix for
                                reproducibility bug)
    drv     to drvseq3_1_17

List all files eliminated:

>>>>>>>>>>>>> Rename to edinburgh
 D  models/lnd/clm/test/system/tests_pretag_dublin
 D  models/lnd/clm/test/system/tests_pretag_dublin_nompi

>>>>>>>>>>>>> Split into separate files
 D  models/lnd/clm/doc/UsersGuide/index.xml

List all files added and what they do:

 A  models/lnd/clm/test/system/tests_pretag_edinburgh ------- Rename dublin files
 A  models/lnd/clm/test/system/tests_pretag_edinburgh_nompi - Rename dublin files

>>>>>>>>>>>>> Split Users Guide into separate files by chapter
 A  models/lnd/clm/doc/UsersGuide/tools.xml
 A  models/lnd/clm/doc/UsersGuide/preface.xml
 A  models/lnd/clm/doc/UsersGuide/clm_ug.xml
 A  models/lnd/clm/doc/UsersGuide/adding_files.xml
 A  models/lnd/clm/doc/UsersGuide/config_cache.xml
 A  models/lnd/clm/doc/UsersGuide/custom.xml
 A  models/lnd/clm/doc/UsersGuide/get_Icaselist.pl --- Script to list I cases
 A  models/lnd/clm/doc/UsersGuide/single_point.xml
 A  models/lnd/clm/doc/UsersGuide/special_cases.xml

>>>>>>>>>>>>> Add module to handle dry-deposition velocity
 A   models/lnd/clm/src/biogeochem/DryDepVelocity.F90

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>> Remove dublin
 M  models/lnd/clm/test/system/test_driver.sh
 M  models/lnd/clm/test/system/input_tests_master - Decrease mexicoCity run length to 157
 M  models/lnd/clm/test/system/CLM_runcmnd.sh

>>>>>>>>>>>>> Fix bug in dynamic PFT file generation example, let intel allow lines of
>>>>>>>>>>>>> any length
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn - Use 1850 veg file to start from
 M  models/lnd/clm/tools/mksurfdata/Makefile ---------- Remove intel -132 so can be any
length
 M  models/lnd/clm/tools/mkgriddata/Makefile ---------- Remove intel -132 so can be any 
                                                        length, add SMP option
 M  models/lnd/clm/tools/mkdatadomain/Makefile -------- Remove intel -132 so can be any
length

  M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl -- Add absolute_path and
                                                        ability to use rcp
  M   models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl - Add rcp
                                                        correct namelist for domainfile

>>>>>>>>>>>>> 
 M  models/lnd/clm/bld/clm.cpl7.template ---- Turn rtm off for PTS_MODE, remove lnd_in
and Filepath files from clmconf
 M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Fix syntax error in
2.5x3.33 domain file
 M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- Fix date of
surfdata_1x1_tropicAtl file

>>>>>>>>>>>>> Split into separate files by Chapter
 M  models/lnd/clm/doc/UsersGuide/Makefile

>>>>>>>>>>>>> Source code changes to use MEGAN VOC and dry-deposition

  M   models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 -- Add readAnnualVegetation
                        subroutine for dry-deposition, use some F90 NetCDF,
                        get mlai difference between months for dry-deposition
  M   models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ------ New MEGAN VOC module
                        remove concurrent directives
  M   models/lnd/clm/src/main/clm_varpar.F90 ---------------- Change comment on nvoc
  M   models/lnd/clm/src/main/clm_comp.F90 ------------------ Interp monthly veg for
                        drydep on clm_init2
  M   models/lnd/clm/src/main/clm_initializeMod.F90 --------- add readAnnualVegetation 
  M   models/lnd/clm/src/main/accFldsMod.F90 ---------------- 24hr and 10day accumulators for 
                        t_veg, fsd, fsi, fsun, laip, remove concurrent directives
  M   models/lnd/clm/src/main/clmtypeInitMod.F90 ------------ Add new VOC and drydep variables
  M   models/lnd/clm/src/main/iniTimeConst.F90 -------------- Read in VOC emission 
                        factors, remove concurrent directives
  M   models/lnd/clm/src/main/clm_atmlnd.F90 ---------------- Add VOC and drydep fluxes
  M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 ------ Pass VOC and drydep fluxes
  M   models/lnd/clm/src/main/clm_driver.F90 ---------------- Always call VOC emission
                        and call depvel_compute
  M   models/lnd/clm/src/main/clmtype.F90 ------------------- Add some VOC and drydep
                        variables, move sandfrac/clayfrac for all not just CASA
                        add accumulation variables
  M   models/lnd/clm/src/main/histFldsMod.F90 --------------- Bunch of new inactive
                        variables for VOC fluxes
  M   models/lnd/clm/src/main/inicFileMod.F90 --------------- Li Xu: correct ncd_iolocal and snow_fraction
  M   models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90 - Deal with drydep velocity
  M   models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --- Add mlaidiff to restart
                        file, if fsun set to NaN on restart set it to spval
  M   models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90 ----- Keep track of boundary
                        layer resistance

Summary of testing:

  Baseline tests are identical other than VOC flux fields..
> grep RMS
> /ptmp/erik/test-driver.612049/TBL.4p_vodsrsc_dh.clm_std^nl_urb.20021231:NONE:3600.1.9x2.5^0.9x1.25.gx1v6.48.arb_ic/cprnc.clmrun.clm2.h0.2002-12-31-00000.nc.out
> | grep -v 0.0000E+00
 RMS BIOGENCO 1.0058E-01
 RMS ISOPRENE 2.9500E+02
 RMS MONOTERP 2.9129E+00
 RMS ORVOC    3.3526E-01
 RMS OVOC     3.3526E-01
 RMS VOCFLXT  2.9641E+02

  bluefire:
004 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 7
011 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 7
016 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7
020 blEH1 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 7
024 blHN1 TBL.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -10 colFAIL! rc= 7
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
029 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
033 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 7
041 blH52 TBL.sh 17p_cnnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold .........FAIL! rc= 7
043 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 8
044 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
045 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
046 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
050 blJ61 TBL.sh 4p_casasc_dh clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 7
  bluefire interactive testing:
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 7
006 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
007 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
008 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
011 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
012 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
017 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic FAIL! rc= 7
018 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
023 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............FAIL! rc= 7
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
028 blL78 TBL.sh _nrsc_s clm_std^nl_urb 20021231:NONE:1800 1x1_brazil navy -10 arb_ic ...........FAIL! rc= 7
032 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7
036 blL83 TBL.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 7
041 bl744 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 7
043 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 7
045 bl754 TBLtools.sh mksurfdata tools__s globalirrig ...........................................FAIL! rc= 6
  bluefire/CCSM testing:
PASS  SMS_RLA.f45_f45.I.bluefire 
PASS  SMS_RLB.f45_f45.I.bluefire 
PASS  SMS_ROA.f45_f45.I.bluefire 
RUN   ERS_D.f45_g37.I.bluefire.GC.092123 
PASS  PST.f45_g37.I1850.bluefire.cpl 
PASS  PST.f45_g37.I1850.bluefire.atm 
PASS  PST.f45_g37.I1850.bluefire.lnd 
PASS  PST.f45_g37.I1850.bluefire.ice 
PASS  PST.f45_g37.I1850.bluefire.ocn 
PASS  PST.f45_g37.I1850.bluefire.glc 
PASS  PET_PT.f45_g37.I1850.bluefire 
PASS  ERS.f19_g16.I1850.bluefire 
PASS  ERB.f09_g16.I_1948-2004.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
PEND  ERH_D.f10_f10.I1850CN.bluefire.GC.092123 
PASS  PST.f10_f10.I8520CN.bluefire.cpl 
PASS  PST.f10_f10.I8520CN.bluefire.atm 
PASS  PST.f10_f10.I8520CN.bluefire.lnd 
PASS  PST.f10_f10.I8520CN.bluefire.ice 
PASS  PST.f10_f10.I8520CN.bluefire.ocn 
PASS  PST.f10_f10.I8520CN.bluefire.glc 
  jaguar/CCSM testing:
PASS  ERS_D.f09_g16.I1850.jaguar 
PASS  PST.f10_f10.I8520CN.jaguar.cpl 
PASS  PST.f10_f10.I8520CN.jaguar.atm 
PASS  PST.f10_f10.I8520CN.jaguar.lnd 
PASS  PST.f10_f10.I8520CN.jaguar.ice 
PASS  PST.f10_f10.I8520CN.jaguar.ocn 
PASS  PST.f10_f10.I8520CN.jaguar.glc 
PASS  PET_PT.f10_f10.I8520CN.jaguar 
  jaguar interactive testing:
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 7
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
008 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............FAIL! rc= 7
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
013 smJ74 TSM.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic FAIL! rc= 8
014 erJ74 TER.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic FAIL! rc= 5
015 brJ74 TBR.sh 4p_nrcasasc_ds clm_std^nl_urb_br 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_icFAIL! rc= 5
016 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic FAIL! rc= 4
  edinburgh/ifort interactive testing:
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
009 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
010 erCA4 TER.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ....FAIL! rc= 5
011 brCA4 TBR.sh _nrsc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic .FAIL! rc= 5
012 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
013 smOC4 TSM.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 10
014 erOC4 TER.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_FAIL! rc= 5
015 brOC4 TBR.sh _nrvansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arbFAIL! rc= 5
016 blOC4 TBL.sh _nrvansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 4
017 smNB4 TSM.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 10
018 erNB4 TER.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 57+100 arb_FAIL! rc= 5
019 brNB4 TBR.sh _nrmexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arFAIL! rc= 5
020 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 157 arb_ic FAIL! rc= 4
  edinburgh/ifort:
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
016 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 7
  breeze,gale,hail,gust/ifort interactive testing:
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 7
008 smCA4 TSM.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 10
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 4
010 smCA8 TSM.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 10
011 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 4
015 blL54 TBL.sh _sc_ds clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 7
019 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 48 cold .......FAIL! rc= 7
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_7_04

Changes answers relative to baseline: No bit-for-bit (except voc flux fields)

===============================================================
===============================================================
Tag name:  clm3_7_04
Originator(s):  erik (erik)
Date: Wed Feb 17 23:22:23 MST 2010
One-line Summary: Bring VOC branch (vocemis-drydep18_clm3_7_03) tools, testing, and build to trunk (everything other than VOC code changes)

Purpose of changes:

Move VOC branch (vocemis-drydep18_clm3_7_03) to trunk for support functionality, tools,
testing, everything but the code changes. This includes optimization of mksurfdata,
adding new tests, adding drydep to build, listen to cpl flag if aerosols are sent, update
documentation about configure variables, remove pio and carbon_aero config options
(always build with pio), remove local Macro's files for Darwin (yong_g95, and
breeze_intel), and remove gx1v3, gx1v4 masks, and 1x1.25 and 2x2.5 grids. All NCL regrid
scripts to be able to use GRDFIL env variable to set location of a grid file just
created. turn rtm off if PTS_MODE is TRUE. mksurfdata optimization includes: create
subroutines for landuse normalization, add OpenMP parallelism, optimize memory so
deallocate when done, and put OMP threads, veg filenames and optimization level on
mksurfdata files. Move shr_drydepInputMod.F90 to drv/shr/seq_drydepMod.F90 (from
csm_share to drv). Update externals. Work on documentation using output logs from scripts
and moving documentation into separate chapters.

Bugs fixed (include bugzilla ID):
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                 1105 (Turn RTM mode off for PTS_MODE)
                                 1110 (dt limit error, for mexicocity)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1104 (Restart problem with pftdyn mode)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1118 (Restarts with SNICAR_FRC fail)
                                 1133 (missing deallocate)
                                 1135 (miss smG45 test)
                                 1136 (line length for NEE in histFlds)
                                 1137 (qtr-deg fsurdat)
                                 1139 (LAND and PFTS 1D vector averaging doesn't work)
                                 1141 (CN spinup test)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
                                 1157 (Problem with VOC interpolation in mksurfdata)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: 
    Remove carbon_aero and pio from configure (always build with pio)

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
   Remove 1x1.25, 2x2.5, and 2.5x3.33 grid resolutions
   Remove gx1v3, gx1v4, gx1v5 land masks, add drydep defaults.
   Update 2.65x3.33@2000, 1x1_tropicAtl@2000, f09@1850 and 1x1_tropicAtl@1000-1004 pftdyn
   add mksrf_fvegtyp@1000-1004

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share, drv, datm, and timing

    csm_share    to share3_100215
    scripts      to scripts4_100216
    drv          to drvseq3_1_16
    datm         to datm8_100215
    timing       to timing_091021

List all files eliminated:

>>>>>>>>>>>> Remove local Macros files, and remove maxpft=4 vodsrcsc tests
   D   models/lnd/clm/bld/config_files/Macros.yong_g95
   D   models/lnd/clm/bld/config_files/Macros.breeze_intel
   D   models/lnd/clm/test/system/config_files/4p_vodsrsc_m
   D   models/lnd/clm/test/system/config_files/4p_vodsrsc_h

   D   models/lnd/clm/doc/UsersGuide/index.xml -- Rename to clm_ug.xml
              Divide most of the content into separate chapters.

List all files added and what they do:

   A   models/lnd/clm/test/system/config_files/_scnv_dh ---- No-VOC debug-hybrid mode
   A   models/lnd/clm/test/system/config_files/_scnv_do ---- No-VOC debug-pure SMP hybrid mode
   A   models/lnd/clm/test/system/config_files/17p_scnv_dh - 17pft no-VOC debug-hybrid mode
   A   models/lnd/clm/test/system/config_files/17p_scnv_do - 17pft no-VOC debug-pure SMP mode
   A   models/lnd/clm/test/system/nl_files/clm_drydep ------ Turn on drydep in namelist
   A   models/lnd/clm/tools/mksurfdata/mkvocef.F90 --------- VOC emissions
   A   models/lnd/clm/bld/namelist_files/namelist_defaults_drydep.xml - Drydep namelist defaults
   A   models/lnd/clm/doc/UsersGuide/tools.xml --------- Tools chapter
   A   models/lnd/clm/doc/UsersGuide/preface.xml ------- Preface and introduction chapter
   A   models/lnd/clm/doc/UsersGuide/clm_ug.xml -------- Change name of index.xml
                         Move most of the contents into separate chapters
   A   models/lnd/clm/doc/UsersGuide/adding_files.xml -- Adding files chapter
   A   models/lnd/clm/doc/UsersGuide/config_cache.xml -- Sample config cache file so can 
                                                         run build-namelist for documentation
   A   models/lnd/clm/doc/UsersGuide/custom.xml -------- Customizing chapter
   A   models/lnd/clm/doc/UsersGuide/get_Icaselist.pl -- Script to get list of I cases
   A   models/lnd/clm/doc/UsersGuide/single_point.xml -- Single point chapter
   A   models/lnd/clm/doc/UsersGuide/special_cases.xml - Special cases chapter

List all existing files that have been modified, and describe the changes:

   M   models/lnd/clm/test/system/config_files/README - Add nv no-VOC config case
   M   models/lnd/clm/test/system/README.testnames ---- Add drydep testnames
   M   models/lnd/clm/test/system/test_driver.sh ------ Use generic_linux_intel mach for breeze
                                 also changes to get jaguar to work
   M   models/lnd/clm/test/system/input_tests_master -- Add drydep and no-VOC tests, cut
                                                        back Mexicocity test to 158 steps

   M   models/lnd/clm/tools/mksurfdata/mkvarctl.F90 -------- Add mksrf_gridnm and mksrf_fvocef
   M   models/lnd/clm/tools/mksurfdata/ncdio.F90 ----------- Write out error codes on a problem.
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.regional - Add voc file.
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn --- Add voc file, use 1850 veg file.
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.singlept - Add voc file.
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.namelist - Add voc file.
   M   models/lnd/clm/tools/mksurfdata/mkharvestMod.F90 ---- Move file definition for harvest to init sub
   M   models/lnd/clm/tools/mksurfdata/mkfileMod.F90 ------- Write out OpenMP threads 
                   and OPT TRUE or FALSE, VOC fields, and veg filenames
   M   models/lnd/clm/tools/mksurfdata/mkorganic.F90 ------- Remove test and use 3D areaave
   M   models/lnd/clm/tools/mksurfdata/Makefile ------------ Add in SMP option to turn on OpenMP
   M   models/lnd/clm/tools/mksurfdata/mkurbanparMod.F90 --- Remove single level fields
                                                             and use 4D areaave
   M   models/lnd/clm/tools/mksurfdata/areaMod.F90 --------- Add 3D and 4D areaave interfaces
                                              and add OpenMP directives
   M   models/lnd/clm/tools/mksurfdata/mksrfdat.F90 -------- Create subroutines shared
           by dynpft loop and surfdata: change_landuse and normalizencheck_landuse.
           Allocate memory as late as possible and deallocate as soon as possible.
           Add: mksrf_gridnm and mksrf_fvocef to namelist
           Add mkvocef and add to output file
   M   models/lnd/clm/tools/mksurfdata/Srcfiles ------------ Add mkvocef.F90
   M   models/lnd/clm/tools/mksurfdata/mksurfdata.pl ------- Allow command line arguments
            to pick resolutions and simulation-years. Read in namelist database information
            for checking and using defaults. Add in mksrf_fvocef, and use mksrf_gridnm to
            give output file same name as the input grid resolution name.
   M   models/lnd/clm/tools/mksurfdata/mkpftMod.F90 -------- Remove testing, add 3D areaave

   M   models/lnd/clm/tools/ncl_scripts/README ----------- Remove script no longer available.
   M   models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl - Allow env var GRDFIL to give
                                                           grid file to use
   M   models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --- Allow env var GRDFIL to give
                                                           grid file to use

   M   models/lnd/clm/tools/mkgriddata/README -- Fix typo

   M   models/lnd/clm/bld/configure --------------------------------- Remove carbon_aero
                           and pio (always build with pio), and make voc default on
   M   models/lnd/clm/bld/queryDefaultNamelist.pl ------------------- Add drydep file.
   M   models/lnd/clm/bld/config_files/config_sys_defaults.xml ------ Change mach
                           defaults, remove darwin make linux edinburgh_pgi
   M   models/lnd/clm/bld/config_files/config_definition.xml -------- Remove carbon_aero
                           and pio, make default for mode ext_ccsm_seq, make voc on,
                           work on documentation
   M   models/lnd/clm/bld/build-namelist ---------------------------- Add drydep, remove
                           carbon_aero and pio
   M   models/lnd/clm/bld/clm.cpl7.template ------------------------- Turn rtm off for PTS_MODE
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Add mksrf_fvegtyp, 
                           remove 1x1.25, 2x2.5, and 2.5x3.33 grid resolutions
                           remove gx1v3, gx1v4, gx1v5 land masks, add drydep_method, and drydep_list
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Remove 1x1.25,
                           2x2.5, and gx1v3, gx1v4, gx1v5 domain files
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- Remove 1x1.25,
                           and gx1v3, gx1v4, gx1v5 files
                           update 2.65x3.33@2000, 1x1_tropicAtl@2000, f09@1850
                           and 1x1_tropicAtl@1000-1004 pftdyn
                           add mksrf_fvegtyp@1000-1004
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml -- Remove gx1v4, gx1v5 start dates

   M   models/lnd/clm/doc/UsersGuide/Makefile --- Get makefile to use scripts to make
                           log info to put into document, and separate out document
                           into chapters

   M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 --- Use atm_aero in infodata 
                           to determine: caerdep_filled, and dustdep_filled
                           some changes to get ready for VOC and drydep branch to come to trunk

Summary of testing:

  bluefire: All PASS up to 019 brEH1 
  bluefire interactive testing: All PASS except...
004 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100
arb_ic FAIL! rc= 5
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
  bluefire/CCSM testing:
PASS  SMS_RLB.f45_f45.I.bluefire 
PASS  ERH_D.f10_f10.I1850CN.bluefire 
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/ifort: All PASS except...
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_7_03

Changes answers relative to baseline: 1x1_tropicAtl changes due to new surfdata file

===============================================================
===============================================================
Tag name:  clm3_7_03
Originator(s):  erik (erik)
Date: Wed Feb 10 11:29:56 MST 2010
One-line Summary: Add in more future scenario datasets, new history fields from Keith

Purpose of changes:

Add in pftdyn dataset for 1-degree rcp-8.5. Add in interpolated aerdep/ndepdyn scenario
files for f10, f09. Add in code change from Keith O. for average of top soil layers. Add
in rcp for ndep and aerdep regrid scripts. Allow 2000-2100 sim_year_range for 1-degree
resolution, and have a aerdep dataset for 1-degree for 2000-2100 (copy other 1850-2100
datasets). There is also a 1-degree 1850-2100 aerosol dataset, but the file is large (~9GB).

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1104 (Restart problem with pftdyn mode)
                                 1118 (Restarts with SNICAR_FRC fail)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: 
    Add 2000-2100 simulation year range as allowed option

   Two new history fields:

        TSOI_10CM      = soil temperature in top 10cm of soil (K)
        SOILWATER_10CM = soil liquid water + ice in top 10cm of soil (kg/m2)

List any changes to the defaults for the boundary datasets: New datasets for rcp=8.5
        f09, rcp=8.5 pftdyn for 1850-200 (use same file for 2000-2100)
        faerdep, for 1850-2100 rcp=8.5, f10, f45, f25, f09 (and 2000-2100) and f19 for 2000-2100
        fndepdyn, for 1850-2000 rcp=8.5 f09 (use same file for 2000-2100), f25, f45, f10
        fndepdyn for 1850-2100 rcp=2.6 for native f19

Describe any substantial timing or memory changes: None

Code reviewed by: self, history changes from Keith Oleson, reviewed by Dave Lawrenece

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:  use-case for 2000-2100 for high resolution (1 degree and up)

>>>>>>>>>> Add a use-case for a future scenario that only includes 2000-2100
>>>>>>>>>> this is for 1-degree and higher resolution where we can't include the
>>>>>>>>>> historical period and have resonable sized files.
   A   models/lnd/clm/bld/namelist_files/use_cases/2000-2100_rcp8.5_transient.xml

List all existing files that have been modified, and describe the changes:

>>>>>>>>>> Get regridding scripts working for rcp's
   M   models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl - Allow rcp to be set, more printing
   M   models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --- Allow rcp to be set, allow more sim_year_ranges

>>>>>>>>>> New rcp=8.5 datasets, and 2000-2100 support for 1-degree
   M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New rcp=8.5 datasets
        f09, rcp=8.5 pftdyn for 1850-200 (use same file for 2000-2100)
        faerdep, for 1850-2100 rcp=8.5, f10, f45, f25, f09 (and 2000-2100) and f19 for 2000-2100
        fndepdyn, for 1850-2000 rcp=8.5 f09 (use same file for 2000-2100), f25, f45, f10
        fndepdyn for 1850-2100 rcp=2.6 for native f19
   M   models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Allow 2000-2100 sim-year range

   M   models/lnd/clm/doc/UsersGuide/index.xml --- Update documentation with namelist examples

>>>>>>>>>> Code changes from Keith Oleson to add 10cm soil temperature and soil water history variables.
   M   models/lnd/clm/src/main/clmtypeInitMod.F90 ------ Add h2osoi_liqice_10cm and t_soi_10cm
   M   models/lnd/clm/src/main/clmtype.F90 ------------- Add h2osoi_liqice_10cm and t_soi_10cm
   M   models/lnd/clm/src/main/histFldsMod.F90 --------- Add TSOI_10CM and SOILWATER_10CM,
                                               on by default and output as average by default.
   M   models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 - Calculate 10cm soil averages for non-urban points

Summary of testing:

  bluefire: All PASS except...
022 erHN1 TER.sh 17p_cnsc_dh clm_transient_rcp8.5 20051220:NONE:1800 1.9x2.5 gx1v6@1850-2100 -3+-7 cFAIL! rc= 7
025 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
026 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
029 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  bluefire interactive testing: All PASS except...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
034 erL83 TER.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -5+-5 arb_ic ........FAIL! rc= 6
035 brL83 TBR.sh _nrsc_do clm_std^nl_urb_br 20020115:NONE:3600 5x5_amazon navy -10+-10 arb_ic ...FAIL! rc= 3
036 blL83 TBL.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 3
  bluefire/CCSM testing:
PASS  SMS_RLA.f45_f45.I.bluefire
PASS  SMS_RLA.f45_f45.I.bluefire.compare_hist.clm3_7_02
PASS  SMS_RLA.f45_f45.I.bluefire.compare.clm3_7_02
PEND  SMS_RLB.f45_f45.I.bluefire.GC.140232
PEND  SMS_ROA.f45_f45.I.bluefire.GC.140232
PASS  ERS_D.f45_g37.I.bluefire
PASS  ERS_D.f45_g37.I.bluefire.compare_hist.clm3_7_02
PASS  ERS_D.f45_g37.I.bluefire.compare.clm3_7_02
PEND  PET.f45_g37.I1850.bluefire.GC.140232
PEND  ERS.f19_g16.I1850.bluefire.GC.140232
RUN   ERB.f09_g16.I_1948-2004.bluefire.GC.140232
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_02
PASS  ERH_D.f10_f10.I1850CN.bluefire
PASS  ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_02
PEND  PET.f10_f10.I8520CN.bluefire.GC.140232
FAIL  ERS_D.f19_g16.I8521CNR85.bluefire
BFAIL ERS_D.f19_g16.I8521CNR85.bluefire.compare.clm3_7_02
  jaguar interactive testing: All PASS except...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
  edinburgh/lf95: All PASS up to smL58 (test 29) except...
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_7_02

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_7_02
Originator(s):  erik (erik)
Date: Sat Feb  6 00:43:49 MST 2010
One-line Summary: Start adding in new rcp=8.5 datasets, remove some junk, change some env_conf variables, add user_nl_clm

Purpose of changes:

New pftdyn, ndep and aerdep files for rcp=8.5 future scenario 2005+ . Need to have the
ability to handle four future scenarios: minicam (rcp4.5), aim (rcp 6), image (rcp2.6),
and message (rcp8.5). Add in ndepdat datasets for rcp2.6 for future decades. Add in
ndepdyn, pftdyn, aerdep datasets for rcp8.5, and ndepdyn for rcp4.5 (f19) and pftdyn for
f10 as well. Some changes to scripts, remove CLM_DEMAND, add CLM_NML_USE_CASE,
CLM_CO2_TYPE and user namelist. Add user_nl to clm.cpl7.template, remove CLM_DEMAND add
CLM_CO2_TYPE and CLM_NML_USE_CASE (in favor of use_case's,). Make sure driver/scripts
updated with this change. Update documentation Users-Guide with comments from Keith and
Sam. Remove clm copy of mkSrcfiles/mkDepends. Remove run-ibm. Remove following options
from configure and config_definition: clm_exe, clm_exedir, and clm_bld. Remove
CASE/CCSM/CAM tests from test_driver.sh. Add some tests for new rcp=8.5.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1104 (Restart problem with pftdyn mode)
                                 1118 (Restarts with SNICAR_FRC fail)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1143 (Problems with mksurfdata and ifort)
                                 1144 (Bug in ndeplintInterp.ncl in calculation of time axis)
                                 1147 (mkgriddata can't straddle over Greenwich)
                                 1153 (Problem with ndeplintInterp for historical case)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Some changes to configure
   Remove unused configure options: clm_exe, -clm_exedir, and -clm_bld.
   Move standalone testing options to the end of help. Use CCSM version 
   of mkSrcfiles/mkDepends, separate config vars into categories, work 
  on documentation with comments from Keith/Sam.

Describe any changes made to the namelist: Check for some files based on rcp

   Add in ability to add a user namelist in your case directory to input
   namelist items at configure time. Simply add a file called "user_nl_clm"
  as a valid namelist and the items in that namelist will show up in the initial
  BuildConf/clm.buildnml.csh file.

List any changes to the defaults for the boundary datasets:
           fsurdat:  f10, 1850
           fpftdyn:  f10, 1850-2000, 1850-2100 (rcp=8.5)
           fpftdyn:  f19, 1850-2100 (rcp=8.5)
           faerdep:  f19, 1850-2100 (rcp=8.5)
           fndepdat: f19, decadal averages (rcp=2.6)
           fndepdyn: f19, 1850-2100 (rcp=8.5 and rcp=4.5)

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, pio

    scripts to scripts4_100204
    drv     to drvseq3_1_15
    pio     to pio1_0_8

List all files eliminated:

>>>>>>>>>>>>>>> Remove CCSM, scam, cam, and run-ibm script testing from test-system
>>>>>>>>>>>>>>> Use <machine>.clm.auxtest lists in CCSM scripts for CCSM testing
   D  models/lnd/clm/test/system/TSM_ccsmseq.sh
   D  models/lnd/clm/test/system/TSMext_ccsmseq_cam.sh
   D  models/lnd/clm/test/system/TCT_ccsmseq.sh
   D  models/lnd/clm/test/system/TCSruncase.sh
   D  models/lnd/clm/test/system/TSMruncase.sh
   D  models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh
   D  models/lnd/clm/test/system/TSCext_ccsmseq_scam.sh
   D  models/lnd/clm/test/system/tests_posttag_lightning
   D  models/lnd/clm/test/system/config_files/scam_ds
   D  models/lnd/clm/test/system/config_files/ext_ccsm_seq_10x15_dh
   D  models/lnd/clm/test/system/config_files/ext_ccsm_seq_4x5_dh
   D  models/lnd/clm/test/system/config_files/ext_ccsm_seq_1.9x2.5_dh
   D  models/lnd/clm/test/system/config_files/ext_ccsm_seq_64x128_s
   D  models/lnd/clm/test/system/config_files/ext_ccsm_seq_0.9x1.25_dh
   D  models/lnd/clm/bld/run-ibm.csh
   D  models/lnd/clm/bld/create_newcase
>>>>>>>>>>>>>>> Remove mkSrcfiles/mkDepends duplicated from ccsm scripts
   D  models/lnd/clm/bld/mkSrcfiles
   D  models/lnd/clm/bld/mkDepends

List all files added and what they do:

>>>>>>>>>>>>> no-RTM mode configurations for hybrid and mpi-only testing
   A  models/lnd/clm/test/system/config_files/_nrsc_dh
   A  models/lnd/clm/test/system/config_files/_nrsc_dm
>>>>>>>>>>>>> Add transient_rcp8.5 use-case option
   A  models/lnd/clm/test/system/nl_files/clm_transient_rcp8.5

List all existing files that have been modified, and describe the changes:

   M  models/lnd/clm/test/system/README.testnames --- Update test names
   M  models/lnd/clm/test/system/test_driver.sh ----- Remove CLM_SEQCCSMROOT
   M  models/lnd/clm/test/system/input_tests_master - Remove CCSM/cam tests, add rcp8.5 test
   M  models/lnd/clm/test/system/README ------------- Remove doc on CLM_SEQCCSMROOT
>>>>>>>>>>>>> Remove CCSM, cam, scam, and run-ibm tests from test lists
   M  models/lnd/clm/test/system/tests_pretag_bluefire
   M  models/lnd/clm/test/system/tests_pretag_bluefire_nompi
   M  models/lnd/clm/test/system/tests_pretag_jaguar
   M  models/lnd/clm/test/system/tests_posttag_kraken
   M  models/lnd/clm/test/system/tests_posttag_hybrid_regression
   M  models/lnd/clm/test/system/tests_pretag_bangkok
   M  models/lnd/clm/test/system/tests_posttag_intrepid
   M  models/lnd/clm/test/system/tests_pretag_dublin
   M  models/lnd/clm/test/system/tests_pretag_dublin_nompi
   M  models/lnd/clm/test/system/tests_posttag_nompi_regression
   M  models/lnd/clm/test/system/tests_pretag_calgary

>>>>>>>>>>>>> New location for mkDepends, correct documentation
   M  models/lnd/clm/tools/mkgriddata/README ----- Correct mention of download
   M  models/lnd/clm/tools/mksurfdata/Makefile --- Change location of mkDepends
   M  models/lnd/clm/tools/interpinic/Makefile --- Change location of mkDepends
   M  models/lnd/clm/tools/mkgriddata/Makefile --- Change location of mkDepends
   M  models/lnd/clm/tools/mkdatadomain/Makefile - Change location of mkDepends

>>>>>>>>>>>>> Remove unused configure options: clm_exe, -clm_exedir, and -clm_bld
>>>>>>>>>>>>> Move standalone testing options to the end of help
>>>>>>>>>>>>> Use CCSM version of mkSrcfiles/mkDepends, separate config vars into
>>>>>>>>>>>>> categories, work on documentation
   M  models/lnd/clm/bld/configure -------------------------- Move clm standalone testing
                                       options to the end of the help, remove: -clm_exe,
                                       -clm_exedir, and -clm_bld options
   M  models/lnd/clm/bld/config_files/Makefile.in ----------- Use CCSM version of mkSrcfiles/mkDepends
   M  models/lnd/clm/bld/config_files/config_definition.xsl - Separate variables into categories.
   M  models/lnd/clm/bld/config_files/config_definition.xml - Add categories, add
           description changes from Keith/Sam, remove clm_exe, clm_exedir, and clm_bld

   M  models/lnd/clm/bld/listDefaultNamelist.pl -- Also loop over rcp values

   M  models/lnd/clm/bld/build-namelist ----- have rcp value impact filenames retrieved
   M  models/lnd/clm/bld/clm.cpl7.template -- Add CLM_NML_USE_CASE and CLM_CO2_TYPE,
                           remove CLM_DEMAND add user_nl_clm namelist, remove -clm_bld.
   M  models/lnd/clm/bld/README ------------- Update documentation after removing the
                           clm stand-alone build/run scripts.

   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml ------- Remove defaults
               as in namelist_defaults files, apply suggestions from Keith/Sam
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Change rcp default to -999.9
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xsl ------- Put description above valid values
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- New datasets:
           fsurdat:  f10, 1850
           fpftdyn:  f10, 1850-2000, 1850-2100 (rcp=8.5)
           fpftdyn:  f19, 1850-2100 (rcp=8.5)
           faerdep:  f19, 1850-2100 (rcp=8.5)
           fndepdat: f19, decadal averages (rcp=2.6)
           fndepdyn: f19, 1850-2100 (rcp=8.5 and rcp=4.5)
>>>>>>>>>>>>> Update documentation, add in documentation on changes added in here
   M  models/lnd/clm/doc/UsersGuide/index.xml -- Spellcheck, more work on doc, update
           for changes that came in on this tag.
   M  models/lnd/clm/doc/index.shtml ----------- Correct test table.

Summary of testing:

  bluefire: All PASS except...
009 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
........FAIL! rc= 10
010 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72
arb_ic ......FAIL! rc= 5
011 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72
arb_ic ......FAIL! rc= 5
012 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
........FAIL! rc= 4
013 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
.........FAIL! rc= 10
017 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic
.........FAIL! rc= 7
  bluefire interactive testing: All PASS
  bluefire/CCSM testing: All PASS, except..
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_7_02 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_7_01 
FAIL  ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_7_01 
FAIL  PET.f10_f10.I8520CN.bluefire.compare.clm3_7_01 
FAIL  ERS_D.f19_g16.I8521CNR85.bluefire 
BFAIL ERS_D.f19_g16.I8521CNR85.bluefire.generate.clm3_7_02 
BFAIL ERS_D.f19_g16.I8521CNR85.bluefire.compare.clm3_7_01 
  Special testing:
PASS  ERS.f19_g16.I8521CNR85.bluefire 
  breeze,gale,hail,gust/ifort interactive testing: All PASS except...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm3_7_01

Changes answers relative to baseline: f10 because of new surface dataset
                                      Other resolutions will be bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_7_01
Originator(s):  erik (Erik Kluzek)
Date: Fri Jan 29 12:58:12 MST 2010
One-line Summary: OpenMP fix for pftdyn, start adding in rcp's, update ndeplintInterp.ncl script

Purpose of changes:

Changes to ndeplintInterp script to add the ability to generate ndepdyn datasets for future scenarios 
2005+. Add rcp as input to build-namelist and add use-cases with different rcp's. Small bug-fixes to 
mksurfdata. Add lists for 1850-2100 for the rcp's. Update drv and scripts to latest. Update documentation. 
Fix from Mariana on OpenMP problem in pftdyn. Remove lightning from tests, start adding in
edinburgh.

Bugs fixed (include bugzilla ID):
                                 1102 (OpenMP problem with pftdyn mode)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1104 (Restart problem with pftdyn mode)
                                 1118 (Restarts with SNICAR_FRC fail)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1153 (Problem with ndeplintInterp for historical case)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, code-changes came from Mariana-Vertenstein, reviewed by Pat Worley

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, and datm

    scripts to scripts4_100125
    drv     to drvseq3_1_13
    datm    to datm8_100122

List all files eliminated:

   D  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850-2005.txt --> rename to pftdyn_hist_simyr1850-2005.txt

List all files added and what they do:

>>>>>>>>>>>>>>> List of surface datasets to create pftdyn files
   A  models/lnd/clm/tools/mksurfdata/pftdyn_rcp2.6_simyr1850-2100.txt
   A  models/lnd/clm/tools/mksurfdata/pftdyn_rcp4.5_simyr1850-2100.txt
   A  models/lnd/clm/tools/mksurfdata/pftdyn_rcp8.5_simyr1850-2100.txt
>>>>>>>>>>>>>>> Add use-cases for future scenarios
   A  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp8.5_transient.xml
   A  models/lnd/clm/bld/namelist_files/use_cases/1850-2100_rcp4.5_transient.xml

   A  models/lnd/clm/tools/mksurfdata/pftdyn_hist_simyr1850-2005.txt --> renamed

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Add edinburgh, remove lightning
   M  models/lnd/clm/test/system/test_driver.sh --------- Remove lightning, add edinburgh
   M  models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh -- Delete csm_share/dshr directory no longer exists
   M  models/lnd/clm/test/system/CLM_runcmnd.sh --------- Remove lightning, add edinburgh

   M  models/lnd/clm/tools/mksurfdata/mkharvestMod.F90 -- Fix small compiler bug for jaguar
   M  models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn - Point to new name for historical pftdyn file

>>>>>>>>>>>>>> Handle future scenarios for dynamic Nitrogen-Deposition file creation
   M  models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl -- Add ability to handle future scenario data, and also leave
                                                             previous historical data the same as before, or 

>>>>>>>>>>>>>> Start adding ability to handle future scenarios for different RCP's
   M  models/lnd/clm/bld/build-namelist ------------------------------- Add rcp,
   M  models/lnd/clm/bld/namelist_files/namelist_definition.xml ------- Add rcp, new sim_year, sim_year_range values, allow blank
                                                                        for hist_type1d_pertape
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml - Add default for rcp as -999.
   M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ----- Add new Nitrogen deposition decadal datasets for RCP4.5/RCP8.5

   M  models/lnd/clm/doc/UsersGuide/index.xml -- Add more in, add notes on namelist, tools, and special cases

>>>>>>>>>>>> Changes from Mariana V. to fix bug 1102, OpenMP bug with pftdyn cases
   M  models/lnd/clm/src/main/clm_initializeMod.F90 - Don't pass decomp bounds down
   M  models/lnd/clm/src/main/pftdynMod.F90 --------- Get decomp bounds here
   M  models/lnd/clm/src/main/clm_driver.F90 -------- Call pftdyn_interp on own OMP loop

Summary of testing:

  bluefire:
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
049 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
050 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 4
051 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
052 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  bluefire interactive testing:
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7022 
brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
050 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  bluefire special testing:
    Run I8520 from Dec/1/1850 @f09_g16 for 14 months with 64 tasks and 4 threads and make sure identical 
      to same with 128 tasks and 1 thread (require openMP build) comparing clm history files. clm3_7_00 4-thread case for this fails. But, answers are identical with clm3_7_00 for 128 tasks and 1 thread.
  jaguar:
020 blJ62 TBL.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 5
026 erP65 TSM_ccsmseq.sh ERS f19_g15 I ..........................................................FAIL! rc= 4
027 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  jaguar interactive testing:
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
  jaguar/special testing:
    Run I8520 from Dec/1/1850 @f09_g16 for 5 months with 416 tasks and 4 threads and make sure identical 
      to same with 1 thread (require openMP build) comparing clm history files. clm3_7_00 4-thread case for this fails.
  jaguar/CCSM testing:
PASS  ERS_D.f09_g16.I1850.jaguar
PASS  PET.f10_f10.I8520CN.jaguar.cpl
PASS  PET.f10_f10.I8520CN.jaguar.atm
PASS  PET.f10_f10.I8520CN.jaguar.lnd
PASS  PET.f10_f10.I8520CN.jaguar.ice
PASS  PET.f10_f10.I8520CN.jaguar.ocn
PASS  PET.f10_f10.I8520CN.jaguar.glc
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
  dublin/ifort interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
030 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  edinburgh/pgi interactive testing: All PASS except...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
030 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_7_00

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_7_00
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Fri Jan 22 22:48:09 MST 2010
One-line Summary: Update to datm8, redirect aquifer overflow to drainage, add gx3v7 
                  masks, script to extract regional datasets, add harvesting for CN, 
                  modify shrubs, include urban model, ice stream for snowcapping, 
                  new build-namelist system, scale solar by solar zenith angle in 
                  datm, deep soil with bedrock at bottom, organic matter in soils, 
                  SNICAR for snow radiation, sparce dense aero, snow cover changes

Software engineering changes:

    Update to cpl7 and scripts.
    Remove offline and cpl6 modes.
    Remove support for CASA model.
    Update to datm8 atmospheric data model.
    Add gx3v7 land mask for T31 and fv-4x5 horizontal resolutions.
    Add gx1v6 land mask for f05, f09, and f19 horigonzl resolutions.
    Add tx1v1 land mask and 1.9x2.5_tx1v1 horizontal resolution.
    Add in 2.5x3.33 horizontal resolution.
    Add in T62 horizontal resolution so can run at same resolution as input datm data.
    Allow first history tape to be 1D.
    Add ability to use own version of input datasets with CLM_USRDAT_NAME variable.
    Add a script to extract out regional datasets.
    New build-namelist system with XML file describing all namelist items.
    Add glacier_mec use-case and stub glacier model.
    Add ncl script to time-interpolate between 1850 and 2000 for fndepdat dataset, for fndepdyn version.
    Make default of maxpatch_pft=numpft+1 instead of 4.
    Only output static 3D fields on first h0 history file to save space.
    Add new fields for VOC (Volatile Organic Compounds) on some surface datasets, that will be 
    needed for the new MEGAN VOC model (NOT incorporated yet).
    Add irrigation area to mksurfdata tool (NOT used in CLM yet).
    Add multiple elevation class option for glaciers in mksurfdata tool (NOT used in CLM yet).
    Add ascale field to land model in support of model running on it's own grid.

Science changes:

    Change to freezing temperature constant      
    Forcing height at atm plus z0+d on each tile                    
    Effective porosity divide by zero fix                          
    Sparse/dense canopy aerodynamic parameters                 
    Ground/snow emissivity smooth transition                                                       
    Thermal and hydraulic properties of organic soil                                                                        
    Init h2osoi=0.3                                                            
    Snow compaction fix                                                          
    Snow T profile during layer splitting fix                                  
    Snow burial fraction                                                             
    Snow cover fraction                                                                   
    SNICAR (snow aging, black carbon and dust deposition, vertical distribution of solar energy) 
    Remove SNOWAGE, no longer used                                                   
    Deep soil (15 layers, ~50m), 5 new layers are hydrologically inactive bed rock                          
    Ground evap (beta), stability, and litter resistance                      
    Organic/mineral soil hydraulic conductivity percolation theory       
    Richards equation modifications                                         
    Normalization of frozen fraction of soil formulation                                 
    One-step solution for soil moisture and qcharge                          
    Changes to rsub_max for drainage and decay factor for surface runoff      
    Fixed diurnal cycle of solar radiation in offline forcing data                            
    Back to CLM3 lakes and wetlands datasets, but 1% rather than 5% threshold (same for glacier) 
    Changes to pft physiology file from CN                                                                                     
    New grass optical properties                                                                   
    New surface dataset assuming no herbaceous understory  
    Direct versus diffuse radiation offline                                           
    New VOC model (MEGAN)                                                                                            
    Snow-capped runoff goes to new ice stream and routed to ocean as ice                                         
    Dust model always on, LAI threshold parameter change from 0.1 to 0.3     
    Daylength control on vcmax                                                           
    SAI and get_rad_dtime fix                                                              
    Always run with MAXPATCH_PFT=npfts + 1 instead of 4                                                                               
    Transient land cover/use mode - datasets, energy and water balance   
    RTM sub-cycling                                                     
    Twostream bug fix                                
    Update soil colors     
    2m relative humidity        
    Fix for aquifer leak (SoilHydrologyMod, BalanceCheckMod)              
    New nitrogen deposition file (units and sum of NOx, NHy)  

Quickstart to new cpl7 scripts...

         cd scripts
         ./create_newcase -help      # get help on how to run create_newcase
         ./create_newcase -case testI -mach bluefire -res f19_g16 -compset I    # create new "I" case for bluefire at 1.9x2.5_gx1v6 res
                                     # "I" case is clm active, datm7, and inactive ice/ocn
         cd testI
         ./xmlchange -help           # Get help on editor for XML files
         ./xmlchange <options> env_conf.xml env_mach_pes  # Edit configure files if needed
         configure -case             # create scripts
         ./xmlchange <options> env_build.xml              # Edit build files if needed
         testI.build                 # build model and create namelists
         ./xmlchange <options> env_run.xml                # Edit run files if needed
         bsub < testI.run            # submit script
                                     # (NOTE: edit env_run.xml to set RESUBMIT to number of times to automatically resubmit)
Quickstart to use of regional extraction scripts and PERSONAL datasets:

       # Run the script to create an area to put your files (assume CSMDATA set to standard inputdata)
       cd scripts
       setenv MYCSMDATA $HOME/myinputdata
       link_dirtree $CSMDATA $MYCSMDATA

       # Run the extraction for data from 52-73 North latitude, 190-220 longitude
       # that creates 13x12 gridcell region from the f19 (1.9x2.5) global resolution over
       # Alaska
       cd ../models/lnd/clm/tools/ncl_scripts
       setenv MYID 13x12pt_f19_alaskaUSA
       getregional_datasets.pl -sw 52,190 -ne 73,220 -id $MYID -mycsmdata $MYCSMDATA

       # Now create a case that uses these datasets
       cd ../../../../../scripts
       create_newcase -case testregional -compset I -mach bluefire -res pt1_pt1 -skip_rundb
       cd testregional
       $EDITOR env_conf.xml # change CLM_BLDNML_OPTS to include "-clm_usr_name $MYID" (expand $MYID)
       $EDITOR env_mach_pes.xml # Change tasks/threads as appropriate (defaults to serial)
       xmlchange -file env_run.xml -id DIN_LOC_ROOT_CSMDATA -val $MYCSMDATA

       # Do other changes to xml files as appropriate
       # configure as normal, then edit the datm namelist

       configure -case

       # Then build and run the case as normal

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)
                                 1121 (history variable attribute cell_methods misnamed)
                                 1118 (Restarts with SNICAR_FRC fail)

Describe any changes made to build system:

   Change directory structure to match CCSM.
   Add BGP target.
   Add choice between ESMF and MCT frameworks.
   Start removing #ifdef and directives that supported Cray-X1 Phoenix as now decommisioned.
   Make default of maxpatch_pft=numpft+1 instead of 4 for all configurations.
   By default turn on CLAMP when either CN or CASA is enabled
   New SNICAR_FRC, CARBON_AERO, and C13 CPP ifdef tokens.

   New options added to configure:

     -comp_intf <name>   Component interface to use (ESMF or MCT) (default MCT)
     -nofire             Turn off wildfires for bgc setting of CN (default includes fire for CN)
     -pio <name>         Switch enables building with Parallel I/O library. [on | off] (default is on)
     -snicar_frc <name>  Turn on SNICAR radiative forcing calculation. [on | off] (default is off)

Describe any changes made to the namelist:

   NOTE: build-namelist now checks the validity of your namelist you generate by looking at data in the namelist_definition.xml
         file. In order to add new namelist items you need to change the code and also edit this file. To view information
         on the namelist view the file:
         models/lnd/clm/bld/namelist_files/namelist_definition.xml
         in your browser and you'll see the names, type, description and valid_values for all namelist variables.

   Changes to build-namelist:
     Transient sim_year ranges (i.e. 1850-2000)
     Remove cam_hist_case option.
     Make sure options ONLY used for stand-alone testing have a "drv_" or "datm_" prefix in them and list these
     options all together and last when asking for help from build-namelist.
   New options to build-namelist:
     -clm_usr_name     "name" Dataset resolution/descriptor for personal datasets. Default: not used
                              Example: 1x1pt_boulderCO_c090722 to describe location,
                                       number of pts, and date files created
   New list options to build-namelist:
     build-namelist -res list          # List valid resolutions
     build-namelist -mask list         # List valid land-masks
     build-namelist -sim_year list     # List valid simulation years and simulation year ranges
     build-namelist -clm_demand list   # List namelist variables including those you could demand to be included.
     build-namelist -use_case list     # List valid use-cases

     New use-cases for:

   1850_control = Conditions to simulate 1850 land-use
   2000_control = Conditions to simulate 2000 land-use
20thC_transient = Simulate transient land-use, and aerosol deposition changes from 1850 to 2005
    glacier_mec = Placeholder for running IG cases with the ice sheet model glimmer

   New namelist items:

        urban_hac = OFF, ON or ON_WASTEHEAT   (default OFF)     Flag for urban Heating and Air-Conditioning
                                                       OFF          = Building internal temperature is un-regulated.
                                                       ON           = Building internal temperature is bounded to reasonable range.
                                                       ON_WASTEHEAT = Building internal temperature is bounded and resultant waste
                                                                      heat is given off.
        urban_traffic = .true. or .false.     (default .false.) Flag to include additional multiplicative factor of urban traffic
                                                                to sensible heat flux.
        fsnowoptions = filename          file for snow/aerosol optical properties (required)
        fsnowaging   = filename          file for snow aging parameters (required)
        faerdep      = filename          file of aerosol deposition (required)

  New history variables: (note watt vs. W in units, 26 vs. 76)
     BCDEP                      total BC deposition (dry+wet) from atmosphere                kg/m^2/s
     C13_PRODUCT_CLOSS          C13 total carbon loss from wood product pools                gC13/m^2/s
     DSTDEP                     total dust deposition (dry+wet) from atmosphere              kg/m^2/s
     EFLX_DYNBAL                dynamic land cover change conversion energy flux             W/m^2
     FGR12                      heat flux between soil layers 1 and 2                        watt/m^2
     FSAT                       fractional area with water table at surface                  unitless
     FSH_NODYNLNDUSE		sensible heat flux not including correction for land use change
                                                                                             watt/m^2
     GC_HEAT1                   initial gridcell total heat content                          J/m^2
     GC_HEAT2                   post land cover change total heat content                    J/m^2    inactive
     GC_ICE1                    initial gridcell total ice content                           mm/s
     GC_ICE2                    post land cover change total ice content                     mm/s     inactive
     GC_LIQ1                    initial gridcell total liq content                           mm
     GC_LIQ2                    initial gridcell total liq content                           mm       inactive <<<< name??
     H2OSNO_TOP                 mass of snow in top snow layer                               kg
     HEAT_FROM_AC               sensible heat flux put into canyon due to heat removed from air conditioning
                                                                                             watt/m^2
     HK                         hydraulic conductivity                                       mm/s     inactive
     LWup                       upwelling longwave radiation                                 watt/m^2 inactive
     NBP                        net biome production, includes fire, landuse, and harvest flux, positive for sink
                                                                                             gC/m^2/s
     OCDEP                      total OC deposition (dry+wet) from atmosphere                kg/m^2/s
     PBOT                       atmospheric pressure                                         Pa
     PCO2                       atmospheric partial pressure of CO2                          Pa
     PRODUCT_CLOSS              total carbon loss from wood product pools                    gC/m^2/s
     PRODUCT_NLOSS              total N loss from wood product pools                         gN/m^2/s
     Qair                       atmospheric specific humidity                                kg/kg    inactive
     Qanth                      anthropogenic heat flux                                      watt/m^2 inactive
     Qtau                       momentum flux                                                kg/m/s^2
     QFLX_LIQ_DYNBAL            liq dynamic land cover change conversion runoff flux         mm/s
     QFLX_ICE_DYNBAL            ice dynamic land cover change conversion runoff flux         mm/s
     QRUNOFF_NODYNLNDUSE        total liquid runoff not including correction for land use change (does not include QSNWCPICE) 
                                                                                             mm/s
     QSNWCPICE                  excess snowfall due to snow capping                          mm/s
     QSNWCPICE_NODYNLNDUSE      excess snowfall due to snow capping not including correction for land use change
                                                                                             mm/s
     QSNWCPLIQ                  excess rainfall due to snow capping                          mm/s     inactive
     SMP                        soil matric potential                                        mm       inactive
     SNOAERFRC2L                surface forcing of all aerosols in snow, averaged only when snow is present (land)
                                                                                             watt/m^2
     SNOAERFRCL                 surface forcing of all aerosols in snow (land)               watt/m^2
     SNOBCFRCL                  surface forcing of BC in snow (land)                         watt/m^2
     SNOBCMCL                   mass of BC in snow column                                    kg/m2
     SNOBCMSL                   mass of BC in top snow layer                                 kg/m2
     SNOdTdzL                   top snow layer temperature gradient (land)                   K/m
     SNODSTFRC2L                surface forcing of dust in snow, averaged only when snow is present (land)
                                                                                             watt/m^2
     SNODSTFRCL                 surface forcing of dust in snow (land)                       watt/m^2
     SNODSTMCL                  mass of dust in snow column                                  kg/m2
     SNODSTMSL                  mass of dust in top snow layer                               kg/m2
     SNOFSRND                   direct nir reflected solar radiation from snow               watt/m^2 inactive
     SNOFSRNI                   diffuse nir reflected solar radiation from snow              watt/m^2 inactive
     SNOFSRVD                   direct vis reflected solar radiation from snow               watt/m^2 inactive
     SNOFSRVI                   diffuse vis reflected solar radiation from snow              watt/m^2 inactive
     SNOFSDSND                  direct nir incident solar radiation on snow                  watt/m^2 inactive
     SNOFSDSNI                  diffuse nir incident solar radiation on snow                 watt/m^2 inactive
     SNOFSDSVD                  direct vis incident solar radiation on snow                  watt/m^2 inactive
     SNOFSDSVI                  diffuse vis incident solar radiation on snow                 watt/m^2 inactive
     SNOLIQFL                   top snow layer liquid water fraction (land)                  fraction inactive
     SNOOCMCL                   mass of OC in snow column                                    kg/m2
     SNOOCMSL                   mass of OC in top snow layer                                 Kg/m2
     SNOOCFRC2L                 surface forcing of OC in snow, averaged only when snow is present (land)
     SNOOCFRCL                  surface forcing of OC in snow (land)                         watt/m^2
                                                                                             watt/m^2
     SNORDSL                    top snow layer effective grain radius                        m^-6     inactive
     SNOTTOPL                   snow temperature (top layer)                                 K/m      inactive <<< units?
     SWup                       upwelling shortwave radiation                                watt/m^2 inactive
     URBAN_AC                   urban air conditioning flux                                  watt/m^2
     URBAN_HEAT                 urban heating flux                                           watt/m^2
     Wind                       atmospheric wind velocity magnitude                          m/s      inactive
     WOOD_HARVESTC              wood harvest (to product pools)                              gC/m^2/s
     WOOD_HARVESTN              wood harvest (to product pools)                              gN/m^2/s

  History field name changes:

     ANNSUM_PLANT_NDEMAND  => ANNSUM_POTENTIAL_GPP
     ANNSUM_RETRANSN       => ANNMAX_RETRANSN
     C13_DWT_PROD10C_LOSS  => C13_PROD10C_LOSS
     C13_DWT_PROD100C_LOSS => C13_PROD100C_LOSS
     C13_DWT_PROD10N_LOSS  => C13_PROD10N_LOSS
     C13_DWT_PROD100C_LOSS => C13_PROD100C_LOSS
     DWT_PROD100N_LOSS     => PROD10N_LOSS
     DWT_PROD100N_LOSS     => PROD100N_LOSS
     DWT_PROD100C_LOSS     => PROD10C_LOSS
     DWT_PROD100C_LOSS     => PROD100C_LOSS
     HCSOISNO              => HC
     TEMPSUM_PLANT_NDEMAND => TEMPSUM_POTENTIAL_GPP
     TEMPSUM_RETRANSN      => TEMPMAX_RETRANSN

   History field names deleted:
     SNOWAGE, TSNOW, FMICR, FCO2, DMI, QFLX_SNOWCAP

  Add new urban oriented _U, and _R (Urban and Rural) for:
        EFLX_LH_TOT, FGR, FIRA, FSH, FSM, Q2M, QRUNOFF, RH2M, SoilAlpha, TG, TREFMNAV, TREFMXAV, and TSA
        (missing _R for SoilAlpha)

Describe timing and memory performance:

Versions of any externally defined libraries:

   scripts             scripts4_100108b
   drv                 vocemis-drydep12_drvseq3_1_11
   datm                datm8_091218
   socn                stubs1_2_02/socn
   sice                stubs1_2_02/sice
   sglc                stubs1_2_02/sglc
   csm_share           vocemis-drydep13_share3_091217
   esmf_wrf_timemgr    esmf_wrf_timemgr_090402
   timing              timing_090929
   mct                 MCT2_7_0_100106
   pio                 pio60_prod
   cprnc               cprnc_081022

Summary of testing:
  bluefire: All PASS up to...017 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............PASS
  bluefire interactive testing: All PASS up to..
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing:
PASS  ERH.f09_g16.B20TRCN.bluefire
BFAIL ERH.f09_g16.B20TRCN.bluefire.compare.ccsm4_0_beta38 --- compset names changed -- but cpl.log files compare exactly
!
> ../Tools/check_exactrestart.pl cpl.log.100109-171753 $FISHOME/ccsm4_0_beta38/scripts/ERH.f09_g16.B20TRTR1CN.bluefire.G
.172652/logs/cpl.log.100108-181015
log files match!
PASS
PASS  SMS_RLA.f45_f45.I.bluefire
PASS  SMS_RLB.f45_f45.I.bluefire
PASS  SMS_ROA.f45_f45.I.bluefire
PASS  ERS_D.f45_g37.I.bluefire
PASS  ERS_D.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8
PASS  ERS_D.f45_g37.I.bluefire.compare.clm3_6_58+datm8
PASS  PET.f45_g37.I1850.bluefire.cpl
PASS  PET.f45_g37.I1850.bluefire.atm
PASS  PET.f45_g37.I1850.bluefire.lnd
PASS  PET.f45_g37.I1850.bluefire.ice
PASS  PET.f45_g37.I1850.bluefire.ocn
PASS  PET.f45_g37.I1850.bluefire.glc
PASS  PET.f45_g37.I1850.bluefire.compare.clm3_6_58+datm8
PASS  ERS.f19_g16.I1850.bluefire
PASS  ERS.f19_g16.I1850.bluefire.compare_hist.clm3_6_58+datm8
PASS  ERS.f19_g16.I1850.bluefire.compare.clm3_6_58+datm8
PASS  ERB.f09_g16.I_1948-2004.bluefire
PASS  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_6_58+datm8
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire  <<<<<<<<<<<<<<<<<<<<<<<<< Failed before bug 1063
PASS  ERH_D.f10_f10.I1850CN.bluefire
PASS  PET.f10_f10.I8520CN.bluefire.cpl
PASS  PET.f10_f10.I8520CN.bluefire.atm
PASS  PET.f10_f10.I8520CN.bluefire.lnd
PASS  PET.f10_f10.I8520CN.bluefire.ice
PASS  PET.f10_f10.I8520CN.bluefire.ocn
PASS  PET.f10_f10.I8520CN.bluefire.glc
  jaguar interactive testing: All PASS up to...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  dublin/lf95 interactive testing: None PASS because of bug 1092
  dublin/lf95: None PASS because of bug 1092
  dublin/INTEL interactive testing: ALL PASS except (and didn't compare to baseline)
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
028 smM94 TSMncl_tools.sh ndepregrid ............................................................FAIL! rc= 6
030 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  dublin/INTEL: All PASS up to  021 smJ92 TSM.sh (and didn't compare to baseline)
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
	
===============================================================
===============================================================
Tag name:  clm3_6_64
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Fri Jan 22 22:19:24 MST 2010
One-line Summary: Update documentation and README/Quickstart files, set NetCDF large-file format on by default in template, update pio, update some fsurdat files to vocemis-drydep versions, add 2.5x3.33_gx3v7 frac file, make gx3v7 default for 4x5 res

Purpose of changes:

Setup makefiles for docbook UsersGuide to output both pdf and html formats. Work on documentation of new _esmf driver files. Work on documentation. Make sure documentation of clm xml variables is good. Add note about CASA NOT being supported. Work on README/Quickstart files, and move the files from the top level to clm doc directory, but leave a file at top level pointing to these files. Make large file support default, remove LND_CDF64. Add in VOC surfdata files from voc branch: T42, T31, T21, T5, 4x5, 10x15-pftdyn. Add in new 2x5x3.33_gx3v7 frac file. Make default mask for 4x5 gx3v7.

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: Turn NetCDF large-file support on by default

List any changes to the defaults for the boundary datasets: 

 	New fsurdat files for: T42, T31, T21, T5, 4x5
        New fpftdyn file for 10x15 for 1850-2000, new frac file for 2.5x3.33_gx3v7

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): pio

   pio updated to google version: http://parallelio.googlecode.com/svn/trunk_tags/pio1_0_7/pio

List all files eliminated:

  D  Quickstart.userdatasets --- Move to models/lnd/clm/doc
  D  Quickstart.GUIDE ---------- Move to models/lnd/clm/doc
  D  README.DGVM --------------- Move to models/lnd/clm/doc
  D  KnownBugs ----------------- Move to models/lnd/clm/doc
  D  models/lnd/clm/doc/docs.html ----------------- Remove in favor of DocBook documentation
  D  models/lnd/clm/doc/UsersGuide/clm_head.shtml - Remove in favor of DocBook documentation
  D  models/lnd/clm/doc/UsersGuide/tree.html ------ Remove in favor of DocBook documentation
  D  models/lnd/clm/doc/UsersGuide/clm_foot.shtml - Remove in favor of DocBook documentation
  D  models/lnd/clm/doc/UsersGuide/index.shtml ---- Remove in favor of DocBook documentation

List all files added and what they do:

  A  models/lnd/clm/doc/Quickstart.userdatasets - Move from top level
  A  models/lnd/clm/doc/IMPORTANT_NOTES --------- Add important notes about what's scientifically valided/expected to work
  A  models/lnd/clm/doc/Quickstart.GUIDE -------- Move from top level
  A  models/lnd/clm/doc/KnownBugs --------------- Move from top level
  A  models/lnd/clm/doc/UsersGuide/Makefile ----- Makefile to build Users-Guide
  A  models/lnd/clm/doc/index.shtml ------------- Add HTML guide to documentation
  A  models/lnd/clm/doc/CodeReference/Filepath -- Filepath to source-code to build Code Reference Guide
  A  models/lnd/clm/doc/CodeReference/Makefile -- Makefile to build Code Reference Guide using Protex

  A  models/lnd/clm/test/system/Makefile -------- Makefile to build HTML test table

  A  models/lnd/clm/test/system/config_files/_nrsc_do --- Add smp only option for no-RTM seq-ccsm default mode

List all existing files that have been modified, and describe the changes:

  M  models/lnd/clm/bld/clm.cpl7.template -------------------------- Set large_file_format to true by default
  M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- Add in vocemis-drydep branch fsurdat files for: T42, T31, T21, T5,
                                                                     and 4x5 resolution (as well as 10x15 1850-2005 pftdyn file)
                                                                     Add in 2.5x3.33_gx3v7 frac file, and make gx3v7 mask the default
                                                                     for 4x5 resolution.
  M  models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml -- 2.5x3.33_gx3v7 domain file
>>>>>>>>>>>>> Update documentation and README text files
  M  models/lnd/clm/test/system/README
  M  models/lnd/clm/tools/mksurfdata/README
  M  models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ------------------ Make namelist documentation a little more clea
  M  models/lnd/clm/tools/ncl_scripts/convertUrbanOffline2Seq.ncl -- Document datm as datm8
  M  models/lnd/clm/tools/ncl_scripts/README
  M  models/lnd/clm/tools/interpinic/README
  M  models/lnd/clm/tools/mkdatadomain/README
  M  models/lnd/clm/tools/README
  M  models/lnd/clm/bld/README
  M  models/lnd/clm/doc/UsersGuide/index.xml ---- Update docbook UsersGuide
  M  models/lnd/clm/doc/README
  M  README

  M  models/lnd/clm/test/system/tests_pretag_bluefire ----------- Remove LD1 (2.65x3.33 res) tests
  M  models/lnd/clm/test/system/tests_posttag_hybrid_regression - Remove LD1 tests
  M  models/lnd/clm/test/system/input_tests_master -------------- Remove LD1 tests

Summary of testing:

  bluefire: All PASS except...
004 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 7 << 4x5 fsurdat
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 7 << 4x5 fsurdat
012 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 7 << 4x5 fsurdat
017 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7 << 4x5 fsurdat
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
030 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 7 << 10x15 fpftdyn different
042 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 6
043 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 5
  bluefire interactive testing: All PASS except...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
032 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7 << 4x5 fsurdat
040 blL83 TBL.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 5 << no _nrsc_do in previous
041 bl744 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 7 << script error
043 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 7 << script error
045 bl754 TBLtools.sh mksurfdata tools__s globalirrig ...........................................FAIL! rc= 3 << script error
050 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 3
  bluefire/CCSM testing: All PASS except...
BFAIL SMS_RLA.f45_f45.I.bluefire.compare.clm3_6_58+datm8 <<<<<<<<<<< 4x5 surfdata file different than previous version
BFAIL SMS_RLB.f45_f45.I.bluefire.compare.clm3_6_58+datm8 <<<<<<<<<<< 4x5 surfdata file different
BFAIL SMS_ROA.f45_f45.I.bluefire.compare.clm3_6_58+datm8 <<<<<<<<<<< 4x5 surfdata file different
FAIL  ERS_D.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 <<<<<<<< 4x5 surfdata file different
FAIL  ERS_D.f45_g37.I.bluefire.compare.clm3_6_58+datm8 <<<<<<<<<<<<< 4x5 surfdata file different
FAIL  PET.f45_g37.I1850.bluefire.compare.clm3_6_58+datm8 <<<<<<<<<<< 4x5 surfdata file different
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire <<<<<<<<<<<<<<<<<<<<<<<<<<< Previous failure
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.generate.clm3_6_64 <<<<<<<< Previous failure
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_6_58+datm8 <<< Previous failure
BFAIL ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_6_58+datm8 <<<<<<< 10x15 pftdyn file different
BFAIL PET.f10_f10.I8520CN.bluefire.compare.clm3_6_58+datm8 <<<<<<<<< 10x15 pftdyn file different

CLM tag used for the baseline comparison tests if applicable: clm3_6_63

Changes answers relative to baseline: Only for the following resolutions because of new fsurdat files: T42, T31, T5, 4x5
                                      and for dynamic PFT at 10x15 resolution because of a new pftdyn file

===============================================================
===============================================================
Tag name:  clm3_6_63
Originator(s):  erik (erik)
Date: Sat Jan  9 20:37:53 MST 2010
One-line Summary: Get answers to be identical with ccsm4_0_beta38 for 1 and 2 degree transient cases

Purpose of changes:

Get answers to be identical to ccsm4_0_beta38 for both 1 and 2 degree transient cases. Update scripts to
very latest. Tweak test_suite for CN so that can run with finidat file, and can run interactive on dublin
by turning CCSM_BLD to off.

Bugs fixed (include bugzilla ID):
                                 1098 (Use finidat weights instead of weights from fpftdyn file)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts

List all files eliminated: None

List all files added and what they do:

>>>>>> Add configuration files for CN with default of numpft+1 maxpft
A    models/lnd/clm/test/system/config_files/_cnnsc_h
A    models/lnd/clm/test/system/config_files/_cnnsc_m
A    models/lnd/clm/test/system/config_files/_cnnsc_o
A    models/lnd/clm/test/system/config_files/_cnnsc_dh
A    models/lnd/clm/test/system/config_files/_cnnsc_dm
A    models/lnd/clm/test/system/config_files/_cnnsc_do
A    models/lnd/clm/test/system/config_files/_cnnsc_ds

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>> Tweak test suite so can test for a CN transient case with a startup file, needed to find bug
M    models/lnd/clm/test/system/test_driver.sh ------------ Turn CCSM_BLD to off for interactive use
M    models/lnd/clm/test/system/input_tests_master -------- Tweak CN tests so can use finidat file
>>>>>>>>>>>>>>> Get answers to be identical with ccsm4_0_beta38
M    models/lnd/clm/src/main/clm_initializeMod.F90 -------- add extra call to pftdyn_interp after restart
M    models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 -- Read weights directly into clm_type rather than
                                                            a temporary array.

Summary of testing:

  bluefire: All PASS up to...
017 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............PASS
  bluefire interactive testing: All PASS up to..
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing:
PASS  ERH.f09_g16.B20TRCN.bluefire 
BFAIL ERH.f09_g16.B20TRCN.bluefire.compare.ccsm4_0_beta38 --- compset names changed -- but cpl.log files compare exactly!
> ../Tools/check_exactrestart.pl cpl.log.100109-171753 $FISHOME/ccsm4_0_beta38/scripts/ERH.f09_g16.B20TRTR1CN.bluefire.G.172652/logs/cpl.log.100108-181015 
log files match!
PASS 
PASS  SMS_RLA.f45_f45.I.bluefire 
BFAIL SMS_RLA.f45_f45.I.bluefire.compare.clm3_6_58+datm8  <<< f45_f45 NOT allowed in baseline
PASS  SMS_RLB.f45_f45.I.bluefire 
BFAIL SMS_RLB.f45_f45.I.bluefire.compare.clm3_6_58+datm8  <<< f45_f45 NOT allowed in baseline
PASS  SMS_ROA.f45_f45.I.bluefire 
BFAIL SMS_ROA.f45_f45.I.bluefire.compare.clm3_6_58+datm8  <<< f45_f45 NOT allowed in baseline
PASS  ERS_D.f45_g37.I.bluefire 
PASS  ERS_D.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 
PASS  ERS_D.f45_g37.I.bluefire.compare.clm3_6_58+datm8 
PASS  PET.f45_g37.I1850.bluefire.cpl 
PASS  PET.f45_g37.I1850.bluefire.atm 
PASS  PET.f45_g37.I1850.bluefire.lnd 
PASS  PET.f45_g37.I1850.bluefire.ice 
PASS  PET.f45_g37.I1850.bluefire.ocn 
PASS  PET.f45_g37.I1850.bluefire.glc 
PASS  PET.f45_g37.I1850.bluefire.compare.clm3_6_58+datm8 
PASS  ERS.f19_g16.I1850.bluefire 
PASS  ERS.f19_g16.I1850.bluefire.compare_hist.clm3_6_58+datm8 
PASS  ERS.f19_g16.I1850.bluefire.compare.clm3_6_58+datm8 
PASS  ERB.f09_g16.I_1948-2004.bluefire 
PASS  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_6_58+datm8 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire  <<<<<<<<<<<<<<<<<<<<<<<<< Failed before bug 1063
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_6_58+datm8 
PASS  ERH_D.f10_f10.I1850CN.bluefire 
BFAIL ERH_D.f10_f10.I1850CN.bluefire.compare.clm3_6_58+datm8  <<< f10_f10 NOT allowed in baseline
PASS  PET.f10_f10.I8520CN.bluefire.cpl 
PASS  PET.f10_f10.I8520CN.bluefire.atm 
PASS  PET.f10_f10.I8520CN.bluefire.lnd 
PASS  PET.f10_f10.I8520CN.bluefire.ice 
PASS  PET.f10_f10.I8520CN.bluefire.ocn 
PASS  PET.f10_f10.I8520CN.bluefire.glc 
BFAIL PET.f10_f10.I8520CN.bluefire.compare.clm3_6_58+datm8 <<< f10_f10 NOT allowed in baseline
  jaguar interactive testing: All PASS up to...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  dublin/lf95 interactive testing: None PASS because of bug 1092
  dublin/lf95: None PASS because of bug 1092
  dublin/INTEL interactive testing: ALL PASS except (and didn't compare to baseline)
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
028 smM94 TSMncl_tools.sh ndepregrid ............................................................FAIL! rc= 6
030 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  dublin/INTEL: All PASS up to  021 smJ92 TSM.sh (and didn't compare to baseline)
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_58+datm8

Changes answers relative to baseline: No bit-for-bit -- really now!

===============================================================
===============================================================
Tag name:  clm3_6_62
Originator(s):  erik (erik)
Date: Fri Jan  8 04:50:59 MST 2010
One-line Summary: Fix startup of PFT transient cases so properly use data from pftdyn file rather than finidat file

Purpose of changes:

Attempt to fix bug 1098 so that properly use the PFT weights interpolated from the fpftdyn file rather than using the
weights from the input finidat file.

Bugs fixed (include bugzilla ID): Attempt to fix -- but only a partial fix, answers were still different
                                 1098 (Use finidat weights instead of weights from fpftdyn file)

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts and mct

   scripts to scripts4_100107b
   mct     to MCT2_7_0_100106

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

   M models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --- Fix bug with fpftdyn weights
   M models/lnd/clm/test/system/test_driver.sh ------------- Fix name of ifort Macros file

Summary of testing:

  bluefire: All PASS except, up to 045 erLD1
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  bluefire interactive testing: All PASS up to..
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing: All PASS except CN spinup as below
PASS  ERS.f09_g16.I8520CN.bluefire 
PASS  ERS.f09_g16.I8520CN.bluefire.compare_hist.clm3_6_58+datm8 
PASS  ERS.f09_g16.I8520CN.bluefire.compare.clm3_6_58+datm8 
PASS  SMS_RLA.f45_g37.I.bluefire 
PASS  SMS_RLA.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 
PASS  SMS_RLA.f45_g37.I.bluefire.compare.clm3_6_58+datm8 
PASS  SMS_RLB.f45_g37.I.bluefire 
PASS  SMS_RLB.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 
PASS  SMS_RLB.f45_g37.I.bluefire.compare.clm3_6_58+datm8 
PASS  SMS_ROA.f45_g37.I.bluefire 
PASS  SMS_ROA.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 
PASS  SMS_ROA.f45_g37.I.bluefire.compare.clm3_6_58+datm8 
PASS  ERS_D.f45_g37.I.bluefire 
PASS  ERS_D.f45_g37.I.bluefire.compare_hist.clm3_6_58+datm8 
PASS  ERS_D.f45_g37.I.bluefire.compare.clm3_6_58+datm8 
PASS  PET.f45_g37.I1850.bluefire.cpl 
PASS  PET.f45_g37.I1850.bluefire.atm 
PASS  PET.f45_g37.I1850.bluefire.lnd 
PASS  PET.f45_g37.I1850.bluefire.ice 
PASS  PET.f45_g37.I1850.bluefire.ocn 
PASS  PET.f45_g37.I1850.bluefire.glc 
PASS  PET.f45_g37.I1850.bluefire.compare.clm3_6_58+datm8 
PASS  ERS.f19_g16.I1850.bluefire 
PASS  ERS.f19_g16.I1850.bluefire.compare_hist.clm3_6_58+datm8 
PASS  ERS.f19_g16.I1850.bluefire.compare.clm3_6_58+datm8 
PASS  ERB.f09_g16.I_1948-2004.bluefire 
PASS  ERB.f09_g16.I_1948-2004.bluefire.compare.clm3_6_58+datm8 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
BFAIL ERB.f09_g16.I1850SPINUPCN.bluefire.compare.clm3_6_58+datm8 
PASS  ERH_D.f09_g16.I1850CN.bluefire 
PASS  ERH_D.f09_g16.I1850CN.bluefire.compare.clm3_6_58+datm8 
PASS  PET.f19_g16.I8520CN.bluefire.cpl 
PASS  PET.f19_g16.I8520CN.bluefire.atm 
  jaguar: All PASS up to 021 smJ05 
  jaguar interactive testing: All FAIL except...
001 smA74 TSM.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........PASS
002 erA74 TER.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -5+-5 arb_ic ........PASS
003 brA74 TBR.sh _nrsc_ds clm_std^nl_urb_br 20030101:NONE:1800 1x1_brazil navy -5+-5 arb_ic .....PASS
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........PASS
005 smAK4 TSM.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............PASS
008 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............PASS
  dublin/lf95: None pass because of bug 1092
  dublin/pgi:  All PASS except...
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
030 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 4
  dublin/ifort interactive: All PASS up to...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_58+datm8 (ccsm4_0_beta38)

Changes answers relative to baseline: Identical without fpftdyn files 
                                      with and without finidat files. But, can be
                                      different to roundoff or more for transient cases.

===============================================================
===============================================================
Tag name:  clm3_6_61
Originator(s):  erik (erik)
Date: Thu Jan  7 00:55:20 MST 2010
One-line Summary: Comment out endrun on finidat and fsurdat weights being incomptable, and go back to using finidat weights

Purpose of changes:

Most of our finidat files have weights incompatible with our new fsurdat files. Hence, we went back to allowing
the weights to be different and to using the finidat weights so that answers would be the same as before.
Also hardwire the logfile for datm and clm so that can run testsuite on jaguar. Also add in cppdef required
for breeze.

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1098 (Use finidat weights instead of weights from fpftdyn file)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts
   scripts to scripts4_100107

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

 M   models/lnd/clm/test/system/test_driver.sh -------------------- Add -cppdefs '-DFORTRANUNDERSCORE' for breeze.
 M   models/lnd/clm/bld/build-namelist ---------------------------- For standalone testing hardwire clm and 
                                                                    datm output log files
 M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - Add comment remove logfile
 M   models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 ---------- Put implicit none in right place, comment
        out abort if weights too different, and use finidat weights instead of fsurdat weights. Hence
        this version is identical to clm3_6_58, other than the use of datm8 (which is roundoff different).

Summary of testing:

  bluefire:
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 4
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 4
053 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  bluefire/CCSM testing:
PEND  SMS_RLA.f45_f45.I.bluefire.200614 
PEND  SMS_RLB.f45_f45.I.bluefire.200614 
PASS  SMS_ROA.f45_f45.I.bluefire 
PASS  ERS_D.f45_g37.I.bluefire 
PASS  PET.f45_g37.I1850.bluefire.cpl 
PASS  PET.f45_g37.I1850.bluefire.atm 
PASS  PET.f45_g37.I1850.bluefire.lnd 
PASS  PET.f45_g37.I1850.bluefire.ice 
PASS  PET.f45_g37.I1850.bluefire.ocn 
PASS  PET.f45_g37.I1850.bluefire.glc 
PASS  ERS.f19_g16.I1850.bluefire 
PASS  ERB.f09_g16.I_1948-2004.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
PASS  ERH_D.f10_f10.I1850CN.bluefire 
PASS  PET.f10_f10.I8520CN.bluefire.cpl 
PASS  PET.f10_f10.I8520CN.bluefire.atm 
PASS  PET.f10_f10.I8520CN.bluefire.lnd 
PASS  PET.f10_f10.I8520CN.bluefire.ice 
PASS  PET.f10_f10.I8520CN.bluefire.ocn 
PASS  PET.f10_f10.I8520CN.bluefire.glc 
  jaguar interactive testing:
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 5
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
008 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............FAIL! rc= 5
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
013 smJ74 TSM.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic FAIL! rc= 8
014 erJ74 TER.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic FAIL! rc= 5
015 brJ74 TBR.sh 4p_nrcasasc_ds clm_std^nl_urb_br 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_icFAIL! rc= 5
016 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic FAIL! rc= 4
  dublin/lf95: All Fail due to bug 1092

CLM tag used for the baseline comparison tests if applicable: clm3_6_58 (but with datm8 rather than datm7)

Changes answers relative to baseline: No bit-for-bit except for transient cases which are different

===============================================================
===============================================================
Tag name:  clm3_6_60
Originator(s):  erik (erik)
Date:  Tue Jan  5 23:59:43 MST 2010
One-line Summary: Fix clm template

Purpose of changes:

Fix the broken clm template. Update externals for very latest scripts tag.

Bugs fixed (include bugzilla ID): Fix clm template which was broken

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): Update scripts

   scripts to scripts4_100105b

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M    models/lnd/clm/test/system/test_driver.sh -- update bl to ccsm4_0_beta38
M    models/lnd/clm/bld/clm.cpl7.template ------- fix so can work

Summary of testing:

  bluefire/CCSM testing:
PASS  SMS_RLA.f45_f45.I.bluefire 
PASS  SMS_RLB.f45_f45.I.bluefire 
PASS  SMS_ROA.f45_f45.I.bluefire 
FAIL  ERS.f19_g16.I_1850.bluefire 
FAIL  ERS.f19_g16.I_1850-2000.bluefire 
PASS  ERB.f09_g16.I_1948-2004.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire 
PASS  ERH_D.f10_f10.I_1850_CN.bluefire 
PASS  PET.f10_f10.I8520CN.bluefire.cpl 
PASS  PET.f10_f10.I8520CN.bluefire.atm 
PASS  PET.f10_f10.I8520CN.bluefire.lnd 

CLM tag used for the baseline comparison tests if applicable: clm3_6_59

Changes answers relative to baseline: no bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_59
Originator(s):  erik (erik)
Date: Tue Jan  5 17:44:48 MST 2010
One-line Summary: Update to datm8, fix so wts used are from fsurdat file NOT finidat file

Purpose of changes:

Changes needed for beta34 ESMF upgrade. Use new datm8 model which is more flexible and
has new options as well as parallel IO. Add in 4x5_gx3v7 frac file. Remove use for
ESMF_mod. Abort if finidat weights are significantly different from surfdata file
weights. Change name of driver and initializeMod to have a clm_ prefix. Convert UG
outline from html to DocBook. Make changes to code documentation for high level
subroutines. Remove documentation of namelist items in controlMod and have it point
to the documentation in the xml namelist file. Fix "called from" in code documentation 
and remove a lot of the concurrent directives. New files from Tony for esmf interface. 
Alpha release testing will start with this version.

Bugs fixed (include bugzilla ID):
                                 1084 (don't use only for ESMF_Mod)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1088 (change name of driver module)
                                 1093 (namelist tweaks) -- partial

Known bugs (include bugzilla ID):
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1092 (Problems running in debug mode on dublin with datm8)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: 
    Let CCSM build determine FORTRAN mangle definitions
    Directory structure changes slightly with new ESMF interfaces and new datm8

Describe any changes made to the namelist:
   Make default for hist_crtinic NONE so clm.i files are NOT made by default.
   Change names of options to build-namelist that only are for clm stand-alone testing.
   Add a drv_ or datm_ prefix, and separate how these options are displayed in the help
   Also add an option to several commands for "list" so that you can list the variables
   for clm_demand, for resolution, and for use-cases.
   Also update build-namelist to work with the new datm8

List any changes to the defaults for the boundary datasets: Add in 4x5_gx3v7 dataset

Describe any substantial timing or memory changes: datm8 is approx. 30% faster
   datm8 also allows you to enable parallel I/O

Code reviewed by: self, oleson, slevis, dlawren review of weights change

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm, csm_share, drv, pio

+scripts   to scripts4_100103b
+drv       to vocemis-drydep12_drvseq3_1_11
+datm      to datm8_091218
+csm_share to vocemis-drydep13_share3_091217
+pio       to pio60_prod

List all files eliminated: 

  D   models/lnd/clm/test/system/config_files/_mexsc_ds --- Rename with nr in name
  D   models/lnd/clm/test/system/config_files/_vansc_ds --- Rename with nr in name
  D   models/lnd/clm/src/main/driver.F90 ------------------ Rename with clm_ prefix
  D   models/lnd/clm/src/main/initializeMod.F90 ----------- Rename with clm_ prefix
  D   models/lnd/clm/src/biogeophys/DriverInitMod.F90 ----- Rename to clm_driverInitMod

List all files added and what they do:

  A   models/lnd/clm/doc/UsersGuide/index.xml ---------------- Users Guide Outline in docbook format
>>>>>>>>>>> Version with "nr" so that RTM is turned off for non-global tests
  A   models/lnd/clm/test/system/config_files/_nrsc_s
  A   models/lnd/clm/test/system/config_files/17p_nrsc_ds
  A   models/lnd/clm/test/system/config_files/4p_nrcasasc_ds
  A   models/lnd/clm/test/system/config_files/_nrsc_ds
  A   models/lnd/clm/test/system/config_files/_nrmexsc_ds
  A   models/lnd/clm/test/system/config_files/_nrvansc_ds
  A   models/lnd/clm/test/system/config_files/17p_nrcnnsc_ds
>>>>>>>>>>> New files from Tony for ESMF interfaces
  A   models/lnd/clm/src/main/cpl_esmf/lnd_comp_esmf.F90
  A   models/lnd/clm/src/main/cpl_esmf/lnd_comp_mct.F90

  A   models/lnd/clm/src/main/clm_initializeMod.F90 ---------- Rename with clm_ prefix
              Also change so that dyn pft is always called before reading in the restart
              file.
  A   models/lnd/clm/src/main/clm_driver.F90 ----------------- Rename with clm_ prefix
  A   models/lnd/clm/src/biogeophys/clm_driverInitMod.F90 ---- Rename from driverInitMod

List all existing files that have been modified, and describe the changes:

  M   models/lnd/clm/test/system/config_files/README -- Note about nr means no-RTM
  M   models/lnd/clm/test/system/test_driver.sh ------- Some tweaks for dublin/intrepid
  M   models/lnd/clm/test/system/mknamelist ----------- Changes for datm namelists, and 
                                                        change for new options names for
                                                        build-namelist
  M   models/lnd/clm/test/system/nl_files/clm_per ----- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_std ----- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_ndepdyn - Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_pftdyn -- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_per0 ---- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_spin ---- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/nl_files/clm_urb1pt -- Change case and source to
                                                        drv_case and datm_source
  M   models/lnd/clm/test/system/input_tests_master --- Use nr in test names
  M   models/lnd/clm/test/system/CLM_runcmnd.sh ------- Change name for laptop
  M   models/lnd/clm/test/system/TSM.sh --------------- Change datm restart files

  M   models/lnd/clm/bld/clm.cpl7.template ------------ Change template to not put RTM
                                                        time-step in when rtm is off
  M   models/lnd/clm/bld/configure -------------------- Change to new datm dir structure
  M   models/lnd/clm/bld/listDefaultNamelist.pl ------- Change name of datm namelist
  M   models/lnd/clm/bld/build-namelist --------------- New list options, update for
           new datm8 namelist.

  M   models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Document pio options
           new datm8 namelist items, CASA nameist items, and fget_archdev
  M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- New 4x5_gx3v7 frac file
                                                              set default of hist_crtinic to NONE
  M   models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml - New datm8 defaults
  M   models/lnd/clm/bld/namelist_files/namelist_definition.xsl ---- Add section for
           CASA nl items, and a commented out section for the pio items

  M   models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90 ---- Fix called from, rm concurrnt directives
  M   models/lnd/clm/src/biogeochem/CASAPhenologyMod.F90 ------ Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNGapMortalityMod.F90 ----- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90 -- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/DGVMEcosystemDynMod.F90 --- Fix called from
  M   models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90 ----- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNNStateUpdate3Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CASAMod.F90 --------------- Doc routine as private, fix called from, rm con dirct.
  M   models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90 - Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNSummaryMod.F90 ---------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNCStateUpdate3Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90 -- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/DGVMMod.F90 --------------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90 -- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90 ----- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/C13SummaryMod.F90 --------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90 -------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNC13FluxMod.F90 ---------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNSetValueMod.F90 --------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 -- Fix called from, rm con dirt.

  M   models/lnd/clm/src/main/clm_comp.F90 ------------- Add clm_ prefix to calls
  M   models/lnd/clm/src/main/pftdynMod.F90 ------------ Fix called from, rm con dirt.
  M   models/lnd/clm/src/main/histFileMod.F90 ---------- Add more documentation, rm con direct.
  M   models/lnd/clm/src/main/clm_atmlnd.F90 ----------- Change documentation of units for nee
  M   models/lnd/clm/src/main/restFileMod.F90 ---------- Change called from documentation
  M   models/lnd/clm/src/main/controlMod.F90 ----------- Remove namelist items documentation 
                                                         point to xml files for documenation
                                                         Work with code documentation
                                                         Get rid of notes about aerdep
                                                         files going away
  M   models/lnd/clm/src/main/clm_time_manager.F90 ----- Fix called from doc
  M   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 - Add documentation
  M   models/lnd/clm/src/main/domainMod.F90 ------------ Clarify which driver in doc
  M   models/lnd/clm/src/main/clmtype.F90 -------------- Work on code documentation
  M   models/lnd/clm/src/main/histFldsMod.F90 ---------- Work on code documentation and formatting

  M   models/lnd/clm/src/riverroute/RtmMod.F90 - Fix called from

  M   models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ------ Remove KO and fix called from in code doc, rm con dirct.
  M   models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90 ---- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 ----- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/Hydrology1Mod.F90 -------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 -------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90 - Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/UrbanMod.F90 ------------- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90 ----- Fix called from, rm con dirt.
  M   models/lnd/clm/src/biogeophys/SNICARMod.F90 ------------ Fix called from.

  M   models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 - Check that weights when read
         in agree reasonably closely with fsurdat weights

Summary of testing:

  bluefire:
004 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 7
007 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 7
012 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 7
017 blF92 TBL.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7
021 blEH1 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 7
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
028 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -3+-7 arb_ic .......FAIL! rc= 13
029 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -5+-5 arb_ic .......FAIL! rc= 11
030 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 7
034 blC61 TBL.sh _sc_dh clm_std^nl_urb 20021001:NONE:1800 1.9x2.5 gx1v6 48 cold .................FAIL! rc= 7
038 blH52 TBL.sh 17p_cnnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold .........FAIL! rc= 7
043 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 7
049 blJ61 TBL.sh 4p_casasc_dh clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 7
050 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v6 48 arb_ic .....FAIL! rc= 10
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 4
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 3
053 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 3 
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 3
  bluefire interactive testing:
004 blA74 TBL.sh _nrsc_ds clm_std^nl_urb 20030101:NONE:1800 1x1_brazil navy -10 arb_ic ..........FAIL! rc= 5
009 blCA4 TBL.sh _nrsc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ........FAIL! rc= 5
013 blNB4 TBL.sh _nrmexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
017 blJ74 TBL.sh 4p_nrcasasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic FAIL! rc= 5
019 blCA8 TBL.sh _nrsc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic .FAIL! rc= 5
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
023 blAK4 TBL.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -10 cold ............FAIL! rc= 7
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ......FAIL! rc= 6
028 blL78 TBL.sh _nrsc_s clm_std^nl_urb 20021231:NONE:1800 1x1_brazil navy -10 arb_ic ...........FAIL! rc= 5
032 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 7
033 smL83 TSM.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 4
034 erL83 TER.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -5+-5 arb_ic ........FAIL! rc= 5
035 brL83 TBR.sh _nrsc_do clm_std^nl_urb_br 20020115:NONE:3600 5x5_amazon navy -10+-10 arb_ic ...FAIL! rc= 5
036 blL83 TBL.sh _nrsc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ..........FAIL! rc= 4
041 bl744 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 7
043 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 7
045 bl754 TBLtools.sh mksurfdata tools__s globalirrig ...........................................FAIL! rc= 6
050 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  dublin/lf95:   No testing as all tests fail due to bug 1092

CLM tag used for the baseline comparison tests if applicable: clm3_6_58

Changes answers relative to baseline: datm8 causes answers to be roundoff different
    Change to use of fsurdat instead of finidat weights means answers may change
    for non-coldstart cases.

===============================================================
===============================================================
Tag name:  clm3_6_58
Originator(s):  erik (erik)
Date: Tue Dec  8 12:56:47 MST 2009
One-line Summary: Fix rpointer, correct units for export of nee, start adding testing for intrepid

Purpose of changes:
    Only update the rpointer file when restart files are written NOT when clm.i initial
    files are written. This was causing problems to restart the model when it was
    aborting before it completed it's period to run for.
    Correct the units for the export of NEE from kg C to kg CO2 (kgCO2/m2/s)
    Remove some concurent directives in the code and the unicosmp target_os in 
    configure as we no longer have Phoenix.
    Add bgp target_os to configure, only set Fortran mangling if NOT using the 
    CCSM build in configure.
    Add CN atm spinup data source as option to configure and to test_driver.sh.
    Update version of external to test with to ccsm4_0_beta35
    Add ability to test on intrepid to test_driver.sh.

Bugs fixed (include bugzilla ID):
                                 1079 (rpointer file updated with clm.i files)
                                 1082 (Add bgp, don't do Fortran mangling for CCSM build)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1070 (pftdyn datasets bad for f19, 2.5x3.33)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Have configure write out unresolved filepaths 
                                           when called from cpl7.template

Describe any changes made to the namelist: drv namelist updated

List any changes to the defaults for the boundary datasets:
      Add 2.5x3.33 resolution
      Remove 2x2.5 res files
      New f09, f19 finidat files
      New f09, f19, f10, 1x1_tropicAtl fsurdat/fpftdyn files (only f19 change answers)
      New f05, 5x5_amazon, 1x1_brazil 2000 fsurdat file (b4b)
      New f03, f09, f19, f03, f10 ndepdyn files (changes 1851-1924, 1996-2004)

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): to ccsm4_0_beta33 versions

   scripts        to scripts4_091027b
   drv            to vocemis-drydep12_drvseq3_0_37
   datm7          to datm7_090928
   socn/sice/sglc to stubs1_2_02
   csm_share      to share3_091013
   timing         to timing_090929
   mct            to MCT2_6_0_090926
   pio            to pio57_prod

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      Quickstart.userdatasets --- Update notes about setting user-defined datasets
>>>>>>>>>>>>>>> Update jaguar, kraken, and bluefire env vars to latest scripts
>>>>>>>>>>>>>>> Remove blAK8 test as ocean-only and no clm files to compare
  M    models/lnd/clm/test/system/README.testnames ---------------- Add 2.5x3.33 test resolution
  M    models/lnd/clm/test/system/tests_driver.sh ----------------- Update env vars
                      to whats in scripts4_091015 for jaguar, kraken and bluefire
  M    models/lnd/clm/test/system/tests_pretag_bluefire_nompi ----- Rm blAK8
  M    models/lnd/clm/test/system/input_tests_master -------------- Rm blAK8, add 1x1_tropicAtl@1850,1850-2000, and 2.5x3.33 tests
  M    models/lnd/clm/test/system/tests_posttag_nompi_regression -- Rm blAK8

>>>>>>>>>>>>>>> Allow configure to write out unresolved Filepath, make TopCCSMBld
>>>>>>>>>>>>>>> Makefile closer to CPL7 version
  M    models/lnd/clm/bld/configure -------------------------- Add clm_root option
              add ability to set comp_intf to cpl_$COMP, allow ability to check for
              directories existance resolving env vars that are set. Create a subroutine
              is_valid_directory to check for directories instead of "-d".
  M    models/lnd/clm/bld/config_files/config_definition.xml - Allow cpl_$COMP rm lapacklibdir
  M    models/lnd/clm/bld/clm.cpl7.template -- Set COMP based on COMP_INTERFACE, 
                 add clm_root to configure, don't resolve CODEROOT and CASEROOT on output
  M    models/lnd/clm/bld/config_files/TopCCSMBldMakefile.in - Changes to make closer to scripts4_091015 version.
>>>>>>>>>>>>>>> Change drv namelist names, 
  M    models/lnd/clm/bld/build-namelist ----- Change drv namelist names: cpl_io_numtasks/cpl_io_typename
>>>>>>>>>>>>>>> Change drv namelist names, add 2.5x3.33 resolution
>>>>>>>>>>>>>>> Remove 2x2.5 res files
>>>>>>>>>>>>>>> New f09, f19 finidat files
>>>>>>>>>>>>>>> New f09, f19, f10, 1x1_tropicAtl fsurdat/fpftdyn files (only f19 change answers)
>>>>>>>>>>>>>>> New f05, 5x5_amazon, 1x1_brazil 2000 fsurdat file (b4b)
>>>>>>>>>>>>>>> New f03, f09, f19, f03, f10 ndepdyn files (changes 1851-1924, 1996-2004)
  M    models/lnd/clm/bld/namelist_files/namelist_definition.xml -----Change drv namelist 
                names: cpl_io_numtasks/cpl_io_typename, add 2.5x3.33 resolution
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml -- Add 2.5x3.33 res domainfile
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- New f19, f09 finidat files
               new f09, f19, f10 fsurdat/fpftdyn files
               new 2.5x3.33: fatmgrid, flndtopo, fatmtopo, fatmlndfrc, faerdep, fndepdat files
              new f05, 5x5_amazon, 1x1_brazil 2000 fsurdat files
              new f03, f09, f19, f03, f10 ndepdyn files
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml --- Change drv namelist 
               names: cpl_io_numtasks/cpl_io_typename

  M    models/lnd/clm/src/main/histFldsMod.F90 -- GC_HEAT2, GC_LIQ2, GC_ICE2 NOT on by default
>>>>>>>>>>>>>>> Remove dips in 20th Century transient Nitrogen deposition
>>>>>>>>>>>>>>> for 1855 and 2000.
  M   models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl --- Remove 1855-1915 and 2000
                from list of input files. The 1850 dataset had too high of CO2 and hence
                to high Nitrogen deposition, which gives a unrealistic dip near the
                beginning.

>>>>>>>>>>>>>>> Documentation changes of ProTex comments to fit the ProTex standard
M      tools/mksurfdata/mkglcmec.F90
M      tools/mksurfdata/mkfmax.F90
M      tools/mksurfdata/ncdio.F90
M      tools/mksurfdata/mklaiMod.F90
M      tools/mksurfdata/mkglacier.F90
M      tools/mksurfdata/mkharvestMod.F90
M      tools/mksurfdata/creategridMod.F90
M      tools/mksurfdata/mkorganic.F90
M      tools/mksurfdata/mklanwat.F90
M      tools/mksurfdata/mksoicol.F90
M      tools/mksurfdata/mkrank.F90
M      tools/mksurfdata/mkelev.F90
M      tools/mksurfdata/mkurban.F90
M      tools/mksurfdata/mkurbanparMod.F90
M      tools/mksurfdata/mksoitex.F90
M      tools/mksurfdata/mkirrig.F90
M      tools/mksurfdata/domainMod.F90
M      tools/mksurfdata/areaMod.F90
M      tools/mksurfdata/mksrfdat.F90
M      tools/mksurfdata/mkpftMod.F90
M      tools/mkgriddata/mkgriddata.F90
M      tools/mkgriddata/creategridMod.F90
M      tools/mkdatadomain/create_domain.F90
M      src/biogeochem/DGVMLightMod.F90
M      src/biogeochem/DGVMReproductionMod.F90
M      src/biogeochem/DGVMAllocationMod.F90
M      src/biogeochem/DGVMEcosystemDynMod.F90
M      src/biogeochem/CASAMod.F90
M      src/biogeochem/DGVMKillMod.F90
M      src/biogeochem/DUSTMod.F90
M      src/biogeochem/DGVMEstablishmentMod.F90
M      src/biogeochem/STATICEcosysDynMod.F90
M      src/biogeochem/DGVMRestMod.F90
M      src/biogeochem/DGVMMod.F90
M      src/biogeochem/CNrestMod.F90
M      src/biogeochem/VOCEmissionMod.F90
M      src/biogeochem/DGVMMortalityMod.F90
M      src/biogeochem/DGVMTurnoverMod.F90
M      src/biogeochem/DGVMFireMod.F90
M      src/biogeochem/CNEcosystemDynMod.F90
M      src/main/inicFileMod.F90
M      src/main/organicFileMod.F90
M      src/main/spmdGathScatMod.F90
M      src/main/clm_varpar.F90
M      src/main/CNiniTimeVar.F90
M      src/main/dynlandMod.F90
M      src/main/accumulMod.F90
M      src/main/clm_comp.F90
M      src/main/driver.F90
M      src/main/decompInitMod.F90
M      src/main/ncdio.F90
M      src/main/getdatetime.F90
M      src/main/subgridRestMod.F90
M      src/main/accFldsMod.F90
M      src/main/subgridMod.F90
M      src/main/fileutils.F90
M      src/main/aerdepMod.F90
M      src/main/initializeMod.F90
M      src/main/pftdynMod.F90
M      src/main/iniTimeConst.F90
M      src/main/histFileMod.F90
M      src/main/pft2colMod.F90
M      src/main/clm_atmlnd.F90
M      src/main/restFileMod.F90
M      src/main/controlMod.F90
M      src/main/initSurfAlbMod.F90
M      src/main/clm_time_manager.F90
M      src/main/cpl_mct/lnd_comp_mct.F90
M      src/main/ndepFileMod.F90
M      src/main/subgridAveMod.F90
M      src/main/initGridCellsMod.F90
M      src/main/CASAiniTimeVarMod.F90
M      src/main/CNiniSpecial.F90
M      src/main/pftvarcon.F90
M      src/main/snowdp2lev.F90
M      src/main/spmdMod.F90
M      src/main/surfrdMod.F90
M      src/main/domainMod.F90
M      src/main/decompMod.F90
M      src/main/areaMod.F90
M      src/main/iobinary.F90
M      src/main/do_close_dispose.F90
M      src/main/mkarbinitMod.F90
M      src/riverroute/RtmMod.F90
M      src/riverroute/RunoffMod.F90
M      src/biogeophys/BalanceCheckMod.F90
M      src/biogeophys/SurfaceRadiationMod.F90
M      src/biogeophys/SoilTemperatureMod.F90
M      src/biogeophys/SnowHydrologyMod.F90
M      src/biogeophys/UrbanInputMod.F90
M      src/biogeophys/Biogeophysics1Mod.F90
M      src/biogeophys/Biogeophysics2Mod.F90
M      src/biogeophys/FracWetMod.F90
M      src/biogeophys/UrbanInitMod.F90
M      src/biogeophys/FrictionVelocityMod.F90
M      src/biogeophys/TridiagonalMod.F90
M      src/biogeophys/SurfaceAlbedoMod.F90
M      src/biogeophys/Hydrology1Mod.F90
M      src/biogeophys/Hydrology2Mod.F90
M      src/biogeophys/BiogeophysicsLakeMod.F90
M      src/biogeophys/BiogeophysRestMod.F90
M      src/biogeophys/SoilHydrologyMod.F90
M      src/biogeophys/UrbanMod.F90
M      src/biogeophys/QSatMod.F90
M      src/biogeophys/HydrologyLakeMod.F90
M      src/biogeophys/SNICARMod.F90
M      src/biogeophys/DriverInitMod.F90
M      src/biogeophys/BareGroundFluxesMod.F90
M      src/biogeophys/CanopyFluxesMod.F90

Summary of testing:

  bluefire:
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72
arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72
arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic
.........FAIL! rc= 10
031 smC61 TSM.sh _sc_dh clm_std^nl_urb 20021001:NONE:1800 1.9x2.5 gx1v6 -6 cold
.................FAIL! rc= 10
032 erC61 TER.sh _sc_dh clm_std^nl_urb 20021001:NONE:1800 1.9x2.5 gx1v6 10+38 cold
..............FAIL! rc= 5
033 brC61 TBR.sh _sc_dh clm_std^nl_urb_br 20021001:NONE:1800 1.9x2.5 gx1v6 -3+-3 cold
...........FAIL! rc= 5
034 blC61 TBL.sh _sc_dh clm_std^nl_urb 20021001:NONE:1800 1.9x2.5 gx1v6 48 cold
.................FAIL! rc= 4
035 smH52 TSM.sh 17p_cnnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 96 cold
.........FAIL! rc= 8
036 erH52 TER.sh 17p_cnnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38
cold ......FAIL! rc= 5
037 brH52 TBR.sh 17p_cnnsc_dm clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS@2000 72+72
cold ...FAIL! rc= 5
038 blH52 TBL.sh 17p_cnnsc_dm clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold
.........FAIL! rc= 4
039 smI59 TSMcnspinup.sh 17p_cnadspinupsc_dm 17p_cnexitspinupsc_dm 17p_cnsc_dm clm_std
20020115:NONEFAIL! rc= 5
040 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic
........................FAIL! rc= 10
041 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic
......................FAIL! rc= 5
  bluefire interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic........FAIL! rc= 10
  bluefire/CCSM testing:
PASS  SMS_RLA.f45_f45.I.bluefire 
PASS  SMS_RLB.f45_f45.I.bluefire 
PASS  SMS_ROA.f45_f45.I.bluefire 
PASS  ERS_D.f45_g35.I_2000.bluefire 
PASS  PET.f45_g35.I_1850.bluefire.cpl 
PASS  PET.f45_g35.I_1850.bluefire.atm 
PASS  PET.f45_g35.I_1850.bluefire.lnd 
PASS  PET.f45_g35.I_1850.bluefire.ice 
PASS  PET.f45_g35.I_1850.bluefire.ocn 
PASS  PET.f45_g35.I_1850.bluefire.glc 
PASS  ERS.f19_g16.I_1850.bluefire 
FAIL  ERS.f19_g16.I_1850-2000.bluefire  <-- script fails, but cpl log same
PASS  ERB.f09_g16.I_1948_2004.bluefire 
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire <-- recv lnd Sl_t different
PASS  ERH_D.f10_f10.I_1850_CN.bluefire 
PASS  PET.f10_f10.ICN8520.bluefire.cpl 
PASS  PET.f10_f10.ICN8520.bluefire.atm 
PASS  PET.f10_f10.ICN8520.bluefire.lnd 
PASS  PET.f10_f10.ICN8520.bluefire.ice 
PASS  PET.f10_f10.ICN8520.bluefire.ocn 
PASS  PET.f10_f10.ICN8520.bluefire.glc
  jaguar: All PASS
  jaguar interactive testing: All PASS except
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
007 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 6
009 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
011 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
013 smJ74 TSM.sh 4p_casasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic .FAIL! rc= 8
014 erJ74 TER.sh 4p_casasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic FAIL! rc= 5
015 brJ74 TBR.sh 4p_casasc_ds clm_std^nl_urb_br 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic FAIL! rc= 5
  dublin/lf95 interactive testing:
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
007 brAL4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 6
026 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
027 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
030 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  dublin/lf95:
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
030 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 8
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to..
019 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 48 cold ......FAIL! rc= 7

CLM tag used for the baseline comparison tests if applicable: clm3_6_53

Changes answers relative to baseline: Only f19 due to new fsurdat file (off by roundoff)
                                      and startup for f09 and f19 with CN change due
                                      to new finidat files. 20th Century simulations 
                                      with CN change because the ndep data set is different
                                      from 1851-1924, and 2001-2004.

===============================================================
===============================================================
Tag name:  clm3_6_53
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Tue Sep 22 16:15:39 MDT 2009
One-line Summary: Fix so that T31_gx3v7 file is actually included

Purpose of changes:

Add new optics file from Mark Flanner. Fix so T31_gx3v7 file included. Change testing 
for 48x96 to gx3v7. Update datm so that pt1_pt1 res works. Fix clm template so 
that RTM is turned off for pt1_pt1 resolution.

Bugs fixed (include bugzilla ID):
                                 1042 (Bug with domain directory name in datm for pt1_pt1 resolution)
                                  789 -- change so that RTM is off should make single-point mode faster

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: In template turn off RTM if grid=pt1

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Add in T31_gx3v7 frac file, update snicar optics file

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): datm7

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      Quickstart.userdatasets
M      models/lnd/clm/test/system/input_tests_master
M      models/lnd/clm/bld/clm.cpl7.template
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

Summary of testing: Limited

  bluefire:
  bluefire interactive testing:
  bluefire/CCSM testing:

CLM tag used for the baseline comparison tests if applicable: clm3_6_53

Changes answers relative to baseline: None -- bit for bit

===============================================================
===============================================================
Tag name:  clm3_6_52
Originator(s):  erik (erik)
Date: Thu Sep 17 11:07:19 MDT 2009
One-line Summary: Add T31_gx3v7 support, remove forganic, read from fsurdat, add script to extract regional datasets, work with CN output, add more urban/rural fields

Purpose of changes:

 Add T31_gx3v7 files needed. Read organic fields from fsurdat file, remove forganic file.
 Add in script to extract regional datasets. Change CN output fields list, add NBP (Net
 Biome Production field). New Urban/Rural fields from Keith. Update bluefire compiler
  to XLF12 (causes some restart issues listed below).

 This tag includes new scripts to extract regional datasets from the global datasets
 in order to run for a specific region of interest. The scripts are available in the
 models/lnd/clm/tools/ncl_scripts directory, the main script is the
 getregional_datasets.pl perl script and it has a command line interface and help with
 the "-help" option. There's also a README file in the directory containing the scripts,
 and more information in the Quickstart.userdatasets file at the top level.

 Quickstart to use of regional extraction scripts:

       # Run the script to create an area to put your files (assume CSMDATA set to standard inputdata)
       cd scripts
       setenv MYCSMDATA $HOME/myinputdata
       link_dirtree $CSMDATA $MYCSMDATA 

       # Run the extraction for data from 52-73 North latitude, 190-220 longitude
       # that creates 13x12 gridcell region from the f19 (1.9x2.5) global resolution over
       # Alaska
       cd ../models/lnd/clm/tools/ncl_scripts
       setenv MYID 13x12pt_f19_alaskaUSA
       getregional_datasets.pl -sw 52,190 -ne 73,220 -id $MYID -mycsmdata $MYCSMDATA

       # Now create a case that uses these datasets
       cd ../../../../../scripts
       create_newcase -case testregional -compset I -mach bluefire -res pt1_pt1 -skip_rundb
       cd testregional
       $EDITOR env_conf.xml # change CLM_BLDNML_OPTS to include "-clm_usr_name $MYID" (expand $MYID)
       $EDITOR env_mach_pes.xml # Change tasks/threads as appropriate (defaults to serial)
       xmlchange -file env_run.xml -id DIN_LOC_ROOT_CSMDATA -val $MYCSMDATA
       $EDITOR Tool/Templates/datm.cpl7.template.csh # Add the following line before the check on DOMAINFILE (expand $MYID)

if ( $DOMAINFILE == "unset" ) set DOMAINFILE = "domain.lnd.$MYID.nc"

       # Do other changes to xml files as appropriate
       # configure as normal, then edit the datm namelist

       configure -case

       # Then build and run the case as normal

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1042 (Bug with domain directory name in datm for pt1_pt1 resolution)
                                 1063 (Problem in restarts for CCSM spinup data)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Filepath, bluefire compiler to XLF12

    Filepath for stub-components changes
    In scripts and in test_driver.sh update compiler for bluefire to XLF12
    (this causes the restart issue for certain cases below).

Describe any changes made to the namelist: Remove forganic (read organic from fsurdat file)

List any changes to the defaults for the boundary datasets: Add 48x96_gx3v7 fracdata 

Describe any substantial timing or memory changes: None

Code reviewed by: self, oleson(urban/rural), slevis (CN fields, new NBP field)

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm7, stub-comps, csm_share

 scripts        to scripts4_090916
 drv            to vocemis-drydep12_drvseq3_0_29
 datm7          to datm7_090915
 socn/sice/sglc to stubs1_2_01
 csm_share      to share3_090902

List all files eliminated: Remove noOrganicSoilDataset use case

  Remove the use case that removed the requirement for the forganic dataset.

  D    models/lnd/clm/bld/namelist_files/use_cases/noOrganicSoilDataset.xml

List all files added and what they do:

  Add stylesheet for namelist defaults files.

  A models/lnd/clm/bld/namelist_files/namelist_defaults.xsl

 Scripts to extract regions of interest from global grids and put them into the place
 expected by build-namelist with the clm_usr_name option.

  A  models/lnd/clm/tools/ncl_scripts/getregional_datasets.pl --- Main script to extract regional datasets.
          This one has a command line interface.
  A  models/lnd/clm/tools/ncl_scripts/getregional_datasets.ncl -- Support script to do the actual work.
          This one works based on settings of a bunch of environment variables.
          
List all existing files that have been modified, and describe the changes:

  M    Quickstart.userdatasets - Add notes about using getregional_datasets.pl
  M    Quickstart.GUIDE -------- Fix typo

  M    models/lnd/clm/test/system/test_driver.sh ---- Update seqccsm version to beta26
                                                      Also update bluefire to XLF12.

  M    models/lnd/clm/tools/ncl_scripts/README ----- Add note about new getregional_datasets scripts

>>>>>>>>>>>>>>> Get configure working with new scripts/stub-components
  M    models/lnd/clm/bld/configure ------- Change Filepath for stub components, remove
                                            write_filepath_ccsm use ccsmbld version

>>>>>>>>>>>>>>> Remove forganic, add T31_gx3v7, have query NOT return user filenames
>>>>>>>>>>>>>>> for transient files when sim_year_range=constant.
>>>>>>>>>>>>>>> Add style sheets for namelist_defaults files.
  M    models/lnd/clm/bld/queryDefaultXML.pm -- Skip filenames set to "null"
  M    models/lnd/clm/bld/build-namelist ------ Remove forganic

  M    models/lnd/clm/bld/namelist_files/namelist_definition.xml ------------ Remove forganic, 
            add gx3v7
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml ------ Remove forganic, 
             add stylesheet.
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml --------- Add T31_gx3v7 
              domainfile, add stylesheet.
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml ---------- Add stylesheet.
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ---------- Make 
               gx3v7 default for T31, remove reference to forganic, add stylesheet.
  M    models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml ---- Set transient 
           files to null for sim_year_range=constant, add stylesheet.

>>>>>>>>>>>>>>> Add NBP, change which CN fields active/inactive, add new Urban/Rural
>>>>>>>>>>>>>>> fields, remove forganic read organic soil from fsurdat
  M    models/lnd/clm/src/biogeochem/CNSummaryMod.F90 --------- Add nbp, update doc for nee, nep, 
                work with formatting
  M    models/lnd/clm/src/biogeochem/C13SummaryMod.F90 -------- Add nbp, update doc for nee, nep, 
                work with formatting
  M    models/lnd/clm/src/biogeochem/CNSetValueMod.F90 -------- Set nbp and work with formatting
  M    models/lnd/clm/src/main/organicFileMod.F90 ------------- Remove forganic use fsurdat
  M    models/lnd/clm/src/main/clmtypeInitMod.F90 ------------- New urban/rural fields and nbp, 
                work with formatting
  M    models/lnd/clm/src/main/controlMod.F90 ----------------- Remove forganic
  M    models/lnd/clm/src/main/clm_varctl.F90 ----------------- Remove forganic
  M    models/lnd/clm/src/main/clmtype.F90 -------------------- Add urban/rural (oleson) and nbp, 
             and update doc on nep, nee
  M    models/lnd/clm/src/main/histFldsMod.F90 ---------------- Add urban/rural fields (oleson),
           Change which CN fields on/off, add NBP
  M    models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90 -- Add urban/rural (oleson)
  M    models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 --- Add urban/rural (oleson)
  M    models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 ---- Add urban/rural (oleson)
  M    models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90 ---- Add urban/rural (oleson)
  M    models/lnd/clm/src/biogeophys/UrbanInitMod.F90 --------- Add urban/rural (oleson)
  M    models/lnd/clm/src/biogeophys/UrbanMod.F90 ------------- Add urban/rural (oleson)

Summary of testing:

  bluefire: All PASS except...
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  bluefire interactive testing: All PASS up to...
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  bluefire/CCSM testing: All PASS except for branch tests that fail due to XLF12
PASS  ERS_D.f45_g35.I_2000.bluefire 
PASS  PET.f45_g35.I_1850.bluefire.cpl 
PASS  PET.f45_g35.I_1850.bluefire.atm 
PASS  PET.f45_g35.I_1850.bluefire.lnd 
PASS  PET.f45_g35.I_1850.bluefire.ice 
PASS  PET.f45_g35.I_1850.bluefire.ocn 
PASS  PET.f45_g35.I_1850.bluefire.glc 
PASS  ERS.f19_g16.I_1850.bluefire 
PASS  ERS.f19_g16.I_1850-2000.bluefire 
FAIL  ERB.f09_g16.I_1948_2004.bluefire    <<<< FAIL's due to compiler upgrade to XLF12
FAIL  ERB.f09_g16.I1850SPINUPCN.bluefire  <<<< FAIL's due to compiler upgrade to XLF12
>>>>>>>>>>>>> NOTE This same problem exists in clm3_6_51 if you update the compiler to
>>>>>>>>>>>>> XLF12.
PASS  ERH_D.f10_f10.I_1850_CN.bluefire 
PASS  PET.f10_f10.ICN8520.bluefire.cpl 
PASS  PET.f10_f10.ICN8520.bluefire.atm 
PASS  PET.f10_f10.ICN8520.bluefire.lnd 
PASS  PET.f10_f10.ICN8520.bluefire.ice 
PASS  PET.f10_f10.ICN8520.bluefire.ocn 
PASS  PET.f10_f10.ICN8520.bluefire.glc 
  jaguar: All PASS
  jaguar interactive testing: All PASS up to...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  dublin/lf95 interactive testing: All PASS up to...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
  dublin/lf95: All PASS except (up to...)
008 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
009 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
010 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
011 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
012 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
                                                           change path for cprnc on jaguar
M      models/lnd/clm/test/system/input_tests_master -------------- single-column tests are cold-starts
M      models/lnd/clm/test/system/tests_pretag_dublin_nompi ------- Add single-column tests
M      models/lnd/clm/test/system/tests_posttag_nompi_regression -- Add single-column tests
M      models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl ---------- Remove assumption about order of dimensions
M      models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl ------------ Remove assumption about order of dimensions
M      models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl -------- Remove assumption about order of dimensions
M      models/lnd/clm/bld/config_files/Makefile.in ---------------- For ifort only add -132 to FIXEDFLAGS
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml  Go back to old fndepdyn files from clm3_6_47
M      models/lnd/clm/src/main/clm_time_manager.F90 --------------- Label sub as "clm::" and change data to
                                                                    intent(inout) to comply with ESMF3
                                                                    (From Dani Bundy-Coleman)

Summary of testing:

  bluefire: All PASS except
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  bluefire interactive testing: All PASS except
021 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 arb_ic ........FAIL! rc= 5
022 brAK4 TBR.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 arb_ic ........FAIL! rc= 5
026 brAK8 TBR.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 arb_ic ....FAIL! rc= 6
027 blAK8 TBL.sh _sc_ds clm_std^nl_ptsmode_ocn 20030101:NONE:1800 1.9x2.5 gx1v6 -10 arb_ic ......FAIL! rc= 6
051 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  bluefire/CCSM testing: All PASS
PASS  ERS_D.f45_g35.I_2000.bluefire
PASS  PET.f45_g35.I_1850.bluefire.cpl
PASS  PET.f45_g35.I_1850.bluefire.atm
PASS  PET.f45_g35.I_1850.bluefire.lnd
PASS  PET.f45_g35.I_1850.bluefire.ice
PASS  PET.f45_g35.I_1850.bluefire.ocn
PASS  PET.f45_g35.I_1850.bluefire.glc
PASS  ERS.f19_g16.I_1850.bluefire
PASS  ERS.f19_g16.I_1850-2000.bluefire
PASS  ERB.f09_g16.I_1948_2004.bluefire
PASS  ERB.f09_g16.I1850SPINUPCN.bluefire
PASS  ERH_D.f10_f10.I_1850_CN.bluefire
PASS  PET.f10_f10.ICN8520.bluefire.cpl
PASS  PET.f10_f10.ICN8520.bluefire.atm
PASS  PET.f10_f10.ICN8520.bluefire.lnd
PASS  PET.f10_f10.ICN8520.bluefire.ice
PASS  PET.f10_f10.ICN8520.bluefire.ocn
PASS  PET.f10_f10.ICN8520.bluefire.glc
  jaguar interactive testing: All PASS up to...
006 erAK4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 1.9x2.5 gx1v6 -5+-5 cold ..........FAIL! rc= 7
  lightning/ifort interactive testing: All PASS
  dublin/lf95 interactive testing: All PASS up to...
006 erAL4 TER.sh _sc_ds clm_std^nl_ptsmode 20030101:NONE:1800 10x15 USGS -5+-5 cold .............FAIL! rc= 7
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_48

Changes answers relative to baseline: No (bit-for-bit)

===============================================================
===============================================================
Tag name:  clm3_6_48
Originator(s):  erik (erik)
Date: Wed Aug 12 19:22:59 MDT 2009
One-line Summary: New aerosol/nitrogen deposition datasets, mksurfdata work, scm work, clm_usr_name option to build-namelist

Purpose of changes:

Add in 0.47x0.63, 0.9x1.25 finidat file for CN and 1850, and 0.47x0.63 surface dataset.
Add in datasets at f09, f10, f05, f02 for aerosol (excepting f02 and f05) and nitrogen
deposition from J-F. Work with mksurfdata so that 0.23x0.31 dataset will work (Forrest).
Update csm_share, and get scam working. Add scam tests in. Add clm_usr_name option for
personal datasets to build-namelist. Add a noOrganicSoilDataset use-case so it won't add
in forganic file. Work on using ccsm build files for stand-alone testing. Get testing
going on dublin.

Bugs fixed (include bugzilla ID): 
                                  813 (use CCSM build files in testing -- partial)
                                 1010 (error in mksurfdata for qtr degree)
                                 1014 (shr_scam checkSurface can NOT run an I case)
                                 1023 (SCM mode check for lnd_present)

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1007 (interpinic error with Linux/lahey)
                                 1017 (SCM mode can NOT restart)
                                 1025 (SCM  mode can NOT use a global finidat file)
                                 1029 (ifort compilation error in pio)
                                 1031 (Can't run SMS_D.f09_g16.ICN8520)
                                 1032 (Problem running SCM mode on Lahey)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Get ccsm_bld option working

Describe any changes made to the namelist: Add -clm_usr_name option for user-datasets, 
       add noOrganicSoilDataset use case (leaves forganic file off)

   Add the clm_usr_name option to build-namelist, document how this is done in the 
   Quickstart.userdataset README file. In short...

   if -clm_usr_name is set to ${MYDATAID} then do the following...

       surfdata:    copy files into: 
             $MYCSMDATA/lnd/clm2/surfdata/surfdata_${MYDATAID}_simyr${SIM_YEAR}.nc
       fatmgrid:    copy files into:
             $MYCSMDATA/lnd/clm2/griddata/griddata_${MYDATAID}.nc
       fatmlndfrc:  copy files into:
             $MYCSMDATA/lnd/clm2/griddata/fracdata_${MYDATAID}_${MASK}.nc
       faerdep:     copy files into:
             $MYCSMDATA/lnd/clm2/snicardata/aerosoldep_monthly_${SIM_YEAR}_${MYDATAID}.nc

   Then set CLM_BLDNML_OPTS="-clm_usr_name $MYDATAID" in your env_conf.xml. You
   may have to set DIN_LOC_ROOT_CSMDATA in env_run.xml to $MYCSMDATA is this isn't
  the standard location as well (use scripts/link_dirtree $CSMDATA $MYCSMDATA to
  link standard datasets to your location.

List any changes to the defaults for the boundary datasets: New datasets
    New aerosol and nitrogen deposition datasets from Jean-Francois Lamarque
             New interpolated finidat:   for 0.9x1.25, and 0.47x0.63
             New fsurdat:                for 0.47x0.63
             New faerdep, 1849-2006:     for 0.9x1.25 strung together by David Bailey
             New faerdep, 1849-2006:     for 1.9x2.5, 10x15 (interpolated)
             New fndepdat, decadal avgs: for 1.9x2.5 (raw data from J-F)
             New fndepdyn, 1850-2006:    for 1.9x.25 strung together
             New fndepdyn, 1849-2006:    for 0.9x1.25, 0.47x0.63, 10x15 (interpolated)

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share, datm7

   scripts   to scripts4_090806
   csm_share to share3_090811
   datm7     to datm7_090812

List all files eliminated: None

List all files added and what they do:

  A  Quickstart.userdatasets ---------------------------- Documentation on using own datasets
  A  models/lnd/clm/test/system/nl_files/nl_ptsmode_ocn - Test SCM mode
  A  models/lnd/clm/test/system/nl_files/nl_ptsmode ----- Test SCM mode over ocean
  A  models/lnd/clm/bld/namelist_files/namelist_defaults_usr_files.xml --- Template for
                                                          user defined input datasets
  A  models/lnd/clm/bld/namelist_files/use_cases/noOrganicSoilDataset.xml- Use case to
                                                          turn off organic soil dataset

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>> Add scm tests, new variable to turn on use of CCSM build
>>>>>>>>>>>>>>>> Turn off -test in nl_files, already in mknamelist
>>>>>>>>>>>>>>>> Update dublin build/run to what used by cam.
  M  models/lnd/clm/test/system/TCB.sh --------------- Test for CLM_CCSMBLD
  M  models/lnd/clm/test/system/README.testnames ----- Add K and L single point mode cases
  M  models/lnd/clm/test/system/test_driver.sh ------- Update dublin, add INTEL for dublin
                                                       reconcile jaguar module with CCSM build
                                                       also set PNETCDF dirs.
  M  models/lnd/clm/test/system/nl_files/clm_per ----- Remove -test
  M  models/lnd/clm/test/system/nl_files/clm_std ----- Remove -test
  M  models/lnd/clm/test/system/nl_files/clm_ndepdyn - Remove -test
  M  models/lnd/clm/test/system/nl_files/clm_pftdyn -- Remove -test
  M  models/lnd/clm/test/system/nl_files/clm_per0 ---- Remove -test
  M  models/lnd/clm/test/system/nl_files/clm_urb1pt -- Remove -test
  M  models/lnd/clm/test/system/input_tests_master --- Add single point tests AK4/AK8,AL4
  M  models/lnd/clm/test/system/README --------------- Add note about CLM_CCSMBLD env var
  M  models/lnd/clm/test/system/CLM_runcmnd.sh ------- Update dublin
>>>>>>>>>>>>>>>> Changes from Forrest Hoffman so that 0.23x0.31 case will work
>>>>>>>>>>>>>>>> I had started this work, but didn't complete it. Forrest checked
>>>>>>>>>>>>>>>> the following changes in.
>>>>   1. Changed the FFLAGS for debug mode on AIX
>>>>   2. Added calls to areaave(), gridmap_clean(), and areaini() in mksoicol.F90 and mksoitex.F90
>>>>   3. Changed "stop" to "call abort()" in mksrfdat.F90
>>>>   4. Added roundoff error fixes for gridcells containing only special landunits not 
>>>>      totalling 100% twice in mksrfdat.F90
>>>>   5. Added error checking for after landunit adjustment to detect gridcells whose 
>>>>      components do not total 100% twice in mksrfdat.F90
  M  models/lnd/clm/tools/mksurfdata/mksoicol.F90 ---- Add regrid for mask
  M  models/lnd/clm/tools/mksurfdata/Makefile -------- On IBM optimized remove -C, non-opt remove -O0
  M  models/lnd/clm/tools/mksurfdata/mksoitex.F90 ---- Regrid mask
  M  models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ---- Roundoff error fix and test
>>>>>>>>>>>>>>>> Handle sim_year_range for datasets, loosen the tolerance for area sum
>>>>>>>>>>>>>>>> Allow time variable to be one ndep files.
  M  models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl - Handle sim_year_range
  M  models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --- Handle sim_year_range, loosen 
           tolerance, and allow time variable
>>>>>>>>>>>>>>>> Get ccsm_bld option working, change ifort a bit, add clm_usr_name
>>>>>>>>>>>>>>>> option and noOrganicSoilDataset use case to build-namelist
>>>>>>>>>>>>>>>> New datasets
   Fix hybrid bug for dynpft case, update externals. Require get_clump_bounds to be called
   in threaded regions and get_proc_bounds to be called in non-threaded regions. Remove uneeded get_proc_bounds
   calls, and pass down begg stuff as needed. Make loop in initSurfAlb Open-MP. Begin adding
   testing for dublin, and add lightning_pgi testing. Add new pftdyn test datasets for 1x1_tropicAtl.
   Update testing to beta20, default for lightning is ifort, add lighting_pgi testing. Change hist varnames
   of 3D_Time_constants_vars* to Time_constant_3Dvars*. Remove use of LSMLAT/LSMLON cpp tokens, by default
   set lsmlat/lsmlon to 1.

Bugs fixed (include bugzilla ID): 1011 (PGI build problem in driver)
                                  1016 (Problem with PTS_MODE build)
                                  1019 (hybrid/OpenMP reproducibility bug for pftdyn mode)

Known bugs (include bugzilla ID): 698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1007 (interpinic error with Linux/lahey)
                                 1010 (error in mksurfdata for qtr degree)
                                 1014 (shr_scam checkSurface can NOT run an I case)
                                 1023 (SCM mode check for lnd_present)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
                                 1102 (OpenMP problem with pftdyn mode)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: pftdyn test datasets for 1x1_tropicAtl

Describe any substantial timing or memory changes: None

Code reviewed by: self,mvertens

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm7, csm_share

scripts   to scripts4_090801 ---------------- Begin adding PTS_MODE settings, update clm testlists
drv       to vocemis-drydep12_drvseq3_0_27 -- Add PTS_MODE settings to template
datm7     to datm7_090729 ------------------- Add single_column support
csm_share to share3_090729 ------------------ Add dshr support for scmlat/scmlon in domain

List all files eliminated: None

List all files added and what they do:

  A   models/lnd/clm/test/system/tests_pretag_dublin ------- Add test list for dublin
  A   models/lnd/clm/test/system/tests_pretag_dublin_nompi - Add interactive test list for dublin

List all existing files that have been modified, and describe the changes:

  M  models/lnd/clm/test/system/test_driver.sh ------- Seq testing to beta20, begin adding dublin, default
                                                       for lightning is ifort, add lightning_pgi, 
  M   models/lnd/clm/test/system/input_tests_master -- Add openMP 4x5 test
  M   models/lnd/clm/test/system/CLM_runcmnd.sh ------ Add dublin remove bangkok

  M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Update pftdyn surfdata for 1000-1004
                                                                    tests for 1x1_tropicAtl

  M   models/lnd/clm/src/biogeochem/CNWoodProductsMod.F90 - Remove call to get_proc_bounds -- NOT needed
  M   models/lnd/clm/src/main/clm_varpar.F90 -------------- By default set lsmlat/lsmlon to 1
  M   models/lnd/clm/src/main/dynlandMod.F90 -------------- Remove get_proc_bounds pass begg stuff in
  M   models/lnd/clm/src/main/driver.F90 ------------------ Pass begg stuff down to pft_interp
  M   models/lnd/clm/src/main/initializeMod.F90 ----------- Pass begg stuff down to pft_interp
  M   models/lnd/clm/src/main/pftdynMod.F90 --------------- Pass begg stuff down, remove get_proc_bounds calls
  M   models/lnd/clm/src/main/histFileMod.F90 ------------- Change var names of 3D_Time_constants_vars* to
                                                            Time_constant_3Dvars* 
  M   models/lnd/clm/src/main/initSurfAlbMod.F90 ---------- Make loop OpenMP parallel
  M   models/lnd/clm/src/main/decompMod.F90 --------------- Make sure get_clumpbounds is called from threaded
                                                            regions and get_proc_bounds is NOT.

Summary of testing:

  bluefire: All PASS except
002 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 7
003 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 6
006 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v5 72+72 cold ...............FAIL! rc= 7
010 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 10+38 arb_ic .........FAIL! rc= 7
011 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v5 72+72 arb_ic ......FAIL! rc= 6
019 erEH1 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 7
020 brEH1 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 6
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
041 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 7
042 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 6
048 brJ61 TBR.sh 4p_casasc_dh clm_std^nl_urb_br 20021230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 6
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  bluefire interactive testing: All PASS!
  bluefire/CCSM testing: All PASS!
PASS  ERS_D.f45_g35.I_2000.bluefire 
PASS  PET.f45_g35.I_1850.bluefire.cpl 
PASS  PET.f45_g35.I_1850.bluefire.atm 
PASS  PET.f45_g35.I_1850.bluefire.lnd 
PASS  PET.f45_g35.I_1850.bluefire.ice 
PASS  PET.f45_g35.I_1850.bluefire.ocn 
PASS  PET.f45_g35.I_1850.bluefire.glc 
PASS  ERS.f19_g16.I_1850.bluefire 
PASS  ERS.f19_g16.I_1850-2000.bluefire 
PASS  ERB.f09_g16.I_1948_2004.bluefire 
PASS  ERB.f09_g16.I1850SPINUPCN.bluefire 
PASS  ERH_D.f10_f10.I_1850_CN.bluefire 
PASS  PET.f10_f10.ICN8520.bluefire.cpl 
PASS  PET.f10_f10.ICN8520.bluefire.atm 
PASS  PET.f10_f10.ICN8520.bluefire.lnd 
PASS  PET.f10_f10.ICN8520.bluefire.ice 
PASS  PET.f10_f10.ICN8520.bluefire.ocn 
PASS  PET.f10_f10.ICN8520.bluefire.glc 
  jaguar: All PASS!
  lightning/ifort interactive testing: All PASS!
  breeze,gale,hail,gust/ifort interactive testing: All PASS up to...
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_46

Changes answers relative to baseline: No bit-for-bit (except dynpft which was irreproducible before)

===============================================================
===============================================================
Tag name:  clm3_6_46
Originator(s):  erik (erik)
Date: Wed Jul 22 15:50:43 MDT 2009
One-line Summary: Get more tests to work/document them, add use cases for 1850_control, 
       2000_control, and 20thC_transient, straighten out single-point grids, Listen to 
       LND_CDF64 env variable from template, remove CLM_ARB_IC.

Purpose of changes:

Work with build-namelist to make 20th-Century a use-case so that ndepdyn files will be
included if found, but can still work without them (20thC_transient, 2000_control, and
1850_control use cases). Fix more bugs and tests, report on testing status for each
machine. Add files needed for 1.9x2.5_tx1v1 grid and new 10x15 surface dataset. Reconcile
grids for single-point datasets so consistent (lon within 0-360 rather than -180-180).
Get new single-point datasets for aerosol and nitrogen-deposition. Work with
pftdyntest2raw.ncl so will work. Work with mksurfdata.pl script so will append needed
grid data on urban point datasets. Add in CLM1PT mode for datm7 and use datm7 streams
template for testing. Listen to LND_CDF64 env variable from template, remove CLM_ARB_IC.

Bugs fixed (include bugzilla ID): 1002 (remove CLM_ARB_IC)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  896 (T62 mode does not work)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1007 (interpinic error with Linux/lahey)
                                 1019 (hybrid/OpenMP reproducibility bug for pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: 

     Add CLM1PT option to DATM_MODE in env_conf.xml

Describe any changes made to the namelist: 

     New use-cases for:
                2000_control
                1850_control
                20thC_transient

List any changes to the defaults for the boundary datasets: 
    1.9x2.5_tx1v1 datasets, new single-point/regional datasets, new 10x15 surface dataset

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm7, pio

scripts to scripts4_090720
datm7   to datm7_090721
pio     to pio51_prod

List all files eliminated:

D   models/lnd/clm/bld/namelist_files/streams.txt.readme ------- Use datm7 version
D   models/lnd/clm/bld/namelist_files/datm.streams.template.xml- Use datm7 version
D   models/lnd/clm/test/system/nl_files/clm_organic ------------ organic files included anyway

List all files added and what they do:

>>>>>>>>>>>> Add new use cases
A   models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml ---- 2000 control
A   models/lnd/clm/bld/namelist_files/use_cases/20thC_transient.xml - 20th Century transient
A   models/lnd/clm/bld/namelist_files/use_cases/1850_control.xml ---- 1850 control
A   models/lnd/clm/bld/namelist_files/use_cases/2000_control.xml ---- 2000 control

>>>>>>>>>>>> Add regression tests list for without MPI
A   models/lnd/clm/test/system/tests_posttag_nompi_regression ------- no mpi tests

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>>>> Get more tests working, or at least closer to working
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>> models/lnd/clm/test/system	      directory changes
M   TCB.sh -------------------------------- Put -mach arg here
M   tests_pretag_bluefire ----------------- Change some hybrid tests to MPI
M   config_files/ext_ccsm_seq_10x15_dh ---- Set cice decomp / remove silent mode
M   config_files/ext_ccsm_seq_4x5_dh ------ Set cice decomp / remove silent mode
M   config_files/ext_ccsm_seq_1.9x2.5_dh -- Set cice decomp / remove silent mode
M   config_files/ext_ccsm_seq_64x128_s ---- Set cice decomp / remove silent mode
M   config_files/ext_ccsm_seq_0.9x1.25_dh - Set cice decomp / remove silent mode
M   test_driver.sh ------------------------ Set threads/tasks, move -mach to TCB, 
                        set DIN_LOC_ROOT, change needed for latest jaguar build
M   tests_posttag_hybrid_regression ------- Remove bad tests, move pure-mpi, serial/open-mp out
M   tests_posttag_purempi_regression ------ Remove bad tests, move pure-mpi, serial/open-mp out
M   nl_files/nl_urb ----------------------- Remove urban fields already included
M   nl_files/nl_urb_br -------------------- Remove urban fields already included
M   input_tests_master -------------------- Changes so tests will work
M   TCBext_ccsmseq_cam.sh ----------------- Add main/cpl_mct to clm list of dirs

>>>>>>>>>>>>>>>>>> Update filenames, append grid/frac files to urban single-pt in script
M   models/lnd/clm/tools/mksurfdata/mksurfdata.regional ---- New griddata, fix filepath
M   models/lnd/clm/tools/mksurfdata/mksurfdata.singlept ---- New griddata, fix filepath
M   models/lnd/clm/tools/mksurfdata/mksurfdata.pl ---------- Fix, append grid/frac data
                                                         to urban single-point datasets

>>>>>>>>>>>>>>>>>> Get the pftdyntest2raw script working (will update datasets later)
M   models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl - Fix so will work, add grazing on
M   models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl ----- Add sim_yr to out filenames

>>>>>>>>>>>>>>>>>> Validate grid
M   models/lnd/clm/tools/mkgriddata/creategridMod.F90 - Check for valid grid values

M   models/lnd/clm/srm/main/pftdynMod.F90 - Shorten some long lines

>>>>>>>>>>>>>>>>>> Change to build: add use-cases, remove CLM_ARB_IC, listen to LND_CDF64
>>>>>>>>>>>>>>>>>> Add new 1.9x2.5_tx1v1 frac dataset, new datasets for single-point,
>>>>>>>>>>>>>>>>>> new 10x15 datasets, separate out sim_yr and sim_year_range
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>> models/lnd/clm/bld		  directory changes
M   listDefaultNamelist.pl ----------------------- Add csmdata arg
M   build-namelist ------------------------------- Add -list_use_cases option
                   load uses cases before other defaults, add $ccsm_tools var,
                   separate sim_yr and sim_year_range, put case_desc for use-cases
M   clm.cpl7.template ---------------------------- Remove CLM_ARB_IC, use LND_CDF64
M   namelist_files/checkdatmfiles.ncl ------------ Add tx1v1 mask
M   namelist_files/namelist_definition.xml ------- Add tx1v1 mask, make sim_year integer
                    add sim_year_range, use_case_desc, and clm_demand
M   namelist_files/namelist_defaults_overall.xml - default sim_year_range is constant
                    and default clm_demand is null
M   namelist_files/namelist_defaults_datm.xml ---- Use datm7 streams template, 
                    and update domain files
M   namelist_files/use_cases/pergro.xml ---------- Add use_case_desc
M   namelist_files/use_cases/pergro0.xml --------- Add use_case_desc
M   namelist_files/namelist_defaults_clm.xml ----- Move co2_ppmv defaults to use_cases
        new surf/frac/aer/ndep/grid data: 5x5_amazon, 1x1_brazil, 1x1_urbanc_alpha, 
                                          1x1_mexicocityMEX, 1x1_vancouverCAN
       new frac data:        1.9x2.5_tx1v1
       new aerdep/ndep data: 1x1_camdenNJ, 1x1_tropicAtl, 1x1_asphaltjungleNJ
       new surfdata/pftdyn:  10x15
       (new finidat file for f09 CN, 1850 -- commented out -- so answers same as last tag)

Summary of testing:

  bluefire: All PASS except
019 erEH1 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 7
020 brEH1 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 6
022 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
023 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
024 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
025 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
026 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
027 smC45 TSM.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 8
028 erC45 TER.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -3+-7 arb_ic .......FAIL! rc= 5
029 brC45 TBR.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -5+-5 arb_ic .......FAIL! rc= 5
030 blC45 TBL.sh 17p_sc_m clm_pftdyn 18501230:NONE:3600 10x15 USGS@1850-2000 -10 arb_ic .........FAIL! rc= 4
033 brC61 TBR.sh _sc_dh clm_std^nl_urb_br 20021001:NONE:1800 1.9x2.5 gx1v6 -3+-3 cold ...........FAIL! rc= 6
041 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 7
042 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 6
051 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 4
052 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
054 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  bluefire interactive testing: All PASS except
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............FAIL! rc= 7
009 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 7
013 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 7
017 blJ74 TBL.sh 4p_casasc_ds clm_std^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic ..FAIL! rc= 7
019 blCA8 TBL.sh _sc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 7
021 blL78 TBL.sh _sc_s clm_std^nl_urb 20021231:NONE:1800 1x1_brazil navy -10 arb_ic .............FAIL! rc= 7
027 erL83 TER.sh _sc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -5+-5 arb_ic ..........FAIL! rc= 7
028 brL83 TBR.sh _sc_do clm_std^nl_urb_br 20020115:NONE:3600 5x5_amazon navy -10+-10 arb_ic .....FAIL! rc= 6
029 blL83 TBL.sh _sc_do clm_std^nl_urb 20020115:NONE:3600 5x5_amazon navy -10 arb_ic ............FAIL! rc= 5
034 bl744 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 4
036 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 4
043 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  bluefire/CCSM testing: All PASS
PASS  ERS_D.f45_g35.I_2000.bluefire
PASS  PET.f45_g35.I_1850.bluefire.cpl
PASS  PET.f45_g35.I_1850.bluefire.atm
PASS  PET.f45_g35.I_1850.bluefire.lnd
PASS  PET.f45_g35.I_1850.bluefire.ice
PASS  PET.f45_g35.I_1850.bluefire.ocn
PASS  PET.f45_g35.I_1850.bluefire.glc
PASS  ERS.f19_g16.I_1850.bluefire
PASS  ERS.f19_g16.I_1850-2000.bluefire
PASS  ERB.f09_g16.I_1948_2004.bluefire
PASS  ERB.f09_g16.I1850SPINUPCN.bluefire
PASS  ERH_D.f10_f10.I_1850_CN.bluefire
  lightning/ifort: All PASS except -- up to test 18
002 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 7
003 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 6
005 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
006 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
007 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
008 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
009 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
011 erJ42 TER.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 10+38 cold ...........FAIL! rc= 7
012 brJ42 TBR.sh 4p_casasc_dm clm_std^nl_urb_br 20021230:NONE:1800 10x15 USGS 72+72 cold ........FAIL! rc= 6
015 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 7
016 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 6
  lightning/ifort interactive testing: up to test 004
004 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 7
  calgary/lf95: All PASS except...
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............FAIL! rc= 7
015 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 7
019 blOC4 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 7
023 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 7
024 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
025 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
026 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
027 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
028 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
049 blL74 TBL.sh _sc_s clm_std^nl_urb 20020101:NONE:1800 1x1_brazil navy -10 arb_ic .............FAIL! rc= 7
052 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
053 smM94 TSMncl_tools.sh ndepregrid ............................................................FAIL! rc= 6
055 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 8
056 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze,gale,hail,gust/ifort: All PASS except...
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............FAIL! rc= 7
009 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 7
011 blCA8 TBL.sh _sc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 7
019 blR53 TBL.sh 17p_cnc13sc_do clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@1850 48 cold .......FAIL! rc= 7
020 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
021 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
022 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
023 blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_6_45

Changes answers relative to baseline: Bit-for-bit EXCEPT for (as datasets change)
       5x5_amazon, 1x1_brazil, 1x1_urbanc_alpha, 1x1_mexicocityMEX, 1x1_vancouverCAN
       1x1_camdenNJ, 1x1_tropicAtl, 1x1_asphaltjungleNJ, 10x15

===============================================================
===============================================================
Tag name:  clm3_6_45
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Fri Jul 10 14:00:27 MDT 2009
One-line Summary: Remove inconsistent finidat file in clm3_6_44

Purpose of changes: A few simple bug fixes from clm3_6_44, with minimul testing
       
       Remove finidat inconsistent with the surface datasets for f19_g16, bgc=cn, sim_yr=1850
       Fix typo in test list, and fix thread settings for bluefire tests
       Remove -ftz from CFLAGS for ifort for mkdatadomain
       Change csh run scripts so: use CCSM env_machopts settings, set defaults, fix so can run serial
       Update datm7 so that CPLHIST3HrWxHfHrSol mode has iradsw=-1 so mimics running with CAM

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1019 (hybrid/OpenMP reproducibility bug for pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)

    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Remove inconsistent
    finidat file for 0.9x1.25, gx1v6, BGC=cn, sim_yr=1850

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): datm7

  datm7 to datm7_090709

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/test/system/test_driver.sh ------------------- Fix threads settings for bluefire
M      models/lnd/clm/test/system/input_tests_master --------------- Fix typo
M      models/lnd/clm/tools/interpinic/runinit_ibm.csh ------------- Use CCSM env_machopts settings
M      models/lnd/clm/tools/mkdatadomain/Makefile ------------------ Remove -ftz from CFLAGS for ifort
M      models/lnd/clm/bld/run-ibm.csh ------------------------------ Use CCSM env_machopts settings, set defaults, 
                                                                     fix so can run serial
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Remove 0.9x1.25, BGC=cn, sim_year=1850, mask=gx1v6 
                                                                     finidat file as was inconsistent with new surface dataset

Summary of testing: Limited

CLM tag used for the baseline comparison tests if applicable: clm3_6_44

Changes answers relative to baseline: bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_44
Originator(s):  erik (erik)
Date: Thu Jul  9 11:47:40 MDT 2009
One-line Summary: Fix C13 bug, update scripts, drv, datm. Add domain files for idmap
atm-ocn grids for datm. Remove SEQ_MCT, add new ESMF env vars to template. Work with
ndeplintInterp, fix SCAM

Purpose of changes:

Fix C13 nflds bug, update scripts, drv, datm. Add domain files for idmap atm-ocn grids
for datm. Remove SEQ_MCT, add new ESMF env vars to template. Work with ndeplintInterp to
enable using J-F's new Nitrogen deposition files for transient 20th Century simulations.
SCAM fixes from John Truesdale. Add indices for PFT types.

Bugs fixed (include bugzilla ID): 981 (ccsm domain files for atm=ocn grid)
                                  987 (remove SEQ_MCT)
                                  991 (C13 nfields cause model to blowup on jaguar)
                                  997 (interpolated finidat files cause fully coupled cases to fail)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  990 (CN transient blowup)
                                  994 (finidat files on jaguar for pftdyn fail)
                                 1019 (hybrid/OpenMP reproducibility bug for pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)

    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Remove SEQ_MCT

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: 
   New surface datasets for 0.9x1.25 and 1.9x2.5, and new finidat for 1850 for 0.9x1.25
   10x15 2000 10x15 dataset set to the 1850 version so that testing will work.

Describe any substantial timing or memory changes: None

Code reviewed by: self, oleson (pftvarcon changes)
     SCAM changes from John Truesdale

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm7,
     csm_share and pio

 scripts   to scripts4_090707b
 drv       to vocemis-drydep11_drvseq3_0_23
 datm7     to datm7_090708
 csm_share to share3_090706b
 pio       to pio50_prod

List all files eliminated:

 D  models/lnd/clm/test/system/tests_pretag_bangkok -- Rename to calgary

List all files added and what they do:

 A  models/lnd/clm/test/system/tests_pretag_calgary ----------- Rename from bangkok
 A  models/lnd/clm/test/system/tests_pretag_bluefire_nompi ---- serial/open-MP tests
 A  models/lnd/clm/test/system/tests_pretag_jaguar_nompi ------ serial/open-MP tests
 A  models/lnd/clm/test/system/tests_posttag_lightning_nompi -- serial/open-MP tests

List all existing files that have been modified, and describe the changes:

 M  Quickstart.GUIDE --- fix minor error in name of directory as scripts changed.

  >>>>>>>>>>>> Separate out non-mpi tests for bluefire, jaguar, and lightning
               Test list is different if run interactive or submitted to batch que.
               Serial, open-mp only tests are run interactive, MPI and hybrid tests
               are run when submitted to the batch que. This prevents waste of resources
               for serial and open-mp only tests.
               Remove bangkok, replace with calgary only. Default threads depends
               on if interative or not.
 M  models/lnd/clm/test/system/test_driver.sh -----------
 M  models/lnd/clm/test/system/tests_pretag_bluefire ----
 M  models/lnd/clm/test/system/tests_pretag_jaguar ------
 M  models/lnd/clm/test/system/tests_posttag_lightning --
 M  models/lnd/clm/test/system/README ------------------- Add note about CLM_SOFF

  >>>>>>>>>>>> 
 M  models/lnd/clm/tools/mksurfdata/Makefile ------------------- For ifort remove -ftz option to CFLAGS
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig ----- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.regional -------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn ---------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.singlept -------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.namelist -------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850-2005.txt -- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr2000.txt ------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850.txt ------- New input PFT datasets from Peter L.
 M  models/lnd/clm/tools/mksurfdata/mksurfdata.pl -------------- New input PFT datasets from Peter L.

  >>>>>>>>>>>> Work on linear interpolation of Nitrogen deposition so that add in mid-decades
 M  models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl ------- Check if interpolation should be cyclic
 M  models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl ----- Also loop over mid decades as well
 M  models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl --------- Check if interpolation should be cyclic

  >>>>>>>>>>>> Fix from Sam so that don't have negative ice flow
 M  models/lnd/clm/tools/interpinic/interpinic.F90 --- Change from Sam so that fully coupled cases don't trap negative ice flow
 M  models/lnd/clm/tools/interpinic/Srcfiles --------- Don't repeat filenames so can build with lahey

  >>>>>>>>>>>> Change so that document that files should have longs between 0 and 360 rather than -180 to 180
 M  models/lnd/clm/tools/mkgriddata/mkgriddata.regional --- Use longs 0-360
 M  models/lnd/clm/tools/mkgriddata/mkgriddata.singlept --- Use longs 0-360
 M  models/lnd/clm/tools/mkgriddata/Makefile -------------- For ifort remove -ftz option to CFLAGS
 M  models/lnd/clm/tools/mkgriddata/README ---------------- Make note that regional/single-pt grid files should have longs: 0 <= longs <= 360

  >>>>>>>>>>>> Remove SEQ_MCT and handle COMP_INTERFACE from ccsm cpl7 scripts, new surface datasets
 M  models/lnd/clm/bld/configure ----------- Remove SEQ_MCT, handle cpl_esmf
 M  models/lnd/clm/bld/clm.cpl7.template --- Handle $COMP_INTERFACE 
 M  models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Allow mid-decadal
                                                 sim_years so can process ndepdyn files
 M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- New 0.9 finidat,
        0.9x1.25, and 1.9x2.5 surfdata, fndepdat files for mid-decadal sim_years.

  >>>>>>>>>>>> Add indices for PFTs. Fixes for SCAM. Break up long lines > 132chars
 M  models/lnd/clm/src/biogeochem/CASAMod.F90 -------------- noveg, nc3_nonarctic_grass
 M  models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90 --- noveg, ncorn, nbrdlf_dcd_brl_shrub
 M  models/lnd/clm/src/biogeochem/VOCEmissionMod.F90 ------- Add PFT indices
 M  models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 - Add PFT indices
 M  models/lnd/clm/src/main/organicFileMod.F90 ------------- SCAM fix (from jet)
 M  models/lnd/clm/src/main/ncdio.F90 ---------------------- Break up long lines
 M  models/lnd/clm/src/main/pftdynMod.F90 ------------------ Break up long lines, add 
                                                             noveg, nbrdlf_evr_shrub
 M  models/lnd/clm/src/main/clm_atmlnd.F90 ----------------- C13 bug fix for number of fields
                                                             (found by Jon Wolfe)
 M  models/lnd/clm/src/main/pftvarcon.F90 ------------------ Add PFT indices, make sure
                                                             pftnames from pftcon file is
                                                             as expected.
 M  models/lnd/clm/src/biogeophys/UrbanInputMod.F90 -------- SCAM fix (from jet)

Summary of testing:

  bluefire: All FAIL except...
008 smB91 TSMruncase.sh .........................................................................PASS
053 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................PASS
  bluefire/CCSM testing: All PASS
PASS  ERS_D.f45_g35.I_2000.bluefire
PASS  PET.f45_g35.I_1850.bluefire.cpl
PASS  PET.f45_g35.I_1850.bluefire.atm
PASS  PET.f45_g35.I_1850.bluefire.lnd
PASS  PET.f45_g35.I_1850.bluefire.ice
PASS  PET.f45_g35.I_1850.bluefire.ocn
PASS  PET.f45_g35.I_1850.bluefire.glc
PASS  ERS.f19_g16.I_1850.bluefire
PASS  ERS.f19_g16.I_1850-2000.bluefire
PASS  ERB.f09_g16.I_1948_2004.bluefire
PASS  ERB.f09_g16.I1850SPINUPCN.bluefire.001802
PASS  ERH_D.f10_f10.I_1850_CN.bluefire

CLM tag used for the baseline comparison tests if applicable: clm3_6_43

Changes answers relative to baseline: No -- bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_43
Originator(s):  erik (erik)
Date: Wed Jun 10 11:41:57 MDT 2009
One-line Summary: Fix pftdyn bug, enable 1D primary hist files, fix time-const3D output, fix template bug, enable cpl_esmf/cpl_mct

Purpose of changes:

Add src/main/cpl_esmf,src/main/cpl_mct directories, change configure to build either way,
add -comp_intf option. Remove SEQ_ #ifdef's, simplify some of the logic associated with
the old options (cpl6 and program_off). Brian K -- fix nans, enable  openMP again. Allow
first history tape to be 1D (Sean Swenson). Fix template co2_ppmv error.  Remove SPMD 
#ifdef from RTM. Fix driver pftdyn bug. Fix bug on writing out 3D time-constant fields.

Bugs fixed (include bugzilla ID):
                                  929 (bug in co2ppmv value in template)
                                  969 (allow primary tapes to be 1D)
                                  974 (bug in pftdyn mode)
                                  977 (bug writing out 3D time-const data)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  991 (C13 nfields cause model to blowup on jaguar)
                                 1019 (hybrid/OpenMP reproducibility bug for pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)

    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Add choice between ESMF/MCT compilation
     NOTE: ESMF option does NOT work as files do NOT exist yet!
     Add -comp_intf option to configure

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, swensosc (1D and history changes), 
                  kauff (reenable OpenMP, some vars spval instead of nan)

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, pio

    scripts to scripts4_090605b
    drv     to vocemis-drydep08_drvseq3_0_18
    pio     back to pio45_prod (to eliminate compilation problem with pathscale)

List all files eliminated:

D   models/lnd/clm/src/main/lnd_comp_mct.F90 --- Move to cpl_mct

List all files added and what they do:

A   models/lnd/clm/src/main/cpl_mct ---- Directory for MCT interface
A   models/lnd/clm/src/main/cpl_esmf --- Directory for ESMF interface
A   models/lnd/clm/src/main/cpl_mct/lnd_comp_mct.F90 - Moved from main directory

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Add -comp_intf option, fix template bug, closing input namelist
M   models/lnd/clm/bld/configure ----------- Add -comp_intf option
M   models/lnd/clm/bld/config_files/config_definition.xml -- Add comp_interface
M   models/lnd/clm/bld/clm.cpl7.template --- Close input namelist with ending "/"

>>>>>>>>>>>>>> Remove SEQ_ CPP #if's, require some arguments 
               (needed to be optional for cpl6/offline), allow primary hist files 1D
               Fix so that 3D time-constant data does get written out.
M   models/lnd/clm/src/main/clm_comp.F90 --------- Make rstwr, nlend, rdate required
M   models/lnd/clm/src/main/driver.F90 ----------- Remove doalb if's, PFTDYNWBAL CPP
                                                   (for pftdyn bug). Require rstwr,
                                                   nlend, and rdate
M   models/lnd/clm/src/main/clmtypeInitMod.F90 --- Some vars init to spval (kauff)
                      certain cell & pft level variables are initialized to spval
                      instead of nan so eliminate the appearance of nans on restart files.
                      (not all cell & pfts were used and given non-nan values)
M   models/lnd/clm/src/main/histFileMod.F90 ------ Write out 3D time-constant vars,
                                                   fix so can write primary 1D files
                                                   (Sean Swenson)
M   models/lnd/clm/src/main/restFileMod.F90 ------ nlend required
M   models/lnd/clm/src/main/controlMod.F90 ------- Remove SEQ_ CPP #if's, allow 1D primary
                                                   ability to run threaded is re-enabled (kauff)
M   models/lnd/clm/src/main/do_close_dispose.F90 - Require rstwr, nlend
M   models/lnd/clm/src/riverroute/RtmMod.F90 ----- Remove SPMD #ifdef

>>>>>>>>>>>>>> Move testing to calgary from bangkok
M   models/lnd/clm/test/system/test_driver.sh ---- Add LD_LIBRARY_PATH for calgary/lf95

Summary of testing:

  bluefire: All PASS except (up to test 35)
007 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 7
008 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 6
009 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 5
012 blD91 TBL.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 5
013 smH74 TSM.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test@1000-1004 -1100 cold FAIL! rc= 8
014 blH74 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test@1000-1004 -100 cold FAIL! rc= 4
019 blE91 TBL.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 5
028 blF93 TBL.sh 17p_vodsrsc_do clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 5
034 erEH1 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 7

  bluefire/CCSM testing:
PASS  ERS.f45_g35.I_2000.bluefire
PASS  ERS.f19_g16.I_1850.bluefire
PASS  ERS.f19_g16.I_1850-2000.bluefire
PASS  ERB.f09_g16.I_1948_2004.bluefire
SFAIL ERH.f10_f10.I_1850_CN.bluefire.235943 <<< f10_f10 doesn't work for datm7 right now

TBL hybrid/openMP tests fail since previous version had OpenMP disabled.

  breeze/gale/hail/gust/ifort: All PASS up to test 12 (10x15, smL51 test)

CLM tag used for the baseline comparison tests if applicable: clm3_6_43

Changes answers relative to baseline: Only pftdyn mode

===============================================================
===============================================================
Tag name:  clm3_6_42
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Tue Jun  2 11:58:25 MDT 2009
One-line Summary: Bring CN Harvest branch (cnhrv02_clm3_6_41) to trunk

Purpose of changes:

     Add in Peter Thornton's code to read in harvesting variables on surface datasets 
     and apply harvesting to carbon and nitrogen pools.
     Add in surface datasets from clm3_6_40 that have harvesting fields on them for
       0.9x1.25, 1.9x2.5, and 10x15 (as well as aerdep, ndepdat, and ndepdyn datasets).
     Remove urban test list as urban on by default, and remove top level doc directory.
     Add C13 CPP token for C13 extension of CN add -c13 option to configure.
     Add C13/10x15@1850-2000 testing.
     Let sum of percent types match to 100 within small value rather than an exact match.
     Increase wasteheat limit from 40 to 100 W/m2.
     Change default masks to USGS for 4x5,T31,T42, and T85 resolutions so same as cice
     Update drv to latest version (drvseq3_0_17 -- on voc branch).
     Update ccsm comparision version used in test suite.

Bugs fixed (include bugzilla ID): 
                                  977 (bug writing out 3D time-const data)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  971 (abort on lahey with MPI)
                                  972 (abort on intel with MPI)
                                  974 (bug in pftdyn mode)
                                  977 (bug writing out 3D time-const data)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)

    http://bugs.cgd.ucar.edu/

Describe any changes made to build system:
     Add C13 #ifdef for CN
     Add -c13 option to configure

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    Make USGS mask default for 4x5,T31,T42, and T85
         surface  datasets with harvesting for: 0.9x1.25, 1.9x2.5, 10x15 (1850,2000)
         pftdyn   datasets with harvesting for: 0.9x1.25, 10x15 (1850-2005)
         faerdep  datasets for: 0.9x1.25, 10x15 (1850, 2000, 1850-2000)
         fndepdat datasets for: 0.9x1.25, 10x15 (1850,2000)
         fndepdyn datasets for: 0.9x1.25, 1.9x2.5, 10x15 (1850-2000)

Describe any substantial timing or memory changes: Minor for CN

Code reviewed by: thornton, erik

List any svn externals directories updated (csm_share, mct, etc.):
	Remove top level doc directory as out of date and won't be updated. Howto is in
        the scripts directory

List all files eliminated:

D      models/lnd/clm/test/system/tests_posttag_urban - Urban on by default so doesn't 
                                                        need it's own tests
>>>>>>>>>>>>>>>>>> Remove as can NOT easily recreate source from them and code
                   has changed since the creation of the scripts. Would take work
                   to get the two in sync and be able to use these scripts as source.
D      models/lnd/clm/src/main/gen_ncdio_global_subs.csh
D      models/lnd/clm/src/main/gen_ncdio_local_subs.csh
D      models/lnd/clm/src/main/gen_spmdgs_subs.csh

List all files added and what they do:

>>>>>>>>>>>>>>>>>> Add new configurations to test C13 config
A  +   models/lnd/clm/test/system/config_files/17p_cnc13sc_dh
A  +   models/lnd/clm/test/system/config_files/17p_cnc13sc_dm
A  +   models/lnd/clm/test/system/config_files/17p_cnc13sc_do
>>>>>>>>>>>>>>>>>> New module to handle wood harvesting
A  +   models/lnd/clm/src/biogeochem/CNWoodProductsMod.F90 Calculate loss fluxes from wood
                                                           products pools, and update 
                                                           product pool state variables

List all existing files that have been modified, and describe the changes:

M      Quickstart.GUIDE --- Update documentation
M      README ------------- Update documentation
>>>>>>>>>>>>>>>>>> Add C13 and 10x15@1850-2000 tests
M   models/lnd/clm/test/system/tests_pretag_bluefire --- Add 10x15@1850-2000 tests
M   models/lnd/clm/test/system/config_files/README ----- Add note on new C13 config
M   models/lnd/clm/test/system/tests_posttag_breeze ---- Add openmp C13 test
M   models/lnd/clm/test/system/README.testnames -------- Add R configuration for C13 config
M   models/lnd/clm/test/system/tests_posttag_hybrid_regression -- Add C45 and R51 tests
M   models/lnd/clm/test/system/tests_posttag_purempi_regression - Add C45 and R52 tests
M   models/lnd/clm/test/system/input_tests_master ------ Add C45 (10x15@1850-2000, pure-mpi) and 
                                                         R51-R53 (C13) tests
M   models/lnd/clm/test/system/test_driver.sh ---------- Update ccsm4 comparision version
                                                         to beta17
>>>>>>>>>>>>>>>>>> Add C13 configuration option, and new datasets
M   models/lnd/clm/bld/configure -------------------------------- Add -c13 option
M   models/lnd/clm/bld/config_files/config_definition.xml ------- Add c13 entry
M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - 
       Change default masks for 4x5,T31,T42,T85 to USGS so agree with cice defaults
               surface  datasets with harvesting for: 0.9x1.25, 1.9x2.5, 10x15 (1850,2000)
               pftdyn   datasets with harvesting for: 0.9x1.25, 10x15 (1850-2005)
               faerdep  datasets for: 0.9x1.25, 10x15 (1850, 2000, 1850-2000)
               fndepdat datasets for: 0.9x1.25, 10x15 (1850,2000)
               fndepdyn datasets for: 0.9x1.25, 1.9x2.5, 10x15 (1850-2000)
>>>>>>>>>>>>>>>>>> C13/DGVM #ifdefs, add harvest vars and calculations
M models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90 ---- Add CStateUpdate2h method for 
                                                            harvest mortality fluxes
M models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90 -- Add C13 cpp and add C13StateUpdate2h
                                                            method for harvesting
M models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 ---- Remove 10n and 100n variables
M models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90 ----- Add in harvesting terms
M models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90 - Add C13 #ifdef's
M models/lnd/clm/src/biogeochem/CNSummaryMod.F90 ---------- Add harvesting fields
M models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 ---- Remove 10c, 100c variables, 
                                                            formatting changes
M models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90 -- Add C13 #ifdef, remove 10c, 100c vars
M models/lnd/clm/src/biogeochem/CNrestMod.F90 ------------- Add C13 #ifdef
M models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90 -- Add C13 #ifdef
M models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90 ---- Add NStateUpdate2h Nitrogen 
                                                            harvesting method
M models/lnd/clm/src/biogeochem/C13SummaryMod.F90 --------- Add C13 #ifdef
M models/lnd/clm/src/biogeochem/CNAllocationMod.F90 ------- Add C13 #ifdef and harvesting variables
M models/lnd/clm/src/biogeochem/CNC13FluxMod.F90 ---------- Add C13 #ifdef and C13Flux2h harvest 
                                                            method, and CNC13HarvestPftToColumn 
                                                            private method
M models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90 ----- Add harvesting method calls
                                                            filters by lbc,ubc
                                                            Add C13 #ifdef, add CNHarvest call if 
                                                            fpftdyn file is set.
M models/lnd/clm/src/biogeochem/CNSetValueMod.F90 --------- Add C13 #ifdef, remove 10c, 100c loss 
                                                            vars, add harvest vars
M models/lnd/clm/src/main/clm_varcon.F90 ------------------ Add C13 #ifdef 
                                                      Increase wasteheat limit to 100 W/m2
M models/lnd/clm/src/main/CNiniTimeVar.F90 ---------------- Add C13 #ifdef
                                                            begc, endc to methods
M models/lnd/clm/src/main/accFldsMod.F90 ------------------ Put frmf and other vars (t10, t_mo, 
                                                            ... agdd) in DGVM #ifdef
M models/lnd/clm/src/main/clmtypeInitMod.F90 -------------- Add C13 and DGVM #ifdef and new 
                                                            harvesting vars
M models/lnd/clm/src/main/pftdynMod.F90 ------------------- Add CNHarvest and CNHarvestPftToColumn 
                                                            as public methods, 
                                                            add pftdyn_getharvest private methods, 
                                                            check that land fractions sum to 100 
                                                            within 1e-15 rather than exactly 100, 
                                                            change pftdyn_get_data to pftdyn_getdata
                                                            Add C13 #ifdef, remove 10c, 100c loss 
                                                            calculation
M models/lnd/clm/src/main/iniTimeConst.F90 ---------------- Add DGVM #ifdef
M models/lnd/clm/src/main/clm_atmlnd.F90 ------------------ Add C13 #ifdef
M models/lnd/clm/src/main/lnd_comp_mct.F90 ---------------- Add C13 #ifdef
M models/lnd/clm/src/main/CNiniSpecial.F90 ---------------- Add C13 #ifdef
M models/lnd/clm/src/main/clmtype.F90 --------------------- Add DGVM, C13 #ifdef,
                                                            harvest vars
M models/lnd/clm/src/main/histFldsMod.F90 ----------------- Add C13 #ifdef, correct SEEDN,
          Add: WOOD_HARVESTC, PRODUCT_CLOSS, C13_PRODUCT_CLOSS, WOOD_HARVESTN, PRODUCT_NLOSS
          Change long_name: DWT_PROD10C_GAIN, DWT_PROD100C_GAIN, DWT_CLOSS, DWT_NLOSS
M models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 --- Add C13 #ifdef
M models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90 ------- Add C13 #ifdef

Summary of testing:

  bluefire: hybrid and open-mp tests FAIL, pftdyn 1000 tests fail, most TBL tests FAIL as answers change
001 smA74 TSM.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............PASS
002 erA74 TER.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -5+-5 arb_ic ..........PASS
003 brA74 TBR.sh _sc_ds clm_std^nl_urb_br 20030101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .......PASS
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............PASS
005 smL74 TSM.sh _sc_s clm_std^nl_urb 20020101:NONE:1800 1x1_brazil navy -10 arb_ic .............PASS
015 smB91 TSMruncase.sh .........................................................................PASS
021 smF92 TSM.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 96 cold .............PASS
022 erF92 TER.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 10+38 cold ..........PASS
023 brF92 TBR.sh 17p_vodsrsc_dm clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v5 72+72 cold .......PASS
029 smCA4 TSM.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........PASS
030 erCA4 TER.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ......PASS
031 brCA4 TBR.sh _sc_ds clm_std^nl_urb_br 20021001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic ...PASS
032 blCA4 TBL.sh _sc_ds clm_std^nl_urb 20021001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........PASS
046 smCA8 TSM.sh _sc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...PASS
047 blCA8 TBL.sh _sc_ds clm_std^nl_urb 20021230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...PASS
048 smNB4 TSM.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic PASS
049 erNB4 TER.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 59+100 arb_icPASS
050 brNB4 TBR.sh _mexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arb_PASS
051 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic PASS
065 smL78 TSM.sh _sc_s clm_std^nl_urb 20021231:NONE:1800 1x1_brazil navy -366 arb_ic ............PASS
066 blL78 TBL.sh _sc_s clm_std^nl_urb 20021231:NONE:1800 1x1_brazil navy -10 arb_ic .............PASS
PASS  ERS.f45_g35.I_2000.bluefire
PASS  ERS.f19_g16.I_1850.bluefire
PASS  ERS.f19_g16.I_1850-2000.bluefire
PASS  ERB.f09_g16.I_1948_2004.bluefire
SFAIL ERH.f10_f10.I_1850_CN.bluefire.014926 <<< f10_f10 doesn't work for datm7 right now
PASS  ERP.f19_g16.I_CN_1850-2000.bluefire
  bangkok/lf95: Up to test 6 as follows
001 smA74 TSM.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............PASS
002 erA74 TER.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -5+-5 arb_ic ..........PASS
003 brA74 TBR.sh _sc_ds clm_std^nl_urb_br 20030101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .......PASS
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 20030101:NONE:3600 1x1_brazil navy -10 arb_ic ............PASS
005 smA92 TSM.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
006 erA92 TER.sh _sc_dm clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
  breeze/gale/hail/gust/ifort:
001 smA74 TSM.sh _sc_ds clm_std^nl_urb 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ............PASS
002 erA74 TER.sh _sc_ds clm_std^nl_urb 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic ..........PASS
003 brA74 TBR.sh _sc_ds clm_std^nl_urb_br 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .......PASS
004 blA74 TBL.sh _sc_ds clm_std^nl_urb 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ............SKIPPED*
005 smD94 TSM.sh _persc_ds clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................PASS
006 erD94 TER.sh _persc_ds clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 72+72 cold ...............PASS
007 blD94 TBL.sh _persc_ds clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................SKIPPED*
008 smCA4 TSM.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........PASS
009 blCA4 TBL.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........SKIPPED*
010 smCA8 TSM.sh _sc_ds clm_std^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...PASS
011 blCA8 TBL.sh _sc_ds clm_std^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...SKIPPED*
012 smL54 TSM.sh _sc_ds clm_std^nl_urb 19980115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_41

Changes answers relative to baseline: Yes, urban wasteheat limit increased to 100 W/m2
                                      and CN changes due to harvesting

===============================================================
Tag name:  clm3_6_41
Originator(s): kauff,erik
Date: Fri May 29 14:15:38 MDT 2009
One-line Summary: shrub mods, abort if nthreads > 1 (temporary, wrt bugz #965)

Purpose of changes: fix shrub height, disable threading (due to inexact restart)

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system:

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by:

List any svn externals directories updated (csm_share, mct, etc.):
   - update externals for scripts and pio.

List all files eliminated:

List all files added and what they do:

List all existing files that have been modified, and describe the changes:

   - abort if num threads > 1
   main/controlMod.F90

   - Change CNVegStructUpdateMod.F90 according to Keith Oleson for shrubs.
     * First change tsai_min to be multiplied by 0.5 instead of 0.65, and
     * second to lower the tapering for shrubs (types 9 and 11) to 10 with 200 for other woody plants.

   main/aerdepMod.F90 ./aerdepMod.F90
   main/clmtype.F90 ./clmtype.F90
   main/clmtypeInitMod.F90 ./clmtypeInitMod.F90
   main/decompInitMod.F90 ./decompInitMod.F90
   main/driver.F90 ./driver.F90
   main/filterMod.F90 ./filterMod.F90
   main/histFileMod.F90 ./histFileMod.F90
   main/histFldsMod.F90 ./histFldsMod.F90
   main/initializeMod.F90 ./initializeMod.F90
   main/pftdynMod.F90 ./pftdynMod.F90
   main/subgridRestMod.F90

   biogeochem/CNAnnualUpdateMod.F90 ./CNAnnualUpdateMod.F90
   biogeochem/CNBalanceCheckMod.F90 ./CNBalanceCheckMod.F90
   biogeochem/CNEcosystemDynMod.F90 ./CNEcosystemDynMod.F90
   biogeochem/CNVegStructUpdateMod.F90 ./CNVegStructUpdateMod.F90

   biogeophys//BalanceCheckMod.F90 ./BalanceCheckMod.F90
   biogeophys//SurfaceAlbedoMod.F90 ./SurfaceAlbedoMod.F90
   biogeophys//UrbanInputMod.F90

Summary of testing:

  bluefire:
     PASS  ERS.f45_g35.I_2000.bluefire
     PASS  ERS.f19_g16.I_1850.bluefire
     PASS  ERS.f19_g16.I_1850-2000.bluefire
     PASS  ERB.f09_g16.I_1948_2004.bluefire
     SFAIL ERH.f10_f10.I_1850_CN.bluefire.b16+pretag
     * code exact restarts when threaded but using only 1 thread
  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable:

Changes answers relative to baseline:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
Tag name:  clm3_6_40
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Thu May 28 15:17:11 MDT 2009
One-line Summary: Fix openMP bug, add fndepdyn ncl script, fix interpinic for urban, add mkharvest to mksurfdata, new spinups, turn CLAMP on for CASA or CN

Purpose of changes:

Fix hybrid/open-MP mode bug, and testing for hybrid/open-MP. Add ncl script to
time-interpolate between 1850 and 2000 for fndepdat dataset, for fndepdyn version. Fix
interpinic for urban and cndv (jet/oleson/slevis). Update aerdepregrid.ncl and
ndepregrid.ncl scripts. Add mkharvest fields to mksurfdata. Remove furbinp and just use
fsurdat (leave forganic, so can remove to turn off).  Begin to add an option to build
with ccsm makefiles, for test-suite. Remove archiving, branching and resub from last run
script in models/lnd/clm/bld. New spin-up files for 1850 and 2000 for 1.9x2.5 and 1850
for CN. Make sure CLAMP is turned on for either CASA or CN. Change testing years to
2002-2003 so same as for ccsm tests.

Bugs fixed (include bugzilla ID): 954 (hybrid problem)
                                  959 (test suite NOT testing hybrid)
                                  965 (hybrid problem for high-proc count)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  966 (Hybrid restart problem on bluefire)
                                  967 (PIO bounds problem on jaguar)
                                  974 (bug in pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Start adding option to build with ccsm Makefiles

    By default turn on CLAMP when either CN or CASA is enabled

Describe any changes made to the namelist: Remove furbinp (use fsurdat)

List any changes to the defaults for the boundary datasets: New spinup files

   clmi.IQmp17_1950-01-01_1.9x2.5_gx1v6_simyr1850_c090509.nc
   clmi.IQmp17_2000-01-01_1.9x2.5_gx1v6_simyr2000_c090509.nc
   clmi.BCN_0093-01-01_1.9x2.5_gx1v6_simyr1850_c090527.nc

Describe any substantial timing or memory changes: Faster because of a fix to a I/O
                                                   write bug in datm7

Code reviewed by: self, forrest, mvertens, oleson, jet (relevant portions from them)

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm7, csm_share

   scripts   to scripts4_090527
   datm7     to datm7_090518
   csm_share to share3_090512

List all files eliminated:

D  models/lnd/clm/bld/build-streams -- Remove phasing out old run scripts, another 
                               version exists in scripts/ccsm_utils/Tools/build_streams

List all files added and what they do:

>>>>>>>>>>>>>>>>>>>> Add harvest fields to surface datasets
A  models/lnd/clm/tools/mksurfdata/mkharvestMod.F90 ------------- New module to handle harvest fields

>>>>>>>>>>>>>>>>>>>> New files for ccsm_bld option
A  models/lnd/clm/bld/config_files/Macros.yong_g95 -------------- Macro's file for my Darwin Mac-OSX laptop
A  models/lnd/clm/bld/config_files/Macros.breeze_intel ---------- Macro's file for intel on breeze.
A  models/lnd/clm/bld/config_files/TopCCSMBldMakefile.in -------- Top level makefile for a ccsm_bld

>>>>>>>>>>>>>>>>>>>> New scripts to regrid all aerosol/nitrogen deposition resolutions and create 
                     transient Nitrogen-Deposition
A  models/lnd/clm/tools/ncl_scripts/runDepositionRegrid.pl ------ Run regrid for many resolutions for 
                                                                  aerosol and nitrogen deposition
A  models/lnd/clm/tools/ncl_scripts/ndeplintInterp.ncl ---------- Linearly interpolate nitrogen-deposition 
                                                                  between 1850 and 2000 to get
                                                                  transient nitrogen deposition.

>>>>>>>>>>>>>>>>>>>> New serial and open-MP tests
A  models/lnd/clm/test/system/config_files/17p_cnexitspinupsc_do
A  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_do
A  models/lnd/clm/test/system/config_files/17p_vodsrsc_ds

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>>>>>> Fix hybrid bug (959), some tweaks, change dates to 2002/2003 to correspond with 
                     data checked in
M  models/lnd/clm/test/system/tests-driver.sh -------------------- Add -mach option to configure, 
                                                                  able to set CLM_THREADS as input
M  models/lnd/clm/test/system/tests_pretag_bluefire -------------- Move f19_g16 test closer to 
                                                                   beginning of list
M  models/lnd/clm/test/system/config_files/17p_cnsc_dh ----------- Turn supln off
M  models/lnd/clm/test/system/config_files/17p_cnsc_dm ----------- Turn supln off
M  models/lnd/clm/test/system/config_files/17p_cnsc_do ----------- Turn supln off
M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dh --- Turn supln on
M  models/lnd/clm/test/system/config_files/17p_cnadspinupsc_dm --- Turn supln on
M  models/lnd/clm/test/system/mknamelist ------------------------- Set number of threads by input CLM_THREADS
M  models/lnd/clm/test/system/input_tests_master ----------------- Change all start dates to 2002/2003 to 
                                                                   correspond with data checked in
M  models/lnd/clm/test/system/README ----------------------------- Document that can set CLM_THREADS
M  models/lnd/clm/test/system/TSM.sh ----------------------------- Set number of threads by input 
                                                                   CLM_THREADS / handle cold start

>>>>>>>>>>>>>>>>>>>> Add harvest fields
M  models/lnd/clm/tools/mksurfdata/ncdio.F90 --------------------- Add nf_get_att_text
M  models/lnd/clm/tools/mksurfdata/mkfileMod.F90 ----------------- Write out harvest fields
M  models/lnd/clm/tools/mksurfdata/mkvarpar.F90 ------------------ Formatting change
M  models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ------------------ Call mkharvest_init, mkharvest, 
                                                                   and add harvest fields to file
M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850.txt ---------- Point to new landuse files
M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850-2005.txt ----- Point to new landuse files
M  models/lnd/clm/tools/mksurfdata/pftdyn_simyr2000.txt ---------- Point to new landuse files
M  models/lnd/clm/tools/mksurfdata/Srcfiles ---------------------- Add mkharvestMod.F90 file to list

>>>>>>>>>>>>>>>>>>>> Fix interpinic for urban
M  models/lnd/clm/tools/interpinic/interpinic.F90 ---- Changes from Keith Oleson/John Truesdale to 
                                                       handle urban
M  models/lnd/clm/tools/interpinic/runinit_ibm.csh --- Tweak sim_years, maxpft, and start times

>>>>>>>>>>>>>>>>>>>> Fix regrid scripts for new sim_yr
M  models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl --- Add sim_yr, document better, add time coord. 
                                                         variable
M  models/lnd/clm/tools/ncl_scripts/ndepregrid.ncl ----- Add sim_yr, figure out file-type from it, 
                                                         document better, transient files use 
                                                         lowercase lat, lon instead of LAT, LON.

>>>>>>>>>>>>>>>>>>>> Fix hybrid bug (959), deprecate old scripts
M  models/lnd/clm/bld/configure ----------------- By default turn on CLAMP when either CN or CASA is enabled, 
                                                  start adding ccsm_bld option, and -mach option.
M  models/lnd/clm/bld/mkSrcfiles ---------------- Get it to match scripts version of same thing
M  models/lnd/clm/bld/mkDepends ----------------- Get it to match scripts version of same thing, 
                                                  remove Darwin kludge for assert.h (as has been renamed)
M  models/lnd/clm/bld/queryDefaultXML.pm -------- Handle return characters in values
M  models/lnd/clm/bld/config_files/Makefile.in -- Get rid of SGI, Nec-SX6, ES, Cray-X1 build options, 
                                                  tweak Linux build
M  models/lnd/clm/bld/listDefaultNamelist.pl ---- Add option to do all resolutions, correct prints 
M  models/lnd/clm/bld/build-namelist ------------ Add drv_in namelist "ccsm_pes" setting threads to 
                                                  OMP_NUM_THREADS value, remove furbinp file
M  models/lnd/clm/bld/create_newcase ------------ Document that this script is deprecated
M  models/lnd/clm/bld/run-ibm.csh --------------- Remove archiving, change defaults, 
                                                  add notes that script is deprecated
M  models/lnd/clm/bld/README -------------------- Remove files taken out
M  models/lnd/clm/bld/config_files/config_sys_defaults.xml ----- Add default mach settings
M  models/lnd/clm/bld/config_files/config_definition.xml ------- Add mach and ccsm_bld settings
M  models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Remove furbinp, add task thread layouts 
                                                                 for ccsm_pe namelist
M  models/lnd/clm/bld/namelist_files/datm.streams.template.xml - Make same as datm7 version 
                                                                 (except using %p instead of DIN_LOC_ROOT)
M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New finidat spinup files for 1.9x2.5, 
                                                                 1850, 2000 and 1850-CN

>>>>>>>>>>>>>>>>>>>> Changes from Forrest Hoffman to fix hybrid issues on jaguar (bug 954 and more)
M  models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90 -- Add lbc,ubc
M  models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90 -- Add lbc, ubc, lbp, ubp
M  models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90 -- Explicitly dimension filters to "ubp-lbp+1" 
                                                          rather than ":"

>>>>>>>>>>>>>>>>>>>> Fix hybrid issues (bug 954), add #ifdefs to clmtype so can use CLAMP with CASA, 
                     remove CSD and USE_OMP junk
M  models/lnd/clm/src/main/driver.F90 ------------------- Remove CSD directives and USE_OMP.
                                                          Add more variables to private for OMP loops 
                                                          (forrest) (bug 954)
                                                          Pass array bounds to dynland_hwcontent 
                                                          (mvertens) (bug 954).
                                                          Pass array bounds needed by Forrest's 
                                                          biogeochem changes above.
M  models/lnd/clm/src/main/decompInitMod.F90 ------------ Make a line shorter (with continue lines)
M  models/lnd/clm/src/main/subgridRestMod.F90 ----------- Make a line shorter (with continue lines)
M  models/lnd/clm/src/main/aerdepMod.F90 ---------------- Remove generic save statement, add save for 
                                                          each data instantiation
M  models/lnd/clm/src/main/clmtypeInitMod.F90 ----------- Add #ifdefs from casafire branch to limit 
                                                          clmtype size
M  models/lnd/clm/src/main/initializeMod.F90 ------------ Remove USE_OMP and CSD directives
M  models/lnd/clm/src/main/pftdynMod.F90 ---------------- #ifdef pftdyn_cnbal
M  models/lnd/clm/src/main/histFileMod.F90 -------------- Remove CSD directives
M  models/lnd/clm/src/main/controlMod.F90 --------------- Remove furbinp, remove UNICOSMP and SSP complexity
M  models/lnd/clm/src/main/filterMod.F90 ---------------- Remove CSD directives
M  models/lnd/clm/src/main/clmtype.F90 ------------------ Add #ifdefs from casafire branch to limit 
                                                          clmtype size
M  models/lnd/clm/src/main/histFldsMod.F90 -------------- Remove KO comments

>>>>>>>>>>>>>>>>>>>> Fix hybrid issues (bug 954 and 965), use fsurdat instead of furbinp file for urban input
M  models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ---- Pass in array bounds (mvertens) (bug 954)
M  models/lnd/clm/src/biogeophys/UrbanInputMod.F90 ------ Use fsurdat instead of separate furbinp file
M  models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 --- Remove num_solar logic that caused an early exit 
                                                          (bug 965)

Summary of testing:

  bluefire: All PASS except
007 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 7
008 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 6
011 erD91 TER.sh _persc_dh clm_per^nl_urb 20021231:NONE:1200 4x5 gx3v5 72+72 cold ...............FAIL! rc= 7
013 smH74 TSM.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test@1000-1004 -1100 cold FAIL! rc= 8
014 blH74 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test@1000-1004 -100 cold FAIL! rc= 4
017 erE91 TER.sh 4p_vodsrsc_dh clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 10+38 arb_ic .........FAIL! rc= 7
018 brE91 TBR.sh 4p_vodsrsc_dh clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v5 72+72 arb_ic ......FAIL! rc= 6
022 erF92 TER.sh 17p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 10+38 cold ..........FAIL! rc= 7
023 brF92 TBR.sh 17p_vodsrsc_dm clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v5 72+72 cold .......FAIL! rc= 6
009 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
010 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
011 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
012 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
013 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
021 erC61 TER.sh _sc_dh clm_std^nl_urb 20021001:NONE:1800 1.9x2.5 gx1v6 10+38 cold ..............FAIL! rc= 7
022 brC61 TBR.sh _sc_dh clm_std^nl_urb_br 20021001:NONE:1800 1.9x2.5 gx1v6 -3+-3 cold ...........FAIL! rc= 6
025 erH51 TER.sh 17p_cnnsc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 10+38 cold ......FAIL! rc= 7
027 blH51 TBL.sh 17p_cnnsc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS@2000 48 cold .........FAIL! rc= 5
029 smLI1 TSM.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
030 erLI1 TER.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
031 brLI1 TBR.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
032 blLI1 TBL.sh _sc_dh clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
036 erLD1 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:1800 2.65x3.33 USGS -5+-5 arb_ic ...........FAIL! rc= 7
007 brJ61 TBR.sh 4p_casasc_dh clm_std^nl_urb_br 20021230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 6
  jaguar: All PASS except
005 smA91 TSM.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10 <<< bug 967
006 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
007 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
009 smE92 TSM.sh 4p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 96 arb_ic ............FAIL! rc= 10 <<< bug 967
010 erE92 TER.sh 4p_vodsrsc_dm clm_std^nl_urb 20021230:NONE:1800 4x5 gx3v5 10+38 arb_ic .........FAIL! rc= 5
011 brE92 TBR.sh 4p_vodsrsc_dm clm_std^nl_urb_br 20021230:NONE:1800 4x5 gx3v5 72+72 arb_ic ......FAIL! rc= 5
013 smEH2 TSM.sh 4p_vodsrsc_dm clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 10 <<< bug 967
014 erEH2 TER.sh 4p_vodsrsc_dm clm_std^nl_urb 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 5
015 brEH2 TBR.sh 4p_vodsrsc_dm clm_std^nl_urb_br 20021231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 5
017 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
018 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 10+38 arb_ic ......FAIL! rc= 5
019 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
021 smH92 TSM.sh 17p_cnnsc_dm clm_ndepdyn 20020101:NONE:1800 4x5 gx3v5@2000 96 cold .............FAIL! rc= 8
022 erH92 TER.sh 17p_cnnsc_dm clm_ndepdyn 20020101:NONE:1800 4x5 gx3v5@2000 10+38 cold ..........FAIL! rc= 5
023 brH92 TBR.sh 17p_cnnsc_dm clm_ndepdyn 20020101:NONE:1800 4x5 gx3v5@2000 72+72 cold ..........FAIL! rc= 5
025 smJ62 TSM.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10 <<< bug 967
026 erJ62 TER.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
027 brJ62 TBR.sh 4p_casasc_dm clm_std^nl_urb_br 20021230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
034 smLI2 TSM.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
035 erLI2 TER.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
036 brLI2 TBR.sh _sc_dm clm_std 20020101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
  lightning/pathscale: All PASS except
009 smA91 TSM.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
010 erA91 TER.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
011 brA91 TBR.sh _sc_dh clm_std^nl_urb_br 20030101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
012 blA91 TBL.sh _sc_dh clm_std^nl_urb 20030101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 4
017 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
018 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
019 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
020 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 4
021 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
023 erJ42 TER.sh 4p_casasc_dm clm_std^nl_urb 20021230:NONE:1800 10x15 USGS 10+38 cold ...........FAIL! rc= 7
024 brJ42 TBR.sh 4p_casasc_dm clm_std^nl_urb_br 20021230:NONE:1800 10x15 USGS 72+72 cold ........FAIL! rc= 6
026 smL51 TSM.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
027 erL51 TER.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
028 brL51 TBR.sh _sc_dh clm_std^nl_urb_br 20020115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
029 blL51 TBL.sh _sc_dh clm_std^nl_urb 20020115:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 4
032 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 6
035 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
036 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
037 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 5
  bangkok/lf95:
024 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10
025 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
026 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 72+72 arb_ic ......FAIL! rc= 5
028 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic .........FAIL! rc= 10
051 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
052 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
055 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 4
056 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze/gale/hail/gust/ifort: All PASS up to the pftdyn test
016 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS@1000-1002 144 arb_ic ........FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_6_39

Changes answers relative to baseline: No bit-for-bit (unless compare cases using the new vs old spin-up files)

===============================================================
===============================================================
Tag name:  clm3_6_39
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Thu May  7 14:18:08 MDT 2009
One-line Summary: Bug fix for script version and maxpatchpft back to numpft+1

Purpose of changes: Bug fixes for two issues, script version to set CLM_DEMAND="null" instead of none
                    And reset default maxpatch_pft=numpft+1 instead of 4 which crept in on clm3_6_38

Bugs fixed (include bugzilla ID): 943 (CLM_DEMAND="null")
                                  946 (default maxpatchpft)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  974 (bug in pftdyn mode)
                                  977 (bug writing out 3D time-const data)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Change default for maxpatch_pft back to numpft+1

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts

   scripts to scripts4_090506 (default CLM_DEMAND is null rather than none)

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/bld/config_files/config_definition.xml ----- maxpft=numpft+1
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml - Allow sim_year=1000 for test datasets
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml Add co2_ppmv for test_yr=1000
M      models/lnd/clm/src/main/driver.F90 ------------------------ Don't write out message about dynamic pft every time-step
M      models/lnd/clm/src/main/lnd_comp_mct.F90 ------------------ Set iulog for non-masterproc processors
M      models/lnd/clm/test/system/input_tests_master ------------- Put year-range for pftdyn 10x15 tests

Summary of testing: Limited

CLM tag used for the baseline comparison tests if applicable: clm3_6_38

Changes answers relative to baseline: Default number of PFT's is numpft+1 instead of 4.

===============================================================
===============================================================
Tag name:  clm3_6_38
Originator(s):  erik (erik)
Date: Wed May  6 00:20:37 MDT 2009
One-line Summary: New fsurdat for other resolutions, bug-fixes, deep wetlands to bedrock, new spinups for 1.9x2.5 1850, 2000

Purpose of changes:

New surfdata for all resolutions, and new pftdyn test datasets (1x1 and 10x15).  Make sure
furbinp/forganic/fsurdata consistent. New 1850 and 2000 spin-up for 1.9x2.5. Add in field
to restart files needed for urban interpinic. Change deep wetlands to bedrock. Remove
some output for urban and aerdep. fcov changes from Sean. Bring in history change from
Dave (so only output static 3D fields on first h0 file). Bug fix for RTM bug from Keith
O.

Bugs fixed (include bugzilla ID): 941 (RTM output 6X too low)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  943 (CLM_DEMAND="null")
                                  946 (default maxpatchpft)
                                  974 (bug in pftdyn mode)
                                  977 (bug writing out 3D time-const data)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system:

Describe any changes made to the namelist: Remove step2init, add irad from datm
                                           factorfn now null instead of unused.

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes: None

Code reviewed by: swensosc, oleson, dlawren

List any svn externals directories updated (csm_share, mct, etc.): scripts, csm_share,
drv, datm7, mct, pio

    scripts   to scripts4_090505c
    drv       to vocemis-drydep08_drvseq3_0_16
    datm7     to datm7_090505b
    csm_share to share3_090429
    pio       to pio40_prod

List all files eliminated: Remove old run scripts, pt-urban input data

D      models/lnd/clm/test/system/nl_files/clm_urb -- remove since urban is default
D      models/lnd/clm/tools/ncl_scripts/addgrid2spointurban.ncl -- only needed to create
                                                                   urban pt surface datasets
D      models/lnd/clm/tools/ncl_scripts/clmi_increasesoillayer.ncl - only needed to go
                                                 from 10 layer to 15 layer finidat files.
D      models/lnd/clm/bld/urban_input
D      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.nc
D      models/lnd/clm/bld/urban_input/metropolis_fluxes.nc
D      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.nc
D      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.nc
D      models/lnd/clm/bld/urban_input/surfdata_1x1_tropicAtl_urb3den_simyr2000_c090320.nc
D      models/lnd/clm/bld/urban_input/surfdata_1x1_brazil_urb3den_simyr2000_c090320.nc
D      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.nc
D      models/lnd/clm/bld/urban_input/surfdata_1x1_brazil_urb3den_simyr1850_c090317.nc
D      models/lnd/clm/bld/run-pc.csh
D      models/lnd/clm/bld/run-lightning.csh

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>> configure defaults for everything on, update for new datm7
                 new sim_year for pftdyn test datasets. New fsurdat for all
                 resolutions, furbinp and forganic=fsurdat.
M      models/lnd/clm/bld/configure -------------------------------- document defaults
correctly
M      models/lnd/clm/bld/config_files/config_definition.xml ------- defaults for:
                  dust: on, maxpft:numpft+1, progsslt:on, rtm:on
M      models/lnd/clm/bld/listDefaultNamelist.pl ------------------- all -res all option
M      models/lnd/clm/bld/clm.cpl7.template ------------------------ use defaults for
                                   dust, progsslt, and rtm. Don't demand furbinp, or forganic
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml --- Remove step2init,
change defaults for factorfn, and sim_year (for test ranges 1000-1002, and 1000-1004)
M      models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml  Factorfn=null, rm step2init
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - New 1.9x2.5 finidat, 
                                 new fsurdat for all resolutions, 
M      models/lnd/clm/bld/build-namelist --------------------------- furbinp,forganic now
longer clm_demand
                     furbinp = fsurdat, forganic = fsurdat, fsurdat no longer need
                     furbinp and fpftdyn, finidat doesn't need furbinp, remove step2init
>>>>>>>>>>>>>>>>
M      models/lnd/clm/src/main/aerdepMod.F90 ---------------- log output only to masterproc
M      models/lnd/clm/src/main/iniTimeConst.F90 ------------- remove urban log output
M      models/lnd/clm/src/main/subgridRestMod.F90 ----------- add cols1d_ityp
M      models/lnd/clm/src/main/clmtypeInitMod.F90 ----------- add fsat
M      models/lnd/clm/src/main/iniTimeConst.F90 ------------- make deep wetlands bedrock
M      models/lnd/clm/src/main/histFileMod.F90 -------------- only write out static fields 
                                                              to h0 tapes on nstep=0
M      models/lnd/clm/src/main/clmtype.F90 ------------------ add fcov and fsat
M      models/lnd/clm/src/main/histFldsMod.F90 -------------- add fsat to history files
M      models/lnd/clm/src/main/mkarbinitMod.F90 ------------- make wetlands bedrock
M      models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 - make wetlands bedrock
M      models/lnd/clm/src/biogeophys/UrbanInitMod.F90 ------- add fcov/fsat
M      models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 ------ add fcov/fsat
M      models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90 --- add fcov/fsat
M      models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90 --- add fcov/fsat
M      models/lnd/clm/src/riverroute/RtmMod.F90 ------------- Fix RTM bug so accumulate 
                                                              during RTM intervals
>>>>>>>>>>>>>>>> Remove run-pc/run-lighning tests, remove CLMNCEP, update to beta15
                 lightning no parallel gmake, no clm_demand for furbinp, change clm_urb
                to clm_std, add sim_year for pftdyn tests, add serial vodsrsc tests
M      models/lnd/clm/test/system/tests_pretag_bangkok
M      models/lnd/clm/test/system/tests_posttag_lightning
M      models/lnd/clm/test/system/test_driver.sh --------- update to beta15, lightning gmake no parallel
M      models/lnd/clm/test/system/mknamelist ------------- remove CLMNCEP option
M      models/lnd/clm/test/system/TCSruncase.sh ---------- remove lightning, pc option
M      models/lnd/clm/test/system/nl_files/clm_per ------- no clm_demand on furbinp
M      models/lnd/clm/test/system/nl_files/clm_per0 ------ no clm_demand on furbinp
M      models/lnd/clm/test/system/nl_files/clm_urb1pt ---- no clm_demand on furbinp
M      models/lnd/clm/test/system/input_tests_master ----- change clm_urb to clm_std
                                      add sim_year for pftdyn tests, add serial vodsrsc
                                      tests
>>>>>>>>>>>>>>>> Change urban pt datasets from 1850 to 2000 sim_year.
M      models/lnd/clm/tools/mksurfdata/mksurfdata.pl

Summary of testing: limited testing on breeze, lightning, and bangkok

  bluefire: All PASS except TBL up to test 27

CLM tag used for the baseline comparison tests if applicable: clm3_6_37

Changes answers relative to baseline: Yes, RTM 6X higher, surface datasets different
                                      deep wetlands now bedrock

===============================================================
===============================================================
Tag name:  clm3_6_37
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Mon Apr 27 23:27:26 MDT 2009
One-line Summary: Update faerdep dataset for 1.9x2.5 to point to version cice is using for 1850 and 2000

Purpose of changes: Point to same version of faerdep datasets used by cice for 1.9x2.5 1850/2000
    This was needed for the ccsm4_0_beta15 tag.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  941 (RTM output 6X too low)
                                  974 (bug in pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/


Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets:
    New faerdep datasets for 1.9x2.5 used by cice (only difference is time coord)

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): scripts
   scripts to scripts4_090427b

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M   models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml

Summary of testing: None, other than build-namelist for 1.9x2.5 sim_year=1850/2000

CLM tag used for the baseline comparison tests if applicable: clm3_6_36

Changes answers relative to baseline: Should be identical

===============================================================
===============================================================
Tag name:  clm3_6_36
Originator(s):  erik (erik)
Date: Mon Apr 27 14:10:13 MDT 2009
One-line Summary: Handle transient aersol, make maxpatchpft=numpft+1 default, new datasets for 1.9x2.5 and 0.9x1.25, change doalb

Purpose of changes:

Changes so can do aerosol transient time-series (1850-2000) (kauff). New surfdata
datasets for 1.9x2.5 and 0.9x1.25 (1850 and 2000). New 1850-2000 pftdyn dataset for
1.9x2.5. New aerosol and ndep for 1.9x2.5 (1850 and 2000). Change to doalb from Mariana.
Make maxpatchpft=numpft+1 the default and remove all finidat files

Bugs fixed (include bugzilla ID): 936 (create_test bug)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  935 (RTM warning NOT an error)
                                  937 (undef value on bangkok for maxpatchpft=numpft+1 case)
                                  941 (RTM output 6X too low)
                                  974 (bug in pftdyn mode)
                                 1068 (Problems interpolated deposition datasets to high res)
                                 1069 (Nitrogen Deposition datasets have wrong units)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: maxpatchpft default is now numpft+1

Describe any changes made to the namelist: build-namelist now allows 1850-2000 for sim_year for transient datasets
    aerdep now chooses a transient dataset for this case as well

List any changes to the defaults for the boundary datasets:
    New aerosol deposition and nitrogen deposition datasets for 1.9x2.5 and transient
    New pftdyn dataset for 1.9x2.5 for 1850-2000
    New surfdata for 1.9x2.5 and 0.9x1.25

Describe any substantial timing or memory changes: None

Code reviewed by: self, kauff (aer transient), mvertens (doalb changes)

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm7, and pio
    scripts to scripts4_090424
    drv     to vocemis-drydep08_drvseq3_0_14
    datm7   to datm7_090406
    pio     to pio38_prod

List all files eliminated: None

List all files added and what they do: Add file for generic settings NOT used by a specific model component

A      models/lnd/clm/bld/namelist_files/namelist_defaults_overall.xml

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>>>>>>>>>> Add cice decomp info, use xml input file for PE change
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_10x15_dh
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_4x5_dh
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_1.9x2.5_dh
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_64x128_s
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_0.9x1.25_dh
M      models/lnd/clm/test/system/TCT_ccsmseq.sh --- use xml file format for PE change
>>>>>>>>>>>>>>>>>>>>>>>> Base LANDMASK on SUM(PCT_PFT) rather than LANDFRAC_PFT
M      models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl
>>>>>>>>>>>>>>>>>>>>>>>> Add 1850-2000 simyr option
M      models/lnd/clm/bld/config_files/config_definition.xml ------ maxpatchpft default
is numpft+1
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml -- Add 1850-2000 to valid sim_year values
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml - Remove finidat files, 
                                              remove data in namelist_defaults_overall,
                                              new fsurdat,forganic,furbinp for 1.9x2.5 and 0.9x1.25
                                              1850-2000 PFT dataset for 1.9x2.5
                                              new aerdep and ndep datasets for 1.9x2.5 and 0.9x1.25, 
                                              and transient 1850-2000 aerdep datasets
M      models/lnd/clm/bld/build-namelist ----------- Be careful if datasets are picked
based on full sim_year (which could be 1850-2000) or the first year (1850 finidat,
fsurdat files)
M      models/lnd/clm/bld/listDefaultNamelist.pl --- Use list of defaults files
M      models/lnd/clm/bld/queryDefaultNamelist.pl -- Use list of defaults files, remove scpto option
M      models/lnd/clm/bld/queryDefaultXML.pm ------- Use list of defaults files
>>>>>>>>>>>>>>>>>>>>>>>> doalb changes from Mariana Vertenstein (branches/new_doalb)
>>>>>>>>>>>>>>>>>>>>>>>> remove caldayp1 use next_swcday sent from atm
M      models/lnd/clm/src/biogeochem/DGVMMod.F90 ---------- remove caldayp1, send nextsw_cday
M      models/lnd/clm/src/main/clm_comp.F90 --------------- don't calcualte caldayp1, calc declinp1 based on nextsw_cday
M      models/lnd/clm/src/main/driver.F90 ----------------- Pass nextsw_cday instead of caldayp1
M      models/lnd/clm/src/main/initSurfAlbMod.F90 --------- Don't pass calday and declin
M      models/lnd/clm/src/main/lnd_comp_mct.F90 ----------- Remove never_doAlb logic, pass nextsw_cday down
M      models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 - cosz based on nextsw_cday NOT caldayp1
M      models/lnd/clm/src/biogeophys/UrbanMod.F90 --------- Do NOT pass calday, declin
>>>>>>>>>>>>>>>>>>>>>>>> aerdep changes from Brian Kauffman (cbgcdev05_clm3_6_35)
M      models/lnd/clm/src/main/aerdepMod.F90 -- Time-interpolation done each time-step (rather than just each day) method slightly different.
                                                Also allows transient file where uses first year 
                                               until reaches middle years, then after last year continues to use last year.

Summary of testing:

  bluefire: All PASS except TBL and... up to test 62
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
038 smCA4 TSM.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 10
039 erCA4 TER.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ......FAIL! rc= 5
040 brCA4 TBR.sh _sc_ds clm_urb^nl_urb_br 19981001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic ...FAIL! rc= 5
042 smCA8 TSM.sh _sc_ds clm_urb^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 10
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5

CLM tag used for the baseline comparison tests if applicable: clm3_6_35

Changes answers relative to baseline: Yes -- default for maxpatchpft is numpft+1 
                                             rather than 4
                                      And aersol time-interpolation is different
                                      method is different and also does interpolation
                                      for every time-step NOT held constant each day.

===============================================================
===============================================================
Tag name:  clm3_6_35
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Mon Apr 20 15:19:17 MDT 2009
One-line Summary: Fix major logic bug in mksurfdata

Purpose of changes: Fix major logic bug in mksurfdata (bug 934) which requires us to recreate any surface datasets
                    created with clm3_6_32. The bug zero'd out LAI for some PFT's and biased the LAI values
                    (LAI, SAI, veg-bot, veg-top).

 This is a note from dlawren
   "I have taken a look at the new surface files and they look correct to me.  LAI
   is defined everywhere.  I did a quick test using this surface dataset with a
   spunup file from Keith's prior 1850 simulation and it worked fine (no errors).
    I also confirmed that indeed the gridbox mean LAI is different by up to about
   +-0.5.  In most places the difference is below +-0.1."


Bugs fixed (include bugzilla ID): 934 (pftdyn logic bug)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  941 (RTM output 6X too low)
                                  974 (bug in pftdyn mode)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Self (but new 1.9x2.5 surface dataset checked by dlawren and lawrence)

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: 

A      models/lnd/clm/tools/ncl_scripts/pftdyntest2raw.ncl --- Create raw pftdyn test datasets, so can create new ones.

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/tools/mksurfdata/mklaiMod.F90 ---------------- Fix pftdyn logic error.
M      models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ---------------- Move soil-text calc higher up, allow more space for filenames
M      models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig ------ Make output in double precision
M      models/lnd/clm/tools/mksurfdata/mksurfdata.regional --------- Make output in double precision
M      models/lnd/clm/tools/mksurfdata/mksurfdata.pftdyn ----------- Make output in double precision
M      models/lnd/clm/tools/mksurfdata/mksurfdata.singlept --------- Make output in double precision
M      models/lnd/clm/tools/mksurfdata/mksurfdata.namelist --------- Make output in double precision
M      models/lnd/clm/tools/mksurfdata/mksurfdata.pl --------------- Get T62, 2x2.5 and qtr deg res's, only do 2000 for urban single-point
M      models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850-2005.txt --- Allow larger size for filenames
M      models/lnd/clm/tools/mksurfdata/pftdyn_simyr2000.txt -------- Allow larger size for filenames
M      models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850.txt -------- Allow larger size for filenames

MM     models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl ----------- Add svn keywords
MM     models/lnd/clm/tools/ncl_scripts/clmi_increasesoillayer.ncl - Add svn keywords
M      models/lnd/clm/tools/ncl_scripts/README --------------------- Update doc on files

Summary of testing: No testing except for mksurfdata on bluefire

001 sm774 TSMtools.sh mksurfdata tools__ds singlept .............................................PASS
002 sm754 TSMtools.sh mksurfdata tools__s globalirrig ...........................................PASS
003 sm756 TSMtools.sh mksurfdata tools__s pftdyn ................................................PASS

CLM tag used for the baseline comparison tests if applicable: clm3_6_34

Changes answers relative to baseline: no bit-for-bit (other than mksurfdata)

===============================================================
===============================================================
Tag name:  clm3_6_34
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date:  Sun Apr 19 09:34:43 MDT 2009
One-line Summary: Fix bangkok urban bug

Purpose of changes: Fix urban bug found from bangkok testing (#927) and eliminate potential water balance error

Bugs fixed (include bugzilla ID): 927

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  934 (pftdyn logic bug)
                                  941 (RTM output 6X too low)
                                  974 (bug in pftdyn mode)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: myself, Erik Kluzek, Sean Swenson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 .... Change loop over all columns to filter_nourbanc
M      models/lnd/clm/src/biogeophys/UrbanMod.F90 .... Change some net_solar fields from intent(out) to intent(inout).
              add soilalpha_u restriction on soil evaporation/transpiration selection for pervious road (this second
              change is bit for bit for all bluefire/bangkok testing, but will prevent small water balance errors in
              special situations (e.g., perpetual January simulations)

Summary of testing:

  bluefire: All PASS except:
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
060 blLI1 TBL.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
069 smJ61 TSM.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
070 erJ61 TER.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
071 brJ61 TBR.sh 4p_casasc_dh clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
072 blJ61 TBL.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 4
082 bl744 TBLtools.sh mksurfdata tools__s namelist ..............................................FAIL! rc= 7
084 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 6
086 bl754 TBLtools.sh mksurfdata tools__s globalirrig ...........................................FAIL! rc= 6
088 bl756 TBLtools.sh mksurfdata tools__s pftdyn ................................................FAIL! rc= 7
093 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
094 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
095 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 4
096 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
097 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95: All PASS except:
008 blA92 TBL.sh _sc_dm clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 5
011 blD91 TBL.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 5
033 blH52 TBL.sh 17p_cnnsc_dm clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 48 cold .........FAIL! rc= 5
034 smJ92 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 96 cold ...............FAIL! rc= 10
035 erJ92 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 10+38 cold ............FAIL! rc= 5
036 brJ92 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 4x5 gx3v5 72+72 cold .........FAIL! rc= 5
037 blJ92 TBL.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 48 cold ...............FAIL! rc= 4
041 blL51 TBL.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 5
048 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
049 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
052 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 8
053 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable: clm3_6_33

Changes answers relative to baseline: No, bit for bit

===============================================================
===============================================================
Tag name:  clm3_6_33
Originator(s):  erik (erik)
Date: Thu Apr 16 14:45:23 MDT 2009
One-line Summary: Bring in dynpft changes from cbgc branch

Purpose of changes: New method for dealing with dynamic land-use changes

   morph routine casa() in casa_ecosystemDyn(), so casa is more similar to CN & DGVM,
   and prepares casa code for adding additional carbon flux functionality.
   Larger plan is to duplicate these and other mods from casafire branch on this branch.
   Add new method for conserving heat & water wrt dynamic land use.
   Conserves heat & water for any change in the land-unit, column, or pft arrangment. 
   when pftdyn is activated, "normalize" sum of new pft weights in a column
   to be the same as the sum of the old pft weights
   otherwise BalanceCheck will generate water/heat balance errors.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  927 (problem with urban on bangkok/lahey)
                                  934 (pftdyn logic bug)
                                  941 (RTM output 6X too low)
                                  974 (bug in pftdyn mode)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by:
  B. Kauffman, D. Lawrence, G. Bonan, K. Oleson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated:

  D    biogeochem/CASASummary.F90 ................ code relocated inside CASAMod.F90

List all files added and what they do:

  A    main/dynlandMod.F90 ............... new routine is here

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>> models/lnd/clm/src
  M    biogeochem/CASAMod.F90 .......... Add in CASASummary.F90, add casa_recosystemDyn subroutine
  M    main/pftdynMod.F90 .............. when pftdyn is active, "normalize" pft weights in a column
  M    biogeophys/BalanceCheckMod.F90 .. improved imbalance write statement
  M    main/driver.F90 ................. CASAsummary, CASAPhenology now called in 
                                         casa_ecocsystemDyn()
  M    main/initSurfAlbMod.F90 ......... casa() renamed casa_ecocsystemDyn()
  M    main/driver.F90         ......... call new routine here
  M    main/clmtype.F90        ......... define new fields
  M    main/clmtypeInitMod.F90 ......... init   new fields
  M    main/histFldsMod.F90    ......... put new fields on hist file
  M    main/clm_atmlnd.F90     ......... heat  imbalance is applied here 
                                         (to latent heat flux)
  M    riverroute/RtmMod.F90   ......... water imbalance is applied here (to runoff)

Summary of testing:

  bluefire: All PASS except pftdyn TBL tests and ...
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
069 smJ61 TSM.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
070 erJ61 TER.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
071 brJ61 TBR.sh 4p_casasc_dh clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
093 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
094 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
095 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 4
096 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
097 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  jaguar: All PASS except
005 smA91 TSM.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
006 erA91 TER.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
007 brA91 TBR.sh _sc_dh clm_urb^nl_urb_br 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
009 smE92 TSM.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 96 arb_ic ............FAIL! rc= 10
010 erE92 TER.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 10+38 arb_ic .........FAIL! rc= 5
011 brE92 TBR.sh 4p_vodsrsc_dm clm_urb^nl_urb_br 19981230:NONE:1800 4x5 gx3v5 72+72 arb_ic ......FAIL! rc= 5
013 smEH2 TSM.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 10
014 erEH2 TER.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 10+38 arb_icFAIL! rc= 5
015 brEH2 TBR.sh 4p_vodsrsc_dm clm_urb^nl_urb_br 19981231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 24+24 arbFAIL! rc= 5
021 smH92 TSM.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 96 cold .............FAIL! rc= 10
022 erH92 TER.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 10+38 cold ..........FAIL! rc= 5
023 brH92 TBR.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 72+72 cold ..........FAIL! rc= 5
025 smJ62 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
026 erJ62 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
027 brJ62 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
034 smLI2 TSM.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
035 erLI2 TER.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
036 brLI2 TBR.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
038 erP65 TSM_ccsmseq.sh ERS f19_g15 I ..........................................................FAIL! rc= 4
039 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
  lightning/pathscale: All PASS except pftdyn TBL tests and ...
011 erA91 TER.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 7
012 brA91 TBR.sh _sc_dh clm_urb^nl_urb_br 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
018 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
019 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
020 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
022 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
023 smJ42 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 10x15 USGS 96 cold ..............FAIL! rc= 10
024 erJ42 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 10x15 USGS 10+38 cold ...........FAIL! rc= 5
025 brJ42 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 10x15 USGS 72+72 cold ........FAIL! rc= 5
027 smL51 TSM.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
028 erL51 TER.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
029 brL51 TBR.sh _sc_dh clm_urb^nl_urb_br 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
036 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
037 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
038 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
  bangkok/lf95: All PASS except pftdyn TBL tests and ...
005 smA92 TSM.sh _sc_dm clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
006 erA92 TER.sh _sc_dm clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
007 brA92 TBR.sh _sc_dm clm_urb^nl_urb_br 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
009 smD91 TSM.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 10
010 erD91 TER.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 72+72 cold ...............FAIL! rc= 5
030 smH52 TSM.sh 17p_cnnsc_dm clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 96 cold .........FAIL! rc= 10
031 erH52 TER.sh 17p_cnnsc_dm clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 10+38 cold ......FAIL! rc= 5
032 brH52 TBR.sh 17p_cnnsc_dm clm_urb^nl_urb_br 19980115:NONE:1800 10x15 USGS@2000 72+72 cold ...FAIL! rc= 5
034 smJ92 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 96 cold ...............FAIL! rc= 10
035 erJ92 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 10+38 cold ............FAIL! rc= 5
036 brJ92 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 4x5 gx3v5 72+72 cold .........FAIL! rc= 5
038 smL51 TSM.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
039 erL51 TER.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
040 brL51 TBR.sh _sc_dh clm_urb^nl_urb_br 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
048 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
049 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
052 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 8
053 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze/gale/hail/gust/ifort: All PASS

CLM tag used for the baseline comparison tests if applicable: clm3_6_33

Changes answers relative to baseline: Only for pftdyn mode

===============================================================
================================================================================
Tag name:  clm3_6_32
Originator(s):  dlawren, erik, jet
Date: Fri Apr 10 14:38:52 MDT 2009
One-line Summary: Add irrigation area to mksrfdata, fix high-res and pftdyn problems

Purpose of changes:  Add irrigation area to mksrfdat tool, for irrigated area copy PFT=15 LAI and heights
	into PFT=16, PFT=15 is unirrigated crop, PFT=16 is irrigated crop
   fix pftdyn mode for mksurfdata (erik), bug fixes to mksurfdata from John Truesdale
   script changes to make gx1v6 default.

Bugs fixed (include bugzilla ID): 919 (pftdyn mode in mksurfdata)
                                  821 (problems running mksurfdata at high-res)
                                  357 (codes replicated in tools)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  920 (glacier_mec problems in mksurfdata)
                                  926 (pftdyn code needs to be shared in mksurfdata)
                                  927 (problem with urban on bangkok/lahey)
                                  934 (pftdyn logic bug)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Building with PIO is on by default

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: gx1v6 for and 0.47 res
   fix 5x5_amazon surface dataset.

Describe any substantial timing or memory changes: None

Code reviewed by: self, jet, dlawren

List any svn externals directories updated (csm_share, mct, etc.): scripts, drv, datm7,
csm_share, esmf_wrf_timemgr

  scripts   to scripts4_090406
  drv       to vocemis-drydep08_drvseq3_0_13
  datm7     to datm7_090403
  csm_share to share3_090407
  timemgr   to esmf_wrf_timemgr_090402

List all files eliminated: Remove text urban input files, globalurban mksurf namelist --
as urban is default.

D      models/lnd/clm/bld/urban_input/metropolis_fluxes.txt
D      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.txt
D      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.txt
D      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.txt
D      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.txt
D      models/lnd/clm/tools/mksurfdata/mksurfdata.globalurban 

List all files added and what they do:

A      models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850-2005.txt . List of dynamic PFT files from 1850 to 2005
A      models/lnd/clm/tools/mksurfdata/pftdyn_simyr1850.txt ...... Dynamic PFT file for 1850
A      models/lnd/clm/tools/mksurfdata/pftdyn_simyr2000.txt ...... Dynamic PFT file for 2000
A      models/lnd/clm/tools/mksurfdata/mkirrig.F90 ............... calculates irrigated area from irrigated area on input dataset
A      models/lnd/clm/tools/mksurfdata/mksurfdata.globalirrig .... namelist file pointing to irrigated area source file
A      models/lnd/clm/bld/namelist_files/namelist_defaults_datm.xml datm namelist info
A      models/lnd/clm/bld/namelist_files/namelist_defaults_drv.xml  drv namelist info

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>> Add firrig option, fix bugs, fix pftdyn mode
M      models/lnd/clm/tools/mksurfdata/mkvarctl.F90 .............. Add mksrf_firrig
M      models/lnd/clm/tools/mksurfdata/mklaiMod.F90 .............. Copy LAI in PFT=15 into PFT=16 if mksrf_irrig /= ''
                                                        use standard averaging for pftdyn
M      models/lnd/clm/tools/mksurfdata/mkfileMod.F90 ............. Add mksrf_firrig
M      models/lnd/clm/tools/mksurfdata/README
M      models/lnd/clm/tools/mksurfdata/mksrfdat.F90 .............. Add pct_irr to surface dataset if mksrf_irrig /= ''
M      models/lnd/clm/tools/mksurfdata/Srcfiles
M      models/lnd/clm/tools/mksurfdata/mkpftMod.F90 .............. Adjust PCT_PFT for non-irrigated (PFT=15) and irrigted (PFT=16) crops
M      models/lnd/clm/tools/mksurfdata/mkglcmec.F90 .............. Check for divide by zero (JT)
M      models/lnd/clm/tools/mksurfdata/mkvarctl.F90 .............. Initialize files to blank
M      models/lnd/clm/tools/mksurfdata/mkfileMod.F90 ............. Only output data needed for pftdyn files
M      models/lnd/clm/tools/mksurfdata/mkorganic.F90 ............. Allocate bug-fix (JT)
M      models/lnd/clm/tools/mksurfdata/mkurban.F90 ............... bug-fix (JT)
M      models/lnd/clm/tools/mksurfdata/areaMod.F90 ............... bug-fix (JT) 
M      models/lnd/clm/tools/mksurfdata/mksrfdat.F90 .............. add mkirrig, changes for pftdyn
M      models/lnd/clm/tools/mksurfdata/Srcfiles .................. add mkirrig.F90
M      models/lnd/clm/tools/mksurfdata/mkpftMod.F90 .............. if firrig => irrig/non-irrig crops
>>>>>>>>>>>>>>> Always create files using the transient input raw datasets
M      models/lnd/clm/tools/mksurfdata/mksurfdata.pl
M      models/lnd/clm/tools/mksurfdata/mksurfdata.namelist
M      models/lnd/clm/tools/mksurfdata/mksurfdata.regional 
M      models/lnd/clm/tools/mksurfdata/mksurfdata.singlept
M      models/lnd/clm/tools/mksurfdata/mksurfdata.namelist
>>>>>>>>>>>>>>> Add needed fields (mask, LANDMASK) to urban datasets
M      models/lnd/clm/tools/ncl_scripts/addgrid2spointurban.ncl
>>>>>>>>>>>>>>> Turn pio on, work with defaults
M      models/lnd/clm/bld/configure
M      models/lnd/clm/bld/config_files/config_definition.xml
M      models/lnd/clm/bld/run-ibm.csh
M      models/lnd/clm/bld/clm.cpl7.template
M      models/lnd/clm/bld/build-namelist
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
>>>>>>>>>>>>>>> Add mask,PCT_URBAN and LANDMASK to urban point input files
M      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.nc ..... Add mask
M      models/lnd/clm/bld/urban_input/metropolis_fluxes.nc ....... Add mask
M      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.nc ..... Add mask
M      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.nc .... Add mask
M      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.nc .... Changes from Keith, add mask
>>>>>>>>>>>>>>> 
M      models/lnd/clm/test/system/tests_pretag_bluefire - add pftdyn test
M      models/lnd/clm/test/system/test_driver.sh -------- use beta14
M      models/lnd/clm/test/system/input_tests_master ---- fix TBR tests, 
M      models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh - remove eshr
M      models/lnd/clm/test/system/TSM.sh ---------------- fix 
M      models/lnd/clm/test/system/tests_pretag_bangkok -- put some serial tests first
M      models/lnd/clm/test/system/CLM_runcmnd.sh -------- remove bluesky
>>>>>>>>>>>>>>> Always use T_REF2M NOT t_ref2m
M      models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90

Summary of testing:

  bluefire: All PASS except
004 blA74 TBL.sh _sc_ds clm_urb^nl_urb 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ............FAIL! rc= 5
009 blA91 TBL.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 5
012 blD91 TBL.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 7
014 blH74 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 cold ........FAIL! rc= 5
019 blE91 TBL.sh 4p_vodsrsc_dh clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 48 arb_ic ............FAIL! rc= 5
024 blF92 TBL.sh 17p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 5
028 blF93 TBL.sh 17p_vodsrsc_do clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 48 cold .............FAIL! rc= 5
032 blEH1 TBL.sh 4p_vodsrsc_dh clm_urb^nl_urb 19981231:NONE:3600 1.9x2.5^0.9x1.25 gx1v6 48 arb_ic FAIL! rc= 5
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
041 blCA4 TBL.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 7
043 blCA8 TBL.sh _sc_ds clm_urb^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 7
047 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 7
051 blC61 TBL.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v6 48 cold .................FAIL! rc= 7
055 blH51 TBL.sh 17p_cnnsc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 48 cold .........FAIL! rc= 5
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
060 blLI1 TBL.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
062 blL78 TBL.sh _sc_s clm_urb^nl_urb 19971231:NONE:1800 1x1_brazil navy -10 arb_ic .............FAIL! rc= 5
065 smL83 TSM.sh _sc_do clm_urb^nl_urb 19980115:NONE:3600 5x5_amazon navy -10 arb_ic ............FAIL! rc= 10
066 erL83 TER.sh _sc_do clm_urb^nl_urb 19980115:NONE:3600 5x5_amazon navy -5+-5 arb_ic ..........FAIL! rc= 5
067 brL83 TBR.sh _sc_do clm_urb^nl_urb_br 19980115:NONE:3600 5x5_amazon navy -10+-10 arb_ic .....FAIL! rc= 5
068 blL83 TBL.sh _sc_do clm_urb^nl_urb 19980115:NONE:3600 5x5_amazon navy -10 arb_ic ............FAIL! rc= 4
069 smJ61 TSM.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
070 erJ61 TER.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
071 brJ61 TBR.sh 4p_casasc_dh clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
072 blJ61 TBL.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 48 cold ...........FAIL! rc= 4
073 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v6 48 arb_ic .....FAIL! rc= 10
077 blJ74 TBL.sh 4p_casasc_ds clm_urb^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic ..FAIL! rc= 5
084 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 6
086 bl754 TBLtools.sh mksurfdata tools__s globalirrig ...........................................FAIL! rc= 6
088 bl756 TBLtools.sh mksurfdata tools__s pftdyn ................................................FAIL! rc= 7
093 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
094 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
095 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 4
096 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 4
097 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 4
    jaguar: ALL FAIL except
029 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v6 48 arb_ic .....PASS
    breeze/pathscale: All PASS
    bangkok/lahey: All PASS except
005 smA92 TSM.sh _sc_dm clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
006 erA92 TER.sh _sc_dm clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
007 brA92 TBR.sh _sc_dm clm_urb^nl_urb_br 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
009 smD91 TSM.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 144 cold .................FAIL! rc= 10
010 erD91 TER.sh _persc_dh clm_per^nl_urb 19981231:NONE:1200 4x5 gx3v5 72+72 cold ...............FAIL! rc= 5
014 erCA4 TER.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ......FAIL! rc= 7
030 smH52 TSM.sh 17p_cnnsc_dm clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 96 cold .........FAIL! rc= 10
031 erH52 TER.sh 17p_cnnsc_dm clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS@2000 10+38 cold ......FAIL! rc= 5
032 brH52 TBR.sh 17p_cnnsc_dm clm_urb^nl_urb_br 19980115:NONE:1800 10x15 USGS@2000 72+72 cold ...FAIL! rc= 5
034 smJ92 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 96 cold ...............FAIL! rc= 10
035 erJ92 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 10+38 cold ............FAIL! rc= 5
036 brJ92 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 4x5 gx3v5 72+72 cold .........FAIL! rc= 5
038 smL51 TSM.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
039 erL51 TER.sh _sc_dh clm_urb^nl_urb 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
040 brL51 TBR.sh _sc_dh clm_urb^nl_urb_br 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ............FAIL! rc= 5
052 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 8
053 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_6_30

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_31
Originator(s):  erik (erik)
Date: Wed Apr  1 00:58:15 MDT 2009
One-line Summary: New surface datasets for 1850,2000, support for 0.9x1.25_gx1v6, urban always on. New pft-physiology file. Update scripts so remove some CLM_ env_conf vars. Fix CN for urban/pftdyn.

Purpose of changes:

New surface datasets for 1850,2000. sim_year can be 1850 or 2000
(1870 no longer supported), support for 0.9x1.25_gx1v6. Demand furbinp (urban always on),
wasteheat='ON_WASTEHEAT' by default. Change cpl7 template so can either do a cold start
or require a finidat file (cold or startup). New pft-physiology file for CN used by 
everything. Update scripts so remove some CLM_ env_conf vars: CLM_BGC, CLM_DYNNDEP, 
CLM_DYNPFT, CLM_CO2_TYPE, remove CLMNCEP from scripts/datm (keeping CLM_QIAN mode). 
Change final CN loop to go over soil filter -- so CN,CASA,DGVM can work with urban. 
Remove traffic_flux array as it's subscript was out of bounds on breeze.  lnd_comp_mct
changed so that check for spval allows for rounding of spval.

Bugs fixed (include bugzilla ID): 904 (I cases start in 2003 rather than 1948)
                                  897 (string comparision in scripts)
                                  357 (remove duplicated files in tools)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  919 (problems in mksurfdata for pftdyn mode)
                                  920 (glacier_mec problems in mksurfdata)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Add -pio option to configure 
   Will set the BUILDPIO CPP token as well as adding pio source to Filepath.

Describe any changes made to the namelist: Add pio_inparm namelist when -pio 
   was set in configure

List any changes to the defaults for the boundary datasets:
   New 1850 and 2000 surface datasets with urban enabled for most resolutions
   Also new 1850 and 2000 finidat files for 1.9x2.5 resolution (other finidat files removed)

Describe any substantial timing or memory changes: None

Code reviewed by: Peter Thornton, Keith Oleson, Forrest Hoffman

List any svn externals directories updated (csm_share, mct, etc.): scripts, datm, csm_share, mct, pio

   scripts4_090325
   datm7_090325
   vocemis-drydep11_share3_090112
   CT2_6_0_090308
  pio28_prod

List all files eliminated:

>>>>>>>>>>>>>> Remove DGVM namelist tests.
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_h
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_m
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_o
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_s
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_dh
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_dm
D      models/lnd/clm/test/system/config_files/10p_dgvmsc_do

>>>>>>>>>>>>>> Remove script that creates ASCII global data for urban.
D      models/lnd/clm/tools/ncl_scripts/generate_ascii_avg_urbanparam_file_p7.ncl

>>>>>>>>>>>>>> Remove modules replicated in mkgriddata by mksurfdata modules
>>>>>>>>>>>>>> use the versions in mksurfdata.
D      models/lnd/clm/tools/mkgriddata/ncdio.F90
D      models/lnd/clm/tools/mkgriddata/domainMod.F90
D      models/lnd/clm/tools/mkgriddata/areaMod.F90

List all files added and what they do:

>>>>>>>>>>>>>> Add point datasets that now have urban information in them.
A      models/lnd/clm/bld/urban_input/surfdata_1x1_tropicAtl_urb3den_simyr2000_c090320.nc
A      models/lnd/clm/bld/urban_input/surfdata_1x1_brazil_urb3den_simyr2000_c090320.nc
A      models/lnd/clm/bld/urban_input/surfdata_1x1_brazil_urb3den_simyr1850_c090317.nc

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>> Make most tests with urban, remove dgvm tests
M      models/lnd/clm/test/system/tests_pretag_bluefire
M      models/lnd/clm/test/system/config_files/README
M      models/lnd/clm/test/system/tests_pretag_jaguar
M      models/lnd/clm/test/system/tests_pretag_bangkok
M      models/lnd/clm/test/system/test_driver.sh
M      models/lnd/clm/test/system/tests_posttag_hybrid_regression
M      models/lnd/clm/test/system/tests_posttag_purempi_regression
M      models/lnd/clm/test/system/nl_files/clm_per
M      models/lnd/clm/test/system/nl_files/clm_per0
M      models/lnd/clm/test/system/input_tests_master
M      models/lnd/clm/test/system/tests_posttag_lightning

>>>>>>>>>>>>>> Add all_urban mode for single-point mode
M      models/lnd/clm/tools/mksurfdata/mkvarctl.F90
M      models/lnd/clm/tools/mksurfdata/ncdio.F90
M      models/lnd/clm/tools/mksurfdata/mkglacier.F90
M      models/lnd/clm/tools/mksurfdata/mkfileMod.F90
M      models/lnd/clm/tools/mksurfdata/mklanwat.F90
M      models/lnd/clm/tools/mksurfdata/mkurban.F90
M      models/lnd/clm/tools/mksurfdata/mksrfdat.F90
M      models/lnd/clm/tools/mksurfdata/mksurfdata.pl
M      models/lnd/clm/tools/mksurfdata/mkpftMod.F90

>>>>>>>>>>>>>> Add pio option to configure, and if set add pio_inparm namelist
>>>>>>>>>>>>>> Datasets to 1850/2000 and most with urban.
M      models/lnd/clm/bld/configure ------------- Add pio option
M      models/lnd/clm/bld/config_files/config_definition.xml - Add pio to config_cache.xml
M      models/lnd/clm/bld/clm.cpl7.template ----- require furbinp, remove CLM_ env vars
M      models/lnd/clm/bld/build-namelist -------- make sure sim_year sent in, change
                                                  some names etc.
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml ---- Add pio_inparm
M      models/lnd/clm/bld/namelist_files/datm.streams.template.xml -- Remove CLM_NCEP
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml -- urban datasets
              for most resolutions, datasets for 1850 and 2000, remove most finidat

>>>>>>>>>>>>>> Add data from grid files as well as LANDMASK and PCT_URBAN.
M      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.nc
M      models/lnd/clm/bld/urban_input/metropolis_fluxes.nc
M      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.nc
M      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.nc
M      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.nc

>>>>>>>>>>>>>> Changes from Forrest H./Peter T. to fix some CN problems (single-point, pftdyn)
M      models/lnd/clm/src/biogeochem/CNSetValueMod.F90
M      models/lnd/clm/src/main/driver.F90
M      models/lnd/clm/src/main/pftdynMod.F90
M      models/lnd/clm/src/main/lnd_comp_mct.F90 --------- Change from Mark Flanner
                                                          to fix roundoff issues for aerosols.
M      models/lnd/clm/src/biogeophys/Hydrology2Mod.F90
M      models/lnd/clm/src/biogeophys/UrbanMod.F90 ------- Remove traffic_flux as subscript 
                                                          bounds was being exceeded on breeze.

Summary of testing:

  bluefire: All PASS except TBL and...
023 brF92 TBR.sh 17p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 72+72 cold ..........FAIL! rc= 13
027 brF93 TBR.sh 17p_vodsrsc_do clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 72+72 cold ..........FAIL! rc= 13
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
065 smL83 TSM.sh _sc_do clm_urb^nl_urb 19980115:NONE:3600 5x5_amazon navy -10 arb_ic ............FAIL! rc= 10
066 erL83 TER.sh _sc_do clm_urb^nl_urb 19980115:NONE:3600 5x5_amazon navy -5+-5 arb_ic ..........FAIL! rc= 5
067 brL83 TBR.sh _sc_do clm_urb^nl_urb_br 19980115:NONE:3600 5x5_amazon navy -10+-10 arb_ic .....FAIL! rc= 5
069 smJ61 TSM.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
070 erJ61 TER.sh 4p_casasc_dh clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
071 brJ61 TBR.sh 4p_casasc_dh clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
076 brJ74 TBR.sh 4p_casasc_ds clm_urb^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic .FAIL! rc= 13
  jaguar: All PASS except TBL and...
005 smA91 TSM.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ...................FAIL! rc= 10
006 erA91 TER.sh _sc_dh clm_urb^nl_urb 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic ................FAIL! rc= 5
007 brA91 TBR.sh _sc_dh clm_urb^nl_urb_br 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .............FAIL! rc= 5
009 smE92 TSM.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 96 arb_ic ............FAIL! rc= 10
010 erE92 TER.sh 4p_vodsrsc_dm clm_urb^nl_urb 19981230:NONE:1800 4x5 gx3v5 10+38 arb_ic .........FAIL! rc= 5
011 brE92 TBR.sh 4p_vodsrsc_dm clm_urb^nl_urb_br 19981230:NONE:1800 4x5 gx3v5 72+72 arb_ic ......FAIL! rc= 5
017 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
018 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 10+38 arb_ic ................FAIL! rc= 5
019 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
025 smJ62 TSM.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 96 cold ...........FAIL! rc= 10
026 erJ62 TER.sh 4p_casasc_dm clm_urb^nl_urb 19981230:NONE:1800 1.9x2.5 gx1v6 10+38 cold ........FAIL! rc= 5
027 brJ62 TBR.sh 4p_casasc_dm clm_urb^nl_urb_br 19981230:NONE:1800 1.9x2.5 gx1v6 72+72 cold .....FAIL! rc= 5
029 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v5 48 startup ....FAIL! rc= 10
030 smJ74 TSM.sh 4p_casasc_ds clm_urb^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic .FAIL! rc= 10
031 erJ74 TER.sh 4p_casasc_ds clm_urb^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic FAIL! rc= 5
032 brJ74 TBR.sh 4p_casasc_ds clm_urb^nl_urb 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic .FAIL! rc= 5
034 smLI2 TSM.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
035 erLI2 TER.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
036 brLI2 TBR.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
039 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 7
  bangkok/lf95: All PASS except TBL
  breeze/gale/hail/gust/ifort: All PASS

TBL tests are different since most tests are now with urban.

Most of the fails are due to missing files.

CLM tag used for the baseline comparison tests if applicable: clm3_6_30

Changes answers relative to baseline: Yes for CN -- new pft-physiology file

===============================================================
===============================================================
Tag name:  clm3_6_30
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date:  Thu Mar 19 20:44:33 MDT 2009
One-line Summary: Fix urban roof/wall layers

Purpose of changes: Fix urban roof/wall layers

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Me

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do:

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/main/iniTimeConst.F90 ---- divide roof/wall thickness by nlevurb instead of nlevsoi

Summary of testing:

  bluefire: All urban testing passed except TBL
  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable: clm3_6_29

Changes answers relative to baseline: Urban only

===============================================================
===============================================================
Tag name:  clm3_6_29
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date:  Thu Mar 19 07:16:05 MDT 2009
One-line Summary: CN SAI, CN testing fix, rad step size fix

Purpose of changes:  Add SAI decay for CN mode.
                     Fix CN for tests SmI58, smH51, erH51, brH51
                     Add new get_rad_step_size function used by SAI decay function.  This is the "simple fix"
                     and yields correct radiation time step size for all time steps except one for the I and F
                     cases.  The "complete fix" involves changes to other component models and will be available soon.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: K. Oleson, G. Bonan, F. Hoffman, M. Vertenstein, J. Truesdale

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/biogeochem/CNrestMod.F90 --- add seven CN fields deleted previously for restart
M      models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 ---- add SAI decay function (calls get_rad_step_size)
M      models/lnd/clm/src/main/clm_time_manager.F90 ---- changes to fix get_rad_step_size function
M      models/lnd/clm/src/main/lnd_comp_mct.F90 ---- changes to fix get_rad_step_size function

Summary of testing:

  bluefire: All PASS except:
013 smH74 TSM.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -1100 cold .......FAIL! rc= 10
014 blH74 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 cold ........FAIL! rc= 4
020 smE95 TSM.sh 4p_vodsrsc_h clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ....................FAIL! rc= 10
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
055 blH51 TBL.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@2000 48 cold ................FAIL! rc= 7
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
060 blLI1 TBL.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
096 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
097 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
098 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
099 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 6
100 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6

smH74 and blH74 failures are being investigated.
blH51 fails because it fails in clm3_6_28 (fixed in this commit).
Other failures are known.

  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable: clm3_6_28

Changes answers relative to baseline:  CN mode only due to SAI decay factor

===============================================================
===============================================================
Tag name:  clm3_6_28
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date:  Tue Mar 17 07:03:12 MDT 2009
One-line Summary: Fix permission denied error when reading surface dataset

Purpose of changes: Change nf_open statement in UrbanInputMod.F90

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Erik K.

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/biogeophys/UrbanInputMod.F90 ---- don't use getavu for nf_open

Summary of testing:

  bluefire: All PASS except for:
013 smH74 TSM.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -1100 cold .......FAIL! rc= 10
014 blH74 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 cold ........FAIL! rc= 4
020 smE95 TSM.sh 4p_vodsrsc_h clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ....................FAIL! rc= 10
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
051 blC61 TBL.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 48 cold .................FAIL! rc= 5
053 erH51 TER.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@2000 10+38 cold .............FAIL! rc= 7
054 brH51 TBR.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@2000 72+72 cold .............FAIL! rc= 6
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
060 blLI1 TBL.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
096 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
097 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
098 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
099 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 6
100 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6

sm74, blH74, smI58 are known failures related to CN and are being investigated.
blC61 fails because clm3_6_27 fails (fixed in this tag).
Other failures are known.

  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable: clm3_6_27

Changes answers relative to baseline: bfb

===============================================================
===============================================================
Tag name:  clm3_6_27
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date: Mon Mar 16 10:52:05 MDT 2009
One-line Summary: Urban model changes and FGR12 fix

Purpose of changes:  Fix large urban saturation excess runoff.
                     Limit urban dew formation.
                     Change FGR12 diagnostic.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference)
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: Not tested

Code reviewed by: K. Oleson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90 ---- change eflx_fgr12 diagnostic
M      models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 ---- limit urban dew formation and calculate
              pervious road qred over nlevsoi, not nlevurb
M      models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90 ---- prevent large saturation excess due to 
              ponded ice

Summary of testing:

  bluefire: All PASS tests_pretag_bluefire except TBL and :
013 smH74 TSM.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -1100 cold .......FAIL! rc= 10
020 smE95 TSM.sh 4p_vodsrsc_h clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ....................FAIL! rc= 10
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
048 smC61 TSM.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 -6 cold .................FAIL! rc= 10
049 erC61 TER.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 10+38 cold ..............FAIL! rc= 5
050 brC61 TBR.sh _sc_dh clm_urb^nl_urb_br 19981001:NONE:1800 1.9x2.5 gx1v5 -3+-3 cold ...........FAIL! rc= 5
053 erH51 TER.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@2000 10+38 cold .............FAIL! rc= 7
054 brH51 TBR.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@2000 72+72 cold .............FAIL! rc= 6
056 smI58 TSMcnspinup.sh 17p_cnadspinupsc_dh 17p_cnexitspinupsc_dh 17p_cnsc_dh clm_std 19980115:NONEFAIL! rc=5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
096 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
097 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
098 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
099 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 6
100 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6

smH74 and smI58 are CN-related tests that did not fail in clm3_6_25, but fail in clm3_6_26 and in this tag and 
thus should be investigated further.
smC61, erC61, brC61 fail because of permission denied when reading surface dataset. This appears to be a test
suite problem only.

  jaguar:
  kraken:
  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable: clm3_6_26

Changes answers relative to baseline: Urban answers change because of runoff fix.
                                      Standard mode answers only change in FGR12 diagnostic.

===============================================================
===============================================================
Tag name: clm3_6_26
Originator(s): Peter Thornton
Date: 3/14/09
One-line Summary: CN time step and restart file changes

Purpose of changes: shorten CN restart file. Requires moving CLM to physical model timestep.

Bugs fixed (include bugzilla ID):

Known bugs (include bugzilla ID):
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: nonee

Describe any substantial timing or memory changes: CLM restart file reduced in size by ~factor of 3.

Code reviewed by: Forrest Hoffman

List any svn externals directories updated (csm_share, mct, etc.): none

List all files eliminated: none

List all files added and what they do:


List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNNStateUpdate3Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNFireMod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNMRespMod.F90 - change q10
M      models/lnd/clm/src/biogeochem/CNPhenologyMod.F90 - remove reference to retransn
M      models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNDecompMod.F90 - change q10
M      models/lnd/clm/src/biogeochem/CNCStateUpdate3Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNrestMod.F90 - eliminate many CN variables
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNAllocationMod.F90 - change time step, and cleanup some variable names
M      models/lnd/clm/src/biogeochem/CNEcosystemDynMod.F90 - change time step
M      models/lnd/clm/src/biogeochem/CNSetValueMod.F90 - cleanup variable names
M      models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90 - change time step
M      models/lnd/clm/src/main/CNiniTimeVar.F90 - cleanup variable names
M      models/lnd/clm/src/main/driver.F90 - change time step
M      models/lnd/clm/src/main/clmtypeInitMod.F90 - cleanup variable names
M      models/lnd/clm/src/main/pftdynMod.F90 - change time step
M      models/lnd/clm/src/main/clm_time_manager.F90 - change time step
M      models/lnd/clm/src/main/clmtype.F90 - cleanup variable names
M      models/lnd/clm/src/main/histFldsMod.F90 - cleanup variable names

Summary of testing:

  bluefire:
  jaguar:
 Ran the CLM test suite, with the following results:
smA74 TSM.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................PASS
erA74 TER.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................PASS
brA74 TBR.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................PASS
blA74 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................SKIPPED*
smA91 TSM.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ..........................PASS
erA91 TER.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 7 (passes with 512 tasks)
brA91 TBR.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 6 (passes with 512 tasks)
blA91 TBL.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ..........................SKIPPED*
smE92 TSM.sh 4p_vodsrsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 96 arb_ic ...................PASS
erE92 TER.sh 4p_vodsrsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 10+38 arb_ic ................PASS
brE92 TBR.sh 4p_vodsrsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 72+72 arb_ic ................PASS
blE92 TBL.sh 4p_vodsrsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 48 arb_ic ...................SKIPPED*
smEH2 TSM.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 1.9x2.5^0.9x1.25 USGS 48 arb_ic .......PASS
erEH2 TER.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 1.9x2.5^0.9x1.25 USGS 10+38 arb_ic ....PASS
brEH2 TBR.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 1.9x2.5^0.9x1.25 USGS 24+24 arb_ic ....PASS
blEH2 TBL.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 1.9x2.5^0.9x1.25 USGS 48 arb_ic .......SKIPPED*
smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 10+38 arb_ic ................FAIL! rc= 5
brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
blG43 TBL.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................SKIPPED*
smH92 TSM.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 96 cold .............PASS
erH92 TER.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 10+38 cold ..........PASS
brH92 TBR.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 72+72 cold ..........PASS
blH92 TBL.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@2000 48 cold .............SKIPPED*
smJ62 TSM.sh 4p_casasc_dm clm_std 19981230:NONE:1800 1.9x2.5 gx1v5 96 startup ...............PASS
erJ62 TER.sh 4p_casasc_dm clm_std 19981230:NONE:1800 1.9x2.5 gx1v5 10+38 startup ............PASS
brJ62 TBR.sh 4p_casasc_dm clm_std 19981230:NONE:1800 1.9x2.5 gx1v5 72+72 startup ............PASS
blJ62 TBL.sh 4p_casasc_dm clm_std 19981230:NONE:1800 1.9x2.5 gx1v5 48 startup ...............SKIPPED* 
smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v5 48 startup ....FAIL! rc= 10
smJ74 TSM.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic ........PASS
erJ74 TER.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic ......PASS
brJ74 TBR.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic ........PASS
blJ74 TBL.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic .........SKIPPED*
smK92 TSM.sh 10p_dgvmsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 96 arb_ic ...................PASS
erK92 TER.sh 10p_dgvmsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 10+38 arb_ic ................PASS
brK92 TBR.sh 10p_dgvmsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 72+72 arb_ic ................PASS
blK92 TBL.sh 10p_dgvmsc_dm clm_std 19981230:NONE:1800 4x5 gx3v5 48 arb_ic ...................SKIPPED*
smLI2 TSM.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
erLI2 TER.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
brLI2 TBR.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
blLI2 TBL.sh _sc_dm clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................SKIPPED*
erP65 TSM_ccsmseq.sh ERS f19_g15 I ..........................................................PASS
erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................PASS  kraken:

Note: the tests that FAIL here are the same that FAIL on jaguar with clm3_6_25.

  lightning/pathscale:
  bangkok/lf95:
  breeze/gale/hail/gust/ifort:

CLM tag used for the baseline comparison tests if applicable:

Changes answers relative to baseline:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
    q10 changes are climate changing. Time step changes are larger than roundoff, similar climate.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name:  clm3_6_25
Originator(s):  dlawren (Lawrence David 1384 CGD), erik (Kluzek Erik), tcraig (Craig Tony)
Date: Fri Mar 13 15:11:01 MDT 2009
One-line Summary: Daylength control on Vcmax, 1%Lake,wetland,glacier in mksrfdat, remove ELEVATION in surface data file

Purpose of changes: Include changes from Peter Thornton to include daylength control 
on vcmax in photosynthesis scheme; Set minimum lake, wetland, and glacier area to 1% 
to be more consistent with urban and to represent more lakes and wetlands; remove 
temporary unused ELEVATION field from surface dataset

Bugs fixed (include bugzilla ID): 877 (CN restart problem)
                                  911 (high PE count problem)

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference) 
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: New global urban datasets 10x15 and 1.9x2.5 resolutions

Describe any substantial timing or memory changes: None

Code reviewed by: David Lawrence (code), Erik Kluzek (testing and build), Tony Craig (DecompInitMod.F90)

List any svn externals directories updated (csm_share, mct, etc.): scripts, mct, datm

  scripts to scripts4_090310
  datm7   to datm7_090229
  mct     to MCT2_6_0_090308

List all files eliminated: None

List all files added and what they do:

A  models/lnd/clm/test/system/config_files/tools__s ..... Optimized serial mode for tools

List all existing files that have been modified, and describe the changes:

M  models/lnd/clm/tools/mksurfdata/mkglcmec.F90 ..... correct bug in error check
M  models/lnd/clm/tools/mksurfdata/mkglacier.F90 .... reduce min glacier frac from 5 to 1%
M  models/lnd/clm/tools/mksurfdata/mkfileMod.F90 .... remove ELEVATION field
M  models/lnd/clm/tools/mksurfdata/mklanwat.F90 ..... reduce min lake,wetland frac from 5 to 1%
M  models/lnd/clm/tools/mksurfdata/mksrfdat.F90 ..... remove ELEVATION field
M  models/lnd/clm/tools/mksurfdata/README ........... add documentation about being slow unless use OPT=TRUE in gmake
M  models/lnd/clm/src/main/decompInitMod.F90 ........ Changes from Tony Craig to fix for high PE counts
M  models/lnd/clm/src/main/clm_comp.F90 ............. daylength control on vcmax changes
M  models/lnd/clm/src/main/driver.F90 ............... daylength control on vcmax changes
M  models/lnd/clm/src/main/clmtypeInitMod.F90 ....... daylength control on vcmax changes
M  models/lnd/clm/src/main/iniTimeConst.F90 ......... daylength control on vcmax changes
M  models/lnd/clm/src/main/clmtype.F90 .............. daylength control on vcmax changes
M  models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90  daylength control on vcmax changes

M  models/lnd/clm/test/system/test_driver.sh ........ update to beta10, fix some issues on jaguar
M  models/lnd/clm/test/system/input_tests_master .... do most mksurfdata testing optimized
                                                      change CN tests to cold-starts, change 1890 to 1870

M  models/lnd/clm/bld/build-namelist ................ pass sim_year and maxpft in when determining default for finidat
M  models/lnd/clm/bld/clm.cpl7.template ............. add in ignore logic like cam
M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml . update input files

Summary of testing:

  bluefire: All PASS except TBL and...
020 smE95 TSM.sh 4p_vodsrsc_h clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ....................FAIL! rc= 10
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
052 smH51 TSM.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@1890 96 cold ................FAIL! rc= 8
053 erH51 TER.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@1890 10+38 cold .............FAIL! rc= 5
054 brH51 TBR.sh 17p_cnnsc_dh clm_std 19980115:NONE:1800 10x15 USGS@1890 72+72 cold .............FAIL! rc= 5
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
096 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
097 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
098 erP61 TSM_ccsmseq.sh ERS f19_g15 I4804 ......................................................FAIL! rc= 6
099 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 6
100 erP68 TSM_ccsmseq.sh ERS f19_g15 ICASA ......................................................FAIL! rc= 6
  jaguar: Limited testing...
  lightning/pathscale: All PASS except TBL and...
002 smCA4 TSM.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 10
003 erCA4 TER.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ......FAIL! rc= 5
004 brCA4 TBR.sh _sc_ds clm_urb^nl_urb_br 19981001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic ...FAIL! rc= 5
006 smOC4 TSM.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 10
007 erOC4 TER.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_icFAIL! rc= 5
008 brOC4 TBR.sh _vansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arb_iFAIL! rc= 5
011 erA91 TER.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 7
012 brA91 TBR.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 6
019 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 7
020 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 6
024 erJ42 TER.sh 4p_casasc_dm clm_std 19981230:NONE:1800 10x15 USGS 10+38 startup ...............FAIL! rc= 7
025 brJ42 TBR.sh 4p_casasc_dm clm_std 19981230:NONE:1800 10x15 USGS 72+72 startup ...............FAIL! rc= 6
027 smK51 TSM.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
028 erK51 TER.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
029 brK51 TBR.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 72+72 arb_ic ...............FAIL! rc= 5
032 erL51 TER.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ......................FAIL! rc= 7
033 brL51 TBR.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ......................FAIL! rc= 6
040 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
041 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
042 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804 ....................................................FAIL! rc= 5
  breeze/gale/hail/gust/ifort: All PASS except TBL

CLM tag used for the baseline comparison tests if applicable: clm3_6_24

Changes answers relative to baseline: Yes

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: similar climate

  Dave Lawrence ran a short simulation to show that answers do NOT change significantly

===============================================================
===============================================================
Tag name:  clm3_6_24
Originator(s):  oleson (Oleson Keith 1332 CGD)
Date:  Mon Mar  9 21:01:47 MDT 2009
One-line Summary: Fix urban testing and some history field changes

Purpose of changes:  Convert urban ascii files to netcdf to get urban testing to work.
                     Add rh_ref2m calculation for urban and change urban/rural humidity from specific to relative in
                         history files.

Bugs fixed (include bugzilla ID): None

Known bugs (include bugzilla ID): 672 (3.5.4-3.5.14 diffs)
                                  698 (cprnc bug gives false difference) 
                                  701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  722 (threading slow)
                                  789 (1pt sims 2.5X slow)
                                  794 (hist avg strange)
                                  821 (mksurfdata for qtr deg)
                                  851 (abort when files non-exist on jaguar)
                                  877 (CN restart problem)
                                  883 (aerosol deposition not from atm)
                                  903 (problems in driver with open-MP on PGI)
                                  990 (illegal instruction)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
                                 1087 (let weights come from fsurdat file NOT finidat)
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: None

Describe any changes made to the namelist: In namelist_defaults_clm.xml:
                                           Change *.txt urban files to *.nc 
                                           Change aerosoldep_monthly_1990s_mean_1x1_urbanc_alpha_c090119.nc to
                                                  aerosoldep_monthly_1990s_mean_1x1_urbanc_alpha_c090114.nc
                                           Change path for surfdata_0096x0144_090223_v2.nc from
                                                  lnd/clm2/surfdata/ to lnd/clm2/urbdata

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: Not tested

Code reviewed by: K. Oleson

List any svn externals directories updated (csm_share, mct, etc.): None

List all files eliminated: None

List all files added and what they do: A      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.nc
                                       A      models/lnd/clm/bld/urban_input/metropolis_fluxes.nc
                                       A      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.nc
                                       A      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.nc
                                       A      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.nc

List all existing files that have been modified, and describe the changes:
M      models/lnd/clm/test/system/nl_files/nl_urb ---- Remove TSNOW from hist_fincl1, remove Q2M, Q2M_R, Q2M_U and 
              add RH2M, RH2M_R, RH2M_U to hist_fincl2
M      models/lnd/clm/test/system/nl_files/nl_urb_br ---  Remove TSNOW from hist_fincl1
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml ---- Change *.txt urban files to *.nc 
              Change aerosoldep_monthly_1990s_mean_1x1_urbanc_alpha_c090119.nc to
              aerosoldep_monthly_1990s_mean_1x1_urbanc_alpha_c090114.nc
              Change path for surfdata_0096x0144_090223_v2.nc from
              lnd/clm2/surfdata/ to lnd/clm2/urbdata
M      models/lnd/clm/src/main/clmtypeInitMod.F90 ---- delete q_ref2m_r, q_ref2m_u, and add rh_ref2m_r, rh_ref2m_u
M      models/lnd/clm/src/main/clmtype.F90 ---- delete q_ref2m_r, q_ref2m_u, and add rh_ref2m_r, rh_ref2m_u
M      models/lnd/clm/src/main/histFldsMod.F90 ---- delete Q2M_U, Q2M_R, and add RH2M_U, RH2M_R
M      models/lnd/clm/src/biogeophys/UrbanInitMod.F90 ---- delete q_ref2m_u and add rh_ref2m_u
M      models/lnd/clm/src/biogeophys/UrbanMod.F90 ---- delete q_ref2m_u and add calculation for rh_ref2m_u
M      models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90 ---- delete q_ref2m_r and add rh_ref2m_r
M      models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90 ---- delete q_ref2m_r and add rh_ref2m_r

Summary of testing:

  bluefire: All PASS except:
033 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
034 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
035 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
036 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
037 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
041 blCA4 TBL.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
043 blCA8 TBL.sh _sc_ds clm_urb^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
047 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
051 blC61 TBL.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 48 cold .................FAIL! rc= 5
052 smH51 TSM.sh 17p_cnnsc_dh clm_std std 19980115:NONE:1800 10x15 USGS@1890 96 arb_ic ..........FAIL! rc= 1
053 erH51 TER.sh 17p_cnnsc_dh clm_std std 19980115:NONE:1800 10x15 USGS@1890 10+38 arb_ic .......FAIL! rc= 1
054 brH51 TBR.sh 17p_cnnsc_dh clm_std std 19980115:NONE:1800 10x15 USGS@1890 72+72 arb_ic .......FAIL! rc= 1
055 blH51 TBL.sh 17p_cnnsc_dh clm_std std 19980115:NONE:1800 10x15 USGS@1890 48 arb_ic ..........FAIL! rc= 1
057 smLI1 TSM.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 10
058 erLI1 TER.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -5+-5 arb_ic ......................FAIL! rc= 5
059 brLI1 TBR.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10+-10 arb_ic ....................FAIL! rc= 5
060 blLI1 TBL.sh _sc_dh clm_std 19980101:NONE:1800 94x192 T62 -10 arb_ic ........................FAIL! rc= 4
090 sm9J2 TSMext_ccsmseq_cam.sh ext_ccsm_seq_0.9x1.25_dh ext_ccsm_seq_cam 48 ....................FAIL! rc= 8
091 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
092 erP61 TSM_ccsmseq.sh ERS f19_g1            701 (svn keyword)
                                  698 (cprnc bug gives false difference)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                 1077 (Slow leak of land aquifer to Ocean runoff)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

    Known bugs that will NOT be resolved: 546(interpinic for DGVM),
                                          652 (threads different answers with older PGI versions)

Hydrology changes (Guo-Yue Niu water table below soil column, fff=7, 
Qing micropore eqs (hksat and sucsat) and Qing microporosity 
-Simulation clm3_5niu5).

Snow cover fraction (Niu and Yang); snow burial fraction for short vegetation 
(Wang and Zeng); thermal and hydraulic organic soil (Lawrence); 
snow compaction fix (Lawrence); snow T profile during layer splitting 
fix (Lawrence); new FGR12 diagnostic.

Ground emissivity now weighted combination (using fsno) of snow and soil 
emissivity, sparse dense aerodynamic parameters from X. Zeng parameterization, 
Liu (2004) saturated hydraulic conductivity and matric potential,
change saturation excess mechanism to only go to next to lowest layer, change 
forcing height to min. of 40m.

Lower volumetric soil water content to remove drainage spikes from some points
with high sand content. Change volumetric soil water content from 0.4 to 0.3.

Incorporate hydrologically inactive deep soil (15 layers, 11-15
hyrdologically inactive) and add mksoilcarb capability.
Change deep soil (layers 11-15) to dry rock type rather than wet sand
to reduce spinup time and for greater realism.

Improved representation of snow-radiation interaction, including snow aging, 
darkening from black carbon and dust, and vertically-resolved solar heating.

Remove code pertaining to 40m minimum forcing height. Forcing height is now
whatever the atmospheric model provides plus z0+d of each pft.  For offline
simulations this will be 30m+z0+d.

saturation excess back to CLM3.5 parameterization.  Sakaguchi litter resistance
Remove Qing Liu soil micropore functions and return to CLM3.5 formulations, 
change decay factor for drainage to 2.5. remove Niu water table below soil 
column formulation, frozen fraction of soil expression normalized per Zeng,
rsubmax=9.9 for drainage calculation, decay factor=0.5 for surface runoff 
calculation, Zeng/Decker Richards equation mods, modified one-step solution 
for soil moisture and qcharge for compatibility with Zeng/Decker Richards 
mods per Swenson.

Change input datm7 forcing so that Precip is  over 6 hour interval, 
times are corrected for Temp, Pres, Humid, and Wind data and linear 
interpolation is used, and solar data is scaled by the cos(sol-zen angle).

Set litter LAI = 0.5 and incorporate Swenson organic/mineral soil hk 
percolation theory

CASA changes from Forrest Hoffman:

   These changes add SOILPSI to the CASA'
   configuration, correct units on C-LAMP carbon pool type fluxes, and reclassify
   microbial pools as soil type pools.  I believe this includes all modifications
   between bgcmip04_clm3_expa_60 and bgcmip08_clm3_expa_72.

Summary of CN and Btran changes from Sam Levis:

- CanopyFluxes modification in the calculation of btran so that it equals 0 in soil layers with temperature <=-2 C.
- CN mods recommended by Peter Thornton and the BGCWG during the bgc development phase of the last few months.

Grassland AND CROP optical properties changes from Keith Oleson:

New pft physiology file was created:

pft-physiology.c081002

Description of changes to physiology file:

New leaf and stem optical properties (VIS and NIR reflectance and transmittance)
were derived for grasslands and crops (pfts 12-16) from full optical range 
spectra of measured optical properties (Asner et al. (RSE 1998). 

New properties are:

                          Leaf              Stem
                   VIS         NIR       VIS     NIR
Reflectance        0.11        0.35      0.31    0.53
Transmittance      0.05        0.34      0.12    0.25


Describe any changes made to build system: 

   Add SNICAR_FRC and CARBON_AERO ifdef tokens

   DEFINE option SNICAR_FRC: enables second radiative transfer calculation of pure snow for radiative forcing estimation

   in configure use options -carbon_aero and -snicar_frc

Describe any changes made to the namelist:  Add fsnowoptics, fsnowaging, faerdep

Added namelist variables fsnowoptics, fsnowaging, and faerdep, which point to files containing, respectively, snow/aerosol optical properties, snow aging parameters, and global aerosol deposition file. THESE FILES ARE REQUIRED.

List any changes to the defaults for the boundary datasets:

   finidat files developed, all new fsurdat files, new pft-physiology,
   files for T62, new organic files, new files for SNICAR (fsnowoptics, 
   fsnowaging, faerdep), fix some inconsistencies with fraction files, 
   get topo files setup correctly, get all files for 4x5 and 2x2.5 resolution

Describe any substantial timing or memory changes: Yes
     20% slower because of SNICAR and slower because of deep soil

Code reviewed by: Keith Oleson, Mark Flanner, Dave Lawrence, 
                  Peter Thornton, Sam Levis, Sean Swenson

List any svn externals directories updated (csm_share, mct, etc.): scripts, 
                    drv, datm7, socn, sice, sglc, csm_share, timing, pio, cprnc

+scripts                       scripts4_090112
+models/drv/seq_mct            drvseq3_0_04
+models/atm/datm7              datm7_090107
+models/ocn/socn               stubs1_1_01/socn
+models/ice/sice               stubs1_1_01/sice
+models/glc/sglc               stubs1_1_01/sglc
+models/csm_share              share3_090112
+models/utils/timing           timing_081028
+models/utils/pio              pio28_prod/pio
+models/lnd/clm/tools/cprnc    cprnc_081022

List all files eliminated:

D      models/lnd/clm/test/system/tests_pretag_bluevista - remove
D      models/lnd/clm/bld/scpDefaultNamelist.pl ---------- replace with listDefaultNamelist.pl
D      models/lnd/clm/bld/run-frost.csh ------------------ remove as can use cpl7
D      models/lnd/clm/tools/interpinic/clmi_1999-01-02_10x15_c070330.nc -- new file

List all files added and what they do:

A  +   models/lnd/clm/test/system/nl_files/clm_organic ------------ test organic
A  +   models/lnd/clm/tools/mksurfdata/mkorganic.F90 -------------- add organic to surfdat
A  +   models/lnd/clm/tools/mksurfdata/mksurfdata.pl -------------- create all fsurdat files
A  +   models/lnd/clm/tools/ncl_scripts/aerdepregrid.ncl ---------- interpolate aerosol deposition
A  +   models/lnd/clm/tools/ncl_scripts/clmi_increasesoillayer.ncl  interpolate old clmi files to 15 soil levels
A  +   models/lnd/clm/tools/interpinic/clmi.IQ.1953-01-01_10x15_USGS_simyr2000_c081202.nc
                                                   ---------------- new 15 layer file to test interpolation
A  +   models/lnd/clm/tools/interpinic/runinit_ibm.csh ------------ create all finidat files
A  +   models/lnd/clm/bld/listDefaultNamelist.pl ------------------ list inputdata files needed
A  +   models/lnd/clm/src/main/organicFileMod.F90 ----------------- organic soil
A  +   models/lnd/clm/src/main/aerdepMod.F90 ---------------------- read in aerosol deposition
A  +   models/lnd/clm/src/biogeophys/SNICARMod.F90 ---------------- SNICAR model
A  +   Quickstart.GUIDE ------------------------------------------- Quickstart to cpl7 scripts

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>>>>>>>>>>>> Add compile_only option, fix smp/spmd, change most
>>>>>>>>>>>>>>>>>>>>>>>>> tests to 4x5 resolution, update ccsm version, 
>>>>>>>>>>>>>>>>>>>>>>>>> remove bluevista, change to clm_qian inputdata
>>>>>>>>>>>>>>>>>>>>>>>>> add cold start type

M      models/lnd/clm/test/system/TCB.sh
M      models/lnd/clm/test/system/config_files/4p_vodsrsc_dm
M      models/lnd/clm/test/system/config_files/4p_vodsrsc_do
M      models/lnd/clm/test/system/config_files/scam_ds ----- fix defaults for scam
M      models/lnd/clm/test/system/config_files/17p_cnnsc_o
M      models/lnd/clm/test/system/config_files/4p_casasc_dm
M      models/lnd/clm/test/system/config_files/10p_dgvmsc_o
M      models/lnd/clm/test/system/config_files/4p_casasc_do
M      models/lnd/clm/test/system/config_files/4p_casasc_o
M      models/lnd/clm/test/system/config_files/17p_vodsrsc_o
M      models/lnd/clm/test/system/config_files/17p_cnnsc_dm
M      models/lnd/clm/test/system/config_files/17p_cnnsc_do
M      models/lnd/clm/test/system/config_files/10p_dgvmsc_dm
M      models/lnd/clm/test/system/config_files/10p_dgvmsc_do
M      models/lnd/clm/test/system/config_files/17p_vodsrsc_dm
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_64x128_s
M      models/lnd/clm/test/system/config_files/17p_vodsrsc_do
M      models/lnd/clm/test/system/config_files/4p_vodsrsc_o
M      models/lnd/clm/test/system/TSMncl_tools.sh
M      models/lnd/clm/test/system/CLM_compare.sh
M      models/lnd/clm/test/system/TBL.sh
M      models/lnd/clm/test/system/TSM_ccsmseq.sh
M      models/lnd/clm/test/system/TSMext_ccsmseq_cam.sh
M      models/lnd/clm/test/system/tests_pretag_jaguar
M      models/lnd/clm/test/system/tests_posttag_kraken
M      models/lnd/clm/test/system/tests_pretag_bluefire
M      models/lnd/clm/test/system/README.testnames
M      models/lnd/clm/test/system/tests_posttag_breeze
M      models/lnd/clm/test/system/tests_pretag_bangkok
M      models/lnd/clm/test/system/TBR.sh
M      models/lnd/clm/test/system/TCBtools.sh
M      models/lnd/clm/test/system/TER.sh
M      models/lnd/clm/test/system/test_driver.sh
M      models/lnd/clm/test/system/tests_posttag_purempi_regression
M      models/lnd/clm/test/system/mknamelist
M      models/lnd/clm/test/system/tests_posttag_hybrid_regression
M      models/lnd/clm/test/system/TCT_ccsmseq.sh
M      models/lnd/clm/test/system/TCSruncase.sh
M      models/lnd/clm/test/system/TSMpergro.sh
M      models/lnd/clm/test/system/nl_files/clm_per
M      models/lnd/clm/test/system/nl_files/clm_urb
M      models/lnd/clm/test/system/nl_files/clm_std
M      models/lnd/clm/test/system/nl_files/clm_ndepdyn
M      models/lnd/clm/test/system/nl_files/clm_pftdyn
M      models/lnd/clm/test/system/nl_files/clm_per0
M      models/lnd/clm/test/system/TSMcnspinup.sh
M      models/lnd/clm/test/system/input_tests_master
M      models/lnd/clm/test/system/TSMtools.sh
M      models/lnd/clm/test/system/TSMruncase.sh
M      models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh
M      models/lnd/clm/test/system/TSCext_ccsmseq_scam.sh
M      models/lnd/clm/test/system/tests_posttag_lightning
M      models/lnd/clm/test/system/CLM_runcmnd.sh
M      models/lnd/clm/test/system/TBLtools.sh
M      models/lnd/clm/test/system/TSM.sh

>>>>>>>>>>>>>>>>>>>>>>>>> Add organic add option to output as double precision
>>>>>>>>>>>>>>>>>>>>>>>>> be more careful with averging add error checking
M      models/lnd/clm/tools/mksurfdata/mkvarctl.F90
M      models/lnd/clm/tools/mksurfdata/mksurfdata.globalurban
M      models/lnd/clm/tools/mksurfdata/mksurfdata.regional
M      models/lnd/clm/tools/mksurfdata/mkfileMod.F90
M      models/lnd/clm/tools/mksurfdata/Makefile ----------- -Kieee for pgi
M      models/lnd/clm/tools/mksurfdata/mksurfdata.singlept
M      models/lnd/clm/tools/mksurfdata/mksrfdat.F90
M      models/lnd/clm/tools/mksurfdata/Srcfiles
M      models/lnd/clm/tools/mksurfdata/mksurfdata.namelist

>>>>>>>>>>>>>>>>>>>>>>>>> 15 levels for urban
MM     models/lnd/clm/tools/ncl_scripts/generate_ascii_avg_urbanparam_file_p7.ncl
M      models/lnd/clm/tools/ncl_scripts/README

>>>>>>>>>>>>>>>>>>>>>>>>> Change for 15 levels and new variables/dims on dataset
M      models/lnd/clm/tools/interpinic/interpinic.F90
M      models/lnd/clm/tools/interpinic/interpinic.runoptions
M      models/lnd/clm/tools/interpinic/Srcfiles
M      models/lnd/clm/tools/interpinic/Filepath
M      models/lnd/clm/tools/interpinic/Makefile

>>>>>>>>>>>>>>>>>>>>>>>>> 10x15 resolution, start to resolve domain checking bug
M      models/lnd/clm/tools/mkgriddata/mkgriddata.namelist
M      models/lnd/clm/tools/mkgriddata/mkgriddata.F90
M      models/lnd/clm/tools/mkgriddata/domainMod.F90
M      models/lnd/clm/tools/mkgriddata/creategridMod.F90
M      models/lnd/clm/tools/mkgriddata/Makefile

>>>>>>>>>>>>>>>>>>>>>>>>> Get grid data from grid files rather than frac files
M      models/lnd/clm/tools/mkdatadomain/mkdatadomain.namelist
M      models/lnd/clm/tools/mkdatadomain/addglobal.F90
M      models/lnd/clm/tools/mkdatadomain/create_domain.F90
M      models/lnd/clm/tools/mkdatadomain/Makefile

>>>>>>>>>>>>>>>>>>>>>>>>> minor changes to build, new datasets for build-namelist
M      models/lnd/clm/bld/configure --- add -snicar_frc and -carbon_aero, add sglc, remove timing for cpl7
M      models/lnd/clm/bld/queryDefaultNamelist.pl --- minor change
M      models/lnd/clm/bld/config_files/Makefile.in -- add HAVE_GETTIMEOFDAY for new timing, more consistent with cpl7 build
M      models/lnd/clm/bld/config_files/config_definition.xml -- add snicar_frc and carbon_aero
M      models/lnd/clm/bld/clm.cpl7.template -- simplify update for new scripts
M      models/lnd/clm/bld/README ------------- update info.
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml ----- add new namelist items remove irad
M      models/lnd/clm/bld/namelist_files/datm.streams.template.xml --- new Qian datasets
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- new defaults
M      models/lnd/clm/bld/build-namelist

>>>>>>>>>>>>>>>>>>>>>>>>> change default resolution to 4x5 remove irad
M      models/lnd/clm/bld/run-pc.csh
M      models/lnd/clm/bld/run-ibm.csh
M      models/lnd/clm/bld/run-lightning.csh

>>>>>>>>>>>>>>>>>>>>>>>>> New 15 layer urban single point datasets
M      models/lnd/clm/bld/urban_input/metropolis_fluxes.txt
M      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.txt
M      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.txt
M      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.txt

>>>>>>>>>>>>>>>>>>>>>>>>> Code changes documented above
M      models/lnd/clm/src/biogeochem/CASASummaryMod.F90
M      models/lnd/clm/src/biogeochem/CNCStateUpdate2Mod.F90
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate2Mod.F90
M      models/lnd/clm/src/biogeochem/CNNStateUpdate1Mod.F90
M      models/lnd/clm/src/biogeochem/DGVMEcosystemDynMod.F90
M      models/lnd/clm/src/biogeochem/CNBalanceCheckMod.F90
M      models/lnd/clm/src/biogeochem/CNNStateUpdate3Mod.F90
M      models/lnd/clm/src/biogeochem/CNFireMod.F90
M      models/lnd/clm/src/biogeochem/CNMRespMod.F90
M      models/lnd/clm/src/biogeochem/CASAMod.F90
M      models/lnd/clm/src/biogeochem/CNPrecisionControlMod.F90
M      models/lnd/clm/src/biogeochem/CNSummaryMod.F90
M      models/lnd/clm/src/biogeochem/DUSTMod.F90
M      models/lnd/clm/src/biogeochem/CNPhenologyMod.F90
M      models/lnd/clm/src/biogeochem/CNCStateUpdate1Mod.F90
M      models/lnd/clm/src/biogeochem/CNDecompMod.F90
M      models/lnd/clm/src/biogeochem/STATICEcosysDynMod.F90
M      models/lnd/clm/src/biogeochem/CNCStateUpdate3Mod.F90
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate1Mod.F90
M      models/lnd/clm/src/biogeochem/DGVMMod.F90
M      models/lnd/clm/src/biogeochem/CNrestMod.F90
M      models/lnd/clm/src/biogeochem/CNC13StateUpdate3Mod.F90
M      models/lnd/clm/src/biogeochem/CNAnnualUpdateMod.F90
M      models/lnd/clm/src/biogeochem/CNNStateUpdate2Mod.F90
M      models/lnd/clm/src/biogeochem/C13SummaryMod.F90
M      models/lnd/clm/src/biogeochem/CNNDynamicsMod.F90
M      models/lnd/clm/src/biogeochem/CNAllocationMod.F90
M      models/lnd/clm/src/biogeochem/CNC13FluxMod.F90
M      models/lnd/clm/src/biogeochem/CNSetValueMod.F90
M      models/lnd/clm/src/biogeochem/CNVegStructUpdateMod.F90
M      models/lnd/clm/src/main/inicFileMod.F90
M      models/lnd/clm/src/main/clm_varcon.F90
M      models/lnd/clm/src/main/clm_varpar.F90
M      models/lnd/clm/src/main/CNiniTimeVar.F90
M      models/lnd/clm/src/main/clm_comp.F90
M      models/lnd/clm/src/main/driver.F90
M      models/lnd/clm/src/main/ncdio.F90
M      models/lnd/clm/src/main/fileutils.F90
M      models/lnd/clm/src/main/clmtypeInitMod.F90
M      models/lnd/clm/src/main/pftdynMod.F90
M      models/lnd/clm/src/main/iniTimeConst.F90
M      models/lnd/clm/src/main/histFileMod.F90
M      models/lnd/clm/src/main/clm_atmlnd.F90
M      models/lnd/clm/src/main/restFileMod.F90
M      models/lnd/clm/src/main/controlMod.F90
M      models/lnd/clm/src/main/initSurfAlbMod.F90
M      models/lnd/clm/src/main/clm_time_manager.F90
M      models/lnd/clm/src/main/filterMod.F90
M      models/lnd/clm/src/main/clm_varctl.F90
M      models/lnd/clm/src/main/lnd_comp_mct.F90
M      models/lnd/clm/src/main/CASAiniTimeVarMod.F90
M      models/lnd/clm/src/main/areaMod.F90
M      models/lnd/clm/src/main/clmtype.F90
M      models/lnd/clm/src/main/histFldsMod.F90
M      models/lnd/clm/src/main/mkarbinitMod.F90
M      models/lnd/clm/src/riverroute/RtmMod.F90
M      models/lnd/clm/src/biogeophys/SurfaceRadiationMod.F90
M      models/lnd/clm/src/biogeophys/BalanceCheckMod.F90
M      models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90
M      models/lnd/clm/src/biogeophys/UrbanInputMod.F90
M      models/lnd/clm/src/biogeophys/SnowHydrologyMod.F90
M      models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90
M      models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90
M      models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90
M      models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90
M      models/lnd/clm/src/biogeophys/Hydrology1Mod.F90
M      models/lnd/clm/src/biogeophys/Hydrology2Mod.F90
M      models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90
M      models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90
M      models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90
M      models/lnd/clm/src/biogeophys/UrbanMod.F90
M      models/lnd/clm/src/biogeophys/DriverInitMod.F90
M      models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90
M      models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90

>>>>>>>>>>>>>>>>>>>>>>>>> update documentation
M      README -------------- update information
M      KnownBugs ----------- add info on new known bugs

Summary of testing:

  bluefire: All PASS except TBL and ...

031 smF96 TSM.sh 17p_vodsrsc_m clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ...................FAIL! rc= 10
036 smF96 TSM.sh 17p_vodsrsc_m clm_std 19981231:NONE:1800 4x5 gx3v5 48 arb_ic ...................FAIL! rc= 2
013 blCA4 TBL.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
015 blCA8 TBL.sh _sc_ds clm_urb^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
019 blNB4 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
020 smC61 TSM.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 -6 arb_ic ...............FAIL! rc= 10
021 erC61 TER.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 10+38 arb_ic ............FAIL! rc= 5
022 brC61 TBR.sh _sc_dh clm_urb^nl_urb_br 19981001:NONE:1800 1.9x2.5 gx1v5 -3+-3 arb_ic .........FAIL! rc= 5
023 blC61 TBL.sh _sc_dh clm_urb^nl_urb 19981001:NONE:1800 1.9x2.5 gx1v5 48 arb_ic ...............FAIL! rc= 4
024 smH91 TSM.sh 17p_cnnsc_dh clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 96 startup ..........FAIL! rc= 10
025 erH91 TER.sh 17p_cnnsc_dh clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 10+38 startup .......FAIL! rc= 5
026 brH91 TBR.sh 17p_cnnsc_dh clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 72+72 startup .......FAIL! rc= 5
027 blH91 TBL.sh 17p_cnnsc_dh clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 48 startup ..........FAIL! rc= 4
029 erH52 TER.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 10+38 arb_ic ...........FAIL! rc= 13
030 brH52 TBR.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 72+72 arb_ic ...........FAIL! rc= 11
031 blH52 TBL.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 48 arb_ic ..............FAIL! rc= 7

  lightning/pathscale: all PASS except TBL and ...

009 blCA4 TBL.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
013 blCA8 TBL.sh _sc_ds clm_urb^nl_urb 19971230:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
017 blOC4 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 5
019 erA91 TER.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 7
020 brA91 TBR.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -3+-3 arb_ic .......................FAIL! rc= 6
021 blA91 TBL.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -6 arb_ic ..........................FAIL! rc= 5
027 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 7
028 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 6
029 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 5
031 smH52 TSM.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 96 arb_ic ..............FAIL! rc= 10
032 erH52 TER.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 10+38 arb_ic ...........FAIL! rc= 5
033 brH52 TBR.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 72+72 arb_ic ...........FAIL! rc= 5
034 blH52 TBL.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 48 arb_ic ..............FAIL! rc= 4
036 erK51 TER.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 7
037 brK51 TBR.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 72+72 arb_ic ...............FAIL! rc= 6
001 smL51 TSM.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 96 arb_ic .........................FAIL! rc= 10
002 erL51 TER.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ......................FAIL! rc= 5
003 brL51 TBR.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ......................FAIL! rc= 5
004 blL51 TBL.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 48 arb_ic .........................FAIL! rc= 4
005 sm674 TSMtools.sh mkgriddata tools__ds singlept .............................................FAIL! rc= 6
006 sm774 TSMtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 6
007 bl774 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 4
010 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
011 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
012 erP91 TSM_ccsmseq.sh ERS f45_g35 ICN4804Q ...................................................FAIL! rc= 4

  jaguar: ALL PASS except TBL and ....

001 smA74 TSM.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 10
002 erA74 TER.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................FAIL! rc= 5
003 brA74 TBR.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................FAIL! rc= 5
013 smE32 TSM.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 64x128^360x720 USGS 48 arb_ic .........FAIL! rc= 10
014 erE32 TER.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 64x128^360x720 USGS 10+38 arb_ic ......FAIL! rc= 5
015 brE32 TBR.sh 4p_vodsrsc_dm clm_std 19981231:NONE:3600 64x128^360x720 USGS 24+24 arb_ic ......FAIL! rc= 5
017 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
018 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 10+38 arb_ic ................FAIL! rc= 5
019 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
021 smH92 TSM.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 96 startup ..........FAIL! rc= 10
022 erH92 TER.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 10+38 startup .......FAIL! rc= 5
023 brH92 TBR.sh 17p_cnnsc_dm clm_ndepdyn 19980101:NONE:1800 4x5 gx3v5@1890 72+72 startup .......FAIL! rc= 5
029 smJ05 TSM.sh 4p_casasc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v5 48 startup ....FAIL! rc= 10
030 smJ74 TSM.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -1100 arb_ic ........FAIL! rc= 10
031 erJ74 TER.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -10+-10 arb_ic ......FAIL! rc= 5
032 brJ74 TBR.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic ........FAIL! rc= 5
038 smL62 TSM.sh _sc_m clm_std 19980101:NONE:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 10
039 erL62 TER.sh _sc_m clm_std 19980101:NONE:1800 1.9x2.5 gx1v5 -5+-5 startup ...................FAIL! rc= 5
040 brL62 TBR.sh _sc_m clm_std 19980101:NONE:1800 1.9x2.5 gx1v5 -10+-10 startup .................FAIL! rc= 5

  breeze/gale/hail/gust/ifort: All PASS except TBL and...

  bangkok: All PASS except TBL and..

005 smA74 TSM.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 10
006 erA74 TER.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................FAIL! rc= 5
007 brA74 TBR.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -5+-5 arb_ic .................FAIL! rc= 5
009 smD91 TSM.sh _persc_dh clm_per 19981231:NONE:1200 4x5 gx3v5 144 startup .....................FAIL! rc= 10
010 erD91 TER.sh _persc_dh clm_per 19981231:NONE:1200 4x5 gx3v5 72+72 startup ...................FAIL! rc= 5
013 smCA4 TSM.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 10
014 erCA4 TER.sh _sc_ds clm_urb^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -45+-45 arb_ic ......FAIL! rc= 5
015 brCA4 TBR.sh _sc_ds clm_urb^nl_urb_br 19981001:NONE:3600 1x1_camdenNJ navy -10+-10 arb_ic ...FAIL! rc= 5
017 smOC4 TSM.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 10
018 erOC4 TER.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 115+115 arb_icFAIL! rc= 5
019 brOC4 TBR.sh _vansc_ds clm_urb1pt^nl_urb_br 19920812:NONE:3600 1x1_vancouverCAN navy 72+72 arb_iFAIL! rc= 5
021 smNB4 TSM.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 10
022 erNB4 TER.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 59+100 arb_icFAIL! rc= 5
023 brNB4 TBR.sh _mexsc_ds clm_urb1pt^nl_urb_br 19931201:NONE:3600 1x1_mexicocityMEX navy 72+72 arb_FAIL! rc= 5
025 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
026 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
027 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
029 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
030 smH52 TSM.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 96 arb_ic ..............FAIL! rc= 10
031 erH52 TER.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 10+38 arb_ic ...........FAIL! rc= 5
032 brH52 TBR.sh 17p_cnnsc_dm clm_std 19980115:NONE:1800 10x15 USGS@1890 72+72 arb_ic ...........FAIL! rc= 5
038 smK51 TSM.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 96 arb_ic ..................FAIL! rc= 10
039 erK51 TER.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 10+38 arb_ic ...............FAIL! rc= 5
040 brK51 TBR.sh 10p_dgvmsc_dh clm_std 19981230:NONE:1800 10x15 USGS 72+72 arb_ic ...............FAIL! rc= 5
042 smL51 TSM.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 96 arb_ic .........................FAIL! rc= 10
043 erL51 TER.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 10+38 arb_ic ......................FAIL! rc= 5
044 brL51 TBR.sh _sc_dh clm_std 19980115:NONE:1800 10x15 USGS 72+72 arb_ic ......................FAIL! rc= 5
046 smL58 TSM.sh _sc_dh clm_std^nl_crcrop 19980115:NONE:1800 10x15 USGS 96 arb_ic ...............FAIL! rc= 10
047 smL74 TSM.sh _sc_s clm_std 19980101:NONE:1800 1x1_brazil navy -10 arb_ic ....................FAIL! rc= 10
048 erL74 TER.sh _sc_s clm_std 19980101:NONE:1800 1x1_brazil navy -5+-5 arb_ic ..................FAIL! rc= 5
049 brL74 TBR.sh _sc_s clm_std 19980101:NONE:1800 1x1_brazil navy -10+-10 arb_ic ................FAIL! rc= 5
051 sm654 TSMtools.sh mkgriddata tools__ds namelist .............................................FAIL! rc= 6
052 sm853 TSMtools.sh interpinic tools__o runoptions ............................................FAIL! rc= 6
053 sm854 TSMtools.sh interpinic tools__ds runoptions ...........................................FAIL! rc= 6
057 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
Changes answers relative to baseline: Yes! Changes climate

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change (new climate)
   - configuration (CPP ifdefs): All
   - build-namelist command (or complete namelist):

   MSS location of control simulations used to validate new climate: 

      Grass optical properties: /OLESON/csm/clm36sci16_clm3_6_11shklit0_5sfc_goa

      ccsm4_0_beta05:   /CCSM/csm/b40.018
   
   URL for LMWG diagnostics output used to validate new climate: 

ccsm4_0_beta05 (with clm36sci27_clm3_6_14)

http://www.cgd.ucar.edu/cdp/mai/ccsmweb/b40.018-b40.017/setsIndex.html

http://www.cgd.ucar.edu/tss/clm/diagnostics/clm4.0_dev/clm36sci16_clm3_6_11shklit0_5sfc_goa-clm36sci16_clm3_6_11shklit0_5sfca/setsIndex.html

===============================================================
===============================================================
Tag name:  clm3_6_14
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Fri Oct 10 11:32:57 MDT 2008
One-line Summary: Fix some global urban issues, fix pftdyn, really get compile-only option working in testing

Purpose of changes: Fix column and pft averaging for urban (crtical for coupling to cam) (from Keith)
                    Fix Qanth (was wasteheat previously) (from Keith)
                    Fix so that pftdyn works (fix from Sam)
                    Really get the compile-only option working in test-suite 
                       (so that doesn't re-compile, but does re-run, when sent again)

Bugs fixed (include bugzilla ID): 826 (pftdyn)

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 830 (missing C-LAMP mods)
                                  680 (t0 precip diff for seq-ccsm), 789 (pt sims slower than offline)
                                  698 (cprnc bug gives false difference), 701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  833 (bug with cam in ccsm4_0_alpha37), 722 (threading slow)
                                  832 (problem with cice bn in ccsm4_0_alpha37)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                      652 (threads different answers with older PGI versions)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: self, oleson, slevis (Sam provided pftdyn fix, and Keith provided urban fixes)

List any svn externals directories updated (csm_share, mct, etc.): scripts and drv

  scripts to scripts4_081009
  drv     to drvseq2_0_33

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>> Change so that pftdyn will work, do urban averaging, and fix Qanth
   M   models/lnd/clm/src/main/clm_atmlnd.F90 -------------- Make averaging take into account urban (critical for global urban modeling)
   M   models/lnd/clm/src/main/histFldsMod.F90 ------------- Add urban scaling, fix Qanth
   M   models/lnd/clm/src/main/filterMod.F90 --------------- Change urban filter to include pftwgt>0
   M   models/lnd/clm/src/biogeophys/SurfaceAlbedoMod.F90 -- Change filter_vegsol to include pftwgt>0
>>>>>>>>>>> Fix so that compile-only option leaves compiled program there, doesn't recompile, but does rerun
   M   models/lnd/clm/test/system/TCB.sh
   M   models/lnd/clm/test/system/TSMncl_tools.sh
   M   models/lnd/clm/test/system/TBL.sh
   M   models/lnd/clm/test/system/TSM_ccsmseq.sh
   M   models/lnd/clm/test/system/TSMext_ccsmseq_cam.sh
   M   models/lnd/clm/test/system/TBR.sh
   M   models/lnd/clm/test/system/TCBtools.sh
   M   models/lnd/clm/test/system/test_driver.sh
   M   models/lnd/clm/test/system/TER.sh
   M   models/lnd/clm/test/system/TCT_ccsmseq.sh
   M   models/lnd/clm/test/system/TSMpergro.sh
   M   models/lnd/clm/test/system/TSMcnspinup.sh
   M   models/lnd/clm/test/system/TSMtools.sh
   M   models/lnd/clm/test/system/TSMruncase.sh
   M   models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh
   M   models/lnd/clm/test/system/CLM_runcmnd.sh
   M   models/lnd/clm/test/system/TSM.sh

Summary of testing:

  bluefire: All PASS except
071 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  jaguar: All PASS
  bangkok/lf95: All PASS except
028 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 5
054 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 6
055 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze/gale/hail/gust/ifort: All PASS

pftdyn TBL test fails, because pftdyn did not work in previous tag. 
cam and scam tests fail because of bugs 832 and 833 in ccsm4_0_alpha37

CLM tag used for the baseline comparison tests if applicable: clm3_6_13

Changes answers relative to baseline: No -- bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_6_13
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Wed Oct  1 13:33:36 MDT 2008
One-line Summary: Update to new version of cpl7 scripts and build, update externals for versions needed for clm36sci branch, add new CASA tests

Purpose of changes:  Update to new version of cpl7 scripts and build. 
                     Update externals for versions needed on clm36sci branch.
                     Add new CASA tests.
                     Add $CLM_ACCOUNT as option to test_driver.sh
                     Add single point capability to cpl7 scripts.
                     Add CLM_DEMAND, CLM_BLD_NL_OPTIONS as options to cpl7 scripts.
                     Some code changes from Keith Oleson to fix a CASA startup problem.

Code changes from Keith Oleson

1. Volumetric soil water check in BiogeophysRestMod changed so that it accounts for ponded ice/water
that may be present in surface layer. If volumetric soil water is above saturation, h2osoi_liq
and h2osoi_ice are reduced according to their proportion of total water/ice.  Both h2osoi_liq
and h2osoi_ice are limited to be no lower than watmin (currently 0.01_r8 mm).  All this done for
soil points only.

2. In SoilHydrologyMod, variable su changed to:

    su        = max(0._r8,(s1-fcov(c)) / max(0.01_r8,1._r8-fcov(c))

to account for the fact that fcov could be one and hence divide by zero could have occurred.
Also, the factor "1._r8" multiplying fcov in the numerator was removed.

3. watmin made a global parameter available from clm_varcon

Bugs fixed (include bugzilla ID): 805 (too much output in build-streams), 801 (G95 in csm_Share),
                                  786 (dshr_map bug), 834 (CASA startup bug), 

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 
                                  680 (t0 precip diff for seq-ccsm), 
                                  698 (cprnc bug gives false difference), 701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  826 (pftdyn), 833 (bug with cam in ccsm4_0_alpha37)
                                  832 (problem with cice bn in ccsm4_0_alpha37)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                      652 (threads different answers with older PGI versions)

Describe any changes made to build system: Update to new ccsm4_0_alpha37 scripts

	New options in cpl7 scripts: CLM_DEMAND, CLM_BLD_NL_OPTIONS

              CLM_DEMAND: List of output variables to require be set in namelist
                          For example, set to "furbinp" to use urban grid.
              CLM_BLD_NL_OPTIONS: List of options to pass to clm build-namelist.

        New grid in cpl7 scripts: pt1_pt1 (also set CLM_PT1_NAME) for single point sims

        Add ability to set "none" in clm build-namelist -clm_dmand option.

Quickstart to new cpl7 scripts...

     New cpl7 namelists now do two things for you.
         - Add a ton of error checking at each step -- so it won't let you do something you  aren't allowed to
         - Only show you the variables that you could actually set in your case.

     To accomplish this we use XML files rather than cshell env files. But, the
     operation sequence is similar with options only changed slightly.

         cd scripts
         ./create_newcase -help      # get help on how to run create_newcase
         ./create_newcase -case testI -mach bluefire -res f19_g15 -compset I    # create new "I" case for bluefire at 1.9x2.5_gx1v5 res
                                     # "I" case is clm active, datm7, and inactive ice/ocn
         cd testI
         ./xmlchange -help           # Get help on editor for XML files 
         ./xmlchange <options> env_conf.xml env_mach_pes  # Edit configure files if needed
         configure -case             # create scripts
         ./xmlchange <options> env_build.xml              # Edit build files if needed
         testI.build                 # build model and create namelists
         ./xmlchange <options> env_run.xml                # Edit run files if needed
         bsub < testI.run            # submit script  
                                     # (NOTE: edit env_run.xml to set RESUBMIT to number of times to automatically resubmit)

     Note that the -skip_rundb option to create_newcase no longer needs the argument of "NONE".
     Syntax of create_tests changed to only one form.

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: erik, oleson and dlawren (source code changes)

List any svn externals directories updated (csm_share, mct, etc.): drv, csm_share, datm7, and scripts

  csm_share, datm7 and scripts include changes required for the clm36sci branch.

     scripts   to scripts4_080930
     drv       to drvseq2_0_32
     datm7     to datm7_080926
     csm_share to share3_080929

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

>>>>>>>>> Add $CLM_ACCOUNT env var, change tests around, update to ccsm4_0_alpha37
          add some more CASA tests.
M  models/lnd/clm/test/system/README
M  models/lnd/clm/test/system/tests_pretag_bluefire
M  models/lnd/clm/test/system/tests_pretag_jaguar
M  models/lnd/clm/test/system/tests_posttag_kraken
M  models/lnd/clm/test/system/tests_posttag_hybrid_regression
M  models/lnd/clm/test/system/tests_posttag_purempi_regression
M  models/lnd/clm/test/system/test_driver.sh ------------------ Add $CLM_ACCOUNT env var
                                                                update to ccsm4_0_alpha37
M  models/lnd/clm/test/system/input_tests_master -------------- Add CASA 1.9x2.5 tests
M  models/lnd/clm/test/system/TSMext_ccsmseq_cam.sh ----------- Separate call to cice bn
M  models/lnd/clm/test/system/TCT_ccsmseq.sh
M  models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh ----------- Need to set threads/tasks
M  models/lnd/clm/test/system/TSM.sh -------------------------- Remove old namelist name

>>>>>>>>>>>>>> Update for new scripts
M  models/lnd/clm/bld/clm.cpl7.template ----------------------- Straighten out clm_demand
                               Add new env vars. Remove prestaging.
M  models/lnd/clm/bld/namelist_files/namelist_definition.xml -- Update to alpha37
M  models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml- Add file for clm36sci branch
M  models/lnd/clm/bld/build-namelist -------------------------- Allow clm_demand to include none.

>>>>>>>>>>>>>> These are Keith's changes to fix bug 834. They do make it possible for
               answers to change, but in most cases they don't. It allows code to
               startup correctly for situations it might fail in, and sets a mininum
               value in SoilHydrologyMod to guard against divide by zero. This would
               change answers when amount of ice -- fcov > 0.99 -- which would be rare.
M  models/lnd/clm/src/main/clm_varcon.F90
M  models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90
M  models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90

Summary of testing:

  bluefire: All PASS except
042 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
043 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
044 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
045 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
P
046 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
079 blL61 TBL.sh _sc_h clm_std 19980101:NONE:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 7
083 blL62 TBL.sh _sc_m clm_std 19980101:NONE:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 7
107 brJ74 TBR.sh 4p_casasc_ds clm_std 10001230:NONE:3600 1x1_tropicAtl test -3+-3 arb_ic ........FAIL! rc= 11
127 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  kraken: All PASS except all TER and TBR tests fail, because of a script problem and ends early
  lightning/pathscale: All PASS except
022 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
023 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
024 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
025 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
026 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
050 erP11 TSM_ccsmseq.sh ERS T31_g35 ICN4804 ....................................................FAIL! rc= 5
  bangkok/lf95: All PASS except
025 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
026 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
027 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
028 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 4
029 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
054 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48 .......................FAIL! rc= 6
055 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  breeze/gale/hail/gust/ifort: All PASS

pftdyn tests fail because of previous problem (bug 826). ext_ccsmseq_ tests fail 
because of problem with ccsm4_0_alpha37 (bug 833).

CLM tag used for the baseline comparison tests if applicable: clm3_6_12

Changes answers relative to baseline: Only for some cases, see tests 079 and 083 on
bluefire above

===============================================================
===============================================================
Tag name:  clm3_6_12
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Sun Sep 21 10:04:22 MDT 2008
One-line Summary: Fix restarts for urban, add capability to do global urban experiments, add new forcing height changes, remove cpl6

Purpose of changes: Fix restarts for urban model as well as adding capability to do global urban experiments.
                    It also adds the new forcing height changes into the trunk.
                    And we remove all the cpl6 #ifdef's, source codes, and associated scripts and script options.
                    Also fix some memory leaks found in MCT.
                    Add testing for kraken.
                    Fix branch tests so they change the start_ymd.
                    Add some more tests for CASA.
                    Set minimum urban percentage to use from 5% to 1%.
                    Completely remove COUP_CAM #ifdef as NOT needed anymore.

Bugs fixed (include bugzilla ID):  Fix urban model restarts, remove cpl6 (755), MCT memory leak (825)

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 
                                  680 (t0 precip diff for seq-ccsm), 
                                  698 (cprnc bug gives false difference), 701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  805 (too much output in build-streams), 826 (pftdyn)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                      652 (threads different answers with older PGI versions)

Describe any changes made to build system: Add nofire option to configure, remove cpl6 option

Describe any changes made to the namelist: Add new urban oriented output history variables:

   _U, and _R (Urban and Rural) for:
        QRUNOFF, TREFMXAV, TREFMNAV, TSA, SoilAlpha, TG, Q2M, TREFAV
   URBAN_AC, and URBAN_HEAT, Qanth, SWup, LWup, QTau, HWR, Wind, Qair
   and  ZBOT_PFT for forcing height

   Change build-namelist so that to use a dataset with urban points on it you 
   need to use "-clm_demand furbinp". This way it will not only select the appropriate
   furbinp dataset -- but it will select the correct surface dataset that includes
   urban data on it.  Such as for 10x15 and 1.9x2.5 surface datasets where there is
   now an urban version as well as the standard version.
  

List any changes to the defaults for the boundary datasets: Add urbanc point dataset, 
     and 1.9x2.5 and 10x15 urban datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self (some changes by Keith Oleson)

List any svn externals directories updated (csm_share, mct, etc.): drv, datm7, mct

  drv   to drvseq3_0_26
  datm7 to datm7_080907
  mct   to MCT2_5_1_080522

List all files eliminated: Remove cpl6 files

R      models/lnd/clm/test/system/TCText_ccsmcon.sh
R      models/lnd/clm/test/system/TSMext_ccsmcon.sh
R      models/lnd/clm/bld/clm.cpl6.template
R      models/lnd/clm/src/main/program_csm.F90
R      models/lnd/clm/src/main/clm_csmMod.F90

List all files added and what they do:

A      models/lnd/clm/test/system/config_files/4p_casasc_ds ----- Add serial test for CASA
A      models/lnd/clm/test/system/nl_files/clm_urb -------------- For standard urban tests.
A      models/lnd/clm/test/system/nl_files/nl_urb_br ------------ Urban namelist for branch tests.
A      models/lnd/clm/test/system/tests_posttag_kraken ---------- Add tests for kraken
A      models/lnd/clm/tools/ncl_scripts/generate_ascii_avg_fv1_9x2_5_urbanparam_file_p7.ncl -- script to create furbinp dataset
A      models/lnd/clm/tools/mksurfdata/mksurfdata.globalurban --- Example namelist to make a global urban surface dataset
A      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.txt --- Add urban intercomparison test case

List all existing files that have been modified, and describe the changes:

>>>>>>>>>>>>>>> Remove cpl6 option, add nofire, make urban point datasets consistent with global Feddema datasets
M      models/lnd/clm/bld/configure -------------------------------- Remove cpl6 option, add nofire option
M      models/lnd/clm/bld/queryDefaultNamelist.pl ------------------ Add -filenameonly option
M      models/lnd/clm/bld/urban_input/metropolis_fluxes.txt
M      models/lnd/clm/bld/urban_input/urbanc_alpha_fluxes.txt
M      models/lnd/clm/bld/urban_input/asphaltjungle_fluxes.txt
M      models/lnd/clm/bld/urban_input/mexicocityMEX_fluxes.txt
M      models/lnd/clm/bld/urban_input/vancouverCAN_fluxes.txt
M      models/lnd/clm/bld/config_files/config_definition.xml
M      models/lnd/clm/bld/namelist_files/namelist_definition.xml
M      models/lnd/clm/bld/namelist_files/datm.streams.template.xml
M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml
M      models/lnd/clm/bld/build-namelist --------------------------- Have urban surface datasets dependent on furbinp

M      models/lnd/clm/test/system/README.testnames
M      models/lnd/clm/test/system/tests_posttag_urban
M      models/lnd/clm/test/system/tests_pretag_jaguar
M      models/lnd/clm/test/system/tests_pretag_bluefire
M      models/lnd/clm/test/system/tests_posttag_purempi_regression
M      models/lnd/clm/test/system/tests_posttag_hybrid_regression
M      models/lnd/clm/test/system/tests_pretag_bluevista
M      models/lnd/clm/test/system/tests_posttag_lightning
M      models/lnd/clm/test/system/nl_files/clm_urb1pt
M      models/lnd/clm/test/system/input_tests_master
M      models/lnd/clm/test/system/README
M      models/lnd/clm/test/system/CLM_runcmnd.sh
M      models/lnd/clm/test/system/TBR.sh ---------------------- Change so start_ymd of branch runs is initial-length after original start-date
M      models/lnd/clm/test/system/test_driver.sh -------------- Reduce from premium to regular, add kraken
M      models/lnd/clm/test/system/mknamelist ------------------ Set hist_* values for second file
M      models/lnd/clm/test/system/nl_files/nl_crcrop ---------- Set hist_dens for second file
M      models/lnd/clm/test/system/nl_files/nl_urb ------------- Set hist_dens for second file, add more fields to list
M      models/lnd/clm/test/system/nl_files/nl_std ------------- Set hist_dens for second file
M      models/lnd/clm/test/system/nl_files/nl_lfiles ---------- Set hist_dens for second file
M      models/lnd/clm/test/system/input_tests_master ---------- Change TBR tests, add more CASA tests

M      models/lnd/clm/tools/mksurfdata/mkurban.F90 ------------ Change threshold to ignore urban from 5% to 1%

M      models/lnd/clm/src/biogeophys/FrictionVelocityMod.F90 -- For DUST fix forcing height appropriately
M      models/lnd/clm/src/biogeophys/UrbanMod.F90 ------------- Don't set pointers if no urban points

>>>>>>>>>>>>>>>> Remove COUP_CSM #ifdefs

M      models/lnd/clm/src/main/driver.F90 --------- Also make sure urban calls have urban points
M      models/lnd/clm/src/main/accFldsMod.F90
M      models/lnd/clm/src/main/clmtypeInitMod.F90
M      models/lnd/clm/src/main/initializeMod.F90
M      models/lnd/clm/src/main/iniTimeConst.F90
M      models/lnd/clm/src/main/histFileMod.F90
M      models/lnd/clm/src/main/restFileMod.F90
M      models/lnd/clm/src/main/controlMod.F90
M      models/lnd/clm/src/main/initSurfAlbMod.F90
M      models/lnd/clm/src/main/clm_time_manager.F90
M      models/lnd/clm/src/main/clm_varctl.F90
M      models/lnd/clm/src/main/subgridAveMod.F90
M      models/lnd/clm/src/main/initGridCellsMod.F90
M      models/lnd/clm/src/main/spmdMod.F90
M      models/lnd/clm/src/main/surfrdMod.F90 ------------- Also remove COUP_CAM #ifdef
M      models/lnd/clm/src/main/do_close_dispose.F90
M      models/lnd/clm/src/main/clmtype.F90 --------------- Also forcing height changes
M      models/lnd/clm/src/main/histFldsMod.F90
M      models/lnd/clm/src/main/mkarbinitMod.F90
M      models/lnd/clm/src/biogeophys/BalanceCheckMod.F90
M      models/lnd/clm/src/biogeophys/SoilTemperatureMod.F90
M      models/lnd/clm/src/biogeophys/UrbanInputMod.F90
M      models/lnd/clm/src/biogeophys/Biogeophysics1Mod.F90 ------ Also forcing height changes
M      models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90
M      models/lnd/clm/src/biogeophys/UrbanInitMod.F90
M      models/lnd/clm/src/biogeophys/Hydrology2Mod.F90
M      models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90 ------ Also forcing height changes
M      models/lnd/clm/src/biogeophys/BiogeophysRestMod.F90 --------- Fix restarts for urban
M      models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90
M      models/lnd/clm/src/biogeophys/BareGroundFluxesMod.F90
M      models/lnd/clm/src/biogeophys/CanopyFluxesMod.F90

Summary of testing:

  bluefire: All PASS except TBL and
042 smG41 TSM.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
043 erG41 TER.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
044 brG41 TBR.sh 17p_sc_dh clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
046 smG45 TSM.sh 17p_sc_h clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
  jaguar: All PASS except TBL and
019 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
  kraken: All PASS except TBL and TER and TBR (this may be a setup problem) and
017 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
  lightning/pathscale: All PASS except TBL and
  bangkok/lf95: All PASS except TBL and
025 smG42 TSM.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ..................FAIL! rc= 10
026 erG42 TER.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
027 brG42 TBR.sh 17p_sc_dm clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic ................FAIL! rc= 5
029 smG46 TSM.sh 17p_sc_m clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...................FAIL! rc= 10
  kraken: All PASS except TBL and
017 smG43 TSM.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 144 arb_ic ...........
.......FAIL! rc= 10
018 erG43 TER.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 10+38 arb_ic .........
.......FAIL! rc= 13
019 brG43 TBR.sh 17p_sc_do clm_pftdyn 10001230:NONE:1800 10x15 USGS 72+72 arb_ic .........
.......FAIL! rc= 5
  breeze/gale/hail/gust/ifort: All PASS

   pftdyn tests fail on all platforms -- due to a previous problem that was not 
detected because of a bug in the test.
   TER and TBR tests fail on kraken -- this may be a setup problem. Possibily a problem
with newcprnc? I'm not sure but since it passes elsewhere, I don't think it's a problem
in the code.

CLM tag used for the baseline comparison tests if applicable: clm3_6_11

Changes answers relative to baseline: Forcing height changes cause answers to change

===============================================================
===============================================================
Tag name:  clm3_6_11
Originator(s):  dlawren (Lawrence David 1384 CGD)
Date: Tue Aug 26 21:53:22 MDT 2008
One-line Summary: Ice stream for snow capped regions

Purpose of changes: Split liquid and ice runoff streams in snow capped situations

Bugs fixed (include bugzilla ID):  None

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 
                                  680 (t0 precip diff for seq-ccsm), 
                                  698 (cprnc bug gives false difference), 701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  805 (too much output in build-streams)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                      652 (threads different answers with older PGI versions)

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Update version of pft-physiology file used

Describe any substantial timing or memory changes: None

Code reviewed by: erik

List any svn externals directories updated (csm_share, mct, etc.): scripts and csm_share

   scripts    to scripts4_080731
   csm_share  to share3_080801

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      models/lnd/clm/bld/namelist_files/namelist_defaults_clm.xml --- Use the same pft-phisiology file for every option
M      models/lnd/clm/src/main/clmtypeInitMod.F90
M      models/lnd/clm/src/main/pft2colMod.F90
M      models/lnd/clm/src/main/clmtype.F90
M      models/lnd/clm/src/main/histFldsMod.F90
M      models/lnd/clm/src/main/models/lnd/clm/src/main/clm_time_manager.F90 -- Hack for fake Gregorian calendar
M      models/lnd/clm/src/riverroute/RtmMod.F90 --------------- two runoff sreams, liq and ice (qflx_snwcp_ice)
M      models/lnd/clm/src/biogeophys/Biogeophysics2Mod.F90 ---- dew snwcp
M      models/lnd/clm/src/biogeophys/Hydrology1Mod.F90 -------- snow and rain split for snwcp
M      models/lnd/clm/src/biogeophys/SoilHydrologyMod.F90 ----- liq snwcp 
M      models/lnd/clm/src/biogeophys/Hydrology2Mod.F90 -------- qrgwl minus snwcp_ice
M      models/lnd/clm/src/biogeophys/HydrologyLakeMod.F90 ----- lake snwcp
M      models/lnd/clm/src/biogeophys/BiogeophysicsLakeMod.F90 - initialize snwcp fields to zero for lakes
M      models/lnd/clm/src/biogeophys/BalanceCheckMod.F90 ------ revised balance check
      >>>>>>>>>> Get scam test working
M      models/lnd/clm/test/system/TSMext_ccsmseq_cam.sh
M      models/lnd/clm/test/system/nl_files/scam
M      models/lnd/clm/test/system/TSCext_ccsmseq_scam.sh
M      models/lnd/clm/test/system/config_files/scam_ds
M      models/lnd/clm/test/system/config_files/ext_ccsm_seq_64x128_s
M      models/lnd/clm/test/system/nl_files/scam
M      models/lnd/clm/test/system/nl_files/scam_prep

Summary of testing:

  bluefire: All PASS except TBL tests
  lightning/pathscale: All PASS except TBL tests
  bangkok/lf95: All PASS except TBL tests
  breeze/gale/hail/gust/ifort: All PASS

  Didn't test on jaguar -- since it was down.

CLM tag used for the baseline comparison tests if applicable: clm3_6_10

Changes answers relative to baseline: Yes -- pft-physiology file, RTM changes

===============================================================
===============================================================
Tag name:  clm3_6_10
Originator(s):  tcraig
Date: Fri Aug 15 09:05:50 MDT 2008
One-line Summary: extend rtm tracer, ascale for tri-grids, AIX O3 to O2

Purpose of changes: extend rtm to handle multiple tracers.  added
  second tracer to rtm associated with frozen water.  first tracer
  is now liquid water.  both are passed to cpl7 now via the roff and
  ioff fields.

  add ascale field to land model in support of model running on it's
  own grid.  ascale is a field provided by the coupler to the land model 
  via the driver "domain" datatype.  it is needed to correct fluxes
  in the land model for conservation.  it is being applied to the
  land to rtm fluxes and will need to be fully validated in a ccsm4
  tri-grid configuration which is still under development.

  change AIX optimization from -O3 to -O2 at request of LMWG.  not
  needed for these changes in particular.  see bug #812.

Bugs fixed (include bugzilla ID): 812

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 
                                  680 (t0 precip diff for seq-ccsm), 
                                  698 (cprnc bug gives false difference), 701 (svn keyword)
                                  717 (archiving bug -- only archive 1000 files at a time)
                                  805 (too much output in build-streams)
                                 1079 (rpointer file updated with clm.i files)
                                 1083 (Units of NEE exported should be kg CO2 NOT kg C)
    http://bugs.cgd.ucar.edu/

Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                      652 (threads different answers with older PGI versions)

Describe any changes made to build system:
  change AIX -O3 to -O2 at request of LMWG, incorporated
  into tag for convenience.

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes:  
  added extra rtm tracer, should have no noticable impact on timing
  or memory.

Code reviewed by: tcraig

List any svn externals directories updated (csm_share, mct, etc.):

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

M      bld/config_files/Makefile.in
M      src/main/clmtypeInitMod.F90
M      src/main/pft2colMod.F90
M      src/main/clm_atmlnd.F90
M      src/main/clm_csmMod.F90
M      src/main/lnd_comp_mct.F90
M      src/main/domainMod.F90
M      src/main/clmtype.F90
M      src/main/histFldsMod.F90
M      src/riverroute/RtmMod.F90
M      src/riverroute/RunoffMod.F90
M      src/biogeophys/Biogeophysics2Mod.F90
M      src/biogeophys/Hydrology1Mod.F90
M      src/biogeophys/SoilHydrologyMod.F90

- change AIX -O3 to -O2
- add ascale implementation.  add asca field to domain datatype, set
  for atm and lnd domains.  default is 1.0.  received from coupler
  in first run call.  reset in lnd only if atm and lnd domain are same.
- split qflx_snowcap term into qflx_snowcap_rain and qflx_snowcap_snow.
  snowcap_rain term is same implementation as old snowcap term.
  snowcap_snow is set to zero now.  potential future mods are noted
  and commented out, search for tcx_snowcap_new in src code.
- implement multiple tracers extensibility in rtm.  add frozen
  runoff tracer in addition to liquid runoff tracer.
- set roff and ioff runoff terms in lnd_comp_mct to send back to coupler
- update rtm restart file, support backward compatability by setting
  runoff tracers to zero if the new fields are not on the restart file.
- update history file for new rtm tracers.  requires individual fields
  to be copied from tracer arrays to single field arrays for history
  interface.  
	
Summary of testing:

  bluefire: all PASS except
     073 blL61 TBL.sh _sc_h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup
     077 blL62 TBL.sh _sc_m clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup
     085 blL74 TBL.sh _sc_s clm_std 19980101:6-HOURLY:1800 1x1_brazil navy -10 arb_ic
     087 blL78 TBL.sh _sc_s clm_std 19971231:NONE:1800 1x1_brazil navy -10 arb_ic
       the above 4 bl cases FAIL due to -O3 to -O2 optimzation change
     113 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3
       sm984 fails due to inconsistent driver in test
  jaguar: all PASS except
     038 erP65 TSM_ccsmseq.sh ERS f19_g13 I
     039 erP15 TSM_ccsmseq.sh ERS T31_g35 ICN
     040 erP66 TSM_ccsmseq.sh ERH f19_g13 I
     041 erP16 TSM_ccsmseq.sh ERH T31_g35 ICN
     042 erP67 TSM_ccsmseq.sh ERB f19_g13 I
     043 erP17 TSM_ccsmseq.sh ERB T31_g35 ICN
       erP* tests fail due to script error
  bangkok/lf95: all PASS except
     046 sm952 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dh ext_ccsm_seq_cam 48
     047 sm984 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3
       sm952 and sm984 fail due to inconsistent driver in test
  breeze/gale/hail/gust/ifort: all PASS

  bluefire cam pretag: all PASS except previously documented failures
  bluefire ccsm4 pretag: all PASS except previously documented failures
    compare with alpha33 FAILS since rtm not bit-for-bit in some tests.

CLM tag used for the baseline comparison tests if applicable: clm3_6_09

Changes answers relative to baseline: 
  change of AIX -O3 to -O2 changes some results by what ap.........FAIL! rc= 7
061 smK17 TSM.sh 10p_dgvmsc_h clm_std 19981231:NONE:1800 48x96 gx3v5 -213 arb_ic ................FAIL! rc= 10
065 blK71 TBL.sh 10p_dgvmsc_s clm_std 19971231:NONE:1800 1x1_brazil navy -670 arb_ic ............FAIL! rc= 5
088 smL83 TSM.sh _sc_dh clm_std 19980115:DAILY:3600 5x5_amazon navy -10 arb_ic ..................FAIL! rc= 10
089 erL83 TER.sh _sc_dh clm_std 19980115:DAILY:3600 5x5_amazon navy -5+-5 arb_ic ................FAIL! rc= 5
090 brL83 TBR.sh _sc_dh clm_std 19980115:DAILY:3600 5x5_amazon navy -10+-10 arb_ic ..............FAIL! rc= 6
091 blL83 TBL.sh _sc_dh clm_std 19980115:DAILY:3600 5x5_amazon navy -10 arb_ic ..................FAIL! rc= 4
095 bl711 TBLtools.sh mksurfdata tools__ds namelist .............................................FAIL! rc= 7
097 bl771 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 7
  lightning/pathscale:
------>>>>>>> Bug 694
011 er111 TER.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
012 br111 TBR.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 24+24 arb_ic ..............FAIL! rc= 11
025 smE13 TSM.sh 4p_vodsrsc_do clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 10
026 erE13 TER.sh 4p_vodsrsc_do clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ............FAIL! rc= 5
027 brE13 TBR.sh 4p_vodsrsc_do clm_std 19981231:YEARLY:1800 48x96 gx3v5 24+24 arb_ic ............FAIL! rc= 5
029 smE16 TSM.sh 4p_vodsrsc_o clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ................FAIL! rc= 10
  lightning/ifort:
004 blA91 TBL.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 5
008 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 5
------>>>>>>> Bug 694
010 sm111 TSM.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 10
011 er111 TER.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 5
012 br111 TBR.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 24+24 arb_ic ..............FAIL! rc= 5
013 bl111 TBL.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 4
014 sm114 TSM.sh 4p_vodsr_h clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 10
016 erE11 TER.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ............FAIL! rc= 13
017 brE11 TBR.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 24+24 arb_ic ............FAIL! rc= 11
018 blE11 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 5
  tempest:
009 smB11 TSMruncase.sh .........................................................................FAIL! rc= 4
------>>>>>>> Bug 694
011 er111 TER.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
012 br111 TBR.sh 4p_vodsr_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 24+24 arb_ic ..............FAIL! rc= 11
036 erE31 TER.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 10+38 arb_ic ....FAIL! rc= 7
037 brE31 TBR.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 24+24 arb_ic ....FAIL! rc= 6
045 smH01 TSM.sh 17p_cnnsc_h clm_std^nl_lfiles 19800101:NONE:1800 0.47x0.63 gx1v5@2000 48 startup FAIL! rc= 10

CLM tag used for the baseline comparison tests if applicable: clm3_5_19

Changes answers relative to baseline: Bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_5_19
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Thu Mar  6 14:52:17 MST 2008
One-line Summary: Change directory structure to mimic CCSM, fix so no NaNS on BGC interpinic output, new half degree CN clmi dataset

Purpose of changes: move cdir1_clm3_5_18 to trunk.  Get directory structure to look like CCSM.

    models ------------------------------ Model source code for each component
    models/lnd 
    models/lnd/clm ---------------------- CLM source code, build-scripts, tools, and testing
    models/lnd/clm/test/system ---------- CLM test scripts
    models/lnd/clm/tools ---------------- CLM tools
    models/lnd/clm/tools/mksurfdata
    models/lnd/clm/tools/ncl_scripts
    models/lnd/clm/tools/interpinic
    models/lnd/clm/tools/mkgriddata
    models/lnd/clm/tools/mkdatadomain
    models/lnd/clm/tools/cprnc
    models/lnd/clm/bld ------------------ CLM build scripts
    models/lnd/clm/bld/run-ibm.csh ------    sample CLM run script for the IBM
    models/lnd/clm/bld/urban_input
    models/lnd/clm/bld/usr.src
    models/lnd/clm/bld/perl5lib
    models/lnd/clm/doc ------------------ CLM documentation
    models/lnd/clm/doc/UsersGuide
    models/lnd/clm/doc/CodeReference
    models/lnd/clm/doc/Dev
    models/lnd/clm/src ------------------ CLM specific source code directories
    models/lnd/clm/src/biogeochem
    models/lnd/clm/src/main
    models/lnd/clm/src/riverroute
    models/lnd/clm/src/biogeophys
    models/ocn/socn --------------------- stub ocean model
    models/ice
    models/ice/sice --------------------- stub sea-ice model
    models/atm
    models/atm/datm7 -------------------- data atmosphere model
    models/atm/datm7/bld
    models/utils ------------------------ Utiltiies
    models/utils/esmf_wrf_timemgr -------    ESMF WRF time-manager API
    models/utils/timing -----------------    timing utiltities
    models/utils/mct --------------------    Model Coupling Toolkit
    models/utils/pio --------------------    Parallel I/O
    models/drv -------------------------- Sequential CCSM source code
    models/drv/seq_mct
    models/drv/seq_mct/driver
    models/csm_share -------------------- CCSM share code (shared between CCSM component models)
    scripts ----------------------------- CCSM build, run and testing scripts
    scripts/README ----------------------    ReadMe file on CCSM scripts
    doc --------------------------------- CCSM documentation (currently out of date)

    Changes so that interpinic doesn't output NaNS on AIX compiler for CN configuration.

    QUICKSTART: using the new CPL7 scripts:

         cd scripts
         ./create_newcase            # get help on how to run create_newcase
         ./create_newcase -case testI -mach blueice -res f19_g15 -compset I    # create new "I" case for blueice at 1.9x2.5_gx1v5 res
                                     # "I" case is clm active, datm7, and inactive ice/ocn
         cd testI
         configure -mach blueice     # create scripts
         testI.build                 # build model and create namelists
         bsub < testI.run            # submit script  
                                     # (NOTE: edit env_run to set RESUBMIT to number of times to automatically resubmit)

Bugs fixed (include bugzilla ID): 681 (archiving/resub), 696 (save datm7 files) , 707 (xlf90 bug with CAM)

Known bugs (include bugzilla ID): 251 (TwoStream), 672 (3.5.4-3.5.14 diffs), 680 (t0 precip diff for seq-ccsm), 
                                  694 (restarts for offline) , 697 (version etc.), 698 (cprnc bug), 701 (svn keyword), 
                                  708, (xlf bug on bluevista)
    http://bugs.cgd.ucar.edu/

    New bugs found: 708 -- bug with new xlf90 compiler on bluevista for CASA
                    710 -- Some variables are NaNS on clm.i output from CN configuration

    Known bugs that will NOT be resolved: 512 (mksurf on PGI), 546(interpinic for DGVM), 
                                          652 (threads different answers with older PGI versions)

Describe any changes made to build system: Changed to work with new directory structure
   (also works with any wildcard in clm "models/lnd/clm*" directory name)

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: Update half degree CN clmi file

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.): drv (also add in CCSM doc and scripts directories as externals)
    doc_060127, seqmct45_scripts_080108, drvseq2_0_10

List all files eliminated: Files moved around extensively

List all files added and what they do: Files moved around extensively

List all existing files that have been modified, and describe the changes: Files moved around extensively

   models/lnd/clm/bld/DefaultCLM_INPARM_Namelist.xml --- change CN half degree clmi file 
   models/lnd/clm/bld/clm.cpl6.template ---------------- change assumed paths (use wildcard for models/lnd/clm*)
   models/lnd/clm/bld/clm.cpl7.template ---------------- change assumed paths (use wildcard for models/lnd/clm*)
   models/lnd/clm/bld/configure ------------------------ get to work in new directory structure
   models/lnd/clm/bld/run-ibm.csh ---------------------- fix archiving, and resubmit
   models/lnd/clm/bld/run-lightning.csh ---------------- fix archiving, and resubmit
   models/lnd/clm/bld/run-pc.csh ----------------------- fix archiving, and resubmit
   models/lnd/clm/src/main/clm_time_manager.F90 -------- make save statements explicit
   models/lnd/clm/tools/*/Makefile --------------------- change so CLM_ROOT is top of directory structure with 
                                                         models/lnd/clm* assumed below
   models/lnd/clm/tools/interpinic/interpinic.F90 ------ get numrad dimsize, on AIX check for NaNS and convert to spval,
                                                         if weights == 0 set values to spval
   models/lnd/clm/test/system/test_driver.sh ----------- new directory structure, update to ccsm3_9_beta03 and ccsm4_0_alpha25
   models/lnd/clm/test/system/TBL.sh ------------------- new directory structure
   models/lnd/clm/test/system/TBLtools.sh -------------- new directory structure
   models/lnd/clm/test/system/TSMncl_tools.sh ---------- new directory structure
   models/lnd/clm/test/system/TBR.sh ------------------- new directory structure
   models/lnd/clm/test/system/TER.sh ------------------- new directory structure
   models/lnd/clm/test/system/TSM.sh ------------------- new directory structure
   models/lnd/clm/test/system/TSMpergro.sh ------------- new directory structure
   models/lnd/clm/test/system/TSMtools.sh -------------- new directory structure
   models/lnd/clm/test/system/TSMcnspinup.sh ----------- new directory structure
   models/lnd/clm/test/system/TCBext_ccsmseq_cam.sh ---- new directory structure
   models/lnd/clm/test/system/TCBtools.sh -------------- new directory structure
   models/lnd/clm/test/system/TCText_ccsmcon.sh -------- new directory structure, add blueice

Summary of testing:

  bluevista: All PASS except
052 smJ11 TSM.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 4
053 erJ11 TER.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 10+38 arb_ic ...............FAIL! rc= 5
054 brJ11 TBR.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 24+24 arb_ic ...............FAIL! rc= 5
102 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
      CAM tests: All PASS except:
060 sm711 TSM.sh h5x8adm adia 9s ..................................FAIL! rc= 6
  blueice: 
     CPL7 test_scripts: ERS.f19_g15.I.blueice, ERB.f19_g15.I.blueice, ERS.f45_g35.I.blueice 
FAIL  ERB.f19_g15.I.blueice
     CPL6 test_scripts: PASS ERT_OS.f19_g15.I.blueice PASS  ERH_OS.T31_g35.ICN.blueice
  jaguarcnl: All PASS
  lightning: All PASS except
019 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
  bangkok/lf95: All PASS except
18 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
052 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  tempest: All PASS

CLM tag used for the baseline comparison tests if applicable: ccsm4_alpha25 with clm3_5_18 in place of default clm

Changes answers relative to baseline: No bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_5_18
Originator(s):  erik (Erik Kluzek)
Date: Thu Feb 21 22:57:39 MST 2008
One-line Summary: Update to latest seq-ccsm4.alpha tag

Purpose of changes: Get clm trunk to work with latest ccsm4.alpha24 tag

Bugs fixed (include bugzilla ID): 678 (get clm to work with latest cpl7)

Known bugs (include bugzilla ID): 251, 512, 546, 652, 672, 675, 676, 680, 
        681, 694, 696, 697, 698, 701, 702, 707, 708
    http://bugs.cgd.ucar.edu/

  New bugs: 697-- username,version,hostname NOT in seq-driver namelists
            707-- bug on new xlf90 compiler on bluevista for running with CAM
            708-- bug on new xlf90 compiler on bluevista for running with CASA

Describe any changes made to build system: minor change in configure script
  name of mode ext_cam changed to ext_ccsm_seq in configure script

Describe any changes made to the namelist: Sequential driver namelists change

ccsm_inparm namelist changes to seq_infodata_inparm 
   (remove restart_override, username, version, hostname)
timemgr_inparm namelist changes to seq_timemgr_inparm
   (remove restart_overrideTMG, stop_final_ymd [use stop_ymd instead] )

List any changes to the defaults for the boundary datasets: 
    Add 2.65x3.33 datasets, newer 1x1_brazil domain file

Describe any substantial timing or memory changes: None

Code reviewed by: mvertens (original version on seq branch)

List any svn externals directories updated (csm_share, mct, etc.): 

drv, datm7, sice, socn, csm_share_, and mct

src/drv	      drvseq2_0_07
src/datm7     drva_datm7_070824_tags/drva07_datm7_071129
src/sice      stubs1_0_7
src/socn      stubs1_0_7
src/csm_share drva_share3_070903_tags/loga25_share3_071107
src/utils/mct seqa_MCT2 _3_0_070524_tags/seqa07_MCT2_4_2_071026

List all files eliminated: None

List all files added and what they do:

A  +   bld/ExtSeqCCSMDrvInNamelistsDescriptions.xml -- for moving drv_in namelist items
A  +   bld/clm.cpl7.template ------------------------- for running with cpl7

List all existing files that have been modified, and describe the changes:

------------- Get external CAM tests working, and with changes to seq-ccsm
M      test/system/TSMext_ccsmseq_cam.sh
M      test/system/test_driver.sh
M      test/system/tests_posttag_hybrid_regression
M      test/system/tests_posttag_purempi_regression
M      test/system/nl_files/scam
M      test/system/nl_files/scam_prep
M      test/system/nl_files/ext_ccsm_seq_cam
M      test/system/TSM.sh

------------- Now need clm_varpar.F90 in tools
M      tools/mksurfdata/Srcfiles
M      tools/mkgriddata/Srcfiles

------------- Add ext_ccsm_seq, add 2.65x3.33 datasets, change for new seq-ccsm namelists
              switch 1x1_brazil domain file
M      bld/configure
M      bld/DefaultCLM_INPARM_Namelist.xml
M      bld/run-ibm.csh
M      bld/clm_inparm.pm
M      bld/DefaultTIMEMGR_INPARM_Namelist.xml
M      bld/sample.seqccsm.namelists
M      bld/run-pc.csh
M      bld/timemgr_inparm.pm
M      bld/DefaultCCSM_INPARM_Namelist.xml
M      bld/drv_in.pm
M      bld/run-lightning.csh
M      bld/mkSrcfiles
M      bld/SeqCCSM_namelist.pm
M      bld/ccsm_inparm.pm
M      bld/SeqCCSMDrvInNamelistsDescriptions.xml
M      bld/DefaultDATM_DSHR_NML_Namelist.xml

------------- Don't allow seq_ccsm datatypes to go below lnd_comp_mct, fix scam
M      src/main/clm_comp.F90 ------------- Remove SyncClock, CCSMInit
M      src/main/driver.F90 --------------- Remove SyncClock, CCSMInit
M      src/main/decompInitMod.F90 -------- Use endrun rather than shr_sys_abort
M      src/main/ncdio.F90 ---------------- fixes for scam
M      src/main/atmdrvMod.F90 ------------ remove unneeded printing
M      src/main/clmtypeInitMod.F90 ------- explicit use only's
M      src/main/initializeMod.F90 -------- remove CCSMInit and EClock
M      src/main/controlMod.F90 ----------- move initialization to timemgr/clm_varctl 
                                           set methods
M      src/main/clm_time_manager.F90 ----- Make namelist input private, add set method
M      src/main/clm_varctl.F90 ----------- Add set and initialization methods
M      src/main/clm_varorb.F90 ----------- Remove values not needed
M      src/main/lnd_comp_mct.F90 --------- Update to new structures/logic
                                           On time-step 0 also advance to time-step 1
M      src/main/program_off.F90 ---------- Move orbital info/dtime to this level
M      src/main/spmdMod.F90 -------------- Change print format
M      src/biogeophys/UrbanInputMod.F90 -- Initialize filename

Summary of testing:

  bluevista:
004 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 5
008 blA91 TBL.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 5
011 blD91 TBL.sh _persc_ds clm_per 19981231:YEARLY:1200 4x5 gx3v5 144 arb_ic ....................FAIL! rc= 5
014 blG71 TBL.sh 17p_sc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic .........FAIL! rc= 5
016 blH71 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic ......FAIL! rc= 5
021 blE11 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 5
026 blF27 TBL.sh 17p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ..............FAIL! rc= 5 
031 blE31 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 48 arb_ic
.......FAIL! rc= 5 
034 blCA1 TBL.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
036 blNB1 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
040 blG41 TBL.sh 17p_sc_dh clm_pftdyn 10001230:MONTHLY:1800 10x15 USGS 48 arb_ic ................FAIL! rc= 5
046 blH11 TBL.sh 17p_cnnsc_dh clm_std 19980101:MONTHLY:1800 48x96 gx3v5@1890 48 arb_ic ..........FAIL! rc= 5
050 blH52 TBL.sh 17p_cnnsc_dm clm_std 19980115:MONTHLY:1800 10x15 USGS@1890 48 arb_ic ...........FAIL! rc= 5
052 smJ11 TSM.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 4 <<<< bug 708
053 erJ11 TER.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 10+38 arb_ic ...............FAIL! rc= 5 <<<< bug 708
054 brJ11 TBR.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 24+24 arb_ic ...............FAIL! rc= 5 <<<< bug 708
055 blJ11 TBL.sh 4p_casasc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 4
059 blK11 TBL.sh 10p_dgvmsc_dh clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 5
064 blK71 TBL.sh 10p_dgvmsc_s clm_std 19971231:NONE:1800 1x1_brazil navy -670 arb_ic ............FAIL! rc= 5
068 blL53 TBL.sh _sc_dh clm_std^nl_crcrop 19980115:MONTHLY:1800 10x15 USGS 24 arb_ic ............FAIL! rc= 5
072 blL63 TBL.sh _sc_h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup ..................FAIL! rc= 5
076 bl563 TBL.sh _h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 5
080 blL52 TBL.sh _sc_ds clm_std 19980115:MONTHLY:1800 10x15 USGS 24 arb_ic ......................FAIL! rc= 5
084 blL73 TBL.sh _sc_s clm_std 19980101:6_HOURLY:1800 1x1_brazil navy -10 arb_ic ................FAIL! rc= 5
089 blL83 TBL.sh _sc_dh clm_std 19980115:DAILY:3600 5x5_amazon navy -10 arb_ic ..................FAIL! rc= 5
101 sm921 TSMext_ccsmseq_cam.sh ext_ccsm_seq_4x5_dh ext_ccsm_seq_cam 48 .........................FAIL! rc= 4 <<<<< bug 707
102 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4 <<<<<< bug 707
  CAM tests all PASS except
060 sm711 TSM.sh h5x8adm adia 9s ..................................FAIL! rc= 6
062 sc001 TSC.sh e64bfbiop scm_prep scm64bfbiop scm_b4b_o1 7s .....FAIL! rc= 5

First was a Build-namelist error, next was core-dump.

  tempest:
004 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 5
007 blD91 TBL.sh _persc_ds clm_per 19981231:YEARLY:1200 4x5 gx3v5 144 arb_ic ....................FAIL! rc= 5
010 blE11 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 5
014 blA92 TBL.sh _sc_dm clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 5
016 blG71 TBL.sh 17p_sc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic .........FAIL! rc= 5
018 blH71 TBL.sh 17p_cnnsc_ds clm_pftdyn 10001230:NONE:3600 1x1_tropicAtl test -100 arb_ic ......FAIL! rc= 5
  lightning/pathscale:
004 blA91 TBL.sh _sc_dh clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 5
008 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 5
011 blCA1 TBL.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
013 blCA2 TBL.sh _sc_ds clm_std^nl_urb 19971231:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
015 blNB1 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
017 blOC1 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 5
019 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13 <<<< bug 694
026 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:MONTHLY:1800 10x15 USGS 48 arb_ic ................FAIL! rc= 5
031 blH52 TBL.sh 17p_cnnsc_dm clm_std 19980115:MONTHLY:1800 10x15 USGS@1890 48 arb_ic ...........FAIL! rc= 5
035 blK51 TBL.sh 10p_dgvmsc_dm clm_std 19981231:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 5
039 blL51 TBL.sh _sc_dh clm_std 19980115:MONTHLY:1800 10x15 USGS 48 arb_ic ......................FAIL! rc= 5
043 blL53 TBL.sh _sc_dh clm_std^nl_crcrop 19980115:MONTHLY:1800 10x15 USGS 24 arb_ic ............FAIL! rc= 5
047 blL73 TBL.sh _sc_s clm_std 19980101:6_HOURLY:1800 1x1_brazil navy -10 arb_ic ................FAIL! rc= 5
  jaguarcnl:
008 blA92 TBL.sh _sc_dm clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 7
012 blE12 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 7
016 blE32 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 48 arb_ic .......FAIL! rc= 7
020 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:MONTHLY:1800 10x15 USGS 48 arb_ic ................FAIL! rc= 7
024 blH12 TBL.sh 17p_cnnsc_dm clm_std 19980101:MONTHLY:1800 48x96 gx3v5@1890 48 arb_ic ..........FAIL! rc= 7
028 blJ12 TBL.sh 4p_casasc_dm clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 7
  bangkok/lf95:
004 blA92 TBL.sh _sc_dm clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 7
008 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 7
011 blD91 TBL.sh _persc_ds clm_per 19981231:YEARLY:1200 4x5 gx3v5 144 arb_ic ....................FAIL! rc= 7
014 blCA2 TBL.sh _sc_ds clm_std^nl_urb 19971231:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 7
016 blOC1 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 7
018 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13 <<<<<< 694
025 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:MONTHLY:1800 10x15 USGS 48 arb_ic ................FAIL! rc= 7
030 blH52 TBL.sh 17p_cnnsc_dm clm_std 19980115:MONTHLY:1800 10x15 USGS@1890 48 arb_ic ...........FAIL! rc= 7
034 blJ12 TBL.sh 4p_casasc_dm clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 7
038 blK51 TBL.sh 10p_dgvmsc_dm clm_std 19981231:NONE:1800 10x15 USGS 48 arb_ic ..................FAIL! rc= 7
042 blL51 TBL.sh _sc_dh clm_std 19980115:MONTHLY:1800 10x15 USGS 48 arb_ic ......................FAIL! rc= 7
047 blL73 TBL.sh _sc_s clm_std 19980101:6_HOURLY:1800 1x1_brazil navy -10 arb_ic ................FAIL! rc= 7
052 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4

TBL _sc tests fail because of addition of area-corrected fluxes and addition of running
  time-step 1 when time-step 0 is done on initialization.
er111/112 tests fail due to previous bug 694
sm921/982 test fail on bluevista due to new bug 707 on (compiler bug on bluevista)

CLM tag used for the baseline comparison tests if applicable: clm3_5_17

Changes answers relative to baseline: Yes -- greater than roundoff

  Summarize any changes to answers, i.e.,
    - what code configurations: Any mode with sequential-CCSM
    - what platforms/compilers: ALL
    - nature of change: larger than roundoff

Fluxes in driver are corrected by ratio's of area's from different components.
Also at time-step 0 you also run time-step 1 -- rather than just time-step 0.

===============================================================
===============================================================
Tag name:  clm3_5_17
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Wed Feb  6 10:10:17 MST 2008
One-line Summary: Merge Tony Craig's FMI branch fmi12_clm3_5_16 to the clm trunk

Purpose of changes: Reducing the debug level in some initialization routines, fixing a few diagnostics, 
        updating timers, improve the write_diagnostic performance, update of rtm init to improve scaling and performance.

Bugs fixed (include bugzilla ID): 597

Known bugs (include bugzilla ID): 251, 512, 546, 652, 672, 675, 676, 680, 681, 694, 696, 698, 701, 702
    http://bugs.cgd.ucar.edu/

    New bugs found: datm7 restart files NOT being archived (696), cprnc found to have problems (698),
    version autoinsertion in tools (701), test_driver times out on jaguar (702)

Describe any changes made to build system: Add BUILDPIO CPP variable

Describe any changes made to the namelist: Add new namelist variables dealing with PIO (see below)

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: erik,tcraig

List any svn externals directories updated (csm_share, mct, etc.): pio to pio11_prod

List all files eliminated: None

List all files added and what they do: None

List all existing files that have been modified, and describe the changes:

M      doc/UpDateChangeLog.pl ----------------- Tweak update of date to work correctly for both files
M      bld/run-frost.csh ---------------------- Tony gets working, add PIO build as commented out, turn querys off, put files
                                                in explicitly, tests new ncd_ options
M      src/biogeochem/STATICEcosysDynMod.F90 -- Add timers
M      src/main/clm_comp.F90 ------------------ Add timers
M      src/main/driver.F90 -------------------- Add timers, add barrier for diagnostics write, change send/recv into reduce (leave option for old code)
M      src/main/decompInitMod.F90 ------------- Reduce debug level for initialization
M      src/main/initializeMod.F90 ------------- Add timers
M      src/main/histFileMod.F90 --------------- PIO option
M      src/main/ncdio.F90 --------------------- Work for PIO, new options
M      src/main/gen_ncdio_global_subs.csh ----- Work for PIO, new options
M      src/main/gen_ncdio_local_subs.csh ------ Work for PIO, new options
M      src/main/controlMod.F90 ---------------- Add new namelist items

History experimental options (mostly for PIO which isn't fully implemented yet)

     o hist_pioflag           = logical true if want to turn on hist with pio                    [.FALSE., .TRUE.]
     o ncd_lowmem2d           = logical true if want to turn on low memory 2d writes in clm hist [.TRUE., .FALSE.]
     o ncd_pio_def            = logical true if want default pio use setting                     [.FALSE., .TRUE.]
     o ncd_pio_UseRearranger  = logical true if want to use MCT as Rearranger                    [.TRUE., .FALSE.]
     o ncd_pio_UseBoxRearr    = logical true if want to use box as Rearranger                    [.FALSE., .TRUE.]
     o ncd_pio_SerialCDF      = logical true if want to write with pio serial netcdf mode        [.FALSE., .TRUE.]
     o ncd_pio_IODOF_rootonly = logical true if want to write history in pio from root only      [.FALSE., .TRUE.]
     o ncd_pio_DebugLevel     = integer pio debug level                                          ( default 2)
     o ncd_pio_num_iotasks    = integer number of iotasks to use for PIO                         (default all PEs)

M      src/main/clm_varctl.F90 ----------------- New ncd and PIO history options
M      src/main/program_off.F90 ---------------- Add mpi barrier
M      src/main/areaMod.F90 -------------------- Improve performance/robustness
M      src/main/clm_mct_mod.F90 ---------------- Use pelocs
M      src/riverroute/RtmMod.F90 --------------- Add timers, update of rtm init to improve scaling and performance
M      test/system/test_driver.sh -------------- Fix for new account names on jaguar/phoenix

Summary of testing:

  bluevista: All PASS except
021 blE11 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 7
026 blF27 TBL.sh 17p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ..............FAIL! rc= 7
031 blE31 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 48 arb_ic .......FAIL! rc= 7
101 sm921 TSMext_ccsmseq_cam.sh ext_ccsm_seq_4x5_dh ext_ccsm_seq_cam 48 .........................FAIL! rc= 4
102 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  jaguarcnl: All PASS except
012 blE12 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 7
016 blE32 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 48 arb_ic .......FAIL! rc= 7
  bangkok/lf95: All PASS except
018 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
020 bl112 TBL.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 7
051 sm951 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dm ext_ccsm_seq_cam 48 .......................FAIL! rc= 4
052 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  lightning/pathscale: All PASS except
019 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13
021 bl112 TBL.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 7
  tempest:  All PASS except
010 blE11 TBL.sh 4p_vodsrsc_dh clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 7

er112, bl112, sm921, sm951, sm982 tests failed previously
other bl tests fail because of the changes in RTM

CLM tag used for the baseline comparison tests if applicable: clm3_5_16

Changes answers relative to baseline: Only RTM

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: RTM
    - what platforms/compilers: All
    - nature of change: Roundoff change

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? Only fields with RTM show differences and only to roundoff level

 RMS DVOLRDT_ 8.8031E-22
 RMS DVOLRDT_ 3.4573E-23
 RMS QCHANR   3.6282E-16
 RMS QCHOCNR  5.4893E-17

The above is on bluevista after running for a day (other fields show RMS difference of zero)

===============================================================
===============================================================
Tag name:  clm3_5_16
Originator(s):  erik (Erik Kluzek)
Date: Mon Jan 28 15:00:53 MST 2008
One-line Summary: Get point version of Urban code onto trunk (urban code can not restart)

Purpose of changes: Move urban branch onto trunk. Fix bug so hv files are saved. Add
   high resolution datasets from Art Mirin.

   Urban code was started by Gordon Bonan, and taken up by Mariana Vertenstein and Keith Oleson.
   This represents work that has been ongoing for several years. Revision dates go back to
   before 2003.

   Some papers on the work are available from:

   Oleson et.-al. Journal of Applied Meteorology and Climatology, in-Press as of Jan/2008

   http://www.cgd.ucar.edu/tss/staff/oleson/publications/JAMC1597_rev_jul27_2007.pdf
   http://www.cgd.ucar.edu/tss/staff/oleson/publications/JAMC1598_rev_jul27_2007.pdf

Bugs fixed (include bugzilla ID): 644 (save hv files)

Known bugs (include bugzilla ID): 251, 512, 546, 652, 672, 675, 676, 680, 681, 694
    http://bugs.cgd.ucar.edu/

    New bug found from clm3_5_15 (694) -- restarts are NOT bit-for-bit on lightning and bangkok/lf95 for offline

Describe any changes made to build system: None

Describe any changes made to the namelist: Added furbinp -- for urban datasets

List any changes to the defaults for the boundary datasets: Added more urban datasets.
      Add 0.23x0.31 datasets from Art Mirin.

Describe any substantial timing or memory changes: Approx 1% slower, memory should be very close

Code reviewed by: oleson

List any svn externals directories updated (csm_share, mct, etc.): bld/archiving
    bld/archiving to scripts_080108

List all files eliminated: None

List all files added and what they do:

------ Urban point input datasets (ASCII)
A bld/urban_input/asphaltjungle_fluxes.txt
A bld/urban_input/metropolis_fluxes.txt
A bld/urban_input/mexicocityMEX_fluxes.txt
A bld/urban_input/vancouverCAN_fluxes.txt
----- Main urban source codes
A src/biogeophys/UrbanInitMod.F90
A src/biogeophys/UrbanInputMod.F90
A src/biogeophys/UrbanMod.F90
----- Add testing for urban code
A test/system/tests_posttag_urban ------ List of urban point tests
A test/system/nl_files/clm_urb1pt ------ Namelist options for CLM1PT datasets
A test/system/nl_files/nl_urb ---------- Urban namelist
A test/system/config_files/_mexsc_ds --- Mexicocity, MEX
A test/system/config_files/_vansc_ds --- Vancouver, CAN
----- Add tool to convert Urban point datasets to sequential-CCSM mode for datm7
A tools/ncl_scripts/convertUrbanOffline2Seq.ncl

List all existing files that have been modified, and describe the changes:

-------- Add in urban datasets to build-namelist
M bld/configure ---------------------------- Move subroutine definition to before first reference
M bld/datm_dshr_in.pm
M bld/clm_inparm.pm
M bld/datm.streams.template.xml ------------ Add in CLM1PT datasets for Urban
M bld/DefaultTIMEMGR_INPARM_Namelist.xml
M bld/DefaultSettings.xml
M bld/DefaultDATM_DSHR_NML_Namelist.xml
M bld/DefaultCLM_INPARM_Namelist.xml
M bld/timemgr_inparm.pm
M bld/run-pc.pm ---------------------------- Remove extra line, set mode in configure, add note about step=coupling step
M bld/run-ibm.pm --------------------------- Add note about step=coupling step
M bld/run-lightning.pm --------------------- Add note about step=coupling step
-------- source code changes to add in urban code
-------- mostly adding urban and non-urban filters
M src/biogeochem/DGVMMod.F90 --------------- Add urban filters
M src/main/atmdrvMod.F90 ------------------- Add RH and rainf, zero out solar if coszen<0, Urban pt CPPs 
M src/main/clm_varcon.F90 ------------------ Add PI, RGAS, SECSPDAY, urban PFT types, urban ponding depth
M src/main/clm_varpar.F90 ------------------ Add maxpatch_urb for 5 PFT's
M src/main/clm_atmlnd.F90 ------------------ Fill RH and rainf
M src/main/clmtype.F90 --------------------- Add urban state data
M src/main/clmtypeInitMod.F90 -------------- Initialize urban state data
M src/main/controlMod.F90 ------------------ Add furbinp namelist item for urban input data
M src/main/driver.F90 ---------------------- Pass urban filters, call urban modules
M src/main/filterMod.F90 ------------------- Add urban filters
M src/main/histFileMod.F90 ----------------- Add scale types needed for urban which needs to calculate area-averages based on urban input
M src/main/histFldsMod.F90 ----------------- Add new output fields: 

        BUILDHEAT     heat flux from urban building interior to walls and roof            W/m^2  active
        LWdown        atmospheric longwave radiation                                      W/m^2
        PSurf         surface pressure                                                    Pa
        Qh            sensible heat                                                       W/m^2
        Qle           total evaporation                                                   W/m^2
        Qstor         storage heat flux (includes snowmelt)                               W/m^2
        RH            atmospheric relative humidity                                       %
        Rainf         atmospheric rain                                                    mm/s
        Rnet          net radiation                                                       W/m^2
        SWdown        atmospheric incident solar radiation                                W/m^2
        TBUILD        internal urban building temperature                                 K      active
        TRAFFICFLUX   sensible heat flux from urban traffic                               W/m^2  active
        Tair          atmospheric air temperature                                         K
        WASTEHEAT     sensible heat flux from heating/cooling sources of urban waste heat W/m^2  active

(Fields not mentioned above as active are set to inactive unless asked for. They are "ALMA" variables needed for
 an urban model intercomparision project.)

M src/main/iniTimeConst.F90 ---------------- Initialize urban data
M src/main/initGridCellsMod.F90 ------------ Add initialization of urban landunits
M src/main/initSurfAlbMod.F90 -------------- Call urban albedo calc
M src/main/initializeMod.F90 --------------- Urban initialization
M src/main/lnd_comp_mct.F90 ---------------- Add saturation vapor calc to compute RH
M src/main/mkarbinitMod.F90 ---------------- Initialize urban state
M src/main/pftvarcon.F90 ------------------- Fix typo
M src/main/program_off.F90 ----------------- Pass declination angle from orbit to atmdrv (so solar can be nullified for coszen<0)
M src/main/subgridAveMod.F90 --------------- Setup grid info for urban
M src/main/subgridMod.F90 ------------------ Set urban landunit
M src/main/surfrdMod.F90 ------------------- Initialize urban weights -- remove old code that aborted if urban fraction>0
M src/biogeophys/BalanceCheckMod.F90 ------- Incoming rain does NOT include sun or shade wall, some checks only non-urban
M src/biogeophys/Biogeophysics1Mod.F90 ----- Take into account type of urban column
M src/biogeophys/Biogeophysics2Mod.F90 ----- Take into account type of urban column
M src/biogeophys/FrictionVelocityMod.F90 --- Change index and filters
M src/biogeophys/Hydrology1Mod.F90 --------- Take into account no water flow through urban buildings and impervious road
M src/biogeophys/Hydrology2Mod.F90 --------- Send urban filters down, and no water flow in certain urban column types
M src/biogeophys/SnowHydrologyMod.F90 ------ Urban similar to bare-soil landunit
M src/biogeophys/SoilHydrologyMod.F90 ------ Determine ponding limits for urban roof and impervious road, no runoff for sun/shade wall
M src/biogeophys/SoilTemperatureMod.F90 ---- Take into account that urban columns interact
M src/biogeophys/SurfaceAlbedoMod.F90 ------ Filter urban columns appropriately
M src/biogeophys/SurfaceRadiationMod.F90 --- Filter urban columns out
---------- Make MPI and OpenMP settings explicit in configuration files
M test/system/config_files/17p_vodsr_dm
M test/system/config_files/17p_vodsr_do
M test/system/config_files/4p_casa_m
M test/system/config_files/4p_casa_o
M test/system/config_files/17p_vodsr_m
M test/system/config_files/17p_vodsr_o
M test/system/config_files/4p_vodsr_dm
M test/system/config_files/17p_cnn_m
M test/system/config_files/4p_vodsr_do
M test/system/config_files/17p_cnn_o
M test/system/config_files/17p_cnn_dm
M test/system/config_files/17p_cnn_do
M test/system/config_files/10p_dgvm_m
M test/system/config_files/4p_casa_dm
M test/system/config_files/10p_dgvm_o
M test/system/config_files/4p_casa_do
M test/system/config_files/10p_dgvm_dm
M test/system/config_files/README
M test/system/config_files/10p_dgvm_do
M test/system/config_files/4p_vodsr_m
M test/system/config_files/4p_vodsr_o
---------- Add urban tests to testing system
M test/system/input_tests_master
M test/system/README.testnames
M test/system/mknamelist
M test/system/test_driver.sh
M test/system/tests_posttag_bangkok
M test/system/tests_posttag_blueice
M test/system/tests_posttag_lightning
M test/system/tests_posttag_hybrid_regression
M test/system/tests_posttag_purempi_regression
M test/system/tests_pretag_bangkok
M test/system/tests_pretag_bluevista
---------- Put options on separate lines, explicitly set source
M test/system/nl_files/clm_pftdyn
M test/system/nl_files/clm_per
M test/system/nl_files/clm_per0
M test/system/nl_files/clm_std
---------- Add note about need of other directories to build
M tools/ncl_scripts/README ---------------------- Also add note about new script
M tools/mksurfdata/README
M tools/ncl_scripts/README
M tools/interpinic/README
M tools/mkgriddata/README
M tools/mkdatadomain/README


Summary of testing:

  bluevista: All PASS except
034 blCA1 TBL.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
036 blNB1 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
076 bl563 TBL.sh _h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 7
101 sm921 TSMext_ccsmseq_cam.sh ext_ccsm_seq_4x5_dh ext_ccsm_seq_cam 48 .........................FAIL! rc= 4
102 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  tempest:   ALL PASS
  jaguarcnl: All PASS except TBL tests which fail because of a problem with the previous version on jaguar.
004 blA71 TBL.sh _sc_ds clm_std 19990101:NONE:3600 1x1_brazil navy -10 arb_ic ...................FAIL! rc= 4
008 blA92 TBL.sh _sc_dm clm_std 19990101:NONE:3600 4x5 gx3v5 -10 arb_ic .........................FAIL! rc= 5
012 blE12 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic ...............FAIL! rc= 5
016 blE32 TBL.sh 4p_vodsrsc_dm clm_std 19981231:YEARLY:1800 64x128^360x720 USGS 48 arb_ic .......FAIL! rc= 5
020 blG42 TBL.sh 17p_sc_dm clm_pftdyn 10001230:MONTHLY:1800 10x15 USGS 48 arb_ic ................FAIL! rc= 5
024 blH12 TBL.sh 17p_cnnsc_dm clm_std 19980101:MONTHLY:1800 48x96 gx3v5@1890 48 arb_ic ..........FAIL! rc= 5
028 blJ12 TBL.sh 4p_casasc_dm clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic ..................FAIL! rc= 5
032 blK12 TBL.sh 10p_dgvmsc_dm clm_std 19981231:NONE:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 5
  bangkok/lf95: All PASS except
014 blCA2 TBL.sh _sc_ds clm_std^nl_urb 19971231:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
016 blOC1 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 5
018 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13 <<<<
020 bl112 TBL.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 7
051 sm951 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dm ext_ccsm_seq_cam 48 .......................FAIL! rc= 4
052 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4

  lightning/pathf90: All PASS except
011 blCA1 TBL.sh _sc_ds clm_std^nl_urb 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic ..........FAIL! rc= 5
013 blCA2 TBL.sh _sc_ds clm_std^nl_urb 19971231:NONE:3600 1x1_asphaltjungleNJ navy -90 arb_ic ...FAIL! rc= 5
015 blNB1 TBL.sh _mexsc_ds clm_urb1pt^nl_urb 19931201:NONE:3600 1x1_mexicocityMEX navy 159 arb_ic FAIL! rc= 5
017 blOC1 TBL.sh _vansc_ds clm_urb1pt^nl_urb 19920812:NONE:3600 1x1_vancouverCAN navy 330 arb_ic FAIL! rc= 5
019 er112 TER.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 10+38 arb_ic ..............FAIL! rc= 13 <<<<
021 bl112 TBL.sh 4p_vodsr_dm clm_std 19981231:YEARLY:1800 48x96 gx3v5 48 arb_ic .................FAIL! rc= 7


Urban TBL point tests do NOT pass because previous model version didn't have urban enabled.
cam standalone tests require the ccsm4_alpha series version of clm.
<<<<< Tests are the 694 bug found in clm3_5_15.


CLM tag used for the baseline comparison tests if applicable: clm3_5_15

Changes answers relative to baseline: None  bit-for-bit
   (except albedo's will be different when running in offline mode see below)

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: All mode=offline
    - what platforms/compilers: All
    - nature of change: Solar now set to zero when coszen<0, which influences
        some non-common instances near twilight when the dataset shows solar>0
        but coszen<0. It doesn't change the model results -- because everything is
        reflected anyway, but it will change how albedo is averaged over those periods.

===============================================================
===============================================================
Tag name:  clm3_5_15
Originator(s):  erik (Erik Kluzek)
Date: Fri Dec 21 20:33:01 MST 2007
One-line Summary: Fix interpinic for half degree grid, add in large-file support, allow configure to work with ccsm directory structure

Purpose of changes:

Change configure so it will work with the ccsm4_alpha directory structure (especially for
the test suite). Add in large-file support for main code as well as tools (mksurfdata). 
Add in tests for create_croplandunit and large-file support. Get interpinic to work for 
half degree, and optimize and verify it's use of Open-MP. Add tool to interpolate
Nitrogen deposition files (ndepregrid.ncl). Update run scripts with suggestions from Sam
(and fix a couple of minor bugs).

interpinic problem: Previous version may have incorrectly found nearest points for PFT data.
  Data would have been valid -- but possibly NOT from the nearest point.
  There was also a potential Open-MP problem where answers could change depending on the 
  number of threads used. The new version corrects both of these problems. The new version
  should be used to interpolate critical datasets.

Bugs fixed (include bugzilla ID): 656 (interpinic), 660 (large-file), 674 (diff -q in run script), 679 (testing task/thread change)

Known bugs (include bugzilla ID): 251, 512, 546, 652, 664, 672, 675, 676
    http://bugs.cgd.ucar.edu/

Describe any changes made to build system: Remove mpi include/lib for jaguarcnl
 (as already included with the ftn command)

  Make ccsm_seq	-- the default way to run.

Describe any changes made to the namelist: Add outnc_large_files option

 outnc_large_files --- TRUE => use NetCDF 64-bit large file format for output files
                       (history and restart files)

 The NetCDF 64-bit large file format became available in NetCDF3.6.0 and allows larger dimensions as well as allowing
 output files > 2 GBytes. For more info. on Large File Support (LFS) for NetCDF see...

	http://www.unidata.ucar.edu/software/netcdf/docs/faq.html#lfs

 Since, file offsets are stored with 64-bit words rather than 32-bit words -- file sizes may change slightly with LFS.

List any changes to the defaults for the boundary datasets:

	Added in new clmi files:

+<finidat RESOLUTION="0.47x0.63"  mask="gx1v5" BGC="cn" ic_ymd="19800101"
+ic_tod="0">lnd/clm2/initdata/clmi.BCN.1980-01-01-00000.071207.nc
+<finidat RESOLUTION="1.9x2.5"   mask="gx1v5" BGC="none" ic_ymd=     "101" ic_tod="0">lnd/clm2/initdata/clmi.F_0000-01-01_1.9x2.5_gx1v5_c071203.nc
+<finidat RESOLUTION="1.9x2.5"   mask="gx1v5" BGC="none" ic_ymd=     "901" ic_tod="0">lnd/clm2/initdata/clmi.F_0000-09-01_1.9x2.5_gx1v5_c071203.nc

	Added in ndep files at half degree

+<fndepdat RESOLUTION="0.47x0.63" BGC="cn" sim_year="2100" >lnd/clm2/ndepdata/ndep_clm_2100_0.47x0.63_c071213.nc</fndepdat>
+<fndepdat RESOLUTION="0.47x0.63" BGC="cn" sim_year="2000" >lnd/clm2/ndepdata/ndep_clm_2000_0.47x0.63_c071213.nc</fndepdat>
+<fndepdat RESOLUTION="0.47x0.63" BGC="cn" sim_year="1890" >lnd/clm2/ndepdata/ndep_clm_1890_0.47x0.63_c071213.nc</fndepdat>
+<fndepdyn RESOLUTION="0.47x0.63" BGC="cn" >lnd/clm2/ndepdata/fndep_clm_1890-2100_0.47x0.63_c071213.nc</fndepdyn>

        Add documentation and delete extra variables from T42 base ndep datasets

+<fndepdat RESOLUTION="64x128"    BGC="cn" sim_year="2100" >lnd/clm2/ndepdata/ndep_clm_2100_64x128_c071221.nc</fndepdat>
+<fndepdat RESOLUTION="64x128"    BGC="cn" sim_year="2000" >lnd/clm2/ndepdata/ndep_clm_2000_64x128_c071221.nc</fndepdat>
+<fndepdat RESOLUTION="64x128"    BGC="cn" sim_year="1890" >lnd/clm2/ndepdata/ndep_clm_1890_64x128_c071221.nc</fndepdat>

	Added in urban testing dataset

+<fsurdat RESOLUTION="1x1_camdenNJ"  >lnd/clm2/surfdata/surfdata_1x1pt_camdenNJ_navy_070824.nc</fsurdat>
+<fatmgrid RESOLUTION="1x1_camdenNJ"  >lnd/clm2/griddata/griddata_1x1pt_camdenNJ_navy_070824.nc</fatmgrid>
+<fatmlndfrc RESOLUTION="1x1_camdenNJ"  mask="navy">lnd/clm2/griddata/fracdata_1x1pt_camdenNJ_navy_070824.nc


Describe any substantial timing or memory changes: None

Code reviewed by:  slevis (interpinic, run-ibm.csh), 
                   thornton (ndepregrid.ncl, outnc_large_files option)

List any svn externals directories updated (csm_share, mct, etc.):
  perl5lib to perl5lib_071204 which includes new Decomp module.

List all files eliminated: None

List all files added and what they do:

Add files for testing different tool configurations and ncl scripts, and for testing of 
create_crop_landunit, large_file support, and an urbin test. Also change offline configuration
files so they have offline explicitly set as the mode.

A  +   test/system/config_files/tools__ds
A  +   test/system/config_files/tools__o
A  +   test/system/TSMncl_tools.sh
A  +   test/system/nl_files/nl_crcrop
A  +   test/system/nl_files/nl_std
A  +   test/system/nl_files/nl_lfiles

Add ncl script to regrid Nitrogen deposition files

A  +   tools/ncl_scripts
A  +   tools/ncl_scripts/README
A  +   tools/ncl_scripts/ndepregrid.ncl
A  +   tools/mkgriddata/mkgriddata.ccsm_dom  ------ add sample script for using CCSM domain files

List all existing files that have been modified, and describe the changes:


	Testing system updates...

M      test/system/config_files/*  <-- offline configure files -- explicitly set offline mode
M      test/system/config_files/README
M      test/system/tests_posttag_spot1
M      test/system/tests_pretag_jaguar
M      test/system/README.testnames
M      test/system/tests_pretag_bangkok
M      test/system/TCBtools.sh
M      test/system/test_driver.sh
M      test/system/mknamelist
M      test/system/tests_posttag_hybrid_regression
M      test/system/tests_posttag_purempi_regression
M      test/system/tests_pretag_tempest
M      test/system/tests_pretag_bluevista
M      test/system/tests_posttag_blueice
M      test/system/input_tests_master
M      test/system/README
M      test/system/TSMtools.sh
M      test/system/TCBext_ccsmseq_cam.sh
M      test/system/tests_posttag_lightning
M      test/system/TBLtools.sh
M      test/system/TSM.sh

	Update tools makefile and change svn keyword strings

M      tools/mksurfdata/mkvarctl.F90
M      tools/mksurfdata/README
M      tools/mksurfdata/mkfileMod.F90
M      tools/mksurfdata/mksrfdat.F90
M      tools/mksurfdata/Makefile
M      tools/interpinic/interpinic.F90
M      tools/interpinic/Srcfiles
M      tools/interpinic/Makefile
M      tools/mkgriddata/creategridMod.F90
M      tools/mkgriddata/Makefile
M      tools/mkdatadomain/Makefile
M      tools/README

M      bld/configure ---------------------- changes to work with ccsm4.alpha directory structure, and jaguarcnl
M      bld/DefaultCLM_INPARM_Namelist.xml - Add new datasets
M      bld/Makefile.in -------------------- changes needed for jaguarcnl and Darwin
M      bld/scpDefaultNamelist.pl ---------- extend to work with ndep files
       Make changes to run scripts -- move section of things to change to top
       Remove stuff not used. Add more documentation. Add suggestions from Sam Levis.
M      bld/run-ibm.csh -------------------- remove -q option to diff 
M      bld/run-lightning.csh -------------- add bit about comparing rpointer files to see if advancing from run-ibm.csh
M      bld/run-pc.csh --------------------- add bit about comparing rpointer files to see if advancing from run-ibm.csh

	Add large-file support

M      src/biogeochem/CASAMod.F90
M      src/biogeochem/DGVMMod.F90
M      src/main/ncdio.F90
M      src/main/restFileMod.F90
M      src/main/controlMod.F90
M      src/main/clm_varctl.F90

Summary of testing:

  tempest: All PASS
  bluevista: All PASS, except
033 smEA1 TSM.sh _sc_ds clm_std 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic .................FAIL! rc= 10 --> Urban not active yet
034 blEA1 TBL.sh _sc_ds clm_std 19981001:NONE:3600 1x1_camdenNJ navy -90 arb_ic .................FAIL! rc= 4 ---> Urban not active yet
066 blL53 TBL.sh _sc_dh clm_std^nl_crcrop 19980115:MONTHLY:1800 10x15 USGS 24 arb_ic ............FAIL! rc= 5 ---> New test
070 blL63 TBL.sh _sc_h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup ..................FAIL! rc= 7 ---> New clmi file
074 bl563 TBL.sh _h clm_std 19980101:MONTHLY:1800 1.9x2.5 gx1v5 -10 startup .....................FAIL! rc= 7 ---> New clmi file
092 bl711 TBLtools.sh mksurfdata tools__ds namelist .............................................FAIL! rc= 4 ---> Test changed
094 bl771 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 4 ---> Test changed
099 sm921 TSMext_ccsmseq_cam.sh ext_ccsm_seq_4x5_dh ext_ccsm_seq_cam 48 .........................FAIL! rc= 4
100 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4
  jaguarcnl: ALL PASS, except TBL tests because previous code didn't run on jaguar with recent changes
  lightning: ALL PASS, except
035 blL53 TBL.sh _sc_dh clm_std^nl_crcrop 19980115:MONTHLY:1800 10x15 USGS 24 arb_ic ............FAIL! rc= 5 ---> New test
042 bl771 TBLtools.sh mksurfdata tools__ds singlept .............................................FAIL! rc= 5 ---> New test
  bangkok/lf95: All PASS, except
047 sm951 TSMext_ccsmseq_cam.sh ext_ccsm_seq_10x15_dm ext_ccsm_seq_cam 48 .......................FAIL! rc= 4
048 sm982 TSCext_ccsmseq_scam.sh ext_ccsm_seq_64x128_s scam_prep scam_ds scam 3 .................FAIL! rc= 4

  CAM tests fail because of incomptabilities of csm_share code.

CLM tag used for the baseline comparison tests if applicable: clm3_5_14

Changes answers relative to baseline: None -- bit-for-bit

===============================================================
===============================================================
Tag name:  clm3_5_14
Originator(s):  erik (Erik Kluzek)
Date: Thu Nov 29 12:18:47 MST 2007
One-line Summary: Use build-streams, and archiving, multiple bug-fixes

Purpose of changes: Move bstrms5_clm3_5_13 to trunk

Remove long-term archiving from clm code. Use Mat's long-term and short-term archiving 
scripts like cam. Short term script runs at the end of your run script -- then the 
long-term archiving script is submitted to the batch que at the end. Update to newer 
version of csm_share that doesn't have any mss_ options. Tune usage of build-namelist. 
Make streams file on the fly. Remove references to get_env and $HEADUrl$. Fix interpinic 
for CASA and RTM (from Sam). Change testing from being done in offline mode to 
seq_ccsm mode. Make default in run scripts to run seq_ccsm mode. Add option to run scripts
to resubmit itself until reaches a given model date.

Add in HCSOI and HCSOISNO from Dave Lawrence. Add PERGRO test to test suite. Simple PERGRO
fix from Jerry Olson. Use branch of driver code for seq-ccsm and removing archiving. Add 
in lnd_comp_mct changes from ccsm4.alpha series.

Bugs fixed (include bugzilla ID): 449 (create_crop), 548 (rm getenv), 579 (cam config),
Changes answers relative to baseline: None

	To verify bit-for-bit ran standard offline test case (bl111) on: tempest, bluevista, bangkok
	(pass on bangkok, and bluevista -- but failed on tempest)

===============================================================
===============================================================
Tag name:  clm3_5_13
Originator(s):  erik (Erik Kluzek)
Date:  Fri Nov 16 10:17:38 MST 2007
One-line Summary: Update xml file with file needed for ccsm3_5_beta18

Describe any changes made to build system: Add models/utils/perl5lib to path for perl tools

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: New 0.47x0.63 fraction
  dataset compatible with CCSM datasets

Describe any substantial timing or memory changes: None

List any svn externals directories updated (csm_share, mct, etc.): None

List all subroutines eliminated: None

List all subroutines added and what they do:

A      bld/scpDefaultNamelist.pl -- Script to help copy files in xml database.

List all existing files that have been modified, and describe the changes:

M      bld/configure --- add models/util to path
M      bld/DefaultCLM_INPARM_Namelist.xml -- add new file
M      bld/queryDefaultNamelist.pl --- add models/util to path
M      bld/build-namelist --- add models/util to path

Summary of testing: None

Changes answers relative to baseline: No

===============================================================
===============================================================
Tag name:  clm3_5_12
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date:  Thu Nov  8 13:49:25 MST 2007
One-line Summary: Tag with new files needed for ccsm3_5_beta17

Purpose of changes: Add new files needed for new resolutions being adding in ccsm3_5_beta17

Bugs fixed (include bugzilla ID): None

Describe any changes made to build system: Small changes to configure from bstrms branch

Describe any changes made to the namelist: Add new files to Default*.xml files

List any changes to the defaults for the boundary datasets: New resolutions added

Describe any substantial timing or memory changes: None

List any svn externals directories updated (csm_share, mct, etc.): None

List all existing files that have been modified, and describe the changes:

Move files over from the bstrms3_clm3_5_11 branch with the new resolutions needed.

M      bld/configure
M      bld/DefaultCLM_INPARM_Namelist.xml
M      bld/DefaultDATM_NML_Namelist.xml
M      bld/DefaultSettings.xml
M      bld/DefaultTIMEMGR_INPARM_Namelist.xml
M      bld/DefaultPROF_INPARM_Namelist.xml
M      bld/queryDefaultNamelist.pl
M      bld/DefaultCCSM_INPARM_Namelist.xml
M      bld/build-namelist
M      bld/DefaultDATM_DSHR_NML_Namelist.xml

Summary of testing: None

Changes answers relative to baseline: None
	
===============================================================
===============================================================
Tag name:  clm3_5_11
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Fri Sep 28 12:03:30 MDT 2007
Date:One-line Summary: Update datasets in the DefaultCLM file for 0.23x0.31, 0.47x0.63, 0.9x1.25 and add fndepdyn file for 1.9x2.5

Purpose of changes: Needed for CCSM 20th Century simulation needed for ccsm3_5_beta13

Bugs fixed (include bugzilla ID): 585, 589, 593, 611

	Add T42_gx1v5, 0.9x1.25_gx1v5 support.
        also look in scripts/ccsm_utils/Tools for perl5lib.
	abort if set -cycle_begyr or cycle_nyrs on namelist rather than on build-namelist command-line.

Known bugs (include bugzilla ID): 251, 449, 512, 546, 608, 618, 622, 624

	New nasty bugs found:

618 	You can't add new fields using: hist_fincl*.
622	CLM blindly continues even if needed fields are missing from surface dataset.

Describe any changes made to build system: None

Describe any changes made to the namelist: Just add more files to XML database

List any changes to the defaults for the boundary datasets: Add new files for: 
              0.23x0.31, 0.47x0.63, 0.9x1.25, (64x128 with mask=gx1v5) and add fndepdyn file for 1.9x2.5

Describe any substantial timing or memory changes: None

Code reviewed by: None

List any svn externals directories updated (csm_share, mct, etc.): csm_share updated to trunk_tags/share3_070927

	This is the version needed in ccsm3_5_beta13 tag (previous version causes problems building on tempest)

List all subroutines eliminated: None

List all subroutines added and what they do: None

List all existing files that have been modified, and describe the changes:

M      bld/DefaultCLM_INPARM_Namelist.xml ---- Add new datasets.
M      bld/clm_inparm.pm --------------------- Abort if try to define cycle_nyr and cycle_begyr on namelist 
                                               rather than with command line options.
M      bld/queryDefaultNamelist.pl ----------- Add ability to use perl5lib from under ccsm_utils/scripts/Tools.
M      bld/build-namelist -------------------- Add ability to use perl5lib from under ccsm_utils/scripts/Tools.

         ------------------------- Remove test blZ11 (can't do the comparision), and update cam tag comparing to.
M      test/system/tests_pretag_bangkok
M      test/system/test_driver.sh
M      test/system/tests_posttag_purempi_regression
M      test/system/tests_posttag_hybrid_regression
M      test/system/tests_pretag_bluevista
M      test/system/tests_posttag_lightning

Summary of testing: None

Changes answers relative to baseline: No clm source code changed

===============================================================
===============================================================
Tag name:  clm3_5_10
Originator(s):  jet
Date: Tue Sep 18 12:00:23 MDT 2007
Date:One-line Summary: Fixed scam bugs when reading initial land dataset 
	and moved scam_setlatlon functionality to shr_scam_mod in 
	csm_shr repos.  Merged in Mariana's changes to add new boundary
	dataset file to help scam determine land/ocn/ice fractions.

Purpose of changes: Fix scam bugs and refactor code to allow scam to easily
        determine land/ocean/ice fractions.

Bugs fixed (include bugzilla ID):  612, 480

Known bugs (include bugzilla ID): 251, 449, 512, 546, 608, 618, 622

Describe any changes made to build system: Change configure to include new focndomain file.

Describe any changes made to the namelist: focndomain file added to ocn_in

List any changes to the defaults for the boundary datasets: Mariana created
	a new focndomain boundary dataset (at the standard resolutions) which 
	describe the grid fraction of land/ocn/ice

Describe any substantial timing or memory changes: None

Code reviewed by: self, mariana

List any svn externals directories updated (csm_share, mct, etc.):

	clm3_5_10
	branches/scm_drvseq1_0_43
        branches/csm_share3_070824_scm

List all subroutines eliminated: scam_setlatlonidx.F90

List all subroutines added and what they do: moved scm functionality
	from scam_setlatlonidx.F90 into a csm_share module that can 
	now be used by all surface models.

List all existing files that have been modified, and describe the changes:
M      test/system/test_driver.sh  - use latest cam in testing
M      test/system/nl_files/scam   - fixed scam bug
M      test/system/nl_files/scam_prep  - fixed scam bug
M      test/system/nl_files/ext_ccsm_seq_cam  - use latest cam in testing
M      SVN_EXTERNAL_DIRECTORIES - point to needed external dirs
M      src/biogeochem/STATICEcosysDynMod.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/ncdio.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/initializeMod.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/iniTimeConst.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/restFileMod.F90 - use new shr code instead of scam_setlatlonidx.F90
D      src/main/scam_setlatlonidx.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/clm_varctl.F90 - use new shr code instead of scam_setlatlonidx.F90
M      src/main/surfrdMod.F90 - use new shr code instead of scam_setlatlonidx.F90
Summary of testing:

  bluevista: Everything but ccsm tests pass ( due to requirment on external
	directories)

  bangkok/lf95: all passed except ccsm - expected due to requirment on external
	directories
  tempest  all passed except 034 br531 (failed previous to this commit)

  CLM tag used for the baseline comparison tests if applicable: clm3_5_09

Changes answers relative to baseline: None

===============================================================
===============================================================
Tag name:  clm3_5_09
Originator(s):  erik (Kluzek Erik 1326 CGD)
Date: Fri Aug 31 13:58:46 MDT 2007
Date:One-line Summary: Change configure to NOT have csm_share code for ccsm_con option, and add in 1x1.25 file, and update datm7 and csm_share

Purpose of changes: Fix for ccsm3_5_beta12 tag

Bugs fixed (include bugzilla ID):  581, 583

Known bugs (include bugzilla ID): 251, 449, 512, 546, 608,found with a suggested fix by Inez Fung

Bugs fixed (include bugzilla ID): 389 (partial), 442, 443, 445, 450

Describe any changes made to build system: Fix build for jaguar and phoenix

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: nanr, slevis, dlawren, oleson, and bonan reviewed the mklai changes

List any svn externals directories updated (csm_share, mct, etc.): None

List all subroutines eliminated: None

List all subroutines added and what they do: Documentation files

A  +   doc/README.DGVM
A  +   doc/KnownBugs

List all existing files that have been modified, and describe the changes:

---------------------> Improve testing
M      test/system/nl_files/t31_cnall
M      test/system/nl_files/singlept_dgvm_long
M      test/system/nl_files/1.9x2.5
M      test/system/nl_files/t31_dgvm
M      test/system/nl_files/singlept
M      test/system/nl_files/10x15_cnall
M      test/system/nl_files/10x15_dgvm
M      test/system/nl_files/t31_casa
M      test/system/nl_files/regional
M      test/system/nl_files/10x15_pftdyn
M      test/system/nl_files/t31_dgvm_long
M      test/system/nl_files/t42half
M      test/system/nl_files/t31
M      test/system/nl_files/10x15
M      test/system/tests_posttag_robin
M      test/system/input_tests_master
M      test/system/tests_pretag_jaguar
M      test/system/tests_posttag_phoenix
M      test/system/test_driver.sh
M      test/system/TSCscam.sh

---------------------> Change calculation of LAI,SAI,Canopy-top/bottom so weighted by %-PFT
M      tools/mksurfdata/mkfmax.F90
M      tools/mksurfdata/mklaiMod.F90
M      tools/mksurfdata/mkglacier.F90
M      tools/mksurfdata/mkurban.F90
M      tools/mksurfdata/mksoitex.F90
M      tools/mksurfdata/areaMod.F90
M      tools/mksurfdata/mksrfdat.F90
M      tools/mksurfdata/Srcfiles
M      tools/mksurfdata/mksoicol.F90
M      tools/mksurfdata/mkpftMod.F90

---------------------> Use new default files at T42, add and correct documentation
M      bld/run-pc.csh
M      bld/run-lightning.csh
M      bld/Makefile.in
M      bld/run-ibm.csh
M      bld/config_clm_defaults.xml
M      bld/system_defaults.xml
M      bld/run-frost.csh

---------------------> Remove uneeded shr_sys_flush, put #ifndef UNICOSMP around shr_sys_flush(6), correct MCT vector calls
                       needed for phoenix/robin build.

M      src/biogeochem/CNCStateUpdate2Mod.F90
M      src/biogeochem/CNGapMortalityMod.F90
M      src/biogeochem/CNC13StateUpdate2Mod.F90
M      src/biogeochem/CNFireMod.F90
M      src/biogeochem/CASAMod.F90 -------------------> Fix CASA by uncommenting lines according to Inez Fung
M      src/biogeochem/CNPrecisionControlMod.F90
M      src/biogeochem/DUSTMod.F90 -------------------> Changes from Natalie M. and Francis Vitt for CAM/CLM3.5 Aerosols
M      src/biogeochem/CNPhenologyMod.F90
M      src/biogeochem/CNCStateUpdate1Mod.F90
M      src/biogeochem/CNDecompMod.F90
M      src/biogeochem/CNCStateUpdate3Mod.F90
M      src/biogeochem/CNC13StateUpdate1Mod.F90
M      src/biogeochem/CNC13StateUpdate3Mod.F90
M      src/biogeochem/CNAllocationMod.F90
M      src/biogeochem/CNC13FluxMod.F90
M      src/biogeochem/CNEcosystemDynMod.F90
M      src/biogeochem/CNVegStructUpdateMod.F90
M      src/main/inicFileMod.F90
M      src/main/abortutils.F90
M      src/main/driver.F90
M      src/main/ncdio.F90
M      src/main/atmdrvMod.F90 -----------------------> Changes from Keith O. to fix TKFRZ change
M      src/main/initializeMod.F90
M      src/main/clmtypeInitMod.F90
M      src/main/histFileMod.F90
M      src/main/clm_csmMod.F90
M      src/main/controlMod.F90 ----------------------> Fix #ifdef's so extra namelist items only on for COUP_CSM or OFFLINE
M      src/main/initSurfAlbMod.F90
M      src/main/clm_time_manager.F90
M      src/main/initGridCellsMod.F90
M      src/main/program_off.F90
M      src/main/surfrdMod.F90
M      src/main/decompMod.F90
M      src/main/areaMod.F90
M      src/main/clm_mct_mod.F90
M      src/riverroute/RtmMod.F90
M      src/biogeophys/SurfaceRadiationMod.F90
M      src/biogeophys/SurfaceAlbedoMod.F90
M      src/biogeophys/Hydrology2Mod.F90
M      src/biogeophys/CanopyFluxesMod.F90

Summary of testing:

  bluevista: All PASS except
004 bl111 TBL.sh 4p_vodsr_dh t31 48 ...............................FAIL! rc=
009 bl127 TBL.sh 17p_vodsr_dh t31 48 ..............................FAIL! rc=
014 bl131 TBL.sh 4p_vodsr_dh t42half 48 ...........................FAIL! rc=
019 bl141 TBL.sh 17p__dh 10x15_pftdyn 48 ..........................FAIL! rc=
024 bl211 TBL.sh 17p_cnn_dh t31_cnall 48 ..........................FAIL! rc=
028 bl311 TBL.sh 4p_casa_dh t31_casa 48 ...........................FAIL! rc=
032 bl411 TBL.sh 10p_dgvm_dh t31_dgvm 48 ..........................FAIL! rc=
037 bl471 TBL.sh 10p_dgvm_s singlept_dgvm_long -730 ...............FAIL! rc=
041 bl563 TBL.sh _h 1.9x2.5 -10 ...................................FAIL! rc=
045 bl552 TBL.sh _ds 10x15 24 .....................................FAIL! rc=
049 bl573 TBL.sh _s singlept -10 ..................................FAIL! rc=
053 bl583 TBL.sh _dh regional -10 .................................FAIL! rc=
057 bl711 TBLtools.sh mksurfdata namelist .........................FAIL! rc=
059 bl771 TBLtools.sh mksurfdata singlept .........................FAIL! rc=
062 sm061 TSMconccsm.sh ERS f19_g13 ...............................FAIL! rc= 7
  lightning: All PASS except
004 bl112 TBL.sh 4p_vodsr_dm t31 48 ...............................FAIL! rc=
009 bl142 TBL.sh 17p__dm 10x15_pftdyn 48 ..........................FAIL! rc=
014 bl252 TBL.sh 17p_cnn_dm 10x15_cnall 48 ........................FAIL! rc=
018 bl451 TBL.sh 10p_dgvm_dm 10x15_dgvm 48 ........................FAIL! rc=
019 sm551 TSM.sh _dh 10x15 48 .....................................FAIL! rc= 8
020 er551 TER.sh _dh 10x15 10+38 ..................................FAIL! rc= 5
021 br551 TBR.sh _dh 10x15 24+24 ..................................FAIL! rc= 5
022 bl551 TBL.sh _dh 10x15 48 .....................................FAIL! rc=
026 bl573 TBL.sh _s singlept -10 ..................................FAIL! rc=
029 bl771 TBLtools.sh mksurfdata singlept .........................FAIL! rc=
  bangkok/lf95:
004 bl112 TBL.sh 4p_vodsr_dm t31 48 ...............................FAIL! rc=
009 bl142 TBL.sh 17p__dm 10x15_pftdyn 48 ..........................FAIL! rc=
014 bl252 TBL.sh 17p_cnn_dm 10x15_cnall 48 ........................FAIL! rc=
018 bl312 TBL.sh 4p_casa_dm t31_casa 48 ...........................FAIL! rc=
022 bl451 TBL.sh 10p_dgvm_dm 10x15_dgvm 48 ........................FAIL! rc=
026 bl551 TBL.sh _dh 10x15 48 .....................................FAIL! rc=
030 bl573 TBL.sh _s singlept -10 ..................................FAIL! rc=
033 sm982 TSCscam.sh seqccsm_64x128_s scam_prep scam_ds scam 7 ....FAIL! rc= 4
  robin: All compile tests pass

CLM tag used for the baseline comparison tests if applicable: clm3_expa_98

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers:
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change: new LAI, TKFRZ change is roundoff different, Dust and CASA changes are significant

===============================================================
===============================================================
Tag name:  clm3_expa_98
Originator(s):  erik (KLUZEK ERIK 1326 CGD)
Date:  Wed Apr 18 09:51:53 MDT 2007
One-line Summary: Move externals to top, make SOM4 the default, rename setidx file, use new datafiles, 
    remove NUMLONS read, tweak testing, remove shell_cmd, remove read of old surfdata file

Purpose of changes: Some simple cleanup preparing for CLM3.5 release

Bugs fixed (include bugzilla ID): 440, 441

Describe any changes made to build system: None

Describe any changes made to the namelist: Use new datasets

List any changes to the defaults for the boundary datasets: Use new NCEP forcing datasets,
  and new Nitrogen deposition datasets

Describe any substantial timing or memory changes: None

Code reviewed by: self

List any svn externals directories updated (csm_share, mct, etc.):

	Directories are the same -- but SVN externals themselves moved to top level

List all subroutines eliminated:

D      test/system/tests_pretag_blueice > Rename to posttag filename
D      bld/empty -----------------------> Rename to usr.src
D      src/main/setlatlonidx.F90 -------> Rename to scam_setlatlonidx.F90 filename
D      src/main/system_cmd.c
D      src/main/cfort.h
D      src/SVN_EXTERNAL_DIRECTORIES ----> Move to top layer

List all subroutines added and what they do:

  -------------------> Files renamed from above
A  +   test/system/tests_posttag_blueice
A  +   bld/usr.src
A  +   SVN_EXTERNAL_DIRECTORIES
A  +   src/main/scam_setlatlonidx.F90

  -------------------> New files
A      test/system/config_files/10p_dgvm_s -------> New DGVM test
A  +   test/system/tests_posttag_blueice ---------> Rename
A      test/system/tests_posttag_robin -----------> Add tests for robin/phoenix
A      test/system/tests_posttag_phoenix
A      test/system/nl_files/singlept_dgvm_long ---> Add new singlept DGVM test
  -------------------> Add new documentation README files
A      tools/README
A      bld/README
A      Copyright ----> CCSM Copyright file
A      README

List all existing files that have been modified, and describe the changes:

  -------------------> Tweak testing -- use new datasets, increase diversity of testing
M      test/system/tests_pretag_bluevista
M      test/system/nl_files/t31_cnall
M      test/system/nl_files/1.9x2.5
M      test/system/nl_files/t31_dgvm
M      test/system/nl_files/singlept
M      test/system/nl_files/10x15_cnall
M      test/system/nl_files/10x15_dgvm
M      test/system/nl_files/t31_casa
M      test/system/nl_files/regional
M      test/system/nl_files/10x15_pftdyn
M      test/system/nl_files/t31_dgvm_long
M      test/system/nl_files/t42half
M      test/system/nl_files/t31
M      test/system/nl_files/10x15
M      test/system/input_tests_master
M      test/system/test_driver.sh
   ---------------------> Remove system_cmd.c from list of source files needed to compile
M      tools/mksurfdata/Srcfiles
M      tools/interpinic/interpinic.F90 <--- fix interpinic compile on bluevista
M      tools/mkgriddata/Srcfiles
   ---------------------> Use new datasets, make sure works
M      bld/run-pc.csh
M      bld/configure ---- Remove SOM4 CPP declaration
M      bld/run-lightning.csh
M      bld/run-ibm.csh
M      bld/run-frost.csh
   ---------------------> Make SOM4 the default remove other option, remove read of NUMLON
   ---------------------> Remove read of old surfdata sets, remove shell_cmd
M      src/biogeochem/CNDecompMod.F90
M      src/biogeochem/STATICEcosysDynMod.F90
M      src/main/ncdio.F90
M      src/main/fileutils.F90 -----> Remove shell_cmd as unused now.
M      src/main/iniTimeConst.F90
M      src/main/clm_varsur.F90
M      src/main/surfrdMod.F90

Summary of testing:

  bluevista:    All PASS, except
062 sm061 TSMconccsm.sh ERS f19_g13 ...............................FAIL! rc= 7
  bangkok/lf95: All PASS
  tempest:      All PASS, except
033 sm982 TSCscam.sh seqccsm_64x128_s scam_prep scam_ds scam 7 ....FAIL! rc= 4

CLM tag used for the baseline comparison tests if applicable: clm3_expa_97

===============================================================
===============================================================
Tag name:  clm3_expa_97
Originator(s):  erik (KLUZEK ERIK 1326 CGD)
Date:  Wed Apr 11 12:18:32 MDT 2007
One-line Summary: Remove SPMD, update to clm proc tag, update timing, improve testing

Purpose of changes:
     Remove SPMD #ifdefs -- use mpi-serial code
     Remove COUP_CAM #ifdefs for SEQ_MCT || SEQ_ESMF
     Remove LOCAL_DEBUG CPP #ifdefs
     Update to prof05_clm3_expa_92 tag (timing changes, SCAM fixes)
     Update timing library to latest
     Fix bugs
     Improve test suite
     Change scripts so will rebuild each time (only configure first time if config file DNE)
     Change tool Makefile to be consistent and have USER_ overload options.
     Add script to update ChangeLog

Bugs fixed (include bugzilla ID):  337, 361, 389(partial), 407, 408, 417, 428
     337 -- SPMD
     361 -- IRIX
     389 -- Testing
     407 -- Single gridcell
     408 -- mksurfdata,mkgriddata compiling
     417 -- write last file to mss correctly
     428 -- pdt-dyn mode now restarts correctly

Describe any changes made to build system: Remove HIDE_MPI, remove 
     stuff left over from CAM Makefile, put FORTRAN name definition in configure
     remove LOCAL_DEBUG CPP #ifdefs

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: mvertens, oleson, thornton (all just briefly)

List any svn externals directories updated (csm_share, mct, etc.):
        Update csm_share to share3_070321
        Update timing    to timing_070328

List all subroutines eliminated:

D      bld/run-sgi.csh --------------------> Remove SGI run script
D      test/system/tests_pretag_bluesky ---> Remove since bluesky is gone
D      tools/mksurfdata/mksrfdat.namelist -> Change name to mksurfdata.namelist

   -------> Rename interpinic files to *.F90

D      tools/interpinic/fmain.f90
D      tools/interpinic/wrap_nf.f90
D      tools/interpinic/shr_kind_mod.f90
D      tools/interpinic/interpinic.f90
D      tools/interpinic/addglobal.f90

   --------> Remove file no longer needed by SCAM or for SPMD mode
D      src/main/getnetcdfdata.F90
D      src/main/mpiinc.F90


List all subroutines added and what they do:

------- Add concurrent and sequential CCSM tests, add more resolutions, improve tools tests
A      test/system/TSMconccsm.sh   ----------- Concurrent CCSM test
--------------------> New configurations to test
A      test/system/config_files/scam_ds
A      test/system/config_files/_h
A      test/system/config_files/_dh
A      test/system/config_files/_m
A      test/system/config_files/_o
A      test/system/config_files/_dm
A      test/system/config_files/_do
A      test/system/config_files/_s
A      test/system/config_files/_ds
A      test/system/config_files/seqccsm_4x5_dh
A      test/system/config_files/seqccsm_64x128_s
A      test/system/config_files/seqccsm_10x15_dm
A      test/system/config_files/17p__m
A      test/system/config_files/17p__o
A      test/system/config_files/17p__dh
A      test/system/config_files/17p__dm
A      test/system/config_files/17p__do
A      test/system/config_files/17p__h
A      test/system/TSMseqccsm.sh ------------- Sequential CCSM test
--------------------> New namelists and resolutions to test
A      test/system/nl_files/scam
A      test/system/nl_files/1.9x2.5
A      test/system/nl_files/singlept
A      test/system/nl_files/10x15_cnall
A      test/system/nl_files/10x15_dgvm
A      test/system/nl_files/seqccsm
A      test/system/nl_files/regional
A      test/system/nl_files/scam_prep
A      test/system/nl_files/10x15
A      test/system/README
A      test/system/TCBseqccsm.sh --------> Sequential CCSM configure/build
A      test/system/TSCscam.sh -----------> Sequential CCSM SCAM mode configure/build
A      test/system/TCTconccsm.sh --------> CCSM create-test
A      test/system/TBLtools.sh ----------> Compare tools to baseline version

----------- add singlept and regional tests
A      tools/mksurfdata/mksurfdata.singlept
A      tools/mksurfdata/mksurfdata.regional
A  +   tools/mksurfdata/mksurfdata.namelist

----------- Get improved code from Sam Levis (change names to *.F90)

A      tools/interpinic/interpinic.runoptions
A  +   tools/interpinic/fmain.F90
A      tools/interpinic/clmi_1999-01-02_10x15_c070330.nc <---- Test file
A  +   tools/interpinic/wrap_nf.F90
A      tools/interpinic/Filepath
A  +   tools/interpinic/interpinic.F90
A  +   tools/interpinic/addglobal.F90
A      tools/interpinic/Srcfiles
----------- add singlept and regional tests
A      tools/mkgriddata/mkgriddata.singlept
A      tools/mkgriddata/mkgriddata.regional

----------- Help to update ChangeLog
A      doc/UpDateChangeLog.pl

----------- New code needed for SCAM mode
A  +   src/main/setlatlonidx.F90


List all existing files that have been modified, and describe the changes:

----------- Improve test system (tweak tests, add new tests to various machines)
M      test/system/tests_pretag_bluevista
M      test/system/nl_files/t31_cnall
M      test/system/nl_files/t31_dgvm
M      test/system/nl_files/t31_casa
M      test/system/nl_files/10x15_pftdyn
M      test/system/nl_files/t31_dgvm_long
M      test/system/nl_files/t42half
M      test/system/nl_files/t31
M      test/system/CLM_runcmnd.sh ------- Use mpirun instead of mpiexec on bangkok/calgary
M      test/system/tests_pretag_blueice
M      test/system/input_tests_master
M      test/system/tests_pretag_jaguar
M      test/system/TSMtools.sh
M      test/system/tests_pretag_bangkok
M      test/system/TCBtools.sh
M      test/system/test_driver.sh
M      test/system/tests_pretag_tempest
M      test/system/tests_posttag_lightning

----------- Get tools to build
M      tools/mksurfdata/mklaiMod.F90
M      tools/mksurfdata/mkfileMod.F90
M      tools/mksurfdata/creategridMod.F90
M      tools/mksurfdata/Srcfiles
M      tools/mksurfdata/Makefile ------ Make makefile consistent and add USER_ options
M      tools/interpinic/Makefile ------ Make makefile consistent and add USER_ options
M      tools/mkgriddata/mkgriddata.F90
M      tools/mkgriddata/creategridMod.F90
M      tools/mkgriddata/Srcfiles
M      tools/mkgriddata/Makefile ------ Make makefile consistent and add USER_ options

----------- Improvements to run scripts and build system
     Change scripts so will rebuild each time (only configure first time if config file DNE), remove left over
     features from CAM Makefile.
M      bld/run-pc.csh
M      bld/configure
M      bld/run-lightning.csh
M      bld/Makefile.in
M      bld/run-ibm.csh
M      bld/run-frost.csh

----------- Source code changes, removing SPMD #ifdef, LOCAL_DEBUG, get SCAM mode working with new CAM, change
            to work with new timing library, fix code bugs above.  Remove COUP_CAM #ifdefs for SEQ_MCT || SEQ_ESMF
M      src/biogeochem/CASAMod.F90
M      src/biogeochem/CNPhenologyMod.F90
M      src/biogeochem/STATICEcosysDynMod.F90
M      src/biogeochem/DGVMMod.F90
M      src/biogeochem/CNAllocationMod.F90
M      src/biogeochem/CNVegStructUpdateMod.F90
M      src/main/spmdGathScatMod.F90
M      src/main/abortutils.F90
M      src/main/clm_comp.F90
M      src/main/driver.F90
M      src/main/ncdio.F90
M      src/main/atmdrvMod.F90
M      src/main/fileutils.F90
M      src/main/pftdynMod.F90
M      src/main/iniTimeConst.F90
M      src/main/histFileMod.F90
M      src/main/program_csm.F90
M      src/main/restFileMod.F90
M      src/main/clm_csmMod.F90
M      src/main/controlMod.F90
M      src/main/ndepFileMod.F90
M      src/main/initGridCellsMod.F90
M      src/main/lnd_comp_mct.F90
M      src/main/program_off.F90
M      src/main/pftvarcon.F90
M      src/main/spmdMod.F90
M      src/main/surfrdMod.F90
M      src/main/decompMod.F90
M      src/main/areaMod.F90
M      src/main/iobinary.F90
M      src/main/do_close_dispose.F90
M      src/riverroute/RtmMod.F90
M      src/biogeophys/Hydrology2Mod.F90
M      src/biogeophys/BiogeophysRestMod.F90

Summary of testing:

  tempest: ALL PASS
  bluevista:
019 bl141 TBL.sh 17p_vodsr_dh 10x15_pftdyn 48 .....................FAIL! rc= 7
022 er211 TER.sh 17p_cnn_dh t31_cnall 10+38 .......................FAIL! rc= 6
059 sm061 TSMconccsm.sh ERS f19_g13 ...............................FAIL! rc= 5
  bangkok/lf95:
033 sm982 TSCscam.sh seqccsm_64x128_s scam_prep scam_ds scam 7 ....FAIL! rc= 4

TBL test fails because of restart trouble with pftdyn.
Concurrent CCSM test fails because of a problem with ccsm3_5_beta01 for datm7.
bangkok scam test fails as is says that scm_crm_mode is not initialized in
CAM code.

CLM tag used for the baseline comparison tests if applicable: clm3_expa_96
 (had to add in new tests, and set SOM4)

Changes Answers: No

===============================================================

===============================================================
Tag name: clm3_expa_96
Originator(s): tcraig
Date: Mon Mar 12 16:41:58 MDT 2007
One-line Summary: fixed finemesh, pftdyn modes, add new tests

Purpose of changes: restore finemesh and pftdyn modes, improve
	test coverage

Bugs fixed (include bugzilla ID): 389 (partial)

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: reduced memory use in pftdyn

Code reviewed by:

List any svn externals directories updated (csm_share, mct, etc.): none

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

        M      test/system/tests_pretag_bluevista
	A  +   test/system/nl_files/10x15_pftdyn
	A  +   test/system/nl_files/t31_dgvm_long
	A  +   test/system/nl_files/t42half
	M      test/system/input_tests_master
	M      test/system/tests_pretag_blueice
	M      test/system/tests_pretag_jaguar
	M      test/system/tests_pretag_bangkok
	M      test/system/test_driver.sh
	M      test/system/tests_posttag_lightning
	M      src/main/subgridMod.F90
	M      src/main/initializeMod.F90
	M      src/main/pftdynMod.F90
	M      src/main/clm_varsur.F90
	M      src/main/ndepFileMod.F90
	M      src/main/subgridAveMod.F90
	M      src/main/initGridCellsMod.F90
	M      src/main/lnd_comp_mct.F90
	M      src/main/program_off.F90
	M      src/main/surfrdMod.F90
	M      src/main/domainMod.F90
	M      src/main/decompMod.F90
	M      src/main/areaMod.F90

- rename lvegxy,lwtxy to vegxy, wtxy
- implement general setgatm, get finemesh working again
- refactor pftdynMod for low memory implementation, validate pfydyn mode
- modify ndep and pftdyn from x = x1*wt1 + x2*wt2 to x = x2 + wt1*(x1-x2)
  as suggested by k.lindsay, improves roundoff performance
- clean up some old code
- add new tests configurations (10x15_pftdyn, t31_dgvm_long, t42half), 
- update pretag lists, add new tests
		
Summary of testing: 

  bluevista:
	     all clm tests pass except bl for new cases including new tests 
	     all cam tests pass except bl (due to clm changes in expa_94/95)
	     ccsm passes ERS.f45_g35.B.bluevista16 (answers change due to expa_94/95)
  bangkok/lf95: 
	     all clm tests pass including new tests in list
	     all cam tests pass except bl (due to clm changes in expa_94/95)
  tempest:
	     all cam tests pass except bl (due to clm changes in expa_94/95)
  lightning: 
	     ccsm passes ERS.f45_g35.B2.lightning (answers change due to expa_94/95)

CLM tag used for the baseline comparison tests if applicable:
	clm3_expa_95, cam3_4_03, ccsm3_1_beta45

IF tag changes answers relative to baseline comparison the
following should be filled in:
	answers are bfb with clm3_expa_95 in clm.  cam and ccsm could not
	be tested for bfb due to lagging clm version in latest cam and ccsm tags

  Summarize any changes to answers, i.e.,
    - what code configurations: 
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
Tag name: clm3_expa_95
Originator(s): nanr, Keith Oleson, Peter Thornton
Date: Thu Mar  8 17:06:06 MST 2007
One-line Summary: Adding N limitation for CLM standalone w/o CN.

Purpose of changes: Improve estimation of photosynthesis in CLM when it
is run without CN active.  These changes impose a N limitation as a fcn of
PFT [0-1].

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: testing suites: fpftcon = pft-physiology.c070207

List any changes to the defaults for the boundary datasets: 
	fptfcon = pft-physiology.c070207
		  pft-physiology.c070207.readme

Describe any substantial timing or memory changes: none expected

Code reviewed by: Keith Oleson, Peter Thornton, Dave Lawrence

List any svn externals directories updated (csm_share, mct, etc.):  none
  
List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

bv1103en.ucar.edu-/fis/cgd/tss/nanr/clm/clm3_trunk % !svn
svn status | grep 'M '
M      test/system/nl_files/t31_cnall	! change pft-physiology.c070207
M      test/system/nl_files/t31_dgvm	! change pft-physiology.c070207
M      test/system/nl_files/t31		! change pft-physiology.c070207
M      test/system/nl_files/t31_casa	! change pft-physiology.c070207
M      bld/run-pc.csh			! change pft-physiology.c070207
M      bld/run-sgi.csh			! change pft-physiology.c070207
M      bld/run-lightning.csh		! change pft-physiology.c070207
M      bld/run-ibm.csh			! change pft-physiology.c070207
M      bld/run-frost.csh		! change pft-physiology.c070207
M      src/main/clmtypeInitMod.F90		! initialize new N limitation factor (fnitr)
M      src/main/iniTimeConst.F90		! initialize new N limitation factor (fnitr)
M      src/main/pftvarcon.F90			! read in new var (fnitr)
M      src/main/clmtype.F90			! initialize new N limitation factor (fnitr)
M      src/biogeophys/CanopyFluxesMod.F90	! apply new N limitation factor (fnitr)

Summary of testing:  

  bluevista:
	001 sm111 TSM.sh 4p_vodsr_dh t31 48 ...............................PASS
	002 er111 TER.sh 4p_vodsr_dh t31 10+38 ............................PASS
	003 br111 TBR.sh 4p_vodsr_dh t31 24+24 ............................PASS
	004 bl111 TBL.sh 4p_vodsr_dh t31 48 ...............................SKIPPED*
	005 sm114 TSM.sh 4p_vodsr_h t31 48 ................................PASS
	006 sm121 TSM.sh 17p_vodsr_dh t31 48 ..............................PASS
	007 er121 TER.sh 17p_vodsr_dh t31 10+38 ...........................PASS
	008 br121 TBR.sh 17p_vodsr_dh t31 24+24 ...........................PASS
	009 bl121 TBL.sh 17p_vodsr_dh t31 48 ..............................SKIPPED*
	010 sm124 TSM.sh 17p_vodsr_h t31 48 ...............................PASS
	011 sm211 TSM.sh 17p_cnn_dh t31_cnall 48 ..........................PASS
	012 er211 TER.sh 17p_cnn_dh t31_cnall 10+38 .......................PASS
	013 br211 TBR.sh 17p_cnn_dh t31_cnall 24+24 .......................PASS
	014 bl211 TBL.sh 17p_cnn_dh t31_cnall 48 ..........................SKIPPED*
	015 sm311 TSM.sh 4p_casa_dh t31_casa 48 ...........................PASS
	016 er311 TER.sh 4p_casa_dh t31_casa 10+38 ........................PASS
	017 br311 TBR.sh 4p_casa_dh t31_casa 24+24 ........................PASS
	018 bl311 TBL.sh 4p_casa_dh t31_casa 48 ...........................SKIPPED*
	019 sm411 TSM.sh 10p_dgvm_dh t31_dgvm 48 ..........................PASS
	020 er411 TER.sh 10p_dgvm_dh t31_dgvm 10+38 .......................PASS
	021 br411 TBR.sh 10p_dgvm_dh t31_dgvm 24+24 .......................PASS
	022 bl411 TBL.sh 10p_dgvm_dh t31_dgvm 48 ..........................SKIPPED*
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:	  CN inactive
    - what platforms/compilers:	  all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
	new climate

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

  MSS location of control simulations used to validate new climate:

	/OLESON/csm/hydp2_off_communn_hk39
   
   URL for LMWG diagnostics output used to validate new climate:

http://www.cgd.ucar.edu/tss/clm/diagnostics/lmwg_hydro/hydp2_off_communn_hk39aa-hydp2_off_communn_hk38aa/setsIndex.html


	
===============================================================
===============================================================
Tag name: clm3_expa_94
Originator(s): nanr, Keith Oleson, Peter Thornton
Date: 	Thu Mar  8 14:22:36 MST 2007
One-line Summary:  BTRAN modification

Purpose of changes:  Change BTRAN calculation to improve prognostic
	LAI estimation in high latitudes.

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: Keith Oleson, Peter Thornton, Dave Lawrence

List any svn externals directories updated (csm_share, mct, etc.): nanr

List all subroutines eliminated: nanr

List all subroutines added and what they do: nanr

List all existing files that have been modified, and describe the changes:
M      src/biogeophys/CanopyFluxesMod.F90

Changing calculation of rootr to allow non-zero rootr (and btran) in partially frozen layers.

Summary of testing:

  bluevista:

	001 sm111 TSM.sh 4p_vodsr_dh t31 48 ...............................PASS
	002 er111 TER.sh 4p_vodsr_dh t31 10+38 ............................PASS
	003 br111 TBR.sh 4p_vodsr_dh t31 24+24 ............................PASS
	004 bl111 TBL.sh 4p_vodsr_dh t31 48 ...............................SKIPPED*
	005 sm114 TSM.sh 4p_vodsr_h t31 48 ................................PASS
	006 sm121 TSM.sh 17p_vodsr_dh t31 48 ..............................PASS
	007 er121 TER.sh 17p_vodsr_dh t31 10+38 ...........................PASS
	008 br121 TBR.sh 17p_vodsr_dh t31 24+24 ...........................PASS
	009 bl121 TBL.sh 17p_vodsr_dh t31 48 ..............................SKIPPED*
	010 sm124 TSM.sh 17p_vodsr_h t31 48 ...............................PASS
	011 sm211 TSM.sh 17p_cnn_dh t31_cnall 48 ..........................PASS
	012 er211 TER.sh 17p_cnn_dh t31_cnall 10+38 .......................PASS
	013 br211 TBR.sh 17p_cnn_dh t31_cnall 24+24 .......................PASS
	014 bl211 TBL.sh 17p_cnn_dh t31_cnall 48 ..........................SKIPPED*
	015 sm311 TSM.sh 4p_casa_dh t31_casa 48 ...........................PASS
	016 er311 TER.sh 4p_casa_dh t31_casa 10+38 ........................PASS
	017 br311 TBR.sh 4p_casa_dh t31_casa 24+24 ........................PASS
	018 bl311 TBL.sh 4p_casa_dh t31_casa 48 ...........................SKIPPED*
	019 sm411 TSM.sh 10p_dgvm_dh t31_dgvm 48 ..........................PASS
	020 er411 TER.sh 10p_dgvm_dh t31_dgvm 10+38 .......................PASS
	021 br411 TBR.sh 10p_dgvm_dh t31_dgvm 24+24 .......................PASS
	022 bl411 TBL.sh 10p_dgvm_dh t31_dgvm 48 ..........................SKIPPED*

  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable: none

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: all
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

	-larger than roundoff.  Climate changes unknown.
	-Improves prognostic LAI estimation in high latitudes.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository): clm3_expa_89
   - platform/compilers:  bluevista
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
	/OLESON/csm/hydp2_off_communn_hk38
   
   URL for LMWG diagnostics output used to validate new climate:

http://www.cgd.ucar.edu/tss/clm/diagnostics/lmwg_hydro/hydp2_off_communn_hk38aa-hydp2_off_communn_expa89aa/setsIndex.html

	
===============================================================

===============================================================
Tag name: clm3_expa_93		! NOTE: Tag incremented to correct mistaken tag number in documentation. (nanr)
Originator(s): tcraig
Date: Tue Feb 27 16:53:41 MST 2007	
One-line Summary: merge fmf branch to trunk (low memory mods)

Purpose of changes: reduce memory and improve memory scaling

Bugs fixed (include bugzilla ID):

Describe any changes made to build system: began adding support
  for frost in Makefile and added a run-frost.csh (not yet
  fully validated)

Describe any changes made to the namelist: added new optional namelist
  input, nsegspc (number of segments per clump for new decomp.  default
  is 20, 1 will produce poor loadbalance, infinity yields too many
  segments per pe but good load balance.  performance asymptotes for
  several configurations at about 5-10 segments/pe, use 20 as default.)

List any changes to the defaults for the boundary datasets: NONE

Describe any substantial timing or memory changes: significant reduction
  in memory use and improved memory scaling.

Code reviewed by:

List any svn externals directories updated (csm_share, mct, etc.): update
  to mct external, MCT2_3_0_070206

List all subroutines eliminated:

List all subroutines added and what they do:

List all existing files that have been modified, and describe the changes:

- implement new 1d decomp based on ngsegspc rather than balancing pfts,
  ngsegspc is the number of segments per clump.  the 1d gridcells will
  be divided into clumps and segments per clump so there will be
  a total number of segments, clumps*nsegspc, each of about equal number
  of gridcells, that will be distributed round-robin to pes.  pfts are
  derived later and will hopefully end up being nearly as well load
  balanced as the previous method without having to precompute pfts
  and requiring much less memory.  see above for more info on the namelist 
  input and default.
- reorganize initialization, split decomp_init into three phases,
  atm (coarse), lnd (finemesh), and glcp (subgrid).
- add new datatype, latlon to hold some global grid info
- now all domain info is local (although initialization still needs
  to be modified)
- remove some dead code
- add new timers (bug #302)
- split gatm out of domain type
- create simple setgatm_UNITY routine, finemesh capability now disabled,
  must fix setgatm in future version
- move wtxy, vegxy, and pctspec to clm_varsur, allocate as local arrays
  now (begg:endg) and modify surfrd to handle local data only both for
  I/O and initialization.
- implement gather/scatter routines in spmdGathScatMod that use gsmaps.
- update MCT and share
- port to frost
- get rid of some of the global decomps use in code, still more to do
- memory cleanup in STATICEcosysDynMod
- implement new ncdio methods for reading to local gridcell data using gsmaps
- clean up atmdrv, use newer low mem datatypes, reduce memory
- clean up rtm, use newer low mem datatypes, reduce memory
- remove history "lat/lon" fields

M      test/system/test_driver.sh
M      tools/mkgriddata/mkgriddata.F90
M      bld/configure
M      bld/Makefile.in
A  +   bld/run-frost.csh
M      src/biogeochem/CASAMod.F90
M      src/biogeochem/STATICEcosysDynMod.F90
M      src/biogeochem/DGVMMod.F90
M      src/main/spmdGathScatMod.F90
M      src/main/abortutils.F90
M      src/main/clm_comp.F90
M      src/main/driver.F90
M      src/main/ncdio.F90
M      src/main/atmdrvMod.F90
M      src/main/subgridMod.F90
M      src/main/initializeMod.F90
M      src/main/pftdynMod.F90
M      src/main/iniTimeConst.F90
M      src/main/histFileMod.F90
M      src/main/program_csm.F90
M      src/main/clm_atmlnd.F90
M      src/main/clm_varsur.F90
M      src/main/clm_csmMod.F90
M      src/main/restFileMod.F90
M      src/main/controlMod.F90
M      src/main/clm_varctl.F90
M      src/main/ndepFileMod.F90
M      src/main/initGridCellsMod.F90
M      src/main/lnd_comp_mct.F90
M      src/main/program_off.F90
M      src/main/surfrdMod.F90
M      src/main/domainMod.F90
M      src/main/decompMod.F90
M      src/main/areaMod.F90
M      src/main/clm_mct_mod.F90
M      src/SVN_EXTERNAL_DIRECTORIES
M      src/riverroute/RtmMod.F90
	
Summary of testing:

  bluevista: all pass except
    004 bl111 TBL.sh 4p_vodsr_dh t31 48 ...............................FAIL! rc= 7
    009 bl121 TBL.sh 17p_vodsr_dh t31 48 ..............................FAIL! rc= 7
  bangkok/lf95: all pass except
    004 bl112 TBL.sh 4p_vodsr_dm t31 48 ...............................FAIL! rc= 7
    009 bl122 TBL.sh 17p_vodsr_dm t31 48 ..............................FAIL! rc= 7
  Due to roundoff change in rtm, only rtm fields affected, otherwise bfb

  Also tested version in CCSM vs ccsm3_1_beta45
    ERS.f45_g35.B.bluevista16
    ERS.f45_g35.B2.lightning
    Both PASS and bfb versus beta45 except for rtm roundoff difference and
      associated error growth through ocean coupling

  Also tested mods merged to clm3_expa_91 with cam3_4_00, all
    CAM tests pass on bangkok, bluevista, and tempest including scam.
  Tested on bangkok with cam3_4_01 and updated to clm3_expa_92, all
    CAM tests pass on bangkok.  bluevista and tempest not tested
    due to time constraints and earlier adequate testing with 
    clm3_expa_91 and cam3_4_00.
	
CLM tag used for the baseline comparison tests if applicable: clm3_expa_89

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: anything with RTM on
    - what platforms/compilers: all 
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
        roundoff change in RTM due to roundoff change in cell area calculation

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?  tested in multiple systems, review growth of diffs in 
     stand-alone clm, only rtm fields affected, diffs remain roundoff for
     48 timesteps, no coupling to other fields or error growth in system.

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================


===============================================================
Tag name: clm3_expa_92
Originator(s): erik,mvertens,mvr
Date: Mon Feb 26 15:59:16 MST 2007
One-line Summary: When running with Sequential CCSM -- use date for albedo calculation

Purpose of changes: To work with cam3_4_01

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: erik,mvr,mvertens

List any svn externals directories updated (csm_share, mct, etc.): none

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

M      src/main/clm_comp.F90
M      src/main/lnd_comp_mct.F90

Have sequential CCSM give CLM the date of the next radiation calculation so that
it can calculate albedo's for that specific time-step. This is needed to work with
cam3_4_01.

Summary of testing:

  bluevista: Pass
  bangkok/lf95: Pass

CLM tag used for the baseline comparison tests if applicable: clm3_expa_91

===============================================================
===============================================================
Tag name: clm3_expa_91
Originator(s): erik
Date: Wed Feb 21 13:19:51 MST 2007
One-line Summary: Fix SCAM mode, add more machines for test_driver, have tools use csm_share, 
	make clmtype private (except for data exporting), fix several bugs

Purpose of changes: Fix SCAM mode so can make a new CAM tag.

Bugs fixed (include bugzilla ID): 252, 310, 370, 377, 385 (partial -- 302, 357, 389)

Describe any changes made to build system: Remove -DNO_R16 from Makefile

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: MSS writes are now synchronous instead of
	asynchronous

Code reviewed by: slevis

List any externals updated: Update to csm_share3_070220

List all subroutines eliminated:

Remove makdep -- as MkDepends replaces it
Remove cprlndnc -- as newcprnc replaces it

D      tools/makdep
D      tools/makdep/main.c
D      tools/makdep/Makefile
D      tools/makdep/README
D      tools/cprlndnc
D      tools/cprlndnc/cprtps.F
D      tools/cprlndnc/lenchr.F
D      tools/cprlndnc/precision.F
D      tools/cprlndnc/printstats.F
D      tools/cprlndnc/wrap_nf.F
D      tools/cprlndnc/stats.F
D      tools/cprlndnc/ismax.F
D      tools/cprlndnc/initstats.F
D      tools/cprlndnc/nldat.F
D      tools/cprlndnc/cpr.F
D      tools/cprlndnc/prhddiff.F
D      tools/cprlndnc/header.F
D      tools/cprlndnc/Makefile
D      doc/BranchLog
D      doc/ChangeSum

Delete files that tools use that are copied from main src directories (so we don't have
to maintain separate copies of code)

D      Deleting       tools/mkgriddata/fileutils.F90
D      Deleting       tools/mkgriddata/nanMod.F90
D      Deleting       tools/mkgriddata/shr_const_mod.F90
D      Deleting       tools/mkgriddata/shr_kind_mod.F90
D      Deleting       tools/mkgriddata/shr_sys_mod.F90
D      Deleting       tools/mksurfdata/fileutils.F90
D      Deleting       tools/mksurfdata/nanMod.F90
D      Deleting       tools/mksurfdata/shr_const_mod.F90
D      Deleting       tools/mksurfdata/shr_kind_mod.F90
D      Deleting       tools/mksurfdata/shr_sys_mod.F90
D      Deleting       tools/mksurfdata/shr_timer_mod.F90

List all subroutines added and what they do:

A      test/system/TSMtools.sh -- for testing of the tools (not tested yet)
A      test/system/TCBtools.sh -- for build testing of the tools (not tested yet)
A      test/system/tests_pretag_blueice -- for running on blueice (does work)
A      test/system/tests_pretag_jaguar -- for running on jaguar (doesn't work yet)
A      test/system/tests_posttag_lightning -- for running on lightning (doesn't work yet)

Files added so that tools build uses copies of files in main directories rather than separate copies

A      tools/mkgriddata/Filepath
A      tools/mkgriddata/Srcfiles
A      tools/mkgriddata/misc.h
A      tools/mkgriddata/preproc.h
A      tools/mksurfdata/Filepath
A      tools/mksurfdata/Srcfiles
A      tools/mksurfdata/misc.h
A      tools/mksurfdata/preproc.h

List all existing files that have been modified, and describe the changes:

Add check for soil energy balance:

M      src/biogeophys/BalanceCheckMod.F90

Bigint bug fix (don't copy over static fields with bigint values when copying a domain)

M      src/main/domainMod.F90

SCAM fixes (read datasets differently for SCAM)

M      src/main/surfrdMod.F90
M      src/main/ndepFileMod.F90
M      src/main/iniTimeConst.F90

Change so that tools use main copies of code rather than own particular copy:

M      tools/mkgriddata/Makefile
M      tools/mkgriddata/mkgriddata.namelist
M      tools/mksurfdata/Makefile
M      tools/mksurfdata/domainMod.F90

Make MSS write's synchronous instead of asynchronous: Required for LSF queing systems

M      src/main/fileutils.F90

Landmask bug fix: (landmask now output globally with no missing or fill values)

M      src/main/histFileMod.F90
M      src/main/initializeMod.F90
M      src/main/ncdio.F90

Timers

M      src/main/program_csm.F90
M      src/main/driver.F90

Make clmtype private -- so only exports it's data not data it uses.

M      src/biogeochem/CNGapMortalityMod.F90
M      src/biogeochem/VOCEmissionMod.F90
M      src/biogeochem/CNrestMod.F90
M      src/biogeochem/CNC13FluxMod.F90
M      src/biogeochem/CNSetValueMod.F90
M      src/main/atmdrvMod.F90
M      src/main/clmtypeInitMod.F90
M      src/main/pftdynMod.F90
M      src/main/restFileMod.F90
M      src/main/clmtype.F90
M      src/biogeophys/SnowHydrologyMod.F90
M      src/biogeophys/SurfaceAlbedoMod.F90
M      src/biogeophys/BiogeophysRestMod.F90
M      src/biogeophys/DriverInitMod.F90

Miscellaneous:

M      bld/Makefile.in  --- Remove NO_R16 CPP token, some changes to start work on jaguar
M      test/system/test_driver.sh -- add more machines
M      test/system/CLM_runcmnd.sh -- add more machines

Summary of testing:

  bluevista: 	All PASS -- except TBL tests because of csm_share shr_const_mod TKFRZ change
  bangkok/lf95: All PASS -- except TBL tests because of csm_share shr_const_mod TKFRZ change
  blueice: 	All PASS -- except TBL tests because of csm_share shr_const_mod TKFRZ change

CLM tag used for the baseline comparison tests if applicable: clm3_expa_90

  Summarize any changes to answers: larger than roundoff (all config/all machines)

  (No simulations were performed as CCSM scientists deemed the change to be
   insignificant)

===============================================================
===============================================================
Tag name:  clm3_expa_90
Originator(s):  nanr
Date:  Tue Feb  6 13:17:55 MST 2007
One-line Summary:  Changed creategridMod.F90 to read variables from 10min USGS file.

Purpose of changes:  
Added htopo and landfract to retrieve landfrac and topography for processing USGS-gtopo30_10min_c050419.nc

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by:  nanr

List all subroutines eliminated:  none

List all subroutines added and what they do:  none

List all existing files that have been modified, and describe the changes:

M      creategridMod.F90

   Added lines to creategridMod.F90 to read variables from USGS-gtopo30-10min_c050419.nc 

    ier = nf_inq_varid (ncid, 'landfract', varid)
    if (ier == NF_NOERR) then
       if (landfracset) write(6,*) trim(subname),' WARNING, overwriting frac'
       landfracset = .true.
       write(6,*) trim(subname),' read landfract'
       call check_ret(nf_inq_varid (ncid, 'landfract', varid), subname)
       call check_ret(nf_get_var_double (ncid, varid, domain%frac), subname)
    endif

    ier = nf_inq_varid (ncid, 'htopo', varid)
    if (ier == NF_NOERR) then
       if (toposet) write(6,*) trim(subname),' WARNING, overwriting topo'
       toposet = .true.
       write(6,*) trim(subname),' read htopo'
       call check_ret(nf_inq_varid (ncid, 'htopo', varid), subname)
       call check_ret(nf_get_var_double (ncid, varid, domain%topo), subname)
    endif


Summary of testing:  none. Affects tools/mkgriddata only.

  bluesky:
  tempest:
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate: 
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name: clm3_expa_89
Originator(s): erik,oleson
Date: Feb/02/2007
One-line Summary: 

Purpose of changes: Use new water table rise calculation in SoilHydrology

Bugs fixed (include bugzilla ID): 345, 353

Describe any changes made to build system: None (although added Darwin to mksrfdat build Makefile)

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Keith Oleson

List all subroutines eliminated: None

Remove bld/offline directory tree

List all subroutines added and what they do: None

List all existing files that have been modified, and describe the changes:

M      bld/Makefile.in ---- Add -DFORTRANUNDERSCORE so can compile mpi-serial on IRIX

Change run scripts so that spmd and smp settings work for both on AND off

M      bld/run-pc.csh ----------------------- Also add LD_LIBRARY_PATH setting
M      bld/run-sgi.csh
M      bld/run-lightning.csh

M      src/main/spmdMod.F90 ------------------ Remove #ifdef around #include <mpif.h> so will
	run serial (this is a partial fix to bug 337. The longer term fix is to remove all
	#ifdef SPMD as we can use the mpi-serial code to make the serial and SPMD code the same.

M      src/biogeophys/SoilHydrologyMod.F90 --- New drainage formulation from Keith Oleson

Summary of testing:

  bluesky: -- All but comparision to previous version
  tempest: -- All but comparison to previous version and the following restart tests
	(These tests fail on previous versions as well -- documented as bug 361)
002 er111 TER.sh 4p_vodsr_dh t31 10+38 ............................FAIL! rc= 11
003 br111 TBR.sh 4p_vodsr_dh t31 24+24 ............................FAIL! rc= 11
005 sm116 TSM.sh 4p_vodsr_o t31 48 ................................FAIL! rc= 4
007 er121 TER.sh 17p_vodsr_dh t31 10+38 ...........................FAIL! rc= 11
008 br121 TBR.sh 17p_vodsr_dh t31 24+24 ...........................FAIL! rc= 11
012 er211 TER.sh 17p_cnn_dh t31_cnall 10+38 .......................FAIL! rc= 11
013 br211 TBR.sh 17p_cnn_dh t31_cnall 24+24 .......................FAIL! rc= 11
016 er311 TER.sh 4p_casa_dh t31_casa 10+38 ........................FAIL! rc= 11
017 br311 TBR.sh 4p_casa_dh t31_casa 24+24 ........................FAIL! rc= 11
020 er411 TER.sh 10p_dgvm_dh t31_dgvm 10+38 .......................FAIL! rc= 11
021 br411 TBR.sh 10p_dgvm_dh t31_dgvm 24+24 .......................FAIL! rc= 11
	(We are going to remove tempest as a standard test for CLM)

  bangkok/lf95: -- All but comparision to previous version

CLM tag used for the baseline comparison tests if applicable: none

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change (similar climate)

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers: Cray-XT3/jaguar
   - configuration (CPP ifdefs): default
   - build-namelist command (or complete namelist):
   - MSS location of output: /CCSM/csm/b31.020ws/lnd/hist

   URL for LMWG diagnostics output used to validate new climate: Not yet prepared
	
===============================================================
===============================================================
Tag name: clm3_expa_88
Originator(s): nanr
Date: Thu Jan 11 12:31:51 MST 2007
One-line Summary:  Minor formatting change in tools.
		   Correctons to ChangLog
		

Purpose of changes: 
1.	Update formatted write in tools/ mkgriddata.F90 and tools/mksrfdat.F90 
	to accomodate 4 digit lat/lons.
2.	Add note to ChangeLog to explain commit by nanr (10/27) that was not tagged.
3.	correct Changelog for tag clm3_expa_80.  The changes listed below never happened.
	surfFileMod.F90 was actually removed from the trunk in a previous tag (clm3_expa_66)
	and renamed surfrdMod.F90.  So this modification probably reflects the status of the branch 
	Keith Oleson was working on.
		M      src/main/surfFileMod.F90

		Removed statements contained within CN ifdef (OK'd by P. Thornton) that:

		! the following test prevents the assignment of temperate deciduous
                  		! vegetation types in the tropics
                  		! 1. broadleaf deciduous temperate tree -> broadleaf deciduous tropical tree
                  		! 2. broadleaf deciduous temperate shrub -> broadleaf deciduous tropical tree
                  		! this reassignment from shrub to tree is necessary because there is currently no
                  		! tropical deciduous broadleaf shrub type defined.


Bugs fixed (include bugzilla ID):  none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: nanr

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

M      tools/mksurfdata/mksrfdat.F90
M      tools/mkgriddata/mkgriddata.F90
	
   Changed formatting strings to accomodate 4 char lat/lons.
	OLD:  write (resol,'(i3.3,"x",i3.3)') lsmlat,lsmlon
	NEW:  write (resol,'(i4.4,"x",i4.4)') lsmlat,lsmlon

Summary of testing:  none.  Changes only to tools and ChangeLog

  bluesky:
  tempest:
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable: none

IF tag changes answers relative to baseline comparison the
following should be filled in: none

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate: NA
   
   URL for LMWG diagnostics output used to validate new climate: NA
	
===============================================================
===============================================================
Tag name: clm3_expa_87
Originator(s): tcraig, jet
Date: Wed Dec 27 05:03:01 GMT 2006
One-line Summary: merge fme branch, merge refactor_scam branch

Purpose of changes: bug fixes, reduce memory usage, improve memory scaling,
	add mct package, update scam

Bugs fixed (include bugzilla ID): 
	#133 adomain,ldomain compare
	#290 time bounds problem in history file
	#291 fix rtm history bug on bangkok
	#301 modify decomp info in i/o
	#321 merge refactor_scam branch

Describe any changes made to build system: none

  consisting of src, dst, S (COL, ROW, S).  update the internal clm
  atm/lnd mappings to use new datatype.  lnd/rtm and driver/atm
  mapping still using gridmap_type.  this will be updated in future
  versions.
- convert domain from 2d global to 1d global arrays.  add glo 
  decomp which is global 1d indexing like ij to 1d or gsn 
  uncompressed.
- convert wtxy, vegxy, pctspec from 2d to 1d arrays.  migrate many other arrays 
  from 2d global (i,j) to 1d global.  this is for nesting and to eventually
  cut down on number of index mappings in decomp_type
- reorganize order of initialization calls to start thinking about nesting
- add gatm array to domain datatype
- clean up dead code.
- rename initSubgridMod to subgridMod
- move map_indexes to subgridMod, rename get_subgrid_indexees
- rearrange a few subroutines to improve filename hierarchy and use logic
- delete get_sn routines, no longer needed
- update indexing in clm_atmlnd, remove hardwire indexes
- rewrite i/o as needed for 1d global arrays, not 2d
- delete gatherWeightsDGVM from DGVMMod.F90, no longer needed
- rename surfFileMod to surfrdMod.F90
- reduce size of subgrid_type and redefine gcelldc and gcellsn


Summary of testing:

  bluesky: 	clm test passes, cam pretag passes except ccsm
  tempest: 	cam pretag passes
  bangkok/lf95: cam pretag passes except bl153, bl353, bl553 due to code
	changes and resulting binary produced by compiler optimizations.
	also scam fails.

CLM tag used for the baseline comparison tests if applicable: clm3_expa_65, cam3_3_16

  Summarize any changes to answers: NONE bit-for-bit

===============================================================
===============================================================
Tag name: clm3_expa_65
Originator(s): Erik Kluzek
Date: Mon Jul 10 13:52:20 MDT 2006
One-line Summary: Use share clocks and inputinfo object at driver level

Purpose of changes: Use new version of esmf_wrf and csm_share as next step
  in sequential CCSM development.

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: Add ability to use Darwin, add eshr to
Filepath

Describe any changes made to the namelist: Instead of directing namelist from stdin
  explicitly open namelist filename.  Change namelist name from clmexp to clm_inparm.

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Mariana Vertenstein, Tony Craig, Forrest Hoffman

Externals changed:  csm_share        to share3_060710
		    esmf_wrf_timemgr to esmf_wrf_timemgr_060616

List all subroutines eliminated: None

List all subroutines added and what they do: control_setNL (controlMod.F90) sets the
  namelist filename.

List all existing files that have been modified, and describe the changes:

tools/newcprnc/Makefile
bld/offline/tests/CLM_namelist.pm
bld/offline/tests/CLM_lab.pm
bld/offline/tests/CLM.pm
bld/offline/tests/model_specs.csh
bld/offline/tests/configure.csh
bld/offline/tests/config_machine_specs.csh
bld/offline/tests/CLM_run.pm
bld/offline/tests/test_batch.csh
bld/offline/tests/Makefile
bld/offline/jobscript.csh

    Add eshr to Filepath, add Darwin as a valid platform, don't redirect unit 5 for
namelist. Set MODEL_DATDIR explicitly. Use lnd.stdin as default namelist name.
Add "-g" to Makefile. Change clm namelist from clmexp to clm_inparm. Get test_batch.csh
to work both on bangkok for Linux/Lahey and tempest for SGI. Write out Rootdir file
when configuring build directory.

src/main/time_manager.F90 -- Use dayOfYear_r8 for calc_calday.
src/main/clm_comp.F90 ------ Pass CCSMInit in.
src/main/fileutils.F90 ----- Small changes to how using shr_file_mod.
src/main/initializeMod.F90 - Pass clock in.
src/main/program_csm.F90 --- Change where ESMF_Initialize is done.
src/main/controlMod.F90 ---- Add method to set namelist name, pass clock in and use it.
src/main/clm_varctl.F90 ---- Get rid of cam_ variables.
src/main/lnd_comp_mct.F90 -- Pass in clock and CCSMInit object.

Summary of testing:

  bluesky: 	test-batch.csh -- PASS and CAM and CAM CCSM tests pass.
  tempest: 	test-batch.csh -- PASS and CAM tests pass.
  bangkok/lf95: test-batch.csh -- PASS and CAM tests pass.

CLM tag used for the baseline comparison tests if applicable: clm3_expa_64

  Summarize any changes to answers: NONE bit-for-bit

===============================================================
===============================================================
Tag name: clm3_expa_64
Originator(s): Dani Bundy Coleman <bundy@ucar.edu>
Date: Thu Jun 29 14:44:07 MDT 2006
One-line Summary: dust modifications from Natalie Mahowald

Purpose of changes: update dust code 

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: Mariana Vertenstein <mvertens@ucar.edu>

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:

M      src/biogeochem/DUSTMod.F90
       OLD     dmt_vma = 2.524e-6_r8 ! [m] Mass median diameter analytic       She84 p.75 Table1
       NEW     dmt_vma = 3.500e-6_r8 ! [m] Mass median diameter analytic 

M      src/main/clm_atmlnd.F90
       add land-to-atmosphere communication of fv,ram1 & dust fluxes
       (only active if defined DUST or PROGSEASALT )
M      src/main/lnd_comp_mct.F90
       add land-to-atmosphere communication of fv,ram1 & dust fluxes
       (only active if defined DUST or PROGSEASALT )

Summary of testing:

  bluesky: tested with cam, bfb when DUST and PROGSEASALT not defined
  tempest:
  bangkok/lf95:  tested with cam, bfb when DUST and PROGSEASALT not defined

CLM tag used for the baseline comparison tests if applicable: clm3_expa_63

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name: clm3_expa_63
Originator(s): Mariana Vertenstein
Date: Fri May 12 16:08:03 MDT 2006  
One-line Summary: introduced mct domains in COUP_CAM mode

Purpose of changes: To introduce generalized mct domains
in COUP_CAM mode for the purposes of generating a sequential 
ccsm 

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none
 
Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: Tony Craig

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:
  lnd_comp_mct.f90 
     removed lnd_CheckGrid_mct routine and replaced it with lnd_domain_mct
     each processor sends it local domain information stored in an MCT
     GeneralGrid data structure back to the top level application driver. 
     A global gather is done for the GeneralGrid and domain comparison is
     performed on the master processor.     

Summary of testing:

  bluesky: only cam test suite was run successfully
  tempest: only cam test suite was run successfully
  bangkok/lf95: only cam test suite was run successfully

CLM tag used for the baseline comparison tests if applicable:

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
===============================================================
Tag name: clm3_expa_62
Originator(s): erik, tcraig
Date: Wed May 10 00:06:39 MDT 2006
One-line Summary: merge shrgetput08_clm3_expa_61, fix finemesh bugs

Purpose of changes: changes required for sequential ccsm.  validate
	finemesh is running properly.

Bugs fixed (include bugzilla ID):
	a couple finemesh bugs, not documented.

Describe any changes made to build system: modified makefile slightly
	to set HIDE_MPI when SPMD is FALSE, remove HIDE_SHR_MSG

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: erik, tcraig

List all subroutines eliminated: none

List all subroutines added and what they do: none

List all existing files that have been modified, and describe the changes:
Makefile:
 - remove HIDE_SHR_MSG, not needed anymore
 - add HIDE_MPI if SPMD is FALSE
SVN_EXTERNALS:
 - change csm_share version from share3_051205 to share3_060428
 - change emsf_wrf_timemgr version from esmf_wrf_timemgr_051212 to esmf_wrf_timemgr_060501
fileutils.F90:
 - uses shr_file_mod.F90 routines
 - use shr_file_mod syntax for archive_dir (using mss: prefix)
initializeMod.F90:
 - add pnamer_bin get
program_csm.F90:
 - add ESMF_Initialize call
clm_atmlnd.F90:
 - fix bug in call to grid_maparray for finemesh mapping, only affects finemesh runs.
controlMod.F90:
 - use shr_file_mod syntax for archive_dir (using mss: prefix)
lnd_comp_mct.F90:
 - change call to get_proc_bounds to get_proc_bounds_atm (bug for finemesh runs).
program_off.F90:
 - add calls to ESMF_Initialize and ESMF_Finalize
 
	
Summary of testing:
  bluesky: cam full suite bfb
	   clm full suite not bfb (TS is bfb for 2 days, history file not bfb
	      after ~1.5 days probably due to new esmf time manager, likely roundoff)
  tempest: cam full suite bfb, ccsm build test
  bangkok/lf95: cam full suite bfb
  bluevista : ccsm TER.01a.1.9x2.5_gx1v3.B.bluevista bfb
	      cam finemesh T42half.clim0 test, bfb for 42 timesteps vs cam3_2_49
  lightning : ccsm TER.01a.4x5_gx3v5.B.bluevista bfb

CLM tag used for the baseline comparison tests if applicable: 
  clm3_expa_61, cam3_3_4, ccsm3_1_beta27

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: clm standalone only
    - what platforms/compilers: only bluesky tested
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
	assume roundoff.  it's bfb for at least a day.  in cam and ccsm mode they
	are bfb.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?  guess

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================

===============================================================
Tag name: clm3_expa_61
Originator(s): T Craig
Date: Thu Apr 27 01:10:40 MDT 2006
One-line Summary: merge cammct05_clm3_expa_58 onto main trunk,
  modify surface dataset input

Purpose of changes: merge branch

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the boundary datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: myself, developed my MV

List all subroutines eliminated:
  clm_camMod.F90 - interface to cam
  MCT_atmlnd_cpl.F90 - mct migrated to sequential driver
  MCT_lnd_comp.F90 - mct migrated to sequential driver

List all subroutines added and what they do:
  lnd_comp_mct.F90 - interface to sequential driver using mct coupling
	
List all existing files that have been modified, and describe the changes:
  clm_comp.F90 - separate init method into init1, init2
  initializeMod.F90 - separate initialize into initialize1 and 2
  program_csm.F90 - add call to clm_init0
  clm_atmlnd.F90 - PWorley's changes to improve phoenix performance,
    packed arrays in clm_mapa2l and clm_mapl2a interpolation.
  program_off.F90 - add call to clm_init0
  areaMod.F90 - PWorley's changes to improve phoenix performance,
    interpolate packed arrays in gridmap_maparray
  Hydrology2Mod.F90 - remove use of iam

  mksurfdata, several files changed to convert
    mksrf_fgrid_global/regional to mksrf_fgrid and mksrf_gridtype
	
Summary of testing:

  bluesky: clm full suite bfb, cam full suite bfb
  bluevista: ccsm bfb TER.01a.T31_gx3v5.B.bluevista, TER.01a.4x5_gx3v5.B.bluevista
  tempest: cam full suite bfb
  bangkok/lf95: cam full suite bfb

  mksrf tested on bluevista, 7 cases, bfb
	
CLM tag used for the baseline comparison tests if applicable:
  clm3_expa_60, cam3_3_2, ccsm3_1_beta25

changes are bit-for-bit
	
===============================================================

	
===============================================================
Tag name: clm3_expa_60
Originator(s): Forrest Hoffman
Date: Fri Apr 14 11:03:34 EDT 2006
One-line Summary: Rearranged physiology fields, changed CO2 constants, fixed Bug #43

Purpose of changes: Make radiation-related physiology fields standard, prepare code for C-LAMP experiments, and make test-model run on Cray X1E (phoenix)

Bugs fixed (include bugzilla ID): Bug #43

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: Myself

List all subroutines eliminated: None

List all subroutines added and what they do: None

List all existing files that have been modified, and describe the changes:

nfwrappers.f90:
Changed intent for ncid from intent(in) to intent(out) since it must be
returned to the calling routines.  This fixed Bug #43 which was discovered
on the Cray X1E (phoenix).

ChangeLog:
Added this log entry.

clm_varcon.F90:
Changed co2_ppmv_const to 283.1878_r8 for both CASA' and CN in preparation
for Experiment 1 of the C-LAMP.

histFldsMod.F90
Moved LAISUN, LAISHA, TLAI, TSAI, SLASUN, and SLASHA out of the CN-only
section of the code so that they appear on the regular CLM output files
since the two-leaf radiation code is now standard.  In addition, TLAI and
TSAI were removed from the DGVM-only section of the code since these
output fields are now standard.

Summary of testing:

  cheetah:
Ran test-model for T31, T31cn, T31cnall, T31casa, and T31dgvm with
baseline clm3_expa_59.  T31 and T31dgvm passed all tests.  The others
passed tests 01-05, but not the 06_control test because of the change
in co2_ppmv_const.

  phoenix:
Ran test-model for T31, T31cn, T31cnall, T31casa, and T31dgvm with
baseline clm3_expa_59.  T31 and T31dgvm passed all tests.  The others
passed tests 01-05, but not the 06_control test because of the change
in co2_ppmv_const.

CLM tag used for the baseline comparison tests if applicable: clm3_expa_59

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations: co2_ppmv_const modification changes answers
    - what platforms/compilers: IBM (cheetah) and Cray X1E (phoenix)
    - nature of change (roundoff; larger than roundoff/same climate; new climate): larger than roundoff because of changes in carbon pools

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? cprnc

   * There is no validated climate in these model configurations. *

===============================================================
===============================================================
Tag name: clm3_expa_59
Originator(s): Tony Craig
Date: Wed Apr  5 18:03:23 MDT 2006
One-line Summary: add fatmlndfrc capability

Purpose of changes:  Support new datasets, other minor improvements,
  update mkgrid and mksurf tools for new dataset generation.

Bugs fixed (include bugzilla ID):

Describe any changes made to build system: jobscript.csh modified for
  new surface datasets, change baseline resolution to T31.

Describe any changes made to the namelist: added optional fatmlndfrc
  namelist input for landfrac file on atm grid.

List any changes to the defaults for the boundary datasets:  all new
  grid, frac, and surf datasets generated, located in 
  /fs/cgd/csm/inputdata/lnd/clm2/[griddata,surfdata]

Describe any substantial timing or memory changes: None

Code reviewed by: myself

List all subroutines eliminated: None

List all subroutines added and what they do: None

List all existing files that have been modified, and describe the changes:

tools/mksurfdata/mkrfdat.F90 - change default output filenames
tools/mksurfdata/mklaiMod.F90 - removed masking since there is no mask anymore
tools/mksurfdata/mkfileMod.F90 - removed read of LANDMASK and LANDFRAC
tools/mksurfdata/creategridMod.F90 - removed write of LANDMASK and LANDFRAC
tools/mksurfdata/Makefile - fix clean bug
tools/mkgriddata/mkgriddata.F90 - add generation of ffracdat file
   force area calculation for ccsm domain files due to noise in scrip areas
   change default output filenames
tools/mkgriddata/mkvarctl.F90 - add support for area recomputation
tools/mkgriddata/mkfileMod.F90 - removed, merged into creategridMod.F90
tools/mkgriddata/areaMod.F90 - add flush(6)
tools/mkgriddata/creategridMod.F90 - add mkfile subroutine
   fix bug in setting of corner points
   handle wrap-around points better with corner points
   add ability to adjust units of area (not automatic)
   add checks for area
   add ability write eigher grid or frac file in write_domain
bld/offline/tests/test_batch.csh - change default version from 53 to 58
   turn on dgvm testing by default
bld/offline/jobscript.csh - change to share queue on bluesky
   run mixed mpi/openmp by default, 2x2
   change default resolution to T31 (was T42)
   update to use new surface datasets
   change default, turn on DUST, RTM, VOC, turn off CN, SUPLN, SUNSHA, STOMATA2
   add unlimit unlimited for AIX
   fix redirection to compile_log.clm output file
src/main/initializeMod.F90 - add fatmlndfrc stuff
   add computation of ldomain%frac and ldomain%mask
src/main/controlMod.F90 - add fatmlndfrc stuff
src/main/clm_varctl.F90 - add fatmlndfrc stuff
src/main/driver.F90 - remove redundant definition of caldayp1
src/main/clmtypeInitMod.F90 - remove landfrac variable for clm3 gridcell_type
src/main/histFileMod.F90 - add indxupsc, jndxupsc indices for upscaling
src/main/program_csm.F90 - move shr_msg_stdio to after MPI_INIT, change
   call so it only redirects log file for masterproc.  this will clean
   up the log file significantly but may lead to error messages ending
   up in stdout.
src/main/surfFileMod.F90 - add fatmlndfrc stuff
src/main/initGridCellsMod.F90 - remove landfrac variable for clm3 gridcell_type
src/main/domainMod.F90 - reorder domain data slightly (nothing changed)
src/main/areaMod.F90 - change default of i_ovr and j_ovr from bigint to -1,
   allows for cleaner writing of indxupsc and jndxupsc in history file.
   change gridmap_setmapsFM to use _a and _l notation instead of _i and _o
src/main/clmtype.F90 - remove landfrac from clm3 gridcell_type

	
Summary of testing:

  Baseline versions, clm3_expa_58, cam3_2_56, ccsm3_1_beta24

  bluesky: clm full suite passes, cam full suite passes
  tempest: cam full suite passes 
  bangkok/lf95: cam full suite passes
  bluevista: ccsm TER.01a B passes for several resolutions, new datasets
     in scripts
	
CLM tag used for the baseline comparison tests if applicable: clm3_expa_58

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Code changes are bfb, but answers may change when using new surface datasets

  Summarize any changes to answers, i.e.,
    - what code configurations: CCSM answers will change with new datasets as
      default datasets are changing.  clm default test is bfb at T31 with new datasets,
      cam will be bfb as current default datasets are not being updated.
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================


===============================================================
Tag name: clm3_expa_58
Originator(s): Forrest Hoffman
Date: Thu Mar  9 17:04:27 EST 2006
One-line Summary: Updates for the Cray X1E and a forcing height error check.

Purpose of changes: Improvements on the Cray X1E and avoiding arithmetic exceptions when the forcing height is below the canopy height.

Bugs fixed (include bugzilla ID): Bug #36

Describe any changes made to build system: jobscript.csh modified for Cray X1E

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: None

Code reviewed by: myself and (for forcing height check code) Mariana Vertenstein

List all subroutines eliminated: None

List all subroutines added and what they do: None

List all existing files that have been modified, and describe the changes:

   jobscript.csh - Modified for Cray X1E and cross-compiler
   inicFileMod.F90 - Added compiler directives for vectorization
   driver.F90 - Commented out CSDs to avoid model hangs caused by write
      statements in science routines within the associated loops
   controlMod.F90 - Changed default clump_pproc to 1 for the Cray (since CSDs
      are not used in driver.F90
   histFldsMod.F90 - Changed type2d='levlak' for the TLAKE field
   CanopyFluxesMod.F90 - Inserted code to check if the forcing height
      is below the canopy height for any pft.  Model will now abort when this
      occurs instead of taking the log() of a negative number.  See Bug #36

Summary of testing:

  bluesky: test-model ran as follows
01_debug_run_SPMD: T31 ran
02_debug_run_nonSPMD: T31 ran
03_start: T31 ran
04_restart: T31 ran
05_norestart_compare_to_restart: T31 ran
06_control: T31 ran
01_debug_run_SPMD: T31cn ran
02_debug_run_nonSPMD: T31cn ran
03_start: T31cn ran
04_restart: T31cn ran
05_norestart_compare_to_restart: T31cn ran
06_control: T31cn ran
01_debug_run_SPMD: T31cnall ran
02_debug_run_nonSPMD: T31cnall ran
03_start: T31cnall ran
04_restart: T31cnall ran
05_norestart_compare_to_restart: T31cnall ran
06_control: T31cnall ran
01_debug_run_SPMD: T31casa ran
02_debug_run_nonSPMD: T31casa ran
03_start: T31casa ran
04_restart: T31casa ran
05_norestart_compare_to_restart: T31casa ran
06_control: T31casa ran
  cheetah:
01_debug_run_SPMD: T31cnall ran
02_debug_run_nonSPMD: T31cnall ran
03_start: T31cnall ran
04_restart: T31cnall ran
05_norestart_compare_to_restart: T31cnall ran
06_control: T31cnall ran
01_debug_run_SPMD: T31 ran
02_debug_run_nonSPMD: T31 ran
03_start: T31 ran
04_restart: T31 ran
05_norestart_compare_to_restart: T31 ran
06_control: T31 ran
01_debug_run_SPMD: T31cn ran
02_debug_run_nonSPMD: T31cn ran
03_start: T31cn ran
04_restart: T31cn ran
05_norestart_compare_to_restart: T31cn ran
06_control: T31cn ran
01_debug_run_SPMD: T31casa ran
02_debug_run_nonSPMD: T31casa ran
03_start: T31casa ran
04_restart: T31casa ran
05_norestart_compare_to_restart: T31casa ran
06_control: T31casa ran
  tempest:
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable: clm3_expa_57

===============================================================
Tag name: clm3_expa_57
Originator(s): Peter Thornton
Date: 31 Jan 2006
One-line Summary: Mods to allow switching between 3 and 4 soil
 organic matter pools

Purpose of changes: New science.

Bugs fixed (include bugzilla ID): bugs in pftdynMod.F90 and ndepfileMod.F90

Describe any changes made to build system:

Describe any changes made to the namelist: Added SOM4 as new CPP directive

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes: none

Code reviewed by: myself

List all subroutines eliminated:

List all subroutines added and what they do:

List all existing files that have been modified, and describe the changes:
main/clmtype.F90: added soil4c (and 13C equiv.), soil4n states and associated
    flux variables. Also added long name commenting for many previously defined
    variables.
main/clmtypeInitMod.F90: added initialization for new variables
main/CNiniTimeVar.F90: initialize new state variables.
main/histFldsMod.F90: added new variables, and also added long names for 
    many previously defined variables.
main/pftdynMod.F90: bug fix in mpi_bcast, change MPI_REAL8 to MPI_INTEGER.
main/ndepFileMod.F90: bug fix for mpi_bcast, change MPI_REAL8 to MPI_INTEGER.
biogeochem/CNSetValueMod.F90: add code for new state and flux variables.
biogeochem/CNDecompMod.F90: add code to allow either 3 or 4 SOM pools. Default
    behavior is 3 pools, 4-pool behavior triggered by SOM4 CPP directive.
biogeochem/CNCStateUpdate1Mod.F90: handling for new variables.
biogeochem/CNNStateUpdate1Mod.F90: handling for new variables.
biogeochem/CNSummaryMod.F90: handling for new variables.
biogeochem/CNBalanceCheckMod.F90: handling for new variables
biogeochem/CNPrecisionControlMod.F90: handling for new variables
biogeochem/CNC13FluxMod.F90: handling for isotope version of new variables
biogeochem/C13StateUpdate1Mod.F90: handling for new variables
biogeochem/C13SummaryMod.F90: handling for new variables
biogeochem/CNrestMod.F90: handling for new variables, and modify EXIT_SPINUP
    controls
    
Summary of testing:

  bluesky:
  tempest:
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable: in 3-pool mode 
(SOM4 not set), results are bfb with clm3_expa_55.  in 4-pool mode, changes
answers, as expected.

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
bfb under 3-pools is demonstrated at:
http:/www.cgd.ucar.edu/tss/clm/diagnostics/clm3cn/c13/ccsm3_bgc31_I_5a-ccsm3_bgc31_I_2b/setsIndex.html
	
===============================================================
Tag name: clm3_expa_56
Originator(s): Tony Craig
Date: 31 Jan 2006
One-line Summary: Final changes for finemesh implementation.

Purpose of changes: Integrate final changes for finemesh implementation.  These
changes are 100% backward compatable and bfb, but also support use of a finemesh grid.  finemesh implementation has been test in clm and cam.

Bugs fixed (include bugzilla ID):

Describe any changes made to build system: Update Makefile so Depends are regenerated if any code is changed.

Describe any changes made to the namelist: Added one new optional namelist, fatmgrid.  This is a dataset for the coarse grid in clm.  The format is the same as the surface dataset but only needs to include grid variables.

List any changes to the defaults for the boundary datasets:  Generated some new datasets with filled wetland and higher resolution.  Not required and not yet added to default suite of datasets.

Describe any substantial timing or memory changes:

Code reviewed by:

List all subroutines eliminated:

List all subroutines added and what they do:

List all existing files that have been modified, and describe the changes:

tools/mksurfdata:
  mksrfdat.F90,areaMod.F90,creategridMod.F90
bld/offline/Makefile
doc/ChangeLog
 src/main:
clm_comp.F90,driver.F90,clm_camMod.F90,atmdrvMod.F90,clmtypeInitMod.F90,initializeMod.F90,histFileMod.F90,program_csm.F90,clm_atmlnd.F90,clm_csmMod.F90,surfFileMod.F90,controlMod.F90,clm_varctl.F90,initGridCellsMod.F90,MCT_lnd_comp.F90,program_off.F90,domainMod.F90,decompMod.F90,areaMod.F90,clmtype.F90
src/biogeophys/SurfaceAlbedoMod.F90

Code changes:
add pftm to domain datatype and history file
modify program_off and program_cs to use clm_init[1,2], clm_run[1,2]
modify coupling to handle coarse <-> finemesh for standlaone, cam, and
  ccsm.
modify Makefile so depends file is reset whenever there is a code change
add normalized area to history files
add lat_a, lon_a, latdeg_a, londeg_a to clm3 datatype for atm lats/lons.  
  required in SurfaceAlbedo computation where the the zenith angle has
  to be based on the atm (coarse) grid, not the fine clm grid.
merge with clm3_expa_53_brnchT_cam01 tag
	
Summary of testing:

  bluesky: clm full suite bfb, cam full suite bfb, ccsm bfb
  tempest: cam full suite bfb
  bangkok/lf95: cam full suite bfb

CLM tag used for the baseline comparison tests if applicable: clm3_expa_55

IF tag changes answers relative to baseline comparison the
following should be filled in: bfb

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? bfb

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
Tag name: clm3_expa_55
Originator(s): Peter Thornton
Date: 24 Jan 2006
One-line Summary: Fixes for 13C isotope code, migration from cvs

Purpose of changes:

Bugs fixed (include bugzilla ID):

Describe any changes made to build system:

Describe any changes made to the namelist:

List any changes to the defaults for the boundary datasets:

Describe any substantial timing or memory changes:

Code reviewed by: myself

List all subroutines eliminated:

List all subroutines added and what they do:

List all existing files that have been modified, and describe the changes:
Files modified:
1. CNFireMod.F90
Added initialization of variable mep.

2. CNrestMod.F90
Added EXIT_SPINUP controls on column-level 13C pools

3. C13SummaryMod.F90
Added current and excess maintenance respiration terms to summary MR variable.

4. CNC13FluxMod.F90
Added new routines to calculate 13C fluxes. Litter to column, non-mortality fluxes
at the column level, pft-level gap mortality fluxes, pft and column level fire mortality fluxes,

5. CNEcosystemDynMod.F90
Added calls for C13Flux2, C13Flux3, C13StateUpdate2, and C13StateUpdate3.

6. clm_varcon.F90
Added parameters to define a fixed pre_industrial del13C (set to -6 permil)

Summary of testing:

  bluesky:
  tempest:
  bangkok/lf95:

CLM tag used for the baseline comparison tests if applicable: clm3_expa_40

IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

Changes answers for CN only, and then only for the isotope prognostics.

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
http://www.cgd.ucar.edu/tss/clm/diagnostics/clm3cn/c13/ccsm3_bgc31_I_2a-ccsm3_bgc26_I_1d/setsIndex.html
===============================================================
Tag name: clm3_expa_54
Originator(s): Tony Craig
Date: 17 Jan 2006
One-line Summary: Update infrastructure in support of finemesh, migration from cvs

Purpose of changes: bfb infrastructure changes committed, partial step towards finemesh implementation

Bugs fixed (include bugzilla ID): None

Describe any changes made to build system: None

Describe any changes made to the namelist: None

List any changes to the defaults for the boundary datasets: None

Describe any substantial timing or memory changes: Some memory added for extra coarse grid, atmosphere domain, as well as changes to interpolation datatypes and code.  Redundant memory deleted from some datasets.

Code reviewed by: Mariana Vertenstein

List all subroutines eliminated: 

List all subroutines added and what they do:

List all existing files that have been modified, and describe the changes:

src/main:
initGridIndexMod.F90,lnd2atmMod.F90,CNiniTimeVar.F90,abortutils.F90,clm_comp.F90,driver.F90,clm_camMod.F90,atmdrvMod.F90,subgridRestMod.F90,accFldsMod.F90,clmtypeInitMod.F90,initializeMod.F90,pftdynMod.F90,iniTimeConst.F90,histFileMod.F90,program_csm.F90,clm_atmlnd.F90,clm_varsur.F90,clm_csmMod.F90,restFileMod.F90,surfFileMod.F90,controlMod.F90,initSurfAlbMod.F90,initSubgridMod.F90,clm_varctl.F90,ndepFileMod.F90,initGridCellsMod.F90,MCT_lnd_comp.F90,program_off.F90,domainMod.F90,decompMod.F90,areaMod.F90,clmtype.F90,histFldsMod.F90

src/riverroute:
RtmMod.F90

src/biogeochem:
CASAMod.F90,DUSTMod.F90,CNPhenologyMod.F90,STATICEcosysDynMod.F90,DGVMMod.F90,CNrestMod.F90,VOCEmissionMod.F90,CNNDynamicsMod.F90,CNVegStructUpdateMod.F90

src/biogeophys:
BalanceCheckMod.F90,SurfaceRadiationMod.F90,SoilTemperatureMod.F90,Biogeophysics1Mod.F90,Biogeophysics2Mod.F90,FrictionVelocityMod.F90,Hydrology1Mod.F90,Hydrology2Mod.F90,BiogeophysicsLakeMod.F90,HydrologyLakeMod.F90,BareGroundFluxesMod.F90,CanopyFluxesMod.F90

bld/offline/tests:
CLM_lab.pm,test_batch.csh
	
tools/mksurfdata:
mkdynpftMod.F90,mkgridMod.F90,shr_timer_mod.F90,mklaiMod.F90,mkglacier.F90,mkurban.F90,fileutils.F90,mksoitex.F90,mkfileMod.F90,domainMod.F90,areaMod.F90,creategridMod.F90,mkvarsur.F90,mksrfdat.F90,nanMod.F90,mklanwat.F90,mksoicol.F90,Makefile,mkpftMod.F90

tools/mkgriddata:
mkvarctl.F90,fileutils.F90,mkgriddata.F90,mkfileMod.F90,domainMod.F90,areaMod.F90,creategridMod.F90,mkvarsur.F90,nanMod.F90,Makefile

Code changes:
Merge atm2lnd_state_type, atm2lnd_flux_type.  Same for lnd2atm state/flux.
  Related changes in clm3 and elsewhere in code.
Add domainMod.F90 and domain_type.  Migrate grid data into domain type.
  Instantiate adomain(atm/coarse), ldomain(lnd/finemesh), rdomain(rtm),
  ddomain(atmdrv external data) in model.
Add lats, latn, lonw, lone 2d arrays and associated code changes.
Cleanup areaMod.F90; merging subroutines, removing redundant code, eliminate
  *_point routines.
Remove numlon
Add decomp_type for gcelldc and gcellsn.  Remove redundant data in other
  arrays related to addressing physical space and logical space.
Clean up interface in set_landunit subroutines.  Remove redundant code.
Clean up procs and clumps datatypes, removing redundant data.
Migrate clm3 topology data to pointers from copies
Add gridmap_type for interpolation and associated code and routines to
  support the type.
Add clm_atmlnd.F90 file for upscale/downscale code.  Add clm_mapa2l
  and clm_mapl2a to carry out mapping associated with upscale/downscale.
Add gridmap_setmapsFM for generation of weights for downscale/upscale
  routines.
forc_ndep should not be in atm2lnd_type.
Reuse code as much as possible throughout.
Update mksurfdata, mkgriddata.  Speed code up, bfb, new fields added,
  new input options for files.  Fill with wetland, add PFTDATA_MASK
  field for real/fake land.
Update code to clm3_expa_53
Rename latixy and longxy to latc and lonc.
Remove fullgrid attribute.

Summary of testing:

  bluesky: full clm test, full cam test
  tempest: full cam test
  bangkok/lf95: full cam test

CLM tag used for the baseline comparison tests if applicable: clm3_expa_53

IF tag changes answers relative to baseline comparison the
following should be filled in:  bfb

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? bfb

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
	
Tag name: clm3_expa_53
Originator(s): Mariana Vertenstein
Date: Fri Dec.16 2005
One-line Summary: Put in MCT communication for cam-clm coupling

Purpose of changes: removed lp_coupling communication and put in
MCT communication interfaces

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none
	
Describe any changes made to the namelist: none

List any changes to the defaults for the input datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: Mariana Vertenstein, Rob Jacob
	
List all subroutines eliminated: none

List all subroutines added and what they do: 
  main/MCT_atmlnd_cpl.F90  
     clm/cam MCT coupling interface - will be moved out of clm code in
     near future	
  main/MCT_lnd_comp.F90
     clm MCT wrapper layer
  main/clm_comp.F90
     module containing wrapper routines that separate clm into chunks of
     code that contain no communication (e.g. clm_run1, clm_run2 has no
     communicaiton). This is needed to satisfy requirement for implementing
     multiple coupling interfaces (e.g. concurrent/MCT, sequential/MCT,
     sequential/ESMF) within ccsm.	
  main/clm_varorb.F90	
     module for orbital parameters 
    (this will be added to program_off.F90 and program_csm.F90)
	
List all existing files that have been modified, and describe the changes:
    clm_camMod.F90 - all coupling still exists here

Summary of testing:
	
  bluesky:
  test-model.pl -res T31      
  test-model.pl -res T31cn    
  test-model.pl -res T31cnall 
  test-model.pl -res T31casa  
  test-model.pl -res T31dgvm  
	
  tempest: No testing

  bangkok/lf95: No testing

CLM tag used for the baseline comparison tests if applicable: clm3_expa_48
  results were bfb with clm3_expa48	
	
IF tag changes answers relative to baseline comparison the
following should be filled in:

  Summarize any changes to answers, i.e.,
    - what code configurations:
    - what platforms/compilers:
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

   If this tag changes climate describe the run(s) done to evaluate the new
   climate in enough detail that it(they) could be reproduced, i.e.,
   - source tag (all code used must be in the repository):
   - platform/compilers:
   - configuration (CPP ifdefs):
   - build-namelist command (or complete namelist):
   - MSS location of output:

   MSS location of control simulations used to validate new climate:
   
   URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
	
Tag name: clm3_expa_52
Originator(s): Mariana Vertenstein
Date: Tues Dec.12 2005
One-line Summary: Put in scam fix needed in CAM mode

Purpose of changes: clean up svn clm structure

Bugs fixed (include bugzilla ID):

Describe any changes made to build system:
None
	
Describe any changes made to the namelist:
None

List any changes to the defaults for the input datasets:
None

Describe any substantial timing or memory changes:
None

Code reviewed by:
Mariana Vertenstein
	
List all subroutines eliminated:
None

List all subroutines added and what they do:
None

List all existing files that have been modified, and describe the changes:
clm_camMod.F90 (this change was put into cam3_2_41)

Summary of testing:
No testing done

CLM tag used for the baseline comparison tests if applicable:
NA
	
IF tag changes answers relative to baseline comparison the
following should be filled in:

Summarize any changes to answers, i.e.,
 - what code configurations:
 - what platforms/compilers:
 - nature of change (roundoff; larger than roundoff/same climate; new climate): 

If bitwise differences were observed, how did you show they were no worse
than roundoff?

If this tag changes climate describe the run(s) done to evaluate the new
climate in enough detail that it(they) could be reproduced, i.e.,
 - source tag (all code used must be in the repository):
 - platform/compilers:
 - configuration (CPP ifdefs):
 - build-namelist command (or complete namelist):
 - MSS location of output:

MSS location of control simulations used to validate new climate:

URL for LMWG diagnostics output used to validate new climate:
	
===============================================================
	
Tag name:  clm3_expa_51
Originator(s): mvr
Date: Tues Dec.12 2005
One-line Summary: removed src/utils dir

Purpose of changes: should've been done with external setup in prev tag

Bugs fixed (include bugzilla ID): none

Describe any changes made to build system: none

Describe any changes made to the namelist: none

List any changes to the defaults for the input datasets: none

Describe any substantial timing or memory changes: none

Code reviewed by: mvr, mvertens

List all subroutines eliminated: 
D      src/utils

List all subroutines added and what they do: 
none

List all existing files that have been modified, and describe the changes:
none
	
Summary of testing:

bluesky: none
tempest: none
bangkok/lf95: none

CLM tag used for the baseline comparison tests if applicable:

IF tag changes answers relative to baseline comparison the
following should be filled in:

Summarize any changes to answers, i.e.,
 - what code configurations:
 - what platforms/compilers:
 - nature of change (roundoff; larger than roundoff/same climate; new climate):

If bitwise differences were observed, how did you show they were no worse
than roundoff? b4b

If this tag changes climate describe the run(s) done to evaluate the new
climate in enough detail that it(they) could be reproduced, i.e.,
 - source tag (all code used must be in the repository):
 - platform/compilers:
 - configuration (CPP ifdefs):
 - build-namelist command (or complete namelist):
 - MSS location of output:

MSS location of control simulations used to validate new climate:

URL for LMWG diagnostics output used to validate new climate:

===============================================================
Tag name: clm3_expa_50
Originator(s): Mariana Vertenstein
Date: Tues Dec.12 2005
One-line Summary: Updated external definitions for utils

Purpose of changes: clean up svn clm structure

Bugs fixed (include bugzilla ID):

Describe any changes made to build system:
None
	
Describe any changes made to the namelist:
None

List any changes to the defaults for the input datasets:
None

Describe any substantial timing or memory changes:
None

Code reviewed by:
NA
	
List all subroutines eliminated:
None

List all subroutines added and what they do:
None

List all existing files that have been modified, and describe the changes:
None

Summary of testing:
No testing done

CLM tag used for the baseline comparison tests if applicable:
NA
	
IF tag changes answers relative to baseline comparison the
following should be filled in:

Summarize any changes to answers, i.e.,
 - what code configurations:
 - what platforms/compilers:
 - nature of change (roundoff; larger than roundoff/same climate; new climate): 

If bitwise differences were observed, how did you show they were no worse
than roundoff?

If this tag changes climate describe the run(s) done to evaluate the new
climate in enough detail that it(they) could be reproduced, i.e.,
 - source tag (all code used must be in the repository):
 - platform/compilers:
 - configuration (CPP ifdefs):
 - build-namelist command (or complete namelist):
 - MSS location of output:

MSS location of control simulations used to validate new climate:

URL for LMWG diagnostics output used to validate new climate:

===============================================================
	
Tag name: clm3_expa_49
Originator(s): Mariana Vertenstein
Date: Mon Dec 12 2005
One-line Summary: Updated clm with changes put into cam3_2_38

Purpose of changes:
Cray-X1E OpenMP/CSD compatibility modifications.
	
Bugs fixed (include bugzilla ID): 
None

Describe any changes made to build system:
None	
	
Tested that restarts are bit-for-bit: yes
Tested that different domain decompositions match bit-for-bit: yes
Code reviewed by: myself
Changes answers: no (bit-for-bit)
Changes made:

This is the start of the clm_exp experimental development 
branch. This version is the same as clm3_deva_10 which was checked
into clm_dev by Mariana Vertenstein on April 27th, 2004.
===============================================================
===============================================================
===============================================================

===============================================================
Tag name: ctsm_n10_clm4_5_16_r249
Originator(s): sacks
Date: Sep 14, 2017
One-line Summary: Truncate small h2osfc values to zero

Purpose of changes
------------------

This replaces the earlier code that only did this truncation in one
particular circumstance.

This seems mainly important to truncate small negative numbers to 0, but
it also seems like a good idea to truncate small positive numbers that
should have been 0.

With some intermediate commits on this branch, I did some careful tests
to ensure that these diffs introduce no more than roundoff-level
changes.


Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------

CLM testing:

 [PASS means all tests PASS and OK means tests PASS other than expected fails.]

  build-namelist tests:

    yellowstone - not run

  unit-tests (components/clm/src):

    yellowstone - pass

  tools-tests (components/clm/test/tools):

    yellowstone - not run

  PTCLM testing (components/clm/tools/shared/PTCLM/test):

     yellowstone - not run

  regular tests (aux_clm):

    yellowstone_intel - ok
    yellowstone_pgi - ok
    yellowstone_gnu - ok
    cheyenne_intel - ok
    hobart_nag - ok
    hobart_pgi - ok
    hobart_intel - ok

    ok means tests pass, change answers as expected

CLM tag used for the baseline comparisons: ctsm_n09_clm4_5_16_r249


Answer changes
--------------

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: all clm45/clm50
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
      roundoff

   If bitwise differences were observed, how did you show they were no worse
   than roundoff?

      I introduced some temporary code to ensure that, where there are
      differences between the old and new code, these differences are
      only roundoff-level (e.g., a roundoff-level value being rounded to
      0 now where it wasn't before).

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	

Detailed list of changes
------------------------

List any svn externals directories updated (cime, rtm, mosart, cism, etc.): none

List all files eliminated: none

List all files added and what they do:

========= New utility for truncating small values to 0, and associated
          unit tests
A       components/clm/src/utils/NumericsMod.F90
A       components/clm/src/utils/test/numerics_test/CMakeLists.txt
A       components/clm/src/utils/test/numerics_test/test_truncate_small_values.pf

List all existing files that have been modified, and describe the changes:

========= Main changes
M       components/clm/src/biogeophys/SoilHydrologyMod.F90

========= New unit tests
M       components/clm/src/utils/CMakeLists.txt
M       components/clm/src/utils/test/CMakeLists.txt

========= Unrelated fix to subroutine name
M       components/clm/src/unit_test_shr/unittestFilterBuilderMod.F90

========= Shorten a test that was taking > 2 hours
M       components/clm/cime_config/testdefs/testlist_clm.xml

===============================================================
===============================================================
Tag name: ctsm_n09_clm4_5_16_r249
Originator(s): sacks
Date: Sep 7, 2017
One-line Summary: Use full qflx_surf in BGC code

Purpose of changes
------------------

We had been using a separate variable to avoid changing answers. But
Dave Lawrence gave his approval to change this.

Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------

CLM testing:

 [PASS means all tests PASS and OK means tests PASS other than expected fails.]

  build-namelist tests:

    yellowstone - not run

  unit-tests (components/clm/src):

    yellowstone - not run

  tools-tests (components/clm/test/tools):

    yellowstone - not run

  PTCLM testing (components/clm/tools/shared/PTCLM/test):

     yellowstone - not run

  regular tests (aux_clm):

    yellowstone_intel - ok
    yellowstone_pgi - ok
    yellowstone_gnu - ok
    cheyenne_intel - ok
    hobart_nag - ok
    hobart_pgi - ok
    hobart_intel - ok

    ok means tests pass, answers change as expected

CLM tag used for the baseline comparisons: ctsm_n08_clm4_5_16_r249


Answer changes
--------------

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: All Bgc configurations
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
      not investigated carefully; larger than roundoff, but expected to
      be same climate

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	

Detailed list of changes
------------------------

List any svn externals directories updated (cime, rtm, mosart, cism, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

========= Main changes, as described above
M       components/clm/src/biogeochem/ch4Mod.F90
M       components/clm/src/biogeophys/SoilHydrologyMod.F90
M       components/clm/src/biogeophys/WaterfluxType.F90
M       components/clm/src/soilbiogeochem/SoilBiogeochemNLeachingMod.F90

===============================================================
===============================================================
Tag name: ctsm_n08_clm4_5_16_r249
Originator(s): sacks
Date: Aug 24, 2017
One-line Summary: Finish Infiltration modularization - mainly h2osfc updates

Purpose of changes
------------------

Finish the modularization of subroutine Infiltration. The main focus here is
modularizing the calculation of fluxes out of h2osfc and the updates of the
h2osfc state variable. Flux calculations and state updates are now done
separately. Where a flux calculation depends on a partially-updated version of
h2osfc, this is now made explicit in a way that could facilitate removing this
partial update later.


Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------

CLM testing:

  build-namelist tests:

    yellowstone - not run

  unit-tests (components/clm/src):

    yellowstone - pass

  tools-tests (components/clm/test/tools):

    yellowstone - not run

  PTCLM testing (components/clm/tools/shared/PTCLM/test):

     yellowstone - not run

  regular tests (aux_clm):

    yellowstone_intel - pass
    yellowstone_pgi - pass
    yellowstone_gnu - pass
    cheyenne_intel - pass
    hobart_nag - pass
    hobart_pgi - pass
    hobart_intel - pass

CLM tag used for the baseline comparisons: ctsm_n07_clm4_5_16_r249


Answer changes
--------------

Changes answers relative to baseline: NO


Detailed list of changes
------------------------

List any svn externals directories updated (cime, rtm, mosart, cism, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

========= Main changes, as described above
M       components/clm/src/biogeophys/SoilHydrologyMod.F90
M       components/clm/src/biogeophys/HydrologyNoDrainageMod.F90
M       components/clm/src/biogeophys/HydrologyDrainageMod.F90
M       components/clm/src/biogeophys/WaterfluxType.F90

========= Tweak some comments based on feedback on
          https://github.com/NCAR/clm-ctsm/pull/2
M       components/clm/src/biogeophys/InfiltrationExcessRunoffMod.F90
M       components/clm/src/biogeophys/SaturatedExcessRunoffMod.F90

===============================================================
===============================================================
Tag name: ctsm_n07_clm4_5_16_r249
Originator(s): sacks
Date: Aug 22, 2017
One-line Summary: Rename things related to saturated surface runoff

Purpose of changes
------------------

Renames the module, derived type, variables and methods related to saturated
surface runoff. The rename qflx_sat_surf -> qflx_sat_excess_surf was suggested
at a ctsm meeting. The other renames are to be consistent with that and
consistent with InfiltrationExcessRunoffMod.

Also, remove a long yellowstone test, change PE count for cheyenne: Removing
this long test that sometimes exceeds the 2-hour limit I give it (other times it
takes just slightly less than 2 hours):
ERS_Ly5_P60x1.f10_f10_musgs.IHistClm50BgcCrop.yellowstone_intel.clm-cropMonthOutput. We
still have an identical test on cheyenne. Also, increase the PE count on
cheyenne to use two full nodes, rather than a partial node.

Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------

CLM testing:

  build-namelist tests:

    yellowstone - not run

  unit-tests (components/clm/src):

    yellowstone - not run

  tools-tests (components/clm/test/tools):

    yellowstone - not run

  PTCLM testing (components/clm/tools/shared/PTCLM/test):

     yellowstone - not run

  regular tests (aux_clm):

    yellowstone_intel - pass
    yellowstone_pgi - pass
    yellowstone_gnu - pass
    cheyenne_intel - pass
    hobart_nag - pass
    hobart_pgi - pass
    hobart_intel - pass

CLM tag used for the baseline comparisons: ctsm_n06_clm4_5_16_r249


Answer changes
--------------

Changes answers relative to baseline: NO


Detailed list of changes
------------------------

List any svn externals directories updated (cime, rtm, mosart, cism, etc.): none

List all files eliminated:

========= Renamed
D       components/clm/src/biogeophys/SurfRunoffSatMod.F90

List all files added and what they do:

========= Renamed
A       components/clm/src/biogeophys/SaturatedExcessRunoffMod.F90

List all existing files that have been modified, and describe the changes:

========= Renames
M       components/clm/src/biogeochem/CNDriverMod.F90
M       components/clm/src/biogeochem/CNFireBaseMod.F90
M       components/clm/src/biogeochem/CNFireLi2014Mod.F90
M       components/clm/src/biogeochem/CNFireLi2016Mod.F90
M       components/clm/src/biogeochem/CNFireMethodMod.F90
M       components/clm/src/biogeochem/CNFireNoFireMod.F90
M       components/clm/src/biogeochem/CNVegetationFacade.F90
M       components/clm/src/biogeophys/HydrologyNoDrainageMod.F90
M       components/clm/src/biogeophys/InfiltrationExcessRunoffMod.F90
M       components/clm/src/biogeophys/SoilHydrologyMod.F90
M       components/clm/src/main/clm_driver.F90
M       components/clm/src/main/clm_instMod.F90

========= Remove a yellowstone test, tweak a cheyenne test, as described above
M       components/clm/cime_config/testdefs/testlist_clm.xml

===============================================================
===============================================================
Tag name: ctsm_n06_clm4_5_16_r249
Originator(s): sacks
Date: Aug 21, 2017
One-line Summary: Modularization of Infiltration - first stage

Purpose of changes
------------------

Separate out the first 3 steps of subroutine Infiltration into more modular
homes. The biggest piece of this is to introduce a new
InfiltrationExcessRunoffMod.F90; this will be where alternative
parameterizations of infiltration excess runoff can be put.


Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------

CLM testing:

  build-namelist tests:

    yellowstone - not run

  unit-tests (components/clm/src):

    yellowstone - not run

  tools-tests (components/clm/test/tools):

    yellowstone - not run

  PTCLM testing (components/clm/tools/shared/PTCLM/test):

     yellowstone - not run

  regular tests (aux_clm):

    yellowstone_intel - pass
    yellowstone_pgi - pass
    yellowstone_gnu - pass
    cheyenne_intel - pass
    hobart_nag - pass
    hobart_pgi - pass
    hobart_intel - pass

    NOTE: Most tests were run on 24913d0. On the final commit (afdbcf7), I ran
    only the following tests:

    These test failed without the fix in afdbcf7, so I reran them with that fix:

      ERP_D_Ld5.f10_f10_musgs.I2000Clm50BgcCrop.yellowstone_intel.clm-allActive
      ERP_D_P15x2_Ld3.f10_f10_musgs.I2000Clm50BgcCrop.yellowstone_intel.clm-cropColdStart
      ERP_P180x2_D_Ld5.f19_g17.I2000Clm50BgcDvCrop.yellowstone_pgi.clm-crop
      ERP_D_Ld5.f10_f10_musgs.I2000Clm50BgcCrop.cheyenne_intel.clm-allActive
      ERP_D_P15x2_Ld3.f10_f10_musgs.I2000Clm50BgcCrop.cheyenne_intel.clm-cropColdStart

    This is the only oldhyd test, and so is the only test that should be
    affected by this change:

      SMS_D_Ld1_P24x1.f10_f10_musgs.I2000Clm45BgcCrop.hobart_nag.clm-oldhyd

CLM tag used for the baseline comparisons: ctsm_n05_clm4_5_16_r249


Answer changes
--------------

Changes answers relative to baseline: NO


Detailed list of changes
------------------------

List any svn externals directories updated (cime, rtm, mosart, cism, etc.): none

List all files eliminated: none

List all files added and what they do:

========= Holds the portion of subroutine Infiltration that actually computes
          the infiltration excess runoff flux. New parameterizations of
          infiltration excess runoff should be put here.
A       components/clm/src/biogeophys/InfiltrationExcessRunoffMod.F90

List all existing files that have been modified, and describe the changes:

========= Main changes, as described above
M       components/clm/src/biogeophys/SoilHydrologyMod.F90
M       components/clm/src/biogeophys/HydrologyNoDrainageMod.F90
M       components/clm/src/biogeophys/WaterfluxType.F90
M       components/clm/src/main/clm_driver.F90
M       components/clm/src/main/clm_instMod.F90

========= Just add a comment
M       components/clm/src/biogeophys/SurfRunoffSatMod.F90

===============================================================
===============================================================
Tag name: ctsm_n05_clm4_5_16_r249
Originator(s): sacks
Date: Aug 17, 2017
One-line Summary: Re-parenthesize a VIC equation

Purpose of changes
------------------

With an upcoming refactoring, answers change for VIC. The minor change here
forces the answer change to happen with this simple re-parenthesization, which I
think will allow us to avoid the answer changes in the upcoming refactoring.


Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------

CLM testing:

 [PASS means all tests PASS and OK means tests PASS other than expected fails.]

  build-namelist tests:

    yellowstone - not run

  unit-tests (components/clm/src):

    yellowstone - not run

  tools-tests (components/clm/test/tools):

    yellowstone - not run

  PTCLM testing (components/clm/tools/shared/PTCLM/test):

     yellowstone - not run

  regular tests (aux_clm):

    yellowstone_intel - just ran vic tests
    yellowstone_pgi - just ran vic tests
    yellowstone_gnu - not run
    cheyenne_intel - just ran vic tests
    hobart_nag - not run
    hobart_pgi - not run
    hobart_intel - not run

  Just ran the following vic tests (all of the vic tests in the test list):

     ERP_D_Ld5.f09_g17.I2000Clm50Vic.yellowstone_intel.clm-vrtlay
     ERP_Ld5.f09_g17.I2000Clm50Vic.yellowstone_pgi.clm-vrtlay
     ERP_D_Ld5.f10_f10_musgs.I2000Clm50Vic.yellowstone_intel.clm-vrtlay
     ERP_Ld5.f10_f10_musgs.I2000Clm50Vic.yellowstone_pgi.clm-decStart
     SMS_Ld1.f19_g17.I2000Clm50Vic.yellowstone_intel.clm-default
     ERP_D_Ld5.f09_g17.I2000Clm50Vic.cheyenne_intel.clm-vrtlay
     ERP_D_Ld5.f10_f10_musgs.I2000Clm50Vic.cheyenne_intel.clm-vrtlay
     SMS_Ld1.f19_g17.I2000Clm50Vic.cheyenne_intel.clm-default

CLM tag used for the baseline comparisons: ctsm_n04_clm4_5_16_r249


Answer changes
--------------

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: Vic configurations
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
      not investigated closely, but should just be roundoff-level

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	

Detailed list of changes
------------------------

List any svn externals directories updated (cime, rtm, mosart, cism, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

M       components/clm/src/biogeophys/SoilHydrologyMod.F90

===============================================================
===============================================================
Tag name: ctsm_n04_clm4_5_16_r249
Originator(s): sacks
Date: July 14, 2017
One-line Summary: Extract SurfaceRunoff to its own module and related modularization

Up-to-date with branch tag: modularize_surface_runoff_n02_ctsm_n02_clm4_5_16_r249

Purpose of changes
------------------

Major change is extracting SurfaceRunoff to its own module, SurfRunoffSatMod.F90

Also, some related modularization:
- Move urban surface runoff code into different routines
- Extract a subroutine for each fsat method
- Other minor refactoring

Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------

CLM testing:

 [PASS means all tests PASS and OK means tests PASS other than expected fails.]

  build-namelist tests:

    yellowstone - not run

  unit-tests (components/clm/src):

    yellowstone - pass

  tools-tests (components/clm/test/tools):

    yellowstone - not run

  PTCLM testing (components/clm/tools/shared/PTCLM/test):

     yellowstone - not run

  regular tests (aux_clm):

    yellowstone_intel - pass
    yellowstone_pgi - pass
    yellowstone_gnu - pass
    cheyenne_intel - pass
    hobart_nag - pass
    hobart_pgi - pass
    hobart_intel - pass

CLM tag used for the baseline comparisons: ctsm_n03_clm4_5_16_r249
Answer changes
--------------

Changes answers relative to baseline: NO - bfb

Detailed list of changes
------------------------

List any svn externals directories updated (cime, rtm, mosart, cism, etc.): none

List all files eliminated: none

List all files added and what they do:

========= New class containing what used to be the core of subroutine
          SurfaceRunoff
A       components/clm/src/biogeophys/SurfRunoffSatMod.F90

List all existing files that have been modified, and describe the changes:

M       components/clm/src/biogeophys/SoilHydrologyMod.F90
M       components/clm/src/biogeophys/SoilHydrologyType.F90
M       components/clm/src/biogeophys/HydrologyNoDrainageMod.F90
M       components/clm/src/biogeophys/WaterfluxType.F90
M       components/clm/src/biogeochem/CNDriverMod.F90
M       components/clm/src/biogeochem/CNVegetationFacade.F90
M       components/clm/src/biogeochem/CNFireLi2016Mod.F90
M       components/clm/src/biogeochem/CNFireBaseMod.F90
M       components/clm/src/biogeochem/CNFireMethodMod.F90
M       components/clm/src/biogeochem/CNFireLi2014Mod.F90
M       components/clm/src/biogeochem/CNFireNoFireMod.F90
M       components/clm/src/main/clm_instMod.F90
M       components/clm/src/main/clm_driver.F90

===============================================================
===============================================================
Tag name: ctsm_n03_clm4_5_16_r249
Originator(s): sacks
Date: July 13, 2017
One-line Summary: Separate qflx_surf updates into two steps

Up-to-date with branch tag: modularize_surface_runoff_n01_ctsm_n02_clm4_5_16_r249

Purpose of changes
------------------

Separate qflx_surf updates into two steps


Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------

CLM testing:

 [PASS means all tests PASS and OK means tests PASS other than expected fails.]

  build-namelist tests:

    yellowstone - not run

  unit-tests (components/clm/src):

    yellowstone - not run

  tools-tests (components/clm/test/tools):

    yellowstone - not run

  PTCLM testing (components/clm/tools/shared/PTCLM/test):

     yellowstone - not run

  regular tests (aux_clm):

    yellowstone_intel - ok
    yellowstone_pgi - ok
    yellowstone_gnu - ok
    cheyenne_intel - ok
    hobart_nag - ok
    hobart_pgi - ok
    hobart_intel - ok

    ok means tests pass, answers change as expected

CLM tag used for the baseline comparisons: ctsm_n02_clm4_5_16_r249


Answer changes
--------------

Changes answers relative to baseline: YES

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: All
    - what platforms/compilers: All
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
      roundoff

      There are greater than roundoff-level changes in the diagnostic field
      QOVER, because this field now includes QH2OSFC. Other than that, there are
      just roundoff-level differences in runoff. Sometimes, these roundoff-level
      runoff changes can feed back to create greater-than-roundoff level changes
      over time. This happens for ch4-related fields, and for many fields in
      this test with flooding:
          ERP_P180x2_D.f19_g17.I2000Clm50SpRtmFl.yellowstone_pgi.clm-default

      Note that the oldhyd test is bit-for-bit:
          SMS_D_Ld1_P24x1.f10_f10_musgs.I2000Clm45BgcCrop.hobart_nag.clm-oldhyd

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	

Detailed list of changes
------------------------

List any svn externals directories updated (cime, rtm, mosart, cism, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

M       components/clm/src/biogeochem/ch4Mod.F90
M       components/clm/src/main/ColumnType.F90
M       components/clm/src/main/lnd2atmType.F90
M       components/clm/src/main/initSubgridMod.F90
M       components/clm/src/main/lnd2atmMod.F90
M       components/clm/src/biogeophys/HydrologyDrainageMod.F90
M       components/clm/src/biogeophys/HydrologyNoDrainageMod.F90
M       components/clm/src/biogeophys/WaterfluxType.F90
M       components/clm/src/biogeophys/BalanceCheckMod.F90
M       components/clm/src/biogeophys/SoilHydrologyMod.F90
M       components/clm/src/biogeophys/LakeHydrologyMod.F90
M       components/clm/src/soilbiogeochem/SoilBiogeochemNLeachingMod.F90
M       components/clm/src/cpl/lnd_import_export.F90

===============================================================
===============================================================
Tag name: ctsm_n02_clm4_5_16_r249
Originator(s): sacks
Date: July 11, 2017
One-line Summary: BFB refactorings towards modularization of SurfaceRunoff

Purpose of changes
------------------

BFB refactorings towards modularization of SurfaceRunoff


Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------

CLM testing:

 [PASS means all tests PASS and OK means tests PASS other than expected fails.]

  build-namelist tests:

    yellowstone - not run

  unit-tests (components/clm/src):

    yellowstone - not run

  tools-tests (components/clm/test/tools):

    yellowstone - not run

  PTCLM testing (components/clm/tools/shared/PTCLM/test):

     yellowstone - not run

  regular tests (aux_clm):

    yellowstone_intel - pass
    yellowstone_pgi - pass
    yellowstone_gnu - pass
    cheyenne_intel - pass
    hobart_nag - pass
    hobart_pgi - pass
    hobart_intel - pass

CLM tag used for the baseline comparisons: ctsm_n01_clm4_5_16_r249 for VIC
tests, clm4_5_16_r249 for non-VIC tests


Answer changes
--------------

Changes answers relative to baseline: NO - bfb
	

Detailed list of changes
------------------------

List any svn externals directories updated (cime, rtm, mosart, cism, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes:

M       components/clm/src/biogeophys/SnowHydrologyMod.F90
M       components/clm/src/biogeophys/SoilHydrologyType.F90
M       components/clm/src/biogeophys/SoilHydrologyInitTimeConstMod.F90
M       components/clm/src/biogeophys/HydrologyNoDrainageMod.F90
M       components/clm/src/biogeophys/WaterfluxType.F90
M       components/clm/src/biogeophys/SoilHydrologyMod.F90
M       components/clm/src/biogeophys/LakeHydrologyMod.F90

===============================================================
===============================================================
Tag name: ctsm_n01_clm4_5_16_r249
Originator(s): sacks
Date: July 7, 2017
One-line Summary: If using VIC, don't use the TOPModel formulation for SurfaceRunoff ever

Purpose of changes
------------------

The code was using the TOPModel-based formulation for SurfaceRunoff if
frost_table > zwt_perched. Sean Swenson felt this shouldn't be done, and
refactoring will be easier if VIC always uses the vic-looking formulation, so
I'm stopping applying this formulation when using VIC.


Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------

CLM testing:

 [PASS means all tests PASS and OK means tests PASS other than expected fails.]

  build-namelist tests:

    yellowstone - not run

  unit-tests (components/clm/src):

    yellowstone - not run

  tools-tests (components/clm/test/tools):

    yellowstone - not run

  PTCLM testing (components/clm/tools/shared/PTCLM/test):

     yellowstone - not run

  regular tests (aux_clm):

    yellowstone_intel - just ran vic tests
    yellowstone_pgi - just ran vic tests
    yellowstone_gnu - not run
    cheyenne_intel - just ran vic tests
    hobart_nag - not run
    hobart_pgi - not run
    hobart_intel - not run

  Just ran the following vic tests (all of the vic tests in the test list):

      ERP_D_Ld5.f09_g17.I2000Clm50Vic.yellowstone_intel.clm-vrtlay
      ERP_Ld5.f09_g17.I2000Clm50Vic.yellowstone_pgi.clm-vrtlay
      ERP_D_Ld5.f10_f10_musgs.I2000Clm50Vic.yellowstone_intel.clm-vrtlay
      ERP_Ld5.f10_f10_musgs.I2000Clm50Vic.yellowstone_pgi.clm-decStart
      SMS_Ld1.f19_g17.I2000Clm50Vic.yellowstone_intel.clm-default
      ERP_D_Ld5.f09_g17.I2000Clm50Vic.cheyenne_intel.clm-vrtlay
      ERP_D_Ld5.f10_f10_musgs.I2000Clm50Vic.cheyenne_intel.clm-vrtlay
      SMS_Ld1.f19_g17.I2000Clm50Vic.cheyenne_intel.clm-default

CLM tag used for the baseline comparisons: clm4_5_16_r249

    For baseline comparisons, just spot-checked one test:
    ERP_D_Ld5.f09_g17.I2000Clm50Vic.cheyenne_intel.clm-vrtlay

    This test changed answers

Answer changes
--------------

Changes answers relative to baseline:

  If a tag changes answers relative to baseline comparison the
  following should be filled in (otherwise remove this section):

  Summarize any changes to answers, i.e.,
    - what code configurations: Vic configurations
    - what platforms/compilers: all
    - nature of change (roundoff; larger than roundoff/same climate; new climate): 
      larger than roundoff; not investigated closely

   If bitwise differences were observed, how did you show they were no worse
   than roundoff? N/A

   If this tag changes climate describe the run(s) done to evaluate the new
   climate (put details of the simulations in the experiment database)
       - casename: N/A

   URL for LMWG diagnostics output used to validate new climate: N/A
	

Detailed list of changes
------------------------

List any svn externals directories updated (cime, rtm, mosart, cism, etc.): none

List all files eliminated: none

List all files added and what they do:

========= Track changes for this branch
A       ChangeLog_branch_template
A       ChangeLog_branch

List all existing files that have been modified, and describe the changes:

========= Changes as described above
M       components/clm/src/biogeophys/SoilHydrologyMod.F90

===============================================================
===============================================================
Tag name: ctsm_n00_clm4_5_16_r249
Originator(s): sacks
Date: July 7, 2017
One-line Summary: Baseline tag corresponding to clm4_5_16_r249

Purpose of changes
------------------

N/A

Notes of particular relevance for developers: (including Code reviews and testing)
---------------------------------------------

CLM testing: No additional testing beyond trunk tag

Answer changes
--------------

Changes answers relative to baseline: NO

Detailed list of changes
------------------------

List any svn externals directories updated (cime, rtm, mosart, cism, etc.): none

List all files eliminated: none

List all files added and what they do: none

List all existing files that have been modified, and describe the changes: none

===============================================================
